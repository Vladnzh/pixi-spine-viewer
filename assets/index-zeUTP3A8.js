(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yu(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function $R(i){if(i.__esModule)return i;var t=i.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var n=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return i[r]}})}),e}var dm={exports:{}},Bh={},fm={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw;function WR(){if(Iw)return fe;Iw=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),c=Symbol.iterator;function f(k){return k===null||typeof k!="object"?null:(k=c&&k[c]||k["@@iterator"],typeof k=="function"?k:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(k,X,$){this.props=k,this.context=X,this.refs=v,this.updater=$||p}y.prototype.isReactComponent={},y.prototype.setState=function(k,X){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,X,"setState")},y.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function x(){}x.prototype=y.prototype;function _(k,X,$){this.props=k,this.context=X,this.refs=v,this.updater=$||p}var b=_.prototype=new x;b.constructor=_,g(b,y.prototype),b.isPureReactComponent=!0;var E=Array.isArray,T=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function M(k,X,$){var j,K={},tt=null,ct=null;if(X!=null)for(j in X.ref!==void 0&&(ct=X.ref),X.key!==void 0&&(tt=""+X.key),X)T.call(X,j)&&!C.hasOwnProperty(j)&&(K[j]=X[j]);var ft=arguments.length-2;if(ft===1)K.children=$;else if(1<ft){for(var mt=Array(ft),lt=0;lt<ft;lt++)mt[lt]=arguments[lt+2];K.children=mt}if(k&&k.defaultProps)for(j in ft=k.defaultProps,ft)K[j]===void 0&&(K[j]=ft[j]);return{$$typeof:i,type:k,key:tt,ref:ct,props:K,_owner:S.current}}function P(k,X){return{$$typeof:i,type:k.type,key:X,ref:k.ref,props:k.props,_owner:k._owner}}function F(k){return typeof k=="object"&&k!==null&&k.$$typeof===i}function V(k){var X={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function($){return X[$]})}var O=/\/+/g;function U(k,X){return typeof k=="object"&&k!==null&&k.key!=null?V(""+k.key):X.toString(36)}function H(k,X,$,j,K){var tt=typeof k;(tt==="undefined"||tt==="boolean")&&(k=null);var ct=!1;if(k===null)ct=!0;else switch(tt){case"string":case"number":ct=!0;break;case"object":switch(k.$$typeof){case i:case t:ct=!0}}if(ct)return ct=k,K=K(ct),k=j===""?"."+U(ct,0):j,E(K)?($="",k!=null&&($=k.replace(O,"$&/")+"/"),H(K,X,$,"",function(lt){return lt})):K!=null&&(F(K)&&(K=P(K,$+(!K.key||ct&&ct.key===K.key?"":(""+K.key).replace(O,"$&/")+"/")+k)),X.push(K)),1;if(ct=0,j=j===""?".":j+":",E(k))for(var ft=0;ft<k.length;ft++){tt=k[ft];var mt=j+U(tt,ft);ct+=H(tt,X,$,mt,K)}else if(mt=f(k),typeof mt=="function")for(k=mt.call(k),ft=0;!(tt=k.next()).done;)tt=tt.value,mt=j+U(tt,ft++),ct+=H(tt,X,$,mt,K);else if(tt==="object")throw X=String(k),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ct}function W(k,X,$){if(k==null)return k;var j=[],K=0;return H(k,j,"","",function(tt){return X.call($,tt,K++)}),j}function B(k){if(k._status===-1){var X=k._result;X=X(),X.then(function($){(k._status===0||k._status===-1)&&(k._status=1,k._result=$)},function($){(k._status===0||k._status===-1)&&(k._status=2,k._result=$)}),k._status===-1&&(k._status=0,k._result=X)}if(k._status===1)return k._result.default;throw k._result}var L={current:null},N={transition:null},Y={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:N,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}return fe.Children={map:W,forEach:function(k,X,$){W(k,function(){X.apply(this,arguments)},$)},count:function(k){var X=0;return W(k,function(){X++}),X},toArray:function(k){return W(k,function(X){return X})||[]},only:function(k){if(!F(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},fe.Component=y,fe.Fragment=e,fe.Profiler=n,fe.PureComponent=_,fe.StrictMode=r,fe.Suspense=a,fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,fe.act=D,fe.cloneElement=function(k,X,$){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var j=g({},k.props),K=k.key,tt=k.ref,ct=k._owner;if(X!=null){if(X.ref!==void 0&&(tt=X.ref,ct=S.current),X.key!==void 0&&(K=""+X.key),k.type&&k.type.defaultProps)var ft=k.type.defaultProps;for(mt in X)T.call(X,mt)&&!C.hasOwnProperty(mt)&&(j[mt]=X[mt]===void 0&&ft!==void 0?ft[mt]:X[mt])}var mt=arguments.length-2;if(mt===1)j.children=$;else if(1<mt){ft=Array(mt);for(var lt=0;lt<mt;lt++)ft[lt]=arguments[lt+2];j.children=ft}return{$$typeof:i,type:k.type,key:K,ref:tt,props:j,_owner:ct}},fe.createContext=function(k){return k={$$typeof:o,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:s,_context:k},k.Consumer=k},fe.createElement=M,fe.createFactory=function(k){var X=M.bind(null,k);return X.type=k,X},fe.createRef=function(){return{current:null}},fe.forwardRef=function(k){return{$$typeof:h,render:k}},fe.isValidElement=F,fe.lazy=function(k){return{$$typeof:u,_payload:{_status:-1,_result:k},_init:B}},fe.memo=function(k,X){return{$$typeof:l,type:k,compare:X===void 0?null:X}},fe.startTransition=function(k){var X=N.transition;N.transition={};try{k()}finally{N.transition=X}},fe.unstable_act=D,fe.useCallback=function(k,X){return L.current.useCallback(k,X)},fe.useContext=function(k){return L.current.useContext(k)},fe.useDebugValue=function(){},fe.useDeferredValue=function(k){return L.current.useDeferredValue(k)},fe.useEffect=function(k,X){return L.current.useEffect(k,X)},fe.useId=function(){return L.current.useId()},fe.useImperativeHandle=function(k,X,$){return L.current.useImperativeHandle(k,X,$)},fe.useInsertionEffect=function(k,X){return L.current.useInsertionEffect(k,X)},fe.useLayoutEffect=function(k,X){return L.current.useLayoutEffect(k,X)},fe.useMemo=function(k,X){return L.current.useMemo(k,X)},fe.useReducer=function(k,X,$){return L.current.useReducer(k,X,$)},fe.useRef=function(k){return L.current.useRef(k)},fe.useState=function(k){return L.current.useState(k)},fe.useSyncExternalStore=function(k,X,$){return L.current.useSyncExternalStore(k,X,$)},fe.useTransition=function(){return L.current.useTransition()},fe.version="18.3.1",fe}var Rw;function Ry(){return Rw||(Rw=1,fm.exports=WR()),fm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function HR(){if(Mw)return Bh;Mw=1;var i=Ry(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(h,a,l){var u,c={},f=null,p=null;l!==void 0&&(f=""+l),a.key!==void 0&&(f=""+a.key),a.ref!==void 0&&(p=a.ref);for(u in a)r.call(a,u)&&!s.hasOwnProperty(u)&&(c[u]=a[u]);if(h&&h.defaultProps)for(u in a=h.defaultProps,a)c[u]===void 0&&(c[u]=a[u]);return{$$typeof:t,type:h,key:f,ref:p,props:c,_owner:n.current}}return Bh.Fragment=e,Bh.jsx=o,Bh.jsxs=o,Bh}var Pw;function zR(){return Pw||(Pw=1,dm.exports=HR()),dm.exports}var Jt=zR(),Xe=Ry();const jR=yu(Xe);var Nc={},pm={exports:{}},Fn={},mm={exports:{}},gm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function qR(){return kw||(kw=1,function(i){function t(N,Y){var D=N.length;N.push(Y);t:for(;0<D;){var k=D-1>>>1,X=N[k];if(0<n(X,Y))N[k]=Y,N[D]=X,D=k;else break t}}function e(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var Y=N[0],D=N.pop();if(D!==Y){N[0]=D;t:for(var k=0,X=N.length,$=X>>>1;k<$;){var j=2*(k+1)-1,K=N[j],tt=j+1,ct=N[tt];if(0>n(K,D))tt<X&&0>n(ct,K)?(N[k]=ct,N[tt]=D,k=tt):(N[k]=K,N[j]=D,k=j);else if(tt<X&&0>n(ct,D))N[k]=ct,N[tt]=D,k=tt;else break t}}return Y}function n(N,Y){var D=N.sortIndex-Y.sortIndex;return D!==0?D:N.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,h=o.now();i.unstable_now=function(){return o.now()-h}}var a=[],l=[],u=1,c=null,f=3,p=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(N){for(var Y=e(l);Y!==null;){if(Y.callback===null)r(l);else if(Y.startTime<=N)r(l),Y.sortIndex=Y.expirationTime,t(a,Y);else break;Y=e(l)}}function E(N){if(v=!1,b(N),!g)if(e(a)!==null)g=!0,B(T);else{var Y=e(l);Y!==null&&L(E,Y.startTime-N)}}function T(N,Y){g=!1,v&&(v=!1,x(M),M=-1),p=!0;var D=f;try{for(b(Y),c=e(a);c!==null&&(!(c.expirationTime>Y)||N&&!V());){var k=c.callback;if(typeof k=="function"){c.callback=null,f=c.priorityLevel;var X=k(c.expirationTime<=Y);Y=i.unstable_now(),typeof X=="function"?c.callback=X:c===e(a)&&r(a),b(Y)}else r(a);c=e(a)}if(c!==null)var $=!0;else{var j=e(l);j!==null&&L(E,j.startTime-Y),$=!1}return $}finally{c=null,f=D,p=!1}}var S=!1,C=null,M=-1,P=5,F=-1;function V(){return!(i.unstable_now()-F<P)}function O(){if(C!==null){var N=i.unstable_now();F=N;var Y=!0;try{Y=C(!0,N)}finally{Y?U():(S=!1,C=null)}}else S=!1}var U;if(typeof _=="function")U=function(){_(O)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,W=H.port2;H.port1.onmessage=O,U=function(){W.postMessage(null)}}else U=function(){y(O,0)};function B(N){C=N,S||(S=!0,U())}function L(N,Y){M=y(function(){N(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(N){N.callback=null},i.unstable_continueExecution=function(){g||p||(g=!0,B(T))},i.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<N?Math.floor(1e3/N):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return e(a)},i.unstable_next=function(N){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var D=f;f=Y;try{return N()}finally{f=D}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(N,Y){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var D=f;f=N;try{return Y()}finally{f=D}},i.unstable_scheduleCallback=function(N,Y,D){var k=i.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?k+D:k):D=k,N){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=D+X,N={id:u++,callback:Y,priorityLevel:N,startTime:D,expirationTime:X,sortIndex:-1},D>k?(N.sortIndex=D,t(l,N),e(a)===null&&N===e(l)&&(v?(x(M),M=-1):v=!0,L(E,D-k))):(N.sortIndex=X,t(a,N),g||p||(g=!0,B(T))),N},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(N){var Y=f;return function(){var D=f;f=Y;try{return N.apply(this,arguments)}finally{f=D}}}}(gm)),gm}var Fw;function KR(){return Fw||(Fw=1,mm.exports=qR()),mm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw;function ZR(){if(Bw)return Fn;Bw=1;var i=Ry(),t=KR();function e(d){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,n={};function s(d,m){o(d,m),o(d+"Capture",m)}function o(d,m){for(n[d]=m,d=0;d<m.length;d++)r.add(m[d])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),a=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},c={};function f(d){return a.call(c,d)?!0:a.call(u,d)?!1:l.test(d)?c[d]=!0:(u[d]=!0,!1)}function p(d,m,w,A){if(w!==null&&w.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return A?!1:w!==null?!w.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function g(d,m,w,A){if(m===null||typeof m>"u"||p(d,m,w,A))return!0;if(A)return!1;if(w!==null)switch(w.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function v(d,m,w,A,I,R,G){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=A,this.attributeNamespace=I,this.mustUseProperty=w,this.propertyName=d,this.type=m,this.sanitizeURL=R,this.removeEmptyString=G}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){y[d]=new v(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var m=d[0];y[m]=new v(m,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){y[d]=new v(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){y[d]=new v(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){y[d]=new v(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){y[d]=new v(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){y[d]=new v(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){y[d]=new v(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){y[d]=new v(d,5,!1,d.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function _(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var m=d.replace(x,_);y[m]=new v(m,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var m=d.replace(x,_);y[m]=new v(m,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var m=d.replace(x,_);y[m]=new v(m,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){y[d]=new v(d,1,!1,d.toLowerCase(),null,!1,!1)}),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){y[d]=new v(d,1,!1,d.toLowerCase(),null,!0,!0)});function b(d,m,w,A){var I=y.hasOwnProperty(m)?y[m]:null;(I!==null?I.type!==0:A||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(g(m,w,I,A)&&(w=null),A||I===null?f(m)&&(w===null?d.removeAttribute(m):d.setAttribute(m,""+w)):I.mustUseProperty?d[I.propertyName]=w===null?I.type===3?!1:"":w:(m=I.attributeName,A=I.attributeNamespace,w===null?d.removeAttribute(m):(I=I.type,w=I===3||I===4&&w===!0?"":""+w,A?d.setAttributeNS(A,m,w):d.setAttribute(m,w))))}var E=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),V=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),N=Symbol.iterator;function Y(d){return d===null||typeof d!="object"?null:(d=N&&d[N]||d["@@iterator"],typeof d=="function"?d:null)}var D=Object.assign,k;function X(d){if(k===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);k=m&&m[1]||""}return`
`+k+d}var $=!1;function j(d,m){if(!d||$)return"";$=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(pt){var A=pt}Reflect.construct(d,[],m)}else{try{m.call()}catch(pt){A=pt}d.call(m.prototype)}else{try{throw Error()}catch(pt){A=pt}d()}}catch(pt){if(pt&&A&&typeof pt.stack=="string"){for(var I=pt.stack.split(`
`),R=A.stack.split(`
`),G=I.length-1,Z=R.length-1;1<=G&&0<=Z&&I[G]!==R[Z];)Z--;for(;1<=G&&0<=Z;G--,Z--)if(I[G]!==R[Z]){if(G!==1||Z!==1)do if(G--,Z--,0>Z||I[G]!==R[Z]){var Q=`
`+I[G].replace(" at new "," at ");return d.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",d.displayName)),Q}while(1<=G&&0<=Z);break}}}finally{$=!1,Error.prepareStackTrace=w}return(d=d?d.displayName||d.name:"")?X(d):""}function K(d){switch(d.tag){case 5:return X(d.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return d=j(d.type,!1),d;case 11:return d=j(d.type.render,!1),d;case 1:return d=j(d.type,!0),d;default:return""}}function tt(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case C:return"Fragment";case S:return"Portal";case P:return"Profiler";case M:return"StrictMode";case U:return"Suspense";case H:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case V:return(d.displayName||"Context")+".Consumer";case F:return(d._context.displayName||"Context")+".Provider";case O:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case W:return m=d.displayName||null,m!==null?m:tt(d.type)||"Memo";case B:m=d._payload,d=d._init;try{return tt(d(m))}catch{}}return null}function ct(d){var m=d.type;switch(d.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=m.render,d=d.displayName||d.name||"",m.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tt(m);case 8:return m===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function ft(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function mt(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function lt(d){var m=mt(d)?"checked":"value",w=Object.getOwnPropertyDescriptor(d.constructor.prototype,m),A=""+d[m];if(!d.hasOwnProperty(m)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var I=w.get,R=w.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return I.call(this)},set:function(G){A=""+G,R.call(this,G)}}),Object.defineProperty(d,m,{enumerable:w.enumerable}),{getValue:function(){return A},setValue:function(G){A=""+G},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function gt(d){d._valueTracker||(d._valueTracker=lt(d))}function yt(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var w=m.getValue(),A="";return d&&(A=mt(d)?d.checked?"true":"false":d.value),d=A,d!==w?(m.setValue(d),!0):!1}function St(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function Rt(d,m){var w=m.checked;return D({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??d._wrapperState.initialChecked})}function it(d,m){var w=m.defaultValue==null?"":m.defaultValue,A=m.checked!=null?m.checked:m.defaultChecked;w=ft(m.value!=null?m.value:w),d._wrapperState={initialChecked:A,initialValue:w,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function ut(d,m){m=m.checked,m!=null&&b(d,"checked",m,!1)}function Ct(d,m){ut(d,m);var w=ft(m.value),A=m.type;if(w!=null)A==="number"?(w===0&&d.value===""||d.value!=w)&&(d.value=""+w):d.value!==""+w&&(d.value=""+w);else if(A==="submit"||A==="reset"){d.removeAttribute("value");return}m.hasOwnProperty("value")?jt(d,m.type,w):m.hasOwnProperty("defaultValue")&&jt(d,m.type,ft(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(d.defaultChecked=!!m.defaultChecked)}function zt(d,m,w){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var A=m.type;if(!(A!=="submit"&&A!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+d._wrapperState.initialValue,w||m===d.value||(d.value=m),d.defaultValue=m}w=d.name,w!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,w!==""&&(d.name=w)}function jt(d,m,w){(m!=="number"||St(d.ownerDocument)!==d)&&(w==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+w&&(d.defaultValue=""+w))}var Wt=Array.isArray;function Qt(d,m,w,A){if(d=d.options,m){m={};for(var I=0;I<w.length;I++)m["$"+w[I]]=!0;for(w=0;w<d.length;w++)I=m.hasOwnProperty("$"+d[w].value),d[w].selected!==I&&(d[w].selected=I),I&&A&&(d[w].defaultSelected=!0)}else{for(w=""+ft(w),m=null,I=0;I<d.length;I++){if(d[I].value===w){d[I].selected=!0,A&&(d[I].defaultSelected=!0);return}m!==null||d[I].disabled||(m=d[I])}m!==null&&(m.selected=!0)}}function ee(d,m){if(m.dangerouslySetInnerHTML!=null)throw Error(e(91));return D({},m,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function se(d,m){var w=m.value;if(w==null){if(w=m.children,m=m.defaultValue,w!=null){if(m!=null)throw Error(e(92));if(Wt(w)){if(1<w.length)throw Error(e(93));w=w[0]}m=w}m==null&&(m=""),w=m}d._wrapperState={initialValue:ft(w)}}function Be(d,m){var w=ft(m.value),A=ft(m.defaultValue);w!=null&&(w=""+w,w!==d.value&&(d.value=w),m.defaultValue==null&&d.defaultValue!==w&&(d.defaultValue=w)),A!=null&&(d.defaultValue=""+A)}function Bt(d){var m=d.textContent;m===d._wrapperState.initialValue&&m!==""&&m!==null&&(d.value=m)}function me(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qe(d,m){return d==null||d==="http://www.w3.org/1999/xhtml"?me(m):d==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var Ne,We=function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,w,A,I){MSApp.execUnsafeLocalFunction(function(){return d(m,w,A,I)})}:d}(function(d,m){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=m;else{for(Ne=Ne||document.createElement("div"),Ne.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=Ne.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;m.firstChild;)d.appendChild(m.firstChild)}});function an(d,m){if(m){var w=d.firstChild;if(w&&w===d.lastChild&&w.nodeType===3){w.nodeValue=m;return}}d.textContent=m}var Ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zi=["Webkit","ms","Moz","O"];Object.keys(Ue).forEach(function(d){Zi.forEach(function(m){m=m+d.charAt(0).toUpperCase()+d.substring(1),Ue[m]=Ue[d]})});function oi(d,m,w){return m==null||typeof m=="boolean"||m===""?"":w||typeof m!="number"||m===0||Ue.hasOwnProperty(d)&&Ue[d]?(""+m).trim():m+"px"}function Ie(d,m){d=d.style;for(var w in m)if(m.hasOwnProperty(w)){var A=w.indexOf("--")===0,I=oi(w,m[w],A);w==="float"&&(w="cssFloat"),A?d.setProperty(w,I):d[w]=I}}var rt=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ht(d,m){if(m){if(rt[d]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(e(137,d));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(e(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(e(61))}if(m.style!=null&&typeof m.style!="object")throw Error(e(62))}}function ie(d,m){if(d.indexOf("-")===-1)return typeof m.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function de(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var qt=null,cr=null,Je=null;function Oe(d){if(d=xh(d)){if(typeof qt!="function")throw Error(e(280));var m=d.stateNode;m&&(m=Ku(m),qt(d.stateNode,d.type,m))}}function Pr(d){cr?Je?Je.push(d):Je=[d]:cr=d}function Yn(){if(cr){var d=cr,m=Je;if(Je=cr=null,Oe(d),m)for(d=0;d<m.length;d++)Oe(m[d])}}function $n(d,m){return d(m)}function tr(){}var bs=!1;function Sn(d,m,w){if(bs)return d(m,w);bs=!0;try{return $n(d,m,w)}finally{bs=!1,(cr!==null||Je!==null)&&(tr(),Yn())}}function An(d,m){var w=d.stateNode;if(w===null)return null;var A=Ku(w);if(A===null)return null;w=A[m];t:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(d=d.type,A=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!A;break t;default:d=!1}if(d)return null;if(w&&typeof w!="function")throw Error(e(231,m,typeof w));return w}var qr=!1;if(h)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){qr=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{qr=!1}function $o(d,m,w,A,I,R,G,Z,Q){var pt=Array.prototype.slice.call(arguments,3);try{m.apply(w,pt)}catch(xt){this.onError(xt)}}var Es=!1,Qs=null,Ha=!1,Wo=null,Ql={onError:function(d){Es=!0,Qs=d}};function Cu(d,m,w,A,I,R,G,Z,Q){Es=!1,Qs=null,$o.apply(Ql,arguments)}function Jl(d,m,w,A,I,R,G,Z,Q){if(Cu.apply(this,arguments),Es){if(Es){var pt=Qs;Es=!1,Qs=null}else throw Error(e(198));Ha||(Ha=!0,Wo=pt)}}function Qi(d){var m=d,w=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,m.flags&4098&&(w=m.return),d=m.return;while(d)}return m.tag===3?w:null}function Iu(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function Ho(d){if(Qi(d)!==d)throw Error(e(188))}function Js(d){var m=d.alternate;if(!m){if(m=Qi(d),m===null)throw Error(e(188));return m!==d?null:d}for(var w=d,A=m;;){var I=w.return;if(I===null)break;var R=I.alternate;if(R===null){if(A=I.return,A!==null){w=A;continue}break}if(I.child===R.child){for(R=I.child;R;){if(R===w)return Ho(I),d;if(R===A)return Ho(I),m;R=R.sibling}throw Error(e(188))}if(w.return!==A.return)w=I,A=R;else{for(var G=!1,Z=I.child;Z;){if(Z===w){G=!0,w=I,A=R;break}if(Z===A){G=!0,A=I,w=R;break}Z=Z.sibling}if(!G){for(Z=R.child;Z;){if(Z===w){G=!0,w=R,A=I;break}if(Z===A){G=!0,A=R,w=I;break}Z=Z.sibling}if(!G)throw Error(e(189))}}if(w.alternate!==A)throw Error(e(190))}if(w.tag!==3)throw Error(e(188));return w.stateNode.current===w?d:m}function za(d){return d=Js(d),d!==null?Ru(d):null}function Ru(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var m=Ru(d);if(m!==null)return m;d=d.sibling}return null}var th=t.unstable_scheduleCallback,rx=t.unstable_cancelCallback,eI=t.unstable_shouldYield,rI=t.unstable_requestPaint,gr=t.unstable_now,nI=t.unstable_getCurrentPriorityLevel,kf=t.unstable_ImmediatePriority,nx=t.unstable_UserBlockingPriority,Mu=t.unstable_NormalPriority,iI=t.unstable_LowPriority,ix=t.unstable_IdlePriority,Pu=null,Ji=null;function sI(d){if(Ji&&typeof Ji.onCommitFiberRoot=="function")try{Ji.onCommitFiberRoot(Pu,d,void 0,(d.current.flags&128)===128)}catch{}}var xi=Math.clz32?Math.clz32:lI,aI=Math.log,oI=Math.LN2;function lI(d){return d>>>=0,d===0?32:31-(aI(d)/oI|0)|0}var ku=64,Fu=4194304;function eh(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Bu(d,m){var w=d.pendingLanes;if(w===0)return 0;var A=0,I=d.suspendedLanes,R=d.pingedLanes,G=w&268435455;if(G!==0){var Z=G&~I;Z!==0?A=eh(Z):(R&=G,R!==0&&(A=eh(R)))}else G=w&~I,G!==0?A=eh(G):R!==0&&(A=eh(R));if(A===0)return 0;if(m!==0&&m!==A&&!(m&I)&&(I=A&-A,R=m&-m,I>=R||I===16&&(R&4194240)!==0))return m;if(A&4&&(A|=w&16),m=d.entangledLanes,m!==0)for(d=d.entanglements,m&=A;0<m;)w=31-xi(m),I=1<<w,A|=d[w],m&=~I;return A}function hI(d,m){switch(d){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uI(d,m){for(var w=d.suspendedLanes,A=d.pingedLanes,I=d.expirationTimes,R=d.pendingLanes;0<R;){var G=31-xi(R),Z=1<<G,Q=I[G];Q===-1?(!(Z&w)||Z&A)&&(I[G]=hI(Z,m)):Q<=m&&(d.expiredLanes|=Z),R&=~Z}}function Ff(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function sx(){var d=ku;return ku<<=1,!(ku&4194240)&&(ku=64),d}function Bf(d){for(var m=[],w=0;31>w;w++)m.push(d);return m}function rh(d,m,w){d.pendingLanes|=m,m!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,m=31-xi(m),d[m]=w}function cI(d,m){var w=d.pendingLanes&~m;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=m,d.mutableReadLanes&=m,d.entangledLanes&=m,m=d.entanglements;var A=d.eventTimes;for(d=d.expirationTimes;0<w;){var I=31-xi(w),R=1<<I;m[I]=0,A[I]=-1,d[I]=-1,w&=~R}}function Nf(d,m){var w=d.entangledLanes|=m;for(d=d.entanglements;w;){var A=31-xi(w),I=1<<A;I&m|d[A]&m&&(d[A]|=m),w&=~I}}var De=0;function ax(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var ox,Of,lx,hx,ux,Df=!1,Nu=[],ta=null,ea=null,ra=null,nh=new Map,ih=new Map,na=[],dI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cx(d,m){switch(d){case"focusin":case"focusout":ta=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":nh.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":ih.delete(m.pointerId)}}function sh(d,m,w,A,I,R){return d===null||d.nativeEvent!==R?(d={blockedOn:m,domEventName:w,eventSystemFlags:A,nativeEvent:R,targetContainers:[I]},m!==null&&(m=xh(m),m!==null&&Of(m)),d):(d.eventSystemFlags|=A,m=d.targetContainers,I!==null&&m.indexOf(I)===-1&&m.push(I),d)}function fI(d,m,w,A,I){switch(m){case"focusin":return ta=sh(ta,d,m,w,A,I),!0;case"dragenter":return ea=sh(ea,d,m,w,A,I),!0;case"mouseover":return ra=sh(ra,d,m,w,A,I),!0;case"pointerover":var R=I.pointerId;return nh.set(R,sh(nh.get(R)||null,d,m,w,A,I)),!0;case"gotpointercapture":return R=I.pointerId,ih.set(R,sh(ih.get(R)||null,d,m,w,A,I)),!0}return!1}function dx(d){var m=ja(d.target);if(m!==null){var w=Qi(m);if(w!==null){if(m=w.tag,m===13){if(m=Iu(w),m!==null){d.blockedOn=m,ux(d.priority,function(){lx(w)});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){d.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Ou(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var w=Uf(d.domEventName,d.eventSystemFlags,m[0],d.nativeEvent);if(w===null){w=d.nativeEvent;var A=new w.constructor(w.type,w);ye=A,w.target.dispatchEvent(A),ye=null}else return m=xh(w),m!==null&&Of(m),d.blockedOn=w,!1;m.shift()}return!0}function fx(d,m,w){Ou(d)&&w.delete(m)}function pI(){Df=!1,ta!==null&&Ou(ta)&&(ta=null),ea!==null&&Ou(ea)&&(ea=null),ra!==null&&Ou(ra)&&(ra=null),nh.forEach(fx),ih.forEach(fx)}function ah(d,m){d.blockedOn===m&&(d.blockedOn=null,Df||(Df=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,pI)))}function oh(d){function m(I){return ah(I,d)}if(0<Nu.length){ah(Nu[0],d);for(var w=1;w<Nu.length;w++){var A=Nu[w];A.blockedOn===d&&(A.blockedOn=null)}}for(ta!==null&&ah(ta,d),ea!==null&&ah(ea,d),ra!==null&&ah(ra,d),nh.forEach(m),ih.forEach(m),w=0;w<na.length;w++)A=na[w],A.blockedOn===d&&(A.blockedOn=null);for(;0<na.length&&(w=na[0],w.blockedOn===null);)dx(w),w.blockedOn===null&&na.shift()}var zo=E.ReactCurrentBatchConfig,Du=!0;function mI(d,m,w,A){var I=De,R=zo.transition;zo.transition=null;try{De=1,Lf(d,m,w,A)}finally{De=I,zo.transition=R}}function gI(d,m,w,A){var I=De,R=zo.transition;zo.transition=null;try{De=4,Lf(d,m,w,A)}finally{De=I,zo.transition=R}}function Lf(d,m,w,A){if(Du){var I=Uf(d,m,w,A);if(I===null)rp(d,m,A,Lu,w),cx(d,A);else if(fI(I,d,m,w,A))A.stopPropagation();else if(cx(d,A),m&4&&-1<dI.indexOf(d)){for(;I!==null;){var R=xh(I);if(R!==null&&ox(R),R=Uf(d,m,w,A),R===null&&rp(d,m,A,Lu,w),R===I)break;I=R}I!==null&&A.stopPropagation()}else rp(d,m,A,null,w)}}var Lu=null;function Uf(d,m,w,A){if(Lu=null,d=de(A),d=ja(d),d!==null)if(m=Qi(d),m===null)d=null;else if(w=m.tag,w===13){if(d=Iu(m),d!==null)return d;d=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null);return Lu=d,null}function px(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nI()){case kf:return 1;case nx:return 4;case Mu:case iI:return 16;case ix:return 536870912;default:return 16}default:return 16}}var ia=null,Vf=null,Uu=null;function mx(){if(Uu)return Uu;var d,m=Vf,w=m.length,A,I="value"in ia?ia.value:ia.textContent,R=I.length;for(d=0;d<w&&m[d]===I[d];d++);var G=w-d;for(A=1;A<=G&&m[w-A]===I[R-A];A++);return Uu=I.slice(d,1<A?1-A:void 0)}function Vu(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function Xu(){return!0}function gx(){return!1}function Wn(d){function m(w,A,I,R,G){this._reactName=w,this._targetInst=I,this.type=A,this.nativeEvent=R,this.target=G,this.currentTarget=null;for(var Z in d)d.hasOwnProperty(Z)&&(w=d[Z],this[Z]=w?w(R):R[Z]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Xu:gx,this.isPropagationStopped=gx,this}return D(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Xu)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Xu)},persist:function(){},isPersistent:Xu}),m}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xf=Wn(jo),lh=D({},jo,{view:0,detail:0}),vI=Wn(lh),Gf,Yf,hh,Gu=D({},lh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wf,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==hh&&(hh&&d.type==="mousemove"?(Gf=d.screenX-hh.screenX,Yf=d.screenY-hh.screenY):Yf=Gf=0,hh=d),Gf)},movementY:function(d){return"movementY"in d?d.movementY:Yf}}),vx=Wn(Gu),yI=D({},Gu,{dataTransfer:0}),xI=Wn(yI),wI=D({},lh,{relatedTarget:0}),$f=Wn(wI),_I=D({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),bI=Wn(_I),EI=D({},jo,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),TI=Wn(EI),SI=D({},jo,{data:0}),yx=Wn(SI),AI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},II={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RI(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=II[d])?!!m[d]:!1}function Wf(){return RI}var MI=D({},lh,{key:function(d){if(d.key){var m=AI[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=Vu(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?CI[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wf,charCode:function(d){return d.type==="keypress"?Vu(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Vu(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),PI=Wn(MI),kI=D({},Gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xx=Wn(kI),FI=D({},lh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wf}),BI=Wn(FI),NI=D({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),OI=Wn(NI),DI=D({},Gu,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),LI=Wn(DI),UI=[9,13,27,32],Hf=h&&"CompositionEvent"in window,uh=null;h&&"documentMode"in document&&(uh=document.documentMode);var VI=h&&"TextEvent"in window&&!uh,wx=h&&(!Hf||uh&&8<uh&&11>=uh),_x=" ",bx=!1;function Ex(d,m){switch(d){case"keyup":return UI.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tx(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var qo=!1;function XI(d,m){switch(d){case"compositionend":return Tx(m);case"keypress":return m.which!==32?null:(bx=!0,_x);case"textInput":return d=m.data,d===_x&&bx?null:d;default:return null}}function GI(d,m){if(qo)return d==="compositionend"||!Hf&&Ex(d,m)?(d=mx(),Uu=Vf=ia=null,qo=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return wx&&m.locale!=="ko"?null:m.data;default:return null}}var YI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sx(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!YI[d.type]:m==="textarea"}function Ax(d,m,w,A){Pr(A),m=zu(m,"onChange"),0<m.length&&(w=new Xf("onChange","change",null,w,A),d.push({event:w,listeners:m}))}var ch=null,dh=null;function $I(d){$x(d,0)}function Yu(d){var m=tl(d);if(yt(m))return d}function WI(d,m){if(d==="change")return m}var Cx=!1;if(h){var zf;if(h){var jf="oninput"in document;if(!jf){var Ix=document.createElement("div");Ix.setAttribute("oninput","return;"),jf=typeof Ix.oninput=="function"}zf=jf}else zf=!1;Cx=zf&&(!document.documentMode||9<document.documentMode)}function Rx(){ch&&(ch.detachEvent("onpropertychange",Mx),dh=ch=null)}function Mx(d){if(d.propertyName==="value"&&Yu(dh)){var m=[];Ax(m,dh,d,de(d)),Sn($I,m)}}function HI(d,m,w){d==="focusin"?(Rx(),ch=m,dh=w,ch.attachEvent("onpropertychange",Mx)):d==="focusout"&&Rx()}function zI(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Yu(dh)}function jI(d,m){if(d==="click")return Yu(m)}function qI(d,m){if(d==="input"||d==="change")return Yu(m)}function KI(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var wi=typeof Object.is=="function"?Object.is:KI;function fh(d,m){if(wi(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var w=Object.keys(d),A=Object.keys(m);if(w.length!==A.length)return!1;for(A=0;A<w.length;A++){var I=w[A];if(!a.call(m,I)||!wi(d[I],m[I]))return!1}return!0}function Px(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function kx(d,m){var w=Px(d);d=0;for(var A;w;){if(w.nodeType===3){if(A=d+w.textContent.length,d<=m&&A>=m)return{node:w,offset:m-d};d=A}t:{for(;w;){if(w.nextSibling){w=w.nextSibling;break t}w=w.parentNode}w=void 0}w=Px(w)}}function Fx(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?Fx(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function Bx(){for(var d=window,m=St();m instanceof d.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)d=m.contentWindow;else break;m=St(d.document)}return m}function qf(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}function ZI(d){var m=Bx(),w=d.focusedElem,A=d.selectionRange;if(m!==w&&w&&w.ownerDocument&&Fx(w.ownerDocument.documentElement,w)){if(A!==null&&qf(w)){if(m=A.start,d=A.end,d===void 0&&(d=m),"selectionStart"in w)w.selectionStart=m,w.selectionEnd=Math.min(d,w.value.length);else if(d=(m=w.ownerDocument||document)&&m.defaultView||window,d.getSelection){d=d.getSelection();var I=w.textContent.length,R=Math.min(A.start,I);A=A.end===void 0?R:Math.min(A.end,I),!d.extend&&R>A&&(I=A,A=R,R=I),I=kx(w,R);var G=kx(w,A);I&&G&&(d.rangeCount!==1||d.anchorNode!==I.node||d.anchorOffset!==I.offset||d.focusNode!==G.node||d.focusOffset!==G.offset)&&(m=m.createRange(),m.setStart(I.node,I.offset),d.removeAllRanges(),R>A?(d.addRange(m),d.extend(G.node,G.offset)):(m.setEnd(G.node,G.offset),d.addRange(m)))}}for(m=[],d=w;d=d.parentNode;)d.nodeType===1&&m.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<m.length;w++)d=m[w],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var QI=h&&"documentMode"in document&&11>=document.documentMode,Ko=null,Kf=null,ph=null,Zf=!1;function Nx(d,m,w){var A=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;Zf||Ko==null||Ko!==St(A)||(A=Ko,"selectionStart"in A&&qf(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),ph&&fh(ph,A)||(ph=A,A=zu(Kf,"onSelect"),0<A.length&&(m=new Xf("onSelect","select",null,m,w),d.push({event:m,listeners:A}),m.target=Ko)))}function $u(d,m){var w={};return w[d.toLowerCase()]=m.toLowerCase(),w["Webkit"+d]="webkit"+m,w["Moz"+d]="moz"+m,w}var Zo={animationend:$u("Animation","AnimationEnd"),animationiteration:$u("Animation","AnimationIteration"),animationstart:$u("Animation","AnimationStart"),transitionend:$u("Transition","TransitionEnd")},Qf={},Ox={};h&&(Ox=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function Wu(d){if(Qf[d])return Qf[d];if(!Zo[d])return d;var m=Zo[d],w;for(w in m)if(m.hasOwnProperty(w)&&w in Ox)return Qf[d]=m[w];return d}var Dx=Wu("animationend"),Lx=Wu("animationiteration"),Ux=Wu("animationstart"),Vx=Wu("transitionend"),Xx=new Map,Gx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sa(d,m){Xx.set(d,m),s(m,[d])}for(var Jf=0;Jf<Gx.length;Jf++){var tp=Gx[Jf],JI=tp.toLowerCase(),tR=tp[0].toUpperCase()+tp.slice(1);sa(JI,"on"+tR)}sa(Dx,"onAnimationEnd"),sa(Lx,"onAnimationIteration"),sa(Ux,"onAnimationStart"),sa("dblclick","onDoubleClick"),sa("focusin","onFocus"),sa("focusout","onBlur"),sa(Vx,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eR=new Set("cancel close invalid load scroll toggle".split(" ").concat(mh));function Yx(d,m,w){var A=d.type||"unknown-event";d.currentTarget=w,Jl(A,m,void 0,d),d.currentTarget=null}function $x(d,m){m=(m&4)!==0;for(var w=0;w<d.length;w++){var A=d[w],I=A.event;A=A.listeners;t:{var R=void 0;if(m)for(var G=A.length-1;0<=G;G--){var Z=A[G],Q=Z.instance,pt=Z.currentTarget;if(Z=Z.listener,Q!==R&&I.isPropagationStopped())break t;Yx(I,Z,pt),R=Q}else for(G=0;G<A.length;G++){if(Z=A[G],Q=Z.instance,pt=Z.currentTarget,Z=Z.listener,Q!==R&&I.isPropagationStopped())break t;Yx(I,Z,pt),R=Q}}}if(Ha)throw d=Wo,Ha=!1,Wo=null,d}function He(d,m){var w=m[lp];w===void 0&&(w=m[lp]=new Set);var A=d+"__bubble";w.has(A)||(Wx(m,d,2,!1),w.add(A))}function ep(d,m,w){var A=0;m&&(A|=4),Wx(w,d,A,m)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function gh(d){if(!d[Hu]){d[Hu]=!0,r.forEach(function(w){w!=="selectionchange"&&(eR.has(w)||ep(w,!1,d),ep(w,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[Hu]||(m[Hu]=!0,ep("selectionchange",!1,m))}}function Wx(d,m,w,A){switch(px(m)){case 1:var I=mI;break;case 4:I=gI;break;default:I=Lf}w=I.bind(null,m,w,d),I=void 0,!qr||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(I=!0),A?I!==void 0?d.addEventListener(m,w,{capture:!0,passive:I}):d.addEventListener(m,w,!0):I!==void 0?d.addEventListener(m,w,{passive:I}):d.addEventListener(m,w,!1)}function rp(d,m,w,A,I){var R=A;if(!(m&1)&&!(m&2)&&A!==null)t:for(;;){if(A===null)return;var G=A.tag;if(G===3||G===4){var Z=A.stateNode.containerInfo;if(Z===I||Z.nodeType===8&&Z.parentNode===I)break;if(G===4)for(G=A.return;G!==null;){var Q=G.tag;if((Q===3||Q===4)&&(Q=G.stateNode.containerInfo,Q===I||Q.nodeType===8&&Q.parentNode===I))return;G=G.return}for(;Z!==null;){if(G=ja(Z),G===null)return;if(Q=G.tag,Q===5||Q===6){A=R=G;continue t}Z=Z.parentNode}}A=A.return}Sn(function(){var pt=R,xt=de(w),_t=[];t:{var vt=Xx.get(d);if(vt!==void 0){var Mt=Xf,Nt=d;switch(d){case"keypress":if(Vu(w)===0)break t;case"keydown":case"keyup":Mt=PI;break;case"focusin":Nt="focus",Mt=$f;break;case"focusout":Nt="blur",Mt=$f;break;case"beforeblur":case"afterblur":Mt=$f;break;case"click":if(w.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Mt=vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Mt=xI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Mt=BI;break;case Dx:case Lx:case Ux:Mt=bI;break;case Vx:Mt=OI;break;case"scroll":Mt=vI;break;case"wheel":Mt=LI;break;case"copy":case"cut":case"paste":Mt=TI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Mt=xx}var Lt=(m&4)!==0,vr=!Lt&&d==="scroll",nt=Lt?vt!==null?vt+"Capture":null:vt;Lt=[];for(var J=pt,ot;J!==null;){ot=J;var Tt=ot.stateNode;if(ot.tag===5&&Tt!==null&&(ot=Tt,nt!==null&&(Tt=An(J,nt),Tt!=null&&Lt.push(vh(J,Tt,ot)))),vr)break;J=J.return}0<Lt.length&&(vt=new Mt(vt,Nt,null,w,xt),_t.push({event:vt,listeners:Lt}))}}if(!(m&7)){t:{if(vt=d==="mouseover"||d==="pointerover",Mt=d==="mouseout"||d==="pointerout",vt&&w!==ye&&(Nt=w.relatedTarget||w.fromElement)&&(ja(Nt)||Nt[Ts]))break t;if((Mt||vt)&&(vt=xt.window===xt?xt:(vt=xt.ownerDocument)?vt.defaultView||vt.parentWindow:window,Mt?(Nt=w.relatedTarget||w.toElement,Mt=pt,Nt=Nt?ja(Nt):null,Nt!==null&&(vr=Qi(Nt),Nt!==vr||Nt.tag!==5&&Nt.tag!==6)&&(Nt=null)):(Mt=null,Nt=pt),Mt!==Nt)){if(Lt=vx,Tt="onMouseLeave",nt="onMouseEnter",J="mouse",(d==="pointerout"||d==="pointerover")&&(Lt=xx,Tt="onPointerLeave",nt="onPointerEnter",J="pointer"),vr=Mt==null?vt:tl(Mt),ot=Nt==null?vt:tl(Nt),vt=new Lt(Tt,J+"leave",Mt,w,xt),vt.target=vr,vt.relatedTarget=ot,Tt=null,ja(xt)===pt&&(Lt=new Lt(nt,J+"enter",Nt,w,xt),Lt.target=ot,Lt.relatedTarget=vr,Tt=Lt),vr=Tt,Mt&&Nt)e:{for(Lt=Mt,nt=Nt,J=0,ot=Lt;ot;ot=Qo(ot))J++;for(ot=0,Tt=nt;Tt;Tt=Qo(Tt))ot++;for(;0<J-ot;)Lt=Qo(Lt),J--;for(;0<ot-J;)nt=Qo(nt),ot--;for(;J--;){if(Lt===nt||nt!==null&&Lt===nt.alternate)break e;Lt=Qo(Lt),nt=Qo(nt)}Lt=null}else Lt=null;Mt!==null&&Hx(_t,vt,Mt,Lt,!1),Nt!==null&&vr!==null&&Hx(_t,vr,Nt,Lt,!0)}}t:{if(vt=pt?tl(pt):window,Mt=vt.nodeName&&vt.nodeName.toLowerCase(),Mt==="select"||Mt==="input"&&vt.type==="file")var Ut=WI;else if(Sx(vt))if(Cx)Ut=qI;else{Ut=zI;var Kt=HI}else(Mt=vt.nodeName)&&Mt.toLowerCase()==="input"&&(vt.type==="checkbox"||vt.type==="radio")&&(Ut=jI);if(Ut&&(Ut=Ut(d,pt))){Ax(_t,Ut,w,xt);break t}Kt&&Kt(d,vt,pt),d==="focusout"&&(Kt=vt._wrapperState)&&Kt.controlled&&vt.type==="number"&&jt(vt,"number",vt.value)}switch(Kt=pt?tl(pt):window,d){case"focusin":(Sx(Kt)||Kt.contentEditable==="true")&&(Ko=Kt,Kf=pt,ph=null);break;case"focusout":ph=Kf=Ko=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,Nx(_t,w,xt);break;case"selectionchange":if(QI)break;case"keydown":case"keyup":Nx(_t,w,xt)}var Zt;if(Hf)t:{switch(d){case"compositionstart":var te="onCompositionStart";break t;case"compositionend":te="onCompositionEnd";break t;case"compositionupdate":te="onCompositionUpdate";break t}te=void 0}else qo?Ex(d,w)&&(te="onCompositionEnd"):d==="keydown"&&w.keyCode===229&&(te="onCompositionStart");te&&(wx&&w.locale!=="ko"&&(qo||te!=="onCompositionStart"?te==="onCompositionEnd"&&qo&&(Zt=mx()):(ia=xt,Vf="value"in ia?ia.value:ia.textContent,qo=!0)),Kt=zu(pt,te),0<Kt.length&&(te=new yx(te,d,null,w,xt),_t.push({event:te,listeners:Kt}),Zt?te.data=Zt:(Zt=Tx(w),Zt!==null&&(te.data=Zt)))),(Zt=VI?XI(d,w):GI(d,w))&&(pt=zu(pt,"onBeforeInput"),0<pt.length&&(xt=new yx("onBeforeInput","beforeinput",null,w,xt),_t.push({event:xt,listeners:pt}),xt.data=Zt))}$x(_t,m)})}function vh(d,m,w){return{instance:d,listener:m,currentTarget:w}}function zu(d,m){for(var w=m+"Capture",A=[];d!==null;){var I=d,R=I.stateNode;I.tag===5&&R!==null&&(I=R,R=An(d,w),R!=null&&A.unshift(vh(d,R,I)),R=An(d,m),R!=null&&A.push(vh(d,R,I))),d=d.return}return A}function Qo(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function Hx(d,m,w,A,I){for(var R=m._reactName,G=[];w!==null&&w!==A;){var Z=w,Q=Z.alternate,pt=Z.stateNode;if(Q!==null&&Q===A)break;Z.tag===5&&pt!==null&&(Z=pt,I?(Q=An(w,R),Q!=null&&G.unshift(vh(w,Q,Z))):I||(Q=An(w,R),Q!=null&&G.push(vh(w,Q,Z)))),w=w.return}G.length!==0&&d.push({event:m,listeners:G})}var rR=/\r\n?/g,nR=/\u0000|\uFFFD/g;function zx(d){return(typeof d=="string"?d:""+d).replace(rR,`
`).replace(nR,"")}function ju(d,m,w){if(m=zx(m),zx(d)!==m&&w)throw Error(e(425))}function qu(){}var np=null,ip=null;function sp(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var ap=typeof setTimeout=="function"?setTimeout:void 0,iR=typeof clearTimeout=="function"?clearTimeout:void 0,jx=typeof Promise=="function"?Promise:void 0,sR=typeof queueMicrotask=="function"?queueMicrotask:typeof jx<"u"?function(d){return jx.resolve(null).then(d).catch(aR)}:ap;function aR(d){setTimeout(function(){throw d})}function op(d,m){var w=m,A=0;do{var I=w.nextSibling;if(d.removeChild(w),I&&I.nodeType===8)if(w=I.data,w==="/$"){if(A===0){d.removeChild(I),oh(m);return}A--}else w!=="$"&&w!=="$?"&&w!=="$!"||A++;w=I}while(w);oh(m)}function aa(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return d}function qx(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var w=d.data;if(w==="$"||w==="$!"||w==="$?"){if(m===0)return d;m--}else w==="/$"&&m++}d=d.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),ts="__reactFiber$"+Jo,yh="__reactProps$"+Jo,Ts="__reactContainer$"+Jo,lp="__reactEvents$"+Jo,oR="__reactListeners$"+Jo,lR="__reactHandles$"+Jo;function ja(d){var m=d[ts];if(m)return m;for(var w=d.parentNode;w;){if(m=w[Ts]||w[ts]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(d=qx(d);d!==null;){if(w=d[ts])return w;d=qx(d)}return m}d=w,w=d.parentNode}return null}function xh(d){return d=d[ts]||d[Ts],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function tl(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(e(33))}function Ku(d){return d[yh]||null}var hp=[],el=-1;function oa(d){return{current:d}}function ze(d){0>el||(d.current=hp[el],hp[el]=null,el--)}function Ve(d,m){el++,hp[el]=d.current,d.current=m}var la={},on=oa(la),In=oa(!1),qa=la;function rl(d,m){var w=d.type.contextTypes;if(!w)return la;var A=d.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===m)return A.__reactInternalMemoizedMaskedChildContext;var I={},R;for(R in w)I[R]=m[R];return A&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=m,d.__reactInternalMemoizedMaskedChildContext=I),I}function Rn(d){return d=d.childContextTypes,d!=null}function Zu(){ze(In),ze(on)}function Kx(d,m,w){if(on.current!==la)throw Error(e(168));Ve(on,m),Ve(In,w)}function Zx(d,m,w){var A=d.stateNode;if(m=m.childContextTypes,typeof A.getChildContext!="function")return w;A=A.getChildContext();for(var I in A)if(!(I in m))throw Error(e(108,ct(d)||"Unknown",I));return D({},w,A)}function Qu(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||la,qa=on.current,Ve(on,d),Ve(In,In.current),!0}function Qx(d,m,w){var A=d.stateNode;if(!A)throw Error(e(169));w?(d=Zx(d,m,qa),A.__reactInternalMemoizedMergedChildContext=d,ze(In),ze(on),Ve(on,d)):ze(In),Ve(In,w)}var Ss=null,Ju=!1,up=!1;function Jx(d){Ss===null?Ss=[d]:Ss.push(d)}function hR(d){Ju=!0,Jx(d)}function ha(){if(!up&&Ss!==null){up=!0;var d=0,m=De;try{var w=Ss;for(De=1;d<w.length;d++){var A=w[d];do A=A(!0);while(A!==null)}Ss=null,Ju=!1}catch(I){throw Ss!==null&&(Ss=Ss.slice(d+1)),th(kf,ha),I}finally{De=m,up=!1}}return null}var nl=[],il=0,tc=null,ec=0,li=[],hi=0,Ka=null,As=1,Cs="";function Za(d,m){nl[il++]=ec,nl[il++]=tc,tc=d,ec=m}function t1(d,m,w){li[hi++]=As,li[hi++]=Cs,li[hi++]=Ka,Ka=d;var A=As;d=Cs;var I=32-xi(A)-1;A&=~(1<<I),w+=1;var R=32-xi(m)+I;if(30<R){var G=I-I%5;R=(A&(1<<G)-1).toString(32),A>>=G,I-=G,As=1<<32-xi(m)+I|w<<I|A,Cs=R+d}else As=1<<R|w<<I|A,Cs=d}function cp(d){d.return!==null&&(Za(d,1),t1(d,1,0))}function dp(d){for(;d===tc;)tc=nl[--il],nl[il]=null,ec=nl[--il],nl[il]=null;for(;d===Ka;)Ka=li[--hi],li[hi]=null,Cs=li[--hi],li[hi]=null,As=li[--hi],li[hi]=null}var Hn=null,zn=null,Ke=!1,_i=null;function e1(d,m){var w=fi(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=d,m=d.deletions,m===null?(d.deletions=[w],d.flags|=16):m.push(w)}function r1(d,m){switch(d.tag){case 5:var w=d.type;return m=m.nodeType!==1||w.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(d.stateNode=m,Hn=d,zn=aa(m.firstChild),!0):!1;case 6:return m=d.pendingProps===""||m.nodeType!==3?null:m,m!==null?(d.stateNode=m,Hn=d,zn=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(w=Ka!==null?{id:As,overflow:Cs}:null,d.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},w=fi(18,null,null,0),w.stateNode=m,w.return=d,d.child=w,Hn=d,zn=null,!0):!1;default:return!1}}function fp(d){return(d.mode&1)!==0&&(d.flags&128)===0}function pp(d){if(Ke){var m=zn;if(m){var w=m;if(!r1(d,m)){if(fp(d))throw Error(e(418));m=aa(w.nextSibling);var A=Hn;m&&r1(d,m)?e1(A,w):(d.flags=d.flags&-4097|2,Ke=!1,Hn=d)}}else{if(fp(d))throw Error(e(418));d.flags=d.flags&-4097|2,Ke=!1,Hn=d}}}function n1(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Hn=d}function rc(d){if(d!==Hn)return!1;if(!Ke)return n1(d),Ke=!0,!1;var m;if((m=d.tag!==3)&&!(m=d.tag!==5)&&(m=d.type,m=m!=="head"&&m!=="body"&&!sp(d.type,d.memoizedProps)),m&&(m=zn)){if(fp(d))throw i1(),Error(e(418));for(;m;)e1(d,m),m=aa(m.nextSibling)}if(n1(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(e(317));t:{for(d=d.nextSibling,m=0;d;){if(d.nodeType===8){var w=d.data;if(w==="/$"){if(m===0){zn=aa(d.nextSibling);break t}m--}else w!=="$"&&w!=="$!"&&w!=="$?"||m++}d=d.nextSibling}zn=null}}else zn=Hn?aa(d.stateNode.nextSibling):null;return!0}function i1(){for(var d=zn;d;)d=aa(d.nextSibling)}function sl(){zn=Hn=null,Ke=!1}function mp(d){_i===null?_i=[d]:_i.push(d)}var uR=E.ReactCurrentBatchConfig;function wh(d,m,w){if(d=w.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(e(309));var A=w.stateNode}if(!A)throw Error(e(147,d));var I=A,R=""+d;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===R?m.ref:(m=function(G){var Z=I.refs;G===null?delete Z[R]:Z[R]=G},m._stringRef=R,m)}if(typeof d!="string")throw Error(e(284));if(!w._owner)throw Error(e(290,d))}return d}function nc(d,m){throw d=Object.prototype.toString.call(m),Error(e(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d))}function s1(d){var m=d._init;return m(d._payload)}function a1(d){function m(nt,J){if(d){var ot=nt.deletions;ot===null?(nt.deletions=[J],nt.flags|=16):ot.push(J)}}function w(nt,J){if(!d)return null;for(;J!==null;)m(nt,J),J=J.sibling;return null}function A(nt,J){for(nt=new Map;J!==null;)J.key!==null?nt.set(J.key,J):nt.set(J.index,J),J=J.sibling;return nt}function I(nt,J){return nt=va(nt,J),nt.index=0,nt.sibling=null,nt}function R(nt,J,ot){return nt.index=ot,d?(ot=nt.alternate,ot!==null?(ot=ot.index,ot<J?(nt.flags|=2,J):ot):(nt.flags|=2,J)):(nt.flags|=1048576,J)}function G(nt){return d&&nt.alternate===null&&(nt.flags|=2),nt}function Z(nt,J,ot,Tt){return J===null||J.tag!==6?(J=am(ot,nt.mode,Tt),J.return=nt,J):(J=I(J,ot),J.return=nt,J)}function Q(nt,J,ot,Tt){var Ut=ot.type;return Ut===C?xt(nt,J,ot.props.children,Tt,ot.key):J!==null&&(J.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===B&&s1(Ut)===J.type)?(Tt=I(J,ot.props),Tt.ref=wh(nt,J,ot),Tt.return=nt,Tt):(Tt=Cc(ot.type,ot.key,ot.props,null,nt.mode,Tt),Tt.ref=wh(nt,J,ot),Tt.return=nt,Tt)}function pt(nt,J,ot,Tt){return J===null||J.tag!==4||J.stateNode.containerInfo!==ot.containerInfo||J.stateNode.implementation!==ot.implementation?(J=om(ot,nt.mode,Tt),J.return=nt,J):(J=I(J,ot.children||[]),J.return=nt,J)}function xt(nt,J,ot,Tt,Ut){return J===null||J.tag!==7?(J=so(ot,nt.mode,Tt,Ut),J.return=nt,J):(J=I(J,ot),J.return=nt,J)}function _t(nt,J,ot){if(typeof J=="string"&&J!==""||typeof J=="number")return J=am(""+J,nt.mode,ot),J.return=nt,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case T:return ot=Cc(J.type,J.key,J.props,null,nt.mode,ot),ot.ref=wh(nt,null,J),ot.return=nt,ot;case S:return J=om(J,nt.mode,ot),J.return=nt,J;case B:var Tt=J._init;return _t(nt,Tt(J._payload),ot)}if(Wt(J)||Y(J))return J=so(J,nt.mode,ot,null),J.return=nt,J;nc(nt,J)}return null}function vt(nt,J,ot,Tt){var Ut=J!==null?J.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number")return Ut!==null?null:Z(nt,J,""+ot,Tt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case T:return ot.key===Ut?Q(nt,J,ot,Tt):null;case S:return ot.key===Ut?pt(nt,J,ot,Tt):null;case B:return Ut=ot._init,vt(nt,J,Ut(ot._payload),Tt)}if(Wt(ot)||Y(ot))return Ut!==null?null:xt(nt,J,ot,Tt,null);nc(nt,ot)}return null}function Mt(nt,J,ot,Tt,Ut){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return nt=nt.get(ot)||null,Z(J,nt,""+Tt,Ut);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case T:return nt=nt.get(Tt.key===null?ot:Tt.key)||null,Q(J,nt,Tt,Ut);case S:return nt=nt.get(Tt.key===null?ot:Tt.key)||null,pt(J,nt,Tt,Ut);case B:var Kt=Tt._init;return Mt(nt,J,ot,Kt(Tt._payload),Ut)}if(Wt(Tt)||Y(Tt))return nt=nt.get(ot)||null,xt(J,nt,Tt,Ut,null);nc(J,Tt)}return null}function Nt(nt,J,ot,Tt){for(var Ut=null,Kt=null,Zt=J,te=J=0,Gr=null;Zt!==null&&te<ot.length;te++){Zt.index>te?(Gr=Zt,Zt=null):Gr=Zt.sibling;var Me=vt(nt,Zt,ot[te],Tt);if(Me===null){Zt===null&&(Zt=Gr);break}d&&Zt&&Me.alternate===null&&m(nt,Zt),J=R(Me,J,te),Kt===null?Ut=Me:Kt.sibling=Me,Kt=Me,Zt=Gr}if(te===ot.length)return w(nt,Zt),Ke&&Za(nt,te),Ut;if(Zt===null){for(;te<ot.length;te++)Zt=_t(nt,ot[te],Tt),Zt!==null&&(J=R(Zt,J,te),Kt===null?Ut=Zt:Kt.sibling=Zt,Kt=Zt);return Ke&&Za(nt,te),Ut}for(Zt=A(nt,Zt);te<ot.length;te++)Gr=Mt(Zt,nt,te,ot[te],Tt),Gr!==null&&(d&&Gr.alternate!==null&&Zt.delete(Gr.key===null?te:Gr.key),J=R(Gr,J,te),Kt===null?Ut=Gr:Kt.sibling=Gr,Kt=Gr);return d&&Zt.forEach(function(ya){return m(nt,ya)}),Ke&&Za(nt,te),Ut}function Lt(nt,J,ot,Tt){var Ut=Y(ot);if(typeof Ut!="function")throw Error(e(150));if(ot=Ut.call(ot),ot==null)throw Error(e(151));for(var Kt=Ut=null,Zt=J,te=J=0,Gr=null,Me=ot.next();Zt!==null&&!Me.done;te++,Me=ot.next()){Zt.index>te?(Gr=Zt,Zt=null):Gr=Zt.sibling;var ya=vt(nt,Zt,Me.value,Tt);if(ya===null){Zt===null&&(Zt=Gr);break}d&&Zt&&ya.alternate===null&&m(nt,Zt),J=R(ya,J,te),Kt===null?Ut=ya:Kt.sibling=ya,Kt=ya,Zt=Gr}if(Me.done)return w(nt,Zt),Ke&&Za(nt,te),Ut;if(Zt===null){for(;!Me.done;te++,Me=ot.next())Me=_t(nt,Me.value,Tt),Me!==null&&(J=R(Me,J,te),Kt===null?Ut=Me:Kt.sibling=Me,Kt=Me);return Ke&&Za(nt,te),Ut}for(Zt=A(nt,Zt);!Me.done;te++,Me=ot.next())Me=Mt(Zt,nt,te,Me.value,Tt),Me!==null&&(d&&Me.alternate!==null&&Zt.delete(Me.key===null?te:Me.key),J=R(Me,J,te),Kt===null?Ut=Me:Kt.sibling=Me,Kt=Me);return d&&Zt.forEach(function(YR){return m(nt,YR)}),Ke&&Za(nt,te),Ut}function vr(nt,J,ot,Tt){if(typeof ot=="object"&&ot!==null&&ot.type===C&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case T:t:{for(var Ut=ot.key,Kt=J;Kt!==null;){if(Kt.key===Ut){if(Ut=ot.type,Ut===C){if(Kt.tag===7){w(nt,Kt.sibling),J=I(Kt,ot.props.children),J.return=nt,nt=J;break t}}else if(Kt.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===B&&s1(Ut)===Kt.type){w(nt,Kt.sibling),J=I(Kt,ot.props),J.ref=wh(nt,Kt,ot),J.return=nt,nt=J;break t}w(nt,Kt);break}else m(nt,Kt);Kt=Kt.sibling}ot.type===C?(J=so(ot.props.children,nt.mode,Tt,ot.key),J.return=nt,nt=J):(Tt=Cc(ot.type,ot.key,ot.props,null,nt.mode,Tt),Tt.ref=wh(nt,J,ot),Tt.return=nt,nt=Tt)}return G(nt);case S:t:{for(Kt=ot.key;J!==null;){if(J.key===Kt)if(J.tag===4&&J.stateNode.containerInfo===ot.containerInfo&&J.stateNode.implementation===ot.implementation){w(nt,J.sibling),J=I(J,ot.children||[]),J.return=nt,nt=J;break t}else{w(nt,J);break}else m(nt,J);J=J.sibling}J=om(ot,nt.mode,Tt),J.return=nt,nt=J}return G(nt);case B:return Kt=ot._init,vr(nt,J,Kt(ot._payload),Tt)}if(Wt(ot))return Nt(nt,J,ot,Tt);if(Y(ot))return Lt(nt,J,ot,Tt);nc(nt,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"?(ot=""+ot,J!==null&&J.tag===6?(w(nt,J.sibling),J=I(J,ot),J.return=nt,nt=J):(w(nt,J),J=am(ot,nt.mode,Tt),J.return=nt,nt=J),G(nt)):w(nt,J)}return vr}var al=a1(!0),o1=a1(!1),ic=oa(null),sc=null,ol=null,gp=null;function vp(){gp=ol=sc=null}function yp(d){var m=ic.current;ze(ic),d._currentValue=m}function xp(d,m,w){for(;d!==null;){var A=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,A!==null&&(A.childLanes|=m)):A!==null&&(A.childLanes&m)!==m&&(A.childLanes|=m),d===w)break;d=d.return}}function ll(d,m){sc=d,gp=ol=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&m&&(Mn=!0),d.firstContext=null)}function ui(d){var m=d._currentValue;if(gp!==d)if(d={context:d,memoizedValue:m,next:null},ol===null){if(sc===null)throw Error(e(308));ol=d,sc.dependencies={lanes:0,firstContext:d}}else ol=ol.next=d;return m}var Qa=null;function wp(d){Qa===null?Qa=[d]:Qa.push(d)}function l1(d,m,w,A){var I=m.interleaved;return I===null?(w.next=w,wp(m)):(w.next=I.next,I.next=w),m.interleaved=w,Is(d,A)}function Is(d,m){d.lanes|=m;var w=d.alternate;for(w!==null&&(w.lanes|=m),w=d,d=d.return;d!==null;)d.childLanes|=m,w=d.alternate,w!==null&&(w.childLanes|=m),w=d,d=d.return;return w.tag===3?w.stateNode:null}var ua=!1;function _p(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h1(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Rs(d,m){return{eventTime:d,lane:m,tag:0,payload:null,callback:null,next:null}}function ca(d,m,w){var A=d.updateQueue;if(A===null)return null;if(A=A.shared,Re&2){var I=A.pending;return I===null?m.next=m:(m.next=I.next,I.next=m),A.pending=m,Is(d,w)}return I=A.interleaved,I===null?(m.next=m,wp(A)):(m.next=I.next,I.next=m),A.interleaved=m,Is(d,w)}function ac(d,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194240)!==0)){var A=m.lanes;A&=d.pendingLanes,w|=A,m.lanes=w,Nf(d,w)}}function u1(d,m){var w=d.updateQueue,A=d.alternate;if(A!==null&&(A=A.updateQueue,w===A)){var I=null,R=null;if(w=w.firstBaseUpdate,w!==null){do{var G={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};R===null?I=R=G:R=R.next=G,w=w.next}while(w!==null);R===null?I=R=m:R=R.next=m}else I=R=m;w={baseState:A.baseState,firstBaseUpdate:I,lastBaseUpdate:R,shared:A.shared,effects:A.effects},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=m:d.next=m,w.lastBaseUpdate=m}function oc(d,m,w,A){var I=d.updateQueue;ua=!1;var R=I.firstBaseUpdate,G=I.lastBaseUpdate,Z=I.shared.pending;if(Z!==null){I.shared.pending=null;var Q=Z,pt=Q.next;Q.next=null,G===null?R=pt:G.next=pt,G=Q;var xt=d.alternate;xt!==null&&(xt=xt.updateQueue,Z=xt.lastBaseUpdate,Z!==G&&(Z===null?xt.firstBaseUpdate=pt:Z.next=pt,xt.lastBaseUpdate=Q))}if(R!==null){var _t=I.baseState;G=0,xt=pt=Q=null,Z=R;do{var vt=Z.lane,Mt=Z.eventTime;if((A&vt)===vt){xt!==null&&(xt=xt.next={eventTime:Mt,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});t:{var Nt=d,Lt=Z;switch(vt=m,Mt=w,Lt.tag){case 1:if(Nt=Lt.payload,typeof Nt=="function"){_t=Nt.call(Mt,_t,vt);break t}_t=Nt;break t;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=Lt.payload,vt=typeof Nt=="function"?Nt.call(Mt,_t,vt):Nt,vt==null)break t;_t=D({},_t,vt);break t;case 2:ua=!0}}Z.callback!==null&&Z.lane!==0&&(d.flags|=64,vt=I.effects,vt===null?I.effects=[Z]:vt.push(Z))}else Mt={eventTime:Mt,lane:vt,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},xt===null?(pt=xt=Mt,Q=_t):xt=xt.next=Mt,G|=vt;if(Z=Z.next,Z===null){if(Z=I.shared.pending,Z===null)break;vt=Z,Z=vt.next,vt.next=null,I.lastBaseUpdate=vt,I.shared.pending=null}}while(!0);if(xt===null&&(Q=_t),I.baseState=Q,I.firstBaseUpdate=pt,I.lastBaseUpdate=xt,m=I.shared.interleaved,m!==null){I=m;do G|=I.lane,I=I.next;while(I!==m)}else R===null&&(I.shared.lanes=0);eo|=G,d.lanes=G,d.memoizedState=_t}}function c1(d,m,w){if(d=m.effects,m.effects=null,d!==null)for(m=0;m<d.length;m++){var A=d[m],I=A.callback;if(I!==null){if(A.callback=null,A=w,typeof I!="function")throw Error(e(191,I));I.call(A)}}}var _h={},es=oa(_h),bh=oa(_h),Eh=oa(_h);function Ja(d){if(d===_h)throw Error(e(174));return d}function bp(d,m){switch(Ve(Eh,m),Ve(bh,d),Ve(es,_h),d=m.nodeType,d){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Qe(null,"");break;default:d=d===8?m.parentNode:m,m=d.namespaceURI||null,d=d.tagName,m=Qe(m,d)}ze(es),Ve(es,m)}function hl(){ze(es),ze(bh),ze(Eh)}function d1(d){Ja(Eh.current);var m=Ja(es.current),w=Qe(m,d.type);m!==w&&(Ve(bh,d),Ve(es,w))}function Ep(d){bh.current===d&&(ze(es),ze(bh))}var er=oa(0);function lc(d){for(var m=d;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Tp=[];function Sp(){for(var d=0;d<Tp.length;d++)Tp[d]._workInProgressVersionPrimary=null;Tp.length=0}var hc=E.ReactCurrentDispatcher,Ap=E.ReactCurrentBatchConfig,to=0,rr=null,kr=null,Vr=null,uc=!1,Th=!1,Sh=0,cR=0;function ln(){throw Error(e(321))}function Cp(d,m){if(m===null)return!1;for(var w=0;w<m.length&&w<d.length;w++)if(!wi(d[w],m[w]))return!1;return!0}function Ip(d,m,w,A,I,R){if(to=R,rr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,hc.current=d===null||d.memoizedState===null?mR:gR,d=w(A,I),Th){R=0;do{if(Th=!1,Sh=0,25<=R)throw Error(e(301));R+=1,Vr=kr=null,m.updateQueue=null,hc.current=vR,d=w(A,I)}while(Th)}if(hc.current=fc,m=kr!==null&&kr.next!==null,to=0,Vr=kr=rr=null,uc=!1,m)throw Error(e(300));return d}function Rp(){var d=Sh!==0;return Sh=0,d}function rs(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?rr.memoizedState=Vr=d:Vr=Vr.next=d,Vr}function ci(){if(kr===null){var d=rr.alternate;d=d!==null?d.memoizedState:null}else d=kr.next;var m=Vr===null?rr.memoizedState:Vr.next;if(m!==null)Vr=m,kr=d;else{if(d===null)throw Error(e(310));kr=d,d={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},Vr===null?rr.memoizedState=Vr=d:Vr=Vr.next=d}return Vr}function Ah(d,m){return typeof m=="function"?m(d):m}function Mp(d){var m=ci(),w=m.queue;if(w===null)throw Error(e(311));w.lastRenderedReducer=d;var A=kr,I=A.baseQueue,R=w.pending;if(R!==null){if(I!==null){var G=I.next;I.next=R.next,R.next=G}A.baseQueue=I=R,w.pending=null}if(I!==null){R=I.next,A=A.baseState;var Z=G=null,Q=null,pt=R;do{var xt=pt.lane;if((to&xt)===xt)Q!==null&&(Q=Q.next={lane:0,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null}),A=pt.hasEagerState?pt.eagerState:d(A,pt.action);else{var _t={lane:xt,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null};Q===null?(Z=Q=_t,G=A):Q=Q.next=_t,rr.lanes|=xt,eo|=xt}pt=pt.next}while(pt!==null&&pt!==R);Q===null?G=A:Q.next=Z,wi(A,m.memoizedState)||(Mn=!0),m.memoizedState=A,m.baseState=G,m.baseQueue=Q,w.lastRenderedState=A}if(d=w.interleaved,d!==null){I=d;do R=I.lane,rr.lanes|=R,eo|=R,I=I.next;while(I!==d)}else I===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function Pp(d){var m=ci(),w=m.queue;if(w===null)throw Error(e(311));w.lastRenderedReducer=d;var A=w.dispatch,I=w.pending,R=m.memoizedState;if(I!==null){w.pending=null;var G=I=I.next;do R=d(R,G.action),G=G.next;while(G!==I);wi(R,m.memoizedState)||(Mn=!0),m.memoizedState=R,m.baseQueue===null&&(m.baseState=R),w.lastRenderedState=R}return[R,A]}function f1(){}function p1(d,m){var w=rr,A=ci(),I=m(),R=!wi(A.memoizedState,I);if(R&&(A.memoizedState=I,Mn=!0),A=A.queue,kp(v1.bind(null,w,A,d),[d]),A.getSnapshot!==m||R||Vr!==null&&Vr.memoizedState.tag&1){if(w.flags|=2048,Ch(9,g1.bind(null,w,A,I,m),void 0,null),Xr===null)throw Error(e(349));to&30||m1(w,m,I)}return I}function m1(d,m,w){d.flags|=16384,d={getSnapshot:m,value:w},m=rr.updateQueue,m===null?(m={lastEffect:null,stores:null},rr.updateQueue=m,m.stores=[d]):(w=m.stores,w===null?m.stores=[d]:w.push(d))}function g1(d,m,w,A){m.value=w,m.getSnapshot=A,y1(m)&&x1(d)}function v1(d,m,w){return w(function(){y1(m)&&x1(d)})}function y1(d){var m=d.getSnapshot;d=d.value;try{var w=m();return!wi(d,w)}catch{return!0}}function x1(d){var m=Is(d,1);m!==null&&Si(m,d,1,-1)}function w1(d){var m=rs();return typeof d=="function"&&(d=d()),m.memoizedState=m.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ah,lastRenderedState:d},m.queue=d,d=d.dispatch=pR.bind(null,rr,d),[m.memoizedState,d]}function Ch(d,m,w,A){return d={tag:d,create:m,destroy:w,deps:A,next:null},m=rr.updateQueue,m===null?(m={lastEffect:null,stores:null},rr.updateQueue=m,m.lastEffect=d.next=d):(w=m.lastEffect,w===null?m.lastEffect=d.next=d:(A=w.next,w.next=d,d.next=A,m.lastEffect=d)),d}function _1(){return ci().memoizedState}function cc(d,m,w,A){var I=rs();rr.flags|=d,I.memoizedState=Ch(1|m,w,void 0,A===void 0?null:A)}function dc(d,m,w,A){var I=ci();A=A===void 0?null:A;var R=void 0;if(kr!==null){var G=kr.memoizedState;if(R=G.destroy,A!==null&&Cp(A,G.deps)){I.memoizedState=Ch(m,w,R,A);return}}rr.flags|=d,I.memoizedState=Ch(1|m,w,R,A)}function b1(d,m){return cc(8390656,8,d,m)}function kp(d,m){return dc(2048,8,d,m)}function E1(d,m){return dc(4,2,d,m)}function T1(d,m){return dc(4,4,d,m)}function S1(d,m){if(typeof m=="function")return d=d(),m(d),function(){m(null)};if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function A1(d,m,w){return w=w!=null?w.concat([d]):null,dc(4,4,S1.bind(null,m,d),w)}function Fp(){}function C1(d,m){var w=ci();m=m===void 0?null:m;var A=w.memoizedState;return A!==null&&m!==null&&Cp(m,A[1])?A[0]:(w.memoizedState=[d,m],d)}function I1(d,m){var w=ci();m=m===void 0?null:m;var A=w.memoizedState;return A!==null&&m!==null&&Cp(m,A[1])?A[0]:(d=d(),w.memoizedState=[d,m],d)}function R1(d,m,w){return to&21?(wi(w,m)||(w=sx(),rr.lanes|=w,eo|=w,d.baseState=!0),m):(d.baseState&&(d.baseState=!1,Mn=!0),d.memoizedState=w)}function dR(d,m){var w=De;De=w!==0&&4>w?w:4,d(!0);var A=Ap.transition;Ap.transition={};try{d(!1),m()}finally{De=w,Ap.transition=A}}function M1(){return ci().memoizedState}function fR(d,m,w){var A=ma(d);if(w={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null},P1(d))k1(m,w);else if(w=l1(d,m,w,A),w!==null){var I=pn();Si(w,d,A,I),F1(w,m,A)}}function pR(d,m,w){var A=ma(d),I={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null};if(P1(d))k1(m,I);else{var R=d.alternate;if(d.lanes===0&&(R===null||R.lanes===0)&&(R=m.lastRenderedReducer,R!==null))try{var G=m.lastRenderedState,Z=R(G,w);if(I.hasEagerState=!0,I.eagerState=Z,wi(Z,G)){var Q=m.interleaved;Q===null?(I.next=I,wp(m)):(I.next=Q.next,Q.next=I),m.interleaved=I;return}}catch{}finally{}w=l1(d,m,I,A),w!==null&&(I=pn(),Si(w,d,A,I),F1(w,m,A))}}function P1(d){var m=d.alternate;return d===rr||m!==null&&m===rr}function k1(d,m){Th=uc=!0;var w=d.pending;w===null?m.next=m:(m.next=w.next,w.next=m),d.pending=m}function F1(d,m,w){if(w&4194240){var A=m.lanes;A&=d.pendingLanes,w|=A,m.lanes=w,Nf(d,w)}}var fc={readContext:ui,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},mR={readContext:ui,useCallback:function(d,m){return rs().memoizedState=[d,m===void 0?null:m],d},useContext:ui,useEffect:b1,useImperativeHandle:function(d,m,w){return w=w!=null?w.concat([d]):null,cc(4194308,4,S1.bind(null,m,d),w)},useLayoutEffect:function(d,m){return cc(4194308,4,d,m)},useInsertionEffect:function(d,m){return cc(4,2,d,m)},useMemo:function(d,m){var w=rs();return m=m===void 0?null:m,d=d(),w.memoizedState=[d,m],d},useReducer:function(d,m,w){var A=rs();return m=w!==void 0?w(m):m,A.memoizedState=A.baseState=m,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:m},A.queue=d,d=d.dispatch=fR.bind(null,rr,d),[A.memoizedState,d]},useRef:function(d){var m=rs();return d={current:d},m.memoizedState=d},useState:w1,useDebugValue:Fp,useDeferredValue:function(d){return rs().memoizedState=d},useTransition:function(){var d=w1(!1),m=d[0];return d=dR.bind(null,d[1]),rs().memoizedState=d,[m,d]},useMutableSource:function(){},useSyncExternalStore:function(d,m,w){var A=rr,I=rs();if(Ke){if(w===void 0)throw Error(e(407));w=w()}else{if(w=m(),Xr===null)throw Error(e(349));to&30||m1(A,m,w)}I.memoizedState=w;var R={value:w,getSnapshot:m};return I.queue=R,b1(v1.bind(null,A,R,d),[d]),A.flags|=2048,Ch(9,g1.bind(null,A,R,w,m),void 0,null),w},useId:function(){var d=rs(),m=Xr.identifierPrefix;if(Ke){var w=Cs,A=As;w=(A&~(1<<32-xi(A)-1)).toString(32)+w,m=":"+m+"R"+w,w=Sh++,0<w&&(m+="H"+w.toString(32)),m+=":"}else w=cR++,m=":"+m+"r"+w.toString(32)+":";return d.memoizedState=m},unstable_isNewReconciler:!1},gR={readContext:ui,useCallback:C1,useContext:ui,useEffect:kp,useImperativeHandle:A1,useInsertionEffect:E1,useLayoutEffect:T1,useMemo:I1,useReducer:Mp,useRef:_1,useState:function(){return Mp(Ah)},useDebugValue:Fp,useDeferredValue:function(d){var m=ci();return R1(m,kr.memoizedState,d)},useTransition:function(){var d=Mp(Ah)[0],m=ci().memoizedState;return[d,m]},useMutableSource:f1,useSyncExternalStore:p1,useId:M1,unstable_isNewReconciler:!1},vR={readContext:ui,useCallback:C1,useContext:ui,useEffect:kp,useImperativeHandle:A1,useInsertionEffect:E1,useLayoutEffect:T1,useMemo:I1,useReducer:Pp,useRef:_1,useState:function(){return Pp(Ah)},useDebugValue:Fp,useDeferredValue:function(d){var m=ci();return kr===null?m.memoizedState=d:R1(m,kr.memoizedState,d)},useTransition:function(){var d=Pp(Ah)[0],m=ci().memoizedState;return[d,m]},useMutableSource:f1,useSyncExternalStore:p1,useId:M1,unstable_isNewReconciler:!1};function bi(d,m){if(d&&d.defaultProps){m=D({},m),d=d.defaultProps;for(var w in d)m[w]===void 0&&(m[w]=d[w]);return m}return m}function Bp(d,m,w,A){m=d.memoizedState,w=w(A,m),w=w==null?m:D({},m,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var pc={isMounted:function(d){return(d=d._reactInternals)?Qi(d)===d:!1},enqueueSetState:function(d,m,w){d=d._reactInternals;var A=pn(),I=ma(d),R=Rs(A,I);R.payload=m,w!=null&&(R.callback=w),m=ca(d,R,I),m!==null&&(Si(m,d,I,A),ac(m,d,I))},enqueueReplaceState:function(d,m,w){d=d._reactInternals;var A=pn(),I=ma(d),R=Rs(A,I);R.tag=1,R.payload=m,w!=null&&(R.callback=w),m=ca(d,R,I),m!==null&&(Si(m,d,I,A),ac(m,d,I))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var w=pn(),A=ma(d),I=Rs(w,A);I.tag=2,m!=null&&(I.callback=m),m=ca(d,I,A),m!==null&&(Si(m,d,A,w),ac(m,d,A))}};function B1(d,m,w,A,I,R,G){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(A,R,G):m.prototype&&m.prototype.isPureReactComponent?!fh(w,A)||!fh(I,R):!0}function N1(d,m,w){var A=!1,I=la,R=m.contextType;return typeof R=="object"&&R!==null?R=ui(R):(I=Rn(m)?qa:on.current,A=m.contextTypes,R=(A=A!=null)?rl(d,I):la),m=new m(w,R),d.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=pc,d.stateNode=m,m._reactInternals=d,A&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=I,d.__reactInternalMemoizedMaskedChildContext=R),m}function O1(d,m,w,A){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,A),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,A),m.state!==d&&pc.enqueueReplaceState(m,m.state,null)}function Np(d,m,w,A){var I=d.stateNode;I.props=w,I.state=d.memoizedState,I.refs={},_p(d);var R=m.contextType;typeof R=="object"&&R!==null?I.context=ui(R):(R=Rn(m)?qa:on.current,I.context=rl(d,R)),I.state=d.memoizedState,R=m.getDerivedStateFromProps,typeof R=="function"&&(Bp(d,m,R,w),I.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(m=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),m!==I.state&&pc.enqueueReplaceState(I,I.state,null),oc(d,w,I,A),I.state=d.memoizedState),typeof I.componentDidMount=="function"&&(d.flags|=4194308)}function ul(d,m){try{var w="",A=m;do w+=K(A),A=A.return;while(A);var I=w}catch(R){I=`
Error generating stack: `+R.message+`
`+R.stack}return{value:d,source:m,stack:I,digest:null}}function Op(d,m,w){return{value:d,source:null,stack:w??null,digest:m??null}}function Dp(d,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var yR=typeof WeakMap=="function"?WeakMap:Map;function D1(d,m,w){w=Rs(-1,w),w.tag=3,w.payload={element:null};var A=m.value;return w.callback=function(){_c||(_c=!0,Qp=A),Dp(d,m)},w}function L1(d,m,w){w=Rs(-1,w),w.tag=3;var A=d.type.getDerivedStateFromError;if(typeof A=="function"){var I=m.value;w.payload=function(){return A(I)},w.callback=function(){Dp(d,m)}}var R=d.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(w.callback=function(){Dp(d,m),typeof A!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var G=m.stack;this.componentDidCatch(m.value,{componentStack:G!==null?G:""})}),w}function U1(d,m,w){var A=d.pingCache;if(A===null){A=d.pingCache=new yR;var I=new Set;A.set(m,I)}else I=A.get(m),I===void 0&&(I=new Set,A.set(m,I));I.has(w)||(I.add(w),d=kR.bind(null,d,m,w),m.then(d,d))}function V1(d){do{var m;if((m=d.tag===13)&&(m=d.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return d;d=d.return}while(d!==null);return null}function X1(d,m,w,A,I){return d.mode&1?(d.flags|=65536,d.lanes=I,d):(d===m?d.flags|=65536:(d.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(m=Rs(-1,1),m.tag=2,ca(w,m,1))),w.lanes|=1),d)}var xR=E.ReactCurrentOwner,Mn=!1;function fn(d,m,w,A){m.child=d===null?o1(m,null,w,A):al(m,d.child,w,A)}function G1(d,m,w,A,I){w=w.render;var R=m.ref;return ll(m,I),A=Ip(d,m,w,A,R,I),w=Rp(),d!==null&&!Mn?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~I,Ms(d,m,I)):(Ke&&w&&cp(m),m.flags|=1,fn(d,m,A,I),m.child)}function Y1(d,m,w,A,I){if(d===null){var R=w.type;return typeof R=="function"&&!sm(R)&&R.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(m.tag=15,m.type=R,$1(d,m,R,A,I)):(d=Cc(w.type,null,A,m,m.mode,I),d.ref=m.ref,d.return=m,m.child=d)}if(R=d.child,!(d.lanes&I)){var G=R.memoizedProps;if(w=w.compare,w=w!==null?w:fh,w(G,A)&&d.ref===m.ref)return Ms(d,m,I)}return m.flags|=1,d=va(R,A),d.ref=m.ref,d.return=m,m.child=d}function $1(d,m,w,A,I){if(d!==null){var R=d.memoizedProps;if(fh(R,A)&&d.ref===m.ref)if(Mn=!1,m.pendingProps=A=R,(d.lanes&I)!==0)d.flags&131072&&(Mn=!0);else return m.lanes=d.lanes,Ms(d,m,I)}return Lp(d,m,w,A,I)}function W1(d,m,w){var A=m.pendingProps,I=A.children,R=d!==null?d.memoizedState:null;if(A.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(dl,jn),jn|=w;else{if(!(w&1073741824))return d=R!==null?R.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:d,cachePool:null,transitions:null},m.updateQueue=null,Ve(dl,jn),jn|=d,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},A=R!==null?R.baseLanes:w,Ve(dl,jn),jn|=A}else R!==null?(A=R.baseLanes|w,m.memoizedState=null):A=w,Ve(dl,jn),jn|=A;return fn(d,m,I,w),m.child}function H1(d,m){var w=m.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function Lp(d,m,w,A,I){var R=Rn(w)?qa:on.current;return R=rl(m,R),ll(m,I),w=Ip(d,m,w,A,R,I),A=Rp(),d!==null&&!Mn?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~I,Ms(d,m,I)):(Ke&&A&&cp(m),m.flags|=1,fn(d,m,w,I),m.child)}function z1(d,m,w,A,I){if(Rn(w)){var R=!0;Qu(m)}else R=!1;if(ll(m,I),m.stateNode===null)gc(d,m),N1(m,w,A),Np(m,w,A,I),A=!0;else if(d===null){var G=m.stateNode,Z=m.memoizedProps;G.props=Z;var Q=G.context,pt=w.contextType;typeof pt=="object"&&pt!==null?pt=ui(pt):(pt=Rn(w)?qa:on.current,pt=rl(m,pt));var xt=w.getDerivedStateFromProps,_t=typeof xt=="function"||typeof G.getSnapshotBeforeUpdate=="function";_t||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Z!==A||Q!==pt)&&O1(m,G,A,pt),ua=!1;var vt=m.memoizedState;G.state=vt,oc(m,A,G,I),Q=m.memoizedState,Z!==A||vt!==Q||In.current||ua?(typeof xt=="function"&&(Bp(m,w,xt,A),Q=m.memoizedState),(Z=ua||B1(m,w,Z,A,vt,Q,pt))?(_t||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(m.flags|=4194308)):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=A,m.memoizedState=Q),G.props=A,G.state=Q,G.context=pt,A=Z):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),A=!1)}else{G=m.stateNode,h1(d,m),Z=m.memoizedProps,pt=m.type===m.elementType?Z:bi(m.type,Z),G.props=pt,_t=m.pendingProps,vt=G.context,Q=w.contextType,typeof Q=="object"&&Q!==null?Q=ui(Q):(Q=Rn(w)?qa:on.current,Q=rl(m,Q));var Mt=w.getDerivedStateFromProps;(xt=typeof Mt=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Z!==_t||vt!==Q)&&O1(m,G,A,Q),ua=!1,vt=m.memoizedState,G.state=vt,oc(m,A,G,I);var Nt=m.memoizedState;Z!==_t||vt!==Nt||In.current||ua?(typeof Mt=="function"&&(Bp(m,w,Mt,A),Nt=m.memoizedState),(pt=ua||B1(m,w,pt,A,vt,Nt,Q)||!1)?(xt||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(A,Nt,Q),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(A,Nt,Q)),typeof G.componentDidUpdate=="function"&&(m.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof G.componentDidUpdate!="function"||Z===d.memoizedProps&&vt===d.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Z===d.memoizedProps&&vt===d.memoizedState||(m.flags|=1024),m.memoizedProps=A,m.memoizedState=Nt),G.props=A,G.state=Nt,G.context=Q,A=pt):(typeof G.componentDidUpdate!="function"||Z===d.memoizedProps&&vt===d.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Z===d.memoizedProps&&vt===d.memoizedState||(m.flags|=1024),A=!1)}return Up(d,m,w,A,R,I)}function Up(d,m,w,A,I,R){H1(d,m);var G=(m.flags&128)!==0;if(!A&&!G)return I&&Qx(m,w,!1),Ms(d,m,R);A=m.stateNode,xR.current=m;var Z=G&&typeof w.getDerivedStateFromError!="function"?null:A.render();return m.flags|=1,d!==null&&G?(m.child=al(m,d.child,null,R),m.child=al(m,null,Z,R)):fn(d,m,Z,R),m.memoizedState=A.state,I&&Qx(m,w,!0),m.child}function j1(d){var m=d.stateNode;m.pendingContext?Kx(d,m.pendingContext,m.pendingContext!==m.context):m.context&&Kx(d,m.context,!1),bp(d,m.containerInfo)}function q1(d,m,w,A,I){return sl(),mp(I),m.flags|=256,fn(d,m,w,A),m.child}var Vp={dehydrated:null,treeContext:null,retryLane:0};function Xp(d){return{baseLanes:d,cachePool:null,transitions:null}}function K1(d,m,w){var A=m.pendingProps,I=er.current,R=!1,G=(m.flags&128)!==0,Z;if((Z=G)||(Z=d!==null&&d.memoizedState===null?!1:(I&2)!==0),Z?(R=!0,m.flags&=-129):(d===null||d.memoizedState!==null)&&(I|=1),Ve(er,I&1),d===null)return pp(m),d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(m.mode&1?d.data==="$!"?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(G=A.children,d=A.fallback,R?(A=m.mode,R=m.child,G={mode:"hidden",children:G},!(A&1)&&R!==null?(R.childLanes=0,R.pendingProps=G):R=Ic(G,A,0,null),d=so(d,A,w,null),R.return=m,d.return=m,R.sibling=d,m.child=R,m.child.memoizedState=Xp(w),m.memoizedState=Vp,d):Gp(m,G));if(I=d.memoizedState,I!==null&&(Z=I.dehydrated,Z!==null))return wR(d,m,G,A,Z,I,w);if(R){R=A.fallback,G=m.mode,I=d.child,Z=I.sibling;var Q={mode:"hidden",children:A.children};return!(G&1)&&m.child!==I?(A=m.child,A.childLanes=0,A.pendingProps=Q,m.deletions=null):(A=va(I,Q),A.subtreeFlags=I.subtreeFlags&14680064),Z!==null?R=va(Z,R):(R=so(R,G,w,null),R.flags|=2),R.return=m,A.return=m,A.sibling=R,m.child=A,A=R,R=m.child,G=d.child.memoizedState,G=G===null?Xp(w):{baseLanes:G.baseLanes|w,cachePool:null,transitions:G.transitions},R.memoizedState=G,R.childLanes=d.childLanes&~w,m.memoizedState=Vp,A}return R=d.child,d=R.sibling,A=va(R,{mode:"visible",children:A.children}),!(m.mode&1)&&(A.lanes=w),A.return=m,A.sibling=null,d!==null&&(w=m.deletions,w===null?(m.deletions=[d],m.flags|=16):w.push(d)),m.child=A,m.memoizedState=null,A}function Gp(d,m){return m=Ic({mode:"visible",children:m},d.mode,0,null),m.return=d,d.child=m}function mc(d,m,w,A){return A!==null&&mp(A),al(m,d.child,null,w),d=Gp(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function wR(d,m,w,A,I,R,G){if(w)return m.flags&256?(m.flags&=-257,A=Op(Error(e(422))),mc(d,m,G,A)):m.memoizedState!==null?(m.child=d.child,m.flags|=128,null):(R=A.fallback,I=m.mode,A=Ic({mode:"visible",children:A.children},I,0,null),R=so(R,I,G,null),R.flags|=2,A.return=m,R.return=m,A.sibling=R,m.child=A,m.mode&1&&al(m,d.child,null,G),m.child.memoizedState=Xp(G),m.memoizedState=Vp,R);if(!(m.mode&1))return mc(d,m,G,null);if(I.data==="$!"){if(A=I.nextSibling&&I.nextSibling.dataset,A)var Z=A.dgst;return A=Z,R=Error(e(419)),A=Op(R,A,void 0),mc(d,m,G,A)}if(Z=(G&d.childLanes)!==0,Mn||Z){if(A=Xr,A!==null){switch(G&-G){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=I&(A.suspendedLanes|G)?0:I,I!==0&&I!==R.retryLane&&(R.retryLane=I,Is(d,I),Si(A,d,I,-1))}return im(),A=Op(Error(e(421))),mc(d,m,G,A)}return I.data==="$?"?(m.flags|=128,m.child=d.child,m=FR.bind(null,d),I._reactRetry=m,null):(d=R.treeContext,zn=aa(I.nextSibling),Hn=m,Ke=!0,_i=null,d!==null&&(li[hi++]=As,li[hi++]=Cs,li[hi++]=Ka,As=d.id,Cs=d.overflow,Ka=m),m=Gp(m,A.children),m.flags|=4096,m)}function Z1(d,m,w){d.lanes|=m;var A=d.alternate;A!==null&&(A.lanes|=m),xp(d.return,m,w)}function Yp(d,m,w,A,I){var R=d.memoizedState;R===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:A,tail:w,tailMode:I}:(R.isBackwards=m,R.rendering=null,R.renderingStartTime=0,R.last=A,R.tail=w,R.tailMode=I)}function Q1(d,m,w){var A=m.pendingProps,I=A.revealOrder,R=A.tail;if(fn(d,m,A.children,w),A=er.current,A&2)A=A&1|2,m.flags|=128;else{if(d!==null&&d.flags&128)t:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Z1(d,w,m);else if(d.tag===19)Z1(d,w,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break t;for(;d.sibling===null;){if(d.return===null||d.return===m)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}A&=1}if(Ve(er,A),!(m.mode&1))m.memoizedState=null;else switch(I){case"forwards":for(w=m.child,I=null;w!==null;)d=w.alternate,d!==null&&lc(d)===null&&(I=w),w=w.sibling;w=I,w===null?(I=m.child,m.child=null):(I=w.sibling,w.sibling=null),Yp(m,!1,I,w,R);break;case"backwards":for(w=null,I=m.child,m.child=null;I!==null;){if(d=I.alternate,d!==null&&lc(d)===null){m.child=I;break}d=I.sibling,I.sibling=w,w=I,I=d}Yp(m,!0,w,null,R);break;case"together":Yp(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function gc(d,m){!(m.mode&1)&&d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2)}function Ms(d,m,w){if(d!==null&&(m.dependencies=d.dependencies),eo|=m.lanes,!(w&m.childLanes))return null;if(d!==null&&m.child!==d.child)throw Error(e(153));if(m.child!==null){for(d=m.child,w=va(d,d.pendingProps),m.child=w,w.return=m;d.sibling!==null;)d=d.sibling,w=w.sibling=va(d,d.pendingProps),w.return=m;w.sibling=null}return m.child}function _R(d,m,w){switch(m.tag){case 3:j1(m),sl();break;case 5:d1(m);break;case 1:Rn(m.type)&&Qu(m);break;case 4:bp(m,m.stateNode.containerInfo);break;case 10:var A=m.type._context,I=m.memoizedProps.value;Ve(ic,A._currentValue),A._currentValue=I;break;case 13:if(A=m.memoizedState,A!==null)return A.dehydrated!==null?(Ve(er,er.current&1),m.flags|=128,null):w&m.child.childLanes?K1(d,m,w):(Ve(er,er.current&1),d=Ms(d,m,w),d!==null?d.sibling:null);Ve(er,er.current&1);break;case 19:if(A=(w&m.childLanes)!==0,d.flags&128){if(A)return Q1(d,m,w);m.flags|=128}if(I=m.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),Ve(er,er.current),A)break;return null;case 22:case 23:return m.lanes=0,W1(d,m,w)}return Ms(d,m,w)}var J1,$p,tw,ew;J1=function(d,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)d.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},$p=function(){},tw=function(d,m,w,A){var I=d.memoizedProps;if(I!==A){d=m.stateNode,Ja(es.current);var R=null;switch(w){case"input":I=Rt(d,I),A=Rt(d,A),R=[];break;case"select":I=D({},I,{value:void 0}),A=D({},A,{value:void 0}),R=[];break;case"textarea":I=ee(d,I),A=ee(d,A),R=[];break;default:typeof I.onClick!="function"&&typeof A.onClick=="function"&&(d.onclick=qu)}ht(w,A);var G;w=null;for(pt in I)if(!A.hasOwnProperty(pt)&&I.hasOwnProperty(pt)&&I[pt]!=null)if(pt==="style"){var Z=I[pt];for(G in Z)Z.hasOwnProperty(G)&&(w||(w={}),w[G]="")}else pt!=="dangerouslySetInnerHTML"&&pt!=="children"&&pt!=="suppressContentEditableWarning"&&pt!=="suppressHydrationWarning"&&pt!=="autoFocus"&&(n.hasOwnProperty(pt)?R||(R=[]):(R=R||[]).push(pt,null));for(pt in A){var Q=A[pt];if(Z=I!=null?I[pt]:void 0,A.hasOwnProperty(pt)&&Q!==Z&&(Q!=null||Z!=null))if(pt==="style")if(Z){for(G in Z)!Z.hasOwnProperty(G)||Q&&Q.hasOwnProperty(G)||(w||(w={}),w[G]="");for(G in Q)Q.hasOwnProperty(G)&&Z[G]!==Q[G]&&(w||(w={}),w[G]=Q[G])}else w||(R||(R=[]),R.push(pt,w)),w=Q;else pt==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Z=Z?Z.__html:void 0,Q!=null&&Z!==Q&&(R=R||[]).push(pt,Q)):pt==="children"?typeof Q!="string"&&typeof Q!="number"||(R=R||[]).push(pt,""+Q):pt!=="suppressContentEditableWarning"&&pt!=="suppressHydrationWarning"&&(n.hasOwnProperty(pt)?(Q!=null&&pt==="onScroll"&&He("scroll",d),R||Z===Q||(R=[])):(R=R||[]).push(pt,Q))}w&&(R=R||[]).push("style",w);var pt=R;(m.updateQueue=pt)&&(m.flags|=4)}},ew=function(d,m,w,A){w!==A&&(m.flags|=4)};function Ih(d,m){if(!Ke)switch(d.tailMode){case"hidden":m=d.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var A=null;w!==null;)w.alternate!==null&&(A=w),w=w.sibling;A===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:A.sibling=null}}function hn(d){var m=d.alternate!==null&&d.alternate.child===d.child,w=0,A=0;if(m)for(var I=d.child;I!==null;)w|=I.lanes|I.childLanes,A|=I.subtreeFlags&14680064,A|=I.flags&14680064,I.return=d,I=I.sibling;else for(I=d.child;I!==null;)w|=I.lanes|I.childLanes,A|=I.subtreeFlags,A|=I.flags,I.return=d,I=I.sibling;return d.subtreeFlags|=A,d.childLanes=w,m}function bR(d,m,w){var A=m.pendingProps;switch(dp(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(m),null;case 1:return Rn(m.type)&&Zu(),hn(m),null;case 3:return A=m.stateNode,hl(),ze(In),ze(on),Sp(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(d===null||d.child===null)&&(rc(m)?m.flags|=4:d===null||d.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,_i!==null&&(em(_i),_i=null))),$p(d,m),hn(m),null;case 5:Ep(m);var I=Ja(Eh.current);if(w=m.type,d!==null&&m.stateNode!=null)tw(d,m,w,A,I),d.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!A){if(m.stateNode===null)throw Error(e(166));return hn(m),null}if(d=Ja(es.current),rc(m)){A=m.stateNode,w=m.type;var R=m.memoizedProps;switch(A[ts]=m,A[yh]=R,d=(m.mode&1)!==0,w){case"dialog":He("cancel",A),He("close",A);break;case"iframe":case"object":case"embed":He("load",A);break;case"video":case"audio":for(I=0;I<mh.length;I++)He(mh[I],A);break;case"source":He("error",A);break;case"img":case"image":case"link":He("error",A),He("load",A);break;case"details":He("toggle",A);break;case"input":it(A,R),He("invalid",A);break;case"select":A._wrapperState={wasMultiple:!!R.multiple},He("invalid",A);break;case"textarea":se(A,R),He("invalid",A)}ht(w,R),I=null;for(var G in R)if(R.hasOwnProperty(G)){var Z=R[G];G==="children"?typeof Z=="string"?A.textContent!==Z&&(R.suppressHydrationWarning!==!0&&ju(A.textContent,Z,d),I=["children",Z]):typeof Z=="number"&&A.textContent!==""+Z&&(R.suppressHydrationWarning!==!0&&ju(A.textContent,Z,d),I=["children",""+Z]):n.hasOwnProperty(G)&&Z!=null&&G==="onScroll"&&He("scroll",A)}switch(w){case"input":gt(A),zt(A,R,!0);break;case"textarea":gt(A),Bt(A);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(A.onclick=qu)}A=I,m.updateQueue=A,A!==null&&(m.flags|=4)}else{G=I.nodeType===9?I:I.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=me(w)),d==="http://www.w3.org/1999/xhtml"?w==="script"?(d=G.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof A.is=="string"?d=G.createElement(w,{is:A.is}):(d=G.createElement(w),w==="select"&&(G=d,A.multiple?G.multiple=!0:A.size&&(G.size=A.size))):d=G.createElementNS(d,w),d[ts]=m,d[yh]=A,J1(d,m,!1,!1),m.stateNode=d;t:{switch(G=ie(w,A),w){case"dialog":He("cancel",d),He("close",d),I=A;break;case"iframe":case"object":case"embed":He("load",d),I=A;break;case"video":case"audio":for(I=0;I<mh.length;I++)He(mh[I],d);I=A;break;case"source":He("error",d),I=A;break;case"img":case"image":case"link":He("error",d),He("load",d),I=A;break;case"details":He("toggle",d),I=A;break;case"input":it(d,A),I=Rt(d,A),He("invalid",d);break;case"option":I=A;break;case"select":d._wrapperState={wasMultiple:!!A.multiple},I=D({},A,{value:void 0}),He("invalid",d);break;case"textarea":se(d,A),I=ee(d,A),He("invalid",d);break;default:I=A}ht(w,I),Z=I;for(R in Z)if(Z.hasOwnProperty(R)){var Q=Z[R];R==="style"?Ie(d,Q):R==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&We(d,Q)):R==="children"?typeof Q=="string"?(w!=="textarea"||Q!=="")&&an(d,Q):typeof Q=="number"&&an(d,""+Q):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(n.hasOwnProperty(R)?Q!=null&&R==="onScroll"&&He("scroll",d):Q!=null&&b(d,R,Q,G))}switch(w){case"input":gt(d),zt(d,A,!1);break;case"textarea":gt(d),Bt(d);break;case"option":A.value!=null&&d.setAttribute("value",""+ft(A.value));break;case"select":d.multiple=!!A.multiple,R=A.value,R!=null?Qt(d,!!A.multiple,R,!1):A.defaultValue!=null&&Qt(d,!!A.multiple,A.defaultValue,!0);break;default:typeof I.onClick=="function"&&(d.onclick=qu)}switch(w){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break t;case"img":A=!0;break t;default:A=!1}}A&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return hn(m),null;case 6:if(d&&m.stateNode!=null)ew(d,m,d.memoizedProps,A);else{if(typeof A!="string"&&m.stateNode===null)throw Error(e(166));if(w=Ja(Eh.current),Ja(es.current),rc(m)){if(A=m.stateNode,w=m.memoizedProps,A[ts]=m,(R=A.nodeValue!==w)&&(d=Hn,d!==null))switch(d.tag){case 3:ju(A.nodeValue,w,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&ju(A.nodeValue,w,(d.mode&1)!==0)}R&&(m.flags|=4)}else A=(w.nodeType===9?w:w.ownerDocument).createTextNode(A),A[ts]=m,m.stateNode=A}return hn(m),null;case 13:if(ze(er),A=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(Ke&&zn!==null&&m.mode&1&&!(m.flags&128))i1(),sl(),m.flags|=98560,R=!1;else if(R=rc(m),A!==null&&A.dehydrated!==null){if(d===null){if(!R)throw Error(e(318));if(R=m.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(e(317));R[ts]=m}else sl(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;hn(m),R=!1}else _i!==null&&(em(_i),_i=null),R=!0;if(!R)return m.flags&65536?m:null}return m.flags&128?(m.lanes=w,m):(A=A!==null,A!==(d!==null&&d.memoizedState!==null)&&A&&(m.child.flags|=8192,m.mode&1&&(d===null||er.current&1?Fr===0&&(Fr=3):im())),m.updateQueue!==null&&(m.flags|=4),hn(m),null);case 4:return hl(),$p(d,m),d===null&&gh(m.stateNode.containerInfo),hn(m),null;case 10:return yp(m.type._context),hn(m),null;case 17:return Rn(m.type)&&Zu(),hn(m),null;case 19:if(ze(er),R=m.memoizedState,R===null)return hn(m),null;if(A=(m.flags&128)!==0,G=R.rendering,G===null)if(A)Ih(R,!1);else{if(Fr!==0||d!==null&&d.flags&128)for(d=m.child;d!==null;){if(G=lc(d),G!==null){for(m.flags|=128,Ih(R,!1),A=G.updateQueue,A!==null&&(m.updateQueue=A,m.flags|=4),m.subtreeFlags=0,A=w,w=m.child;w!==null;)R=w,d=A,R.flags&=14680066,G=R.alternate,G===null?(R.childLanes=0,R.lanes=d,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=G.childLanes,R.lanes=G.lanes,R.child=G.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=G.memoizedProps,R.memoizedState=G.memoizedState,R.updateQueue=G.updateQueue,R.type=G.type,d=G.dependencies,R.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),w=w.sibling;return Ve(er,er.current&1|2),m.child}d=d.sibling}R.tail!==null&&gr()>fl&&(m.flags|=128,A=!0,Ih(R,!1),m.lanes=4194304)}else{if(!A)if(d=lc(G),d!==null){if(m.flags|=128,A=!0,w=d.updateQueue,w!==null&&(m.updateQueue=w,m.flags|=4),Ih(R,!0),R.tail===null&&R.tailMode==="hidden"&&!G.alternate&&!Ke)return hn(m),null}else 2*gr()-R.renderingStartTime>fl&&w!==1073741824&&(m.flags|=128,A=!0,Ih(R,!1),m.lanes=4194304);R.isBackwards?(G.sibling=m.child,m.child=G):(w=R.last,w!==null?w.sibling=G:m.child=G,R.last=G)}return R.tail!==null?(m=R.tail,R.rendering=m,R.tail=m.sibling,R.renderingStartTime=gr(),m.sibling=null,w=er.current,Ve(er,A?w&1|2:w&1),m):(hn(m),null);case 22:case 23:return nm(),A=m.memoizedState!==null,d!==null&&d.memoizedState!==null!==A&&(m.flags|=8192),A&&m.mode&1?jn&1073741824&&(hn(m),m.subtreeFlags&6&&(m.flags|=8192)):hn(m),null;case 24:return null;case 25:return null}throw Error(e(156,m.tag))}function ER(d,m){switch(dp(m),m.tag){case 1:return Rn(m.type)&&Zu(),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return hl(),ze(In),ze(on),Sp(),d=m.flags,d&65536&&!(d&128)?(m.flags=d&-65537|128,m):null;case 5:return Ep(m),null;case 13:if(ze(er),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(e(340));sl()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return ze(er),null;case 4:return hl(),null;case 10:return yp(m.type._context),null;case 22:case 23:return nm(),null;case 24:return null;default:return null}}var vc=!1,un=!1,TR=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function cl(d,m){var w=d.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(A){dr(d,m,A)}else w.current=null}function Wp(d,m,w){try{w()}catch(A){dr(d,m,A)}}var rw=!1;function SR(d,m){if(np=Du,d=Bx(),qf(d)){if("selectionStart"in d)var w={start:d.selectionStart,end:d.selectionEnd};else t:{w=(w=d.ownerDocument)&&w.defaultView||window;var A=w.getSelection&&w.getSelection();if(A&&A.rangeCount!==0){w=A.anchorNode;var I=A.anchorOffset,R=A.focusNode;A=A.focusOffset;try{w.nodeType,R.nodeType}catch{w=null;break t}var G=0,Z=-1,Q=-1,pt=0,xt=0,_t=d,vt=null;e:for(;;){for(var Mt;_t!==w||I!==0&&_t.nodeType!==3||(Z=G+I),_t!==R||A!==0&&_t.nodeType!==3||(Q=G+A),_t.nodeType===3&&(G+=_t.nodeValue.length),(Mt=_t.firstChild)!==null;)vt=_t,_t=Mt;for(;;){if(_t===d)break e;if(vt===w&&++pt===I&&(Z=G),vt===R&&++xt===A&&(Q=G),(Mt=_t.nextSibling)!==null)break;_t=vt,vt=_t.parentNode}_t=Mt}w=Z===-1||Q===-1?null:{start:Z,end:Q}}else w=null}w=w||{start:0,end:0}}else w=null;for(ip={focusedElem:d,selectionRange:w},Du=!1,Ft=m;Ft!==null;)if(m=Ft,d=m.child,(m.subtreeFlags&1028)!==0&&d!==null)d.return=m,Ft=d;else for(;Ft!==null;){m=Ft;try{var Nt=m.alternate;if(m.flags&1024)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Nt!==null){var Lt=Nt.memoizedProps,vr=Nt.memoizedState,nt=m.stateNode,J=nt.getSnapshotBeforeUpdate(m.elementType===m.type?Lt:bi(m.type,Lt),vr);nt.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var ot=m.stateNode.containerInfo;ot.nodeType===1?ot.textContent="":ot.nodeType===9&&ot.documentElement&&ot.removeChild(ot.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(Tt){dr(m,m.return,Tt)}if(d=m.sibling,d!==null){d.return=m.return,Ft=d;break}Ft=m.return}return Nt=rw,rw=!1,Nt}function Rh(d,m,w){var A=m.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var I=A=A.next;do{if((I.tag&d)===d){var R=I.destroy;I.destroy=void 0,R!==void 0&&Wp(m,w,R)}I=I.next}while(I!==A)}}function yc(d,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&d)===d){var A=w.create;w.destroy=A()}w=w.next}while(w!==m)}}function Hp(d){var m=d.ref;if(m!==null){var w=d.stateNode;switch(d.tag){case 5:d=w;break;default:d=w}typeof m=="function"?m(d):m.current=d}}function nw(d){var m=d.alternate;m!==null&&(d.alternate=null,nw(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&(delete m[ts],delete m[yh],delete m[lp],delete m[oR],delete m[lR])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function iw(d){return d.tag===5||d.tag===3||d.tag===4}function sw(d){t:for(;;){for(;d.sibling===null;){if(d.return===null||iw(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue t;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function zp(d,m,w){var A=d.tag;if(A===5||A===6)d=d.stateNode,m?w.nodeType===8?w.parentNode.insertBefore(d,m):w.insertBefore(d,m):(w.nodeType===8?(m=w.parentNode,m.insertBefore(d,w)):(m=w,m.appendChild(d)),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=qu));else if(A!==4&&(d=d.child,d!==null))for(zp(d,m,w),d=d.sibling;d!==null;)zp(d,m,w),d=d.sibling}function jp(d,m,w){var A=d.tag;if(A===5||A===6)d=d.stateNode,m?w.insertBefore(d,m):w.appendChild(d);else if(A!==4&&(d=d.child,d!==null))for(jp(d,m,w),d=d.sibling;d!==null;)jp(d,m,w),d=d.sibling}var Kr=null,Ei=!1;function da(d,m,w){for(w=w.child;w!==null;)aw(d,m,w),w=w.sibling}function aw(d,m,w){if(Ji&&typeof Ji.onCommitFiberUnmount=="function")try{Ji.onCommitFiberUnmount(Pu,w)}catch{}switch(w.tag){case 5:un||cl(w,m);case 6:var A=Kr,I=Ei;Kr=null,da(d,m,w),Kr=A,Ei=I,Kr!==null&&(Ei?(d=Kr,w=w.stateNode,d.nodeType===8?d.parentNode.removeChild(w):d.removeChild(w)):Kr.removeChild(w.stateNode));break;case 18:Kr!==null&&(Ei?(d=Kr,w=w.stateNode,d.nodeType===8?op(d.parentNode,w):d.nodeType===1&&op(d,w),oh(d)):op(Kr,w.stateNode));break;case 4:A=Kr,I=Ei,Kr=w.stateNode.containerInfo,Ei=!0,da(d,m,w),Kr=A,Ei=I;break;case 0:case 11:case 14:case 15:if(!un&&(A=w.updateQueue,A!==null&&(A=A.lastEffect,A!==null))){I=A=A.next;do{var R=I,G=R.destroy;R=R.tag,G!==void 0&&(R&2||R&4)&&Wp(w,m,G),I=I.next}while(I!==A)}da(d,m,w);break;case 1:if(!un&&(cl(w,m),A=w.stateNode,typeof A.componentWillUnmount=="function"))try{A.props=w.memoizedProps,A.state=w.memoizedState,A.componentWillUnmount()}catch(Z){dr(w,m,Z)}da(d,m,w);break;case 21:da(d,m,w);break;case 22:w.mode&1?(un=(A=un)||w.memoizedState!==null,da(d,m,w),un=A):da(d,m,w);break;default:da(d,m,w)}}function ow(d){var m=d.updateQueue;if(m!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new TR),m.forEach(function(A){var I=BR.bind(null,d,A);w.has(A)||(w.add(A),A.then(I,I))})}}function Ti(d,m){var w=m.deletions;if(w!==null)for(var A=0;A<w.length;A++){var I=w[A];try{var R=d,G=m,Z=G;t:for(;Z!==null;){switch(Z.tag){case 5:Kr=Z.stateNode,Ei=!1;break t;case 3:Kr=Z.stateNode.containerInfo,Ei=!0;break t;case 4:Kr=Z.stateNode.containerInfo,Ei=!0;break t}Z=Z.return}if(Kr===null)throw Error(e(160));aw(R,G,I),Kr=null,Ei=!1;var Q=I.alternate;Q!==null&&(Q.return=null),I.return=null}catch(pt){dr(I,m,pt)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)lw(m,d),m=m.sibling}function lw(d,m){var w=d.alternate,A=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Ti(m,d),ns(d),A&4){try{Rh(3,d,d.return),yc(3,d)}catch(Lt){dr(d,d.return,Lt)}try{Rh(5,d,d.return)}catch(Lt){dr(d,d.return,Lt)}}break;case 1:Ti(m,d),ns(d),A&512&&w!==null&&cl(w,w.return);break;case 5:if(Ti(m,d),ns(d),A&512&&w!==null&&cl(w,w.return),d.flags&32){var I=d.stateNode;try{an(I,"")}catch(Lt){dr(d,d.return,Lt)}}if(A&4&&(I=d.stateNode,I!=null)){var R=d.memoizedProps,G=w!==null?w.memoizedProps:R,Z=d.type,Q=d.updateQueue;if(d.updateQueue=null,Q!==null)try{Z==="input"&&R.type==="radio"&&R.name!=null&&ut(I,R),ie(Z,G);var pt=ie(Z,R);for(G=0;G<Q.length;G+=2){var xt=Q[G],_t=Q[G+1];xt==="style"?Ie(I,_t):xt==="dangerouslySetInnerHTML"?We(I,_t):xt==="children"?an(I,_t):b(I,xt,_t,pt)}switch(Z){case"input":Ct(I,R);break;case"textarea":Be(I,R);break;case"select":var vt=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!R.multiple;var Mt=R.value;Mt!=null?Qt(I,!!R.multiple,Mt,!1):vt!==!!R.multiple&&(R.defaultValue!=null?Qt(I,!!R.multiple,R.defaultValue,!0):Qt(I,!!R.multiple,R.multiple?[]:"",!1))}I[yh]=R}catch(Lt){dr(d,d.return,Lt)}}break;case 6:if(Ti(m,d),ns(d),A&4){if(d.stateNode===null)throw Error(e(162));I=d.stateNode,R=d.memoizedProps;try{I.nodeValue=R}catch(Lt){dr(d,d.return,Lt)}}break;case 3:if(Ti(m,d),ns(d),A&4&&w!==null&&w.memoizedState.isDehydrated)try{oh(m.containerInfo)}catch(Lt){dr(d,d.return,Lt)}break;case 4:Ti(m,d),ns(d);break;case 13:Ti(m,d),ns(d),I=d.child,I.flags&8192&&(R=I.memoizedState!==null,I.stateNode.isHidden=R,!R||I.alternate!==null&&I.alternate.memoizedState!==null||(Zp=gr())),A&4&&ow(d);break;case 22:if(xt=w!==null&&w.memoizedState!==null,d.mode&1?(un=(pt=un)||xt,Ti(m,d),un=pt):Ti(m,d),ns(d),A&8192){if(pt=d.memoizedState!==null,(d.stateNode.isHidden=pt)&&!xt&&d.mode&1)for(Ft=d,xt=d.child;xt!==null;){for(_t=Ft=xt;Ft!==null;){switch(vt=Ft,Mt=vt.child,vt.tag){case 0:case 11:case 14:case 15:Rh(4,vt,vt.return);break;case 1:cl(vt,vt.return);var Nt=vt.stateNode;if(typeof Nt.componentWillUnmount=="function"){A=vt,w=vt.return;try{m=A,Nt.props=m.memoizedProps,Nt.state=m.memoizedState,Nt.componentWillUnmount()}catch(Lt){dr(A,w,Lt)}}break;case 5:cl(vt,vt.return);break;case 22:if(vt.memoizedState!==null){cw(_t);continue}}Mt!==null?(Mt.return=vt,Ft=Mt):cw(_t)}xt=xt.sibling}t:for(xt=null,_t=d;;){if(_t.tag===5){if(xt===null){xt=_t;try{I=_t.stateNode,pt?(R=I.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(Z=_t.stateNode,Q=_t.memoizedProps.style,G=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,Z.style.display=oi("display",G))}catch(Lt){dr(d,d.return,Lt)}}}else if(_t.tag===6){if(xt===null)try{_t.stateNode.nodeValue=pt?"":_t.memoizedProps}catch(Lt){dr(d,d.return,Lt)}}else if((_t.tag!==22&&_t.tag!==23||_t.memoizedState===null||_t===d)&&_t.child!==null){_t.child.return=_t,_t=_t.child;continue}if(_t===d)break t;for(;_t.sibling===null;){if(_t.return===null||_t.return===d)break t;xt===_t&&(xt=null),_t=_t.return}xt===_t&&(xt=null),_t.sibling.return=_t.return,_t=_t.sibling}}break;case 19:Ti(m,d),ns(d),A&4&&ow(d);break;case 21:break;default:Ti(m,d),ns(d)}}function ns(d){var m=d.flags;if(m&2){try{t:{for(var w=d.return;w!==null;){if(iw(w)){var A=w;break t}w=w.return}throw Error(e(160))}switch(A.tag){case 5:var I=A.stateNode;A.flags&32&&(an(I,""),A.flags&=-33);var R=sw(d);jp(d,R,I);break;case 3:case 4:var G=A.stateNode.containerInfo,Z=sw(d);zp(d,Z,G);break;default:throw Error(e(161))}}catch(Q){dr(d,d.return,Q)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function AR(d,m,w){Ft=d,hw(d)}function hw(d,m,w){for(var A=(d.mode&1)!==0;Ft!==null;){var I=Ft,R=I.child;if(I.tag===22&&A){var G=I.memoizedState!==null||vc;if(!G){var Z=I.alternate,Q=Z!==null&&Z.memoizedState!==null||un;Z=vc;var pt=un;if(vc=G,(un=Q)&&!pt)for(Ft=I;Ft!==null;)G=Ft,Q=G.child,G.tag===22&&G.memoizedState!==null?dw(I):Q!==null?(Q.return=G,Ft=Q):dw(I);for(;R!==null;)Ft=R,hw(R),R=R.sibling;Ft=I,vc=Z,un=pt}uw(d)}else I.subtreeFlags&8772&&R!==null?(R.return=I,Ft=R):uw(d)}}function uw(d){for(;Ft!==null;){var m=Ft;if(m.flags&8772){var w=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:un||yc(5,m);break;case 1:var A=m.stateNode;if(m.flags&4&&!un)if(w===null)A.componentDidMount();else{var I=m.elementType===m.type?w.memoizedProps:bi(m.type,w.memoizedProps);A.componentDidUpdate(I,w.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var R=m.updateQueue;R!==null&&c1(m,R,A);break;case 3:var G=m.updateQueue;if(G!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=m.child.stateNode;break;case 1:w=m.child.stateNode}c1(m,G,w)}break;case 5:var Z=m.stateNode;if(w===null&&m.flags&4){w=Z;var Q=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&w.focus();break;case"img":Q.src&&(w.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var pt=m.alternate;if(pt!==null){var xt=pt.memoizedState;if(xt!==null){var _t=xt.dehydrated;_t!==null&&oh(_t)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}un||m.flags&512&&Hp(m)}catch(vt){dr(m,m.return,vt)}}if(m===d){Ft=null;break}if(w=m.sibling,w!==null){w.return=m.return,Ft=w;break}Ft=m.return}}function cw(d){for(;Ft!==null;){var m=Ft;if(m===d){Ft=null;break}var w=m.sibling;if(w!==null){w.return=m.return,Ft=w;break}Ft=m.return}}function dw(d){for(;Ft!==null;){var m=Ft;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{yc(4,m)}catch(Q){dr(m,w,Q)}break;case 1:var A=m.stateNode;if(typeof A.componentDidMount=="function"){var I=m.return;try{A.componentDidMount()}catch(Q){dr(m,I,Q)}}var R=m.return;try{Hp(m)}catch(Q){dr(m,R,Q)}break;case 5:var G=m.return;try{Hp(m)}catch(Q){dr(m,G,Q)}}}catch(Q){dr(m,m.return,Q)}if(m===d){Ft=null;break}var Z=m.sibling;if(Z!==null){Z.return=m.return,Ft=Z;break}Ft=m.return}}var CR=Math.ceil,xc=E.ReactCurrentDispatcher,qp=E.ReactCurrentOwner,di=E.ReactCurrentBatchConfig,Re=0,Xr=null,Ir=null,Zr=0,jn=0,dl=oa(0),Fr=0,Mh=null,eo=0,wc=0,Kp=0,Ph=null,Pn=null,Zp=0,fl=1/0,Ps=null,_c=!1,Qp=null,fa=null,bc=!1,pa=null,Ec=0,kh=0,Jp=null,Tc=-1,Sc=0;function pn(){return Re&6?gr():Tc!==-1?Tc:Tc=gr()}function ma(d){return d.mode&1?Re&2&&Zr!==0?Zr&-Zr:uR.transition!==null?(Sc===0&&(Sc=sx()),Sc):(d=De,d!==0||(d=window.event,d=d===void 0?16:px(d.type)),d):1}function Si(d,m,w,A){if(50<kh)throw kh=0,Jp=null,Error(e(185));rh(d,w,A),(!(Re&2)||d!==Xr)&&(d===Xr&&(!(Re&2)&&(wc|=w),Fr===4&&ga(d,Zr)),kn(d,A),w===1&&Re===0&&!(m.mode&1)&&(fl=gr()+500,Ju&&ha()))}function kn(d,m){var w=d.callbackNode;uI(d,m);var A=Bu(d,d===Xr?Zr:0);if(A===0)w!==null&&rx(w),d.callbackNode=null,d.callbackPriority=0;else if(m=A&-A,d.callbackPriority!==m){if(w!=null&&rx(w),m===1)d.tag===0?hR(pw.bind(null,d)):Jx(pw.bind(null,d)),sR(function(){!(Re&6)&&ha()}),w=null;else{switch(ax(A)){case 1:w=kf;break;case 4:w=nx;break;case 16:w=Mu;break;case 536870912:w=ix;break;default:w=Mu}w=bw(w,fw.bind(null,d))}d.callbackPriority=m,d.callbackNode=w}}function fw(d,m){if(Tc=-1,Sc=0,Re&6)throw Error(e(327));var w=d.callbackNode;if(pl()&&d.callbackNode!==w)return null;var A=Bu(d,d===Xr?Zr:0);if(A===0)return null;if(A&30||A&d.expiredLanes||m)m=Ac(d,A);else{m=A;var I=Re;Re|=2;var R=gw();(Xr!==d||Zr!==m)&&(Ps=null,fl=gr()+500,no(d,m));do try{MR();break}catch(Z){mw(d,Z)}while(!0);vp(),xc.current=R,Re=I,Ir!==null?m=0:(Xr=null,Zr=0,m=Fr)}if(m!==0){if(m===2&&(I=Ff(d),I!==0&&(A=I,m=tm(d,I))),m===1)throw w=Mh,no(d,0),ga(d,A),kn(d,gr()),w;if(m===6)ga(d,A);else{if(I=d.current.alternate,!(A&30)&&!IR(I)&&(m=Ac(d,A),m===2&&(R=Ff(d),R!==0&&(A=R,m=tm(d,R))),m===1))throw w=Mh,no(d,0),ga(d,A),kn(d,gr()),w;switch(d.finishedWork=I,d.finishedLanes=A,m){case 0:case 1:throw Error(e(345));case 2:io(d,Pn,Ps);break;case 3:if(ga(d,A),(A&130023424)===A&&(m=Zp+500-gr(),10<m)){if(Bu(d,0)!==0)break;if(I=d.suspendedLanes,(I&A)!==A){pn(),d.pingedLanes|=d.suspendedLanes&I;break}d.timeoutHandle=ap(io.bind(null,d,Pn,Ps),m);break}io(d,Pn,Ps);break;case 4:if(ga(d,A),(A&4194240)===A)break;for(m=d.eventTimes,I=-1;0<A;){var G=31-xi(A);R=1<<G,G=m[G],G>I&&(I=G),A&=~R}if(A=I,A=gr()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*CR(A/1960))-A,10<A){d.timeoutHandle=ap(io.bind(null,d,Pn,Ps),A);break}io(d,Pn,Ps);break;case 5:io(d,Pn,Ps);break;default:throw Error(e(329))}}}return kn(d,gr()),d.callbackNode===w?fw.bind(null,d):null}function tm(d,m){var w=Ph;return d.current.memoizedState.isDehydrated&&(no(d,m).flags|=256),d=Ac(d,m),d!==2&&(m=Pn,Pn=w,m!==null&&em(m)),d}function em(d){Pn===null?Pn=d:Pn.push.apply(Pn,d)}function IR(d){for(var m=d;;){if(m.flags&16384){var w=m.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var A=0;A<w.length;A++){var I=w[A],R=I.getSnapshot;I=I.value;try{if(!wi(R(),I))return!1}catch{return!1}}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function ga(d,m){for(m&=~Kp,m&=~wc,d.suspendedLanes|=m,d.pingedLanes&=~m,d=d.expirationTimes;0<m;){var w=31-xi(m),A=1<<w;d[w]=-1,m&=~A}}function pw(d){if(Re&6)throw Error(e(327));pl();var m=Bu(d,0);if(!(m&1))return kn(d,gr()),null;var w=Ac(d,m);if(d.tag!==0&&w===2){var A=Ff(d);A!==0&&(m=A,w=tm(d,A))}if(w===1)throw w=Mh,no(d,0),ga(d,m),kn(d,gr()),w;if(w===6)throw Error(e(345));return d.finishedWork=d.current.alternate,d.finishedLanes=m,io(d,Pn,Ps),kn(d,gr()),null}function rm(d,m){var w=Re;Re|=1;try{return d(m)}finally{Re=w,Re===0&&(fl=gr()+500,Ju&&ha())}}function ro(d){pa!==null&&pa.tag===0&&!(Re&6)&&pl();var m=Re;Re|=1;var w=di.transition,A=De;try{if(di.transition=null,De=1,d)return d()}finally{De=A,di.transition=w,Re=m,!(Re&6)&&ha()}}function nm(){jn=dl.current,ze(dl)}function no(d,m){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;if(w!==-1&&(d.timeoutHandle=-1,iR(w)),Ir!==null)for(w=Ir.return;w!==null;){var A=w;switch(dp(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Zu();break;case 3:hl(),ze(In),ze(on),Sp();break;case 5:Ep(A);break;case 4:hl();break;case 13:ze(er);break;case 19:ze(er);break;case 10:yp(A.type._context);break;case 22:case 23:nm()}w=w.return}if(Xr=d,Ir=d=va(d.current,null),Zr=jn=m,Fr=0,Mh=null,Kp=wc=eo=0,Pn=Ph=null,Qa!==null){for(m=0;m<Qa.length;m++)if(w=Qa[m],A=w.interleaved,A!==null){w.interleaved=null;var I=A.next,R=w.pending;if(R!==null){var G=R.next;R.next=I,A.next=G}w.pending=A}Qa=null}return d}function mw(d,m){do{var w=Ir;try{if(vp(),hc.current=fc,uc){for(var A=rr.memoizedState;A!==null;){var I=A.queue;I!==null&&(I.pending=null),A=A.next}uc=!1}if(to=0,Vr=kr=rr=null,Th=!1,Sh=0,qp.current=null,w===null||w.return===null){Fr=1,Mh=m,Ir=null;break}t:{var R=d,G=w.return,Z=w,Q=m;if(m=Zr,Z.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var pt=Q,xt=Z,_t=xt.tag;if(!(xt.mode&1)&&(_t===0||_t===11||_t===15)){var vt=xt.alternate;vt?(xt.updateQueue=vt.updateQueue,xt.memoizedState=vt.memoizedState,xt.lanes=vt.lanes):(xt.updateQueue=null,xt.memoizedState=null)}var Mt=V1(G);if(Mt!==null){Mt.flags&=-257,X1(Mt,G,Z,R,m),Mt.mode&1&&U1(R,pt,m),m=Mt,Q=pt;var Nt=m.updateQueue;if(Nt===null){var Lt=new Set;Lt.add(Q),m.updateQueue=Lt}else Nt.add(Q);break t}else{if(!(m&1)){U1(R,pt,m),im();break t}Q=Error(e(426))}}else if(Ke&&Z.mode&1){var vr=V1(G);if(vr!==null){!(vr.flags&65536)&&(vr.flags|=256),X1(vr,G,Z,R,m),mp(ul(Q,Z));break t}}R=Q=ul(Q,Z),Fr!==4&&(Fr=2),Ph===null?Ph=[R]:Ph.push(R),R=G;do{switch(R.tag){case 3:R.flags|=65536,m&=-m,R.lanes|=m;var nt=D1(R,Q,m);u1(R,nt);break t;case 1:Z=Q;var J=R.type,ot=R.stateNode;if(!(R.flags&128)&&(typeof J.getDerivedStateFromError=="function"||ot!==null&&typeof ot.componentDidCatch=="function"&&(fa===null||!fa.has(ot)))){R.flags|=65536,m&=-m,R.lanes|=m;var Tt=L1(R,Z,m);u1(R,Tt);break t}}R=R.return}while(R!==null)}yw(w)}catch(Ut){m=Ut,Ir===w&&w!==null&&(Ir=w=w.return);continue}break}while(!0)}function gw(){var d=xc.current;return xc.current=fc,d===null?fc:d}function im(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Xr===null||!(eo&268435455)&&!(wc&268435455)||ga(Xr,Zr)}function Ac(d,m){var w=Re;Re|=2;var A=gw();(Xr!==d||Zr!==m)&&(Ps=null,no(d,m));do try{RR();break}catch(I){mw(d,I)}while(!0);if(vp(),Re=w,xc.current=A,Ir!==null)throw Error(e(261));return Xr=null,Zr=0,Fr}function RR(){for(;Ir!==null;)vw(Ir)}function MR(){for(;Ir!==null&&!eI();)vw(Ir)}function vw(d){var m=_w(d.alternate,d,jn);d.memoizedProps=d.pendingProps,m===null?yw(d):Ir=m,qp.current=null}function yw(d){var m=d;do{var w=m.alternate;if(d=m.return,m.flags&32768){if(w=ER(w,m),w!==null){w.flags&=32767,Ir=w;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Fr=6,Ir=null;return}}else if(w=bR(w,m,jn),w!==null){Ir=w;return}if(m=m.sibling,m!==null){Ir=m;return}Ir=m=d}while(m!==null);Fr===0&&(Fr=5)}function io(d,m,w){var A=De,I=di.transition;try{di.transition=null,De=1,PR(d,m,w,A)}finally{di.transition=I,De=A}return null}function PR(d,m,w,A){do pl();while(pa!==null);if(Re&6)throw Error(e(327));w=d.finishedWork;var I=d.finishedLanes;if(w===null)return null;if(d.finishedWork=null,d.finishedLanes=0,w===d.current)throw Error(e(177));d.callbackNode=null,d.callbackPriority=0;var R=w.lanes|w.childLanes;if(cI(d,R),d===Xr&&(Ir=Xr=null,Zr=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||bc||(bc=!0,bw(Mu,function(){return pl(),null})),R=(w.flags&15990)!==0,w.subtreeFlags&15990||R){R=di.transition,di.transition=null;var G=De;De=1;var Z=Re;Re|=4,qp.current=null,SR(d,w),lw(w,d),ZI(ip),Du=!!np,ip=np=null,d.current=w,AR(w),rI(),Re=Z,De=G,di.transition=R}else d.current=w;if(bc&&(bc=!1,pa=d,Ec=I),R=d.pendingLanes,R===0&&(fa=null),sI(w.stateNode),kn(d,gr()),m!==null)for(A=d.onRecoverableError,w=0;w<m.length;w++)I=m[w],A(I.value,{componentStack:I.stack,digest:I.digest});if(_c)throw _c=!1,d=Qp,Qp=null,d;return Ec&1&&d.tag!==0&&pl(),R=d.pendingLanes,R&1?d===Jp?kh++:(kh=0,Jp=d):kh=0,ha(),null}function pl(){if(pa!==null){var d=ax(Ec),m=di.transition,w=De;try{if(di.transition=null,De=16>d?16:d,pa===null)var A=!1;else{if(d=pa,pa=null,Ec=0,Re&6)throw Error(e(331));var I=Re;for(Re|=4,Ft=d.current;Ft!==null;){var R=Ft,G=R.child;if(Ft.flags&16){var Z=R.deletions;if(Z!==null){for(var Q=0;Q<Z.length;Q++){var pt=Z[Q];for(Ft=pt;Ft!==null;){var xt=Ft;switch(xt.tag){case 0:case 11:case 15:Rh(8,xt,R)}var _t=xt.child;if(_t!==null)_t.return=xt,Ft=_t;else for(;Ft!==null;){xt=Ft;var vt=xt.sibling,Mt=xt.return;if(nw(xt),xt===pt){Ft=null;break}if(vt!==null){vt.return=Mt,Ft=vt;break}Ft=Mt}}}var Nt=R.alternate;if(Nt!==null){var Lt=Nt.child;if(Lt!==null){Nt.child=null;do{var vr=Lt.sibling;Lt.sibling=null,Lt=vr}while(Lt!==null)}}Ft=R}}if(R.subtreeFlags&2064&&G!==null)G.return=R,Ft=G;else t:for(;Ft!==null;){if(R=Ft,R.flags&2048)switch(R.tag){case 0:case 11:case 15:Rh(9,R,R.return)}var nt=R.sibling;if(nt!==null){nt.return=R.return,Ft=nt;break t}Ft=R.return}}var J=d.current;for(Ft=J;Ft!==null;){G=Ft;var ot=G.child;if(G.subtreeFlags&2064&&ot!==null)ot.return=G,Ft=ot;else t:for(G=J;Ft!==null;){if(Z=Ft,Z.flags&2048)try{switch(Z.tag){case 0:case 11:case 15:yc(9,Z)}}catch(Ut){dr(Z,Z.return,Ut)}if(Z===G){Ft=null;break t}var Tt=Z.sibling;if(Tt!==null){Tt.return=Z.return,Ft=Tt;break t}Ft=Z.return}}if(Re=I,ha(),Ji&&typeof Ji.onPostCommitFiberRoot=="function")try{Ji.onPostCommitFiberRoot(Pu,d)}catch{}A=!0}return A}finally{De=w,di.transition=m}}return!1}function xw(d,m,w){m=ul(w,m),m=D1(d,m,1),d=ca(d,m,1),m=pn(),d!==null&&(rh(d,1,m),kn(d,m))}function dr(d,m,w){if(d.tag===3)xw(d,d,w);else for(;m!==null;){if(m.tag===3){xw(m,d,w);break}else if(m.tag===1){var A=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(fa===null||!fa.has(A))){d=ul(w,d),d=L1(m,d,1),m=ca(m,d,1),d=pn(),m!==null&&(rh(m,1,d),kn(m,d));break}}m=m.return}}function kR(d,m,w){var A=d.pingCache;A!==null&&A.delete(m),m=pn(),d.pingedLanes|=d.suspendedLanes&w,Xr===d&&(Zr&w)===w&&(Fr===4||Fr===3&&(Zr&130023424)===Zr&&500>gr()-Zp?no(d,0):Kp|=w),kn(d,m)}function ww(d,m){m===0&&(d.mode&1?(m=Fu,Fu<<=1,!(Fu&130023424)&&(Fu=4194304)):m=1);var w=pn();d=Is(d,m),d!==null&&(rh(d,m,w),kn(d,w))}function FR(d){var m=d.memoizedState,w=0;m!==null&&(w=m.retryLane),ww(d,w)}function BR(d,m){var w=0;switch(d.tag){case 13:var A=d.stateNode,I=d.memoizedState;I!==null&&(w=I.retryLane);break;case 19:A=d.stateNode;break;default:throw Error(e(314))}A!==null&&A.delete(m),ww(d,w)}var _w;_w=function(d,m,w){if(d!==null)if(d.memoizedProps!==m.pendingProps||In.current)Mn=!0;else{if(!(d.lanes&w)&&!(m.flags&128))return Mn=!1,_R(d,m,w);Mn=!!(d.flags&131072)}else Mn=!1,Ke&&m.flags&1048576&&t1(m,ec,m.index);switch(m.lanes=0,m.tag){case 2:var A=m.type;gc(d,m),d=m.pendingProps;var I=rl(m,on.current);ll(m,w),I=Ip(null,m,A,d,I,w);var R=Rp();return m.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Rn(A)?(R=!0,Qu(m)):R=!1,m.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,_p(m),I.updater=pc,m.stateNode=I,I._reactInternals=m,Np(m,A,d,w),m=Up(null,m,A,!0,R,w)):(m.tag=0,Ke&&R&&cp(m),fn(null,m,I,w),m=m.child),m;case 16:A=m.elementType;t:{switch(gc(d,m),d=m.pendingProps,I=A._init,A=I(A._payload),m.type=A,I=m.tag=OR(A),d=bi(A,d),I){case 0:m=Lp(null,m,A,d,w);break t;case 1:m=z1(null,m,A,d,w);break t;case 11:m=G1(null,m,A,d,w);break t;case 14:m=Y1(null,m,A,bi(A.type,d),w);break t}throw Error(e(306,A,""))}return m;case 0:return A=m.type,I=m.pendingProps,I=m.elementType===A?I:bi(A,I),Lp(d,m,A,I,w);case 1:return A=m.type,I=m.pendingProps,I=m.elementType===A?I:bi(A,I),z1(d,m,A,I,w);case 3:t:{if(j1(m),d===null)throw Error(e(387));A=m.pendingProps,R=m.memoizedState,I=R.element,h1(d,m),oc(m,A,null,w);var G=m.memoizedState;if(A=G.element,R.isDehydrated)if(R={element:A,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},m.updateQueue.baseState=R,m.memoizedState=R,m.flags&256){I=ul(Error(e(423)),m),m=q1(d,m,A,w,I);break t}else if(A!==I){I=ul(Error(e(424)),m),m=q1(d,m,A,w,I);break t}else for(zn=aa(m.stateNode.containerInfo.firstChild),Hn=m,Ke=!0,_i=null,w=o1(m,null,A,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(sl(),A===I){m=Ms(d,m,w);break t}fn(d,m,A,w)}m=m.child}return m;case 5:return d1(m),d===null&&pp(m),A=m.type,I=m.pendingProps,R=d!==null?d.memoizedProps:null,G=I.children,sp(A,I)?G=null:R!==null&&sp(A,R)&&(m.flags|=32),H1(d,m),fn(d,m,G,w),m.child;case 6:return d===null&&pp(m),null;case 13:return K1(d,m,w);case 4:return bp(m,m.stateNode.containerInfo),A=m.pendingProps,d===null?m.child=al(m,null,A,w):fn(d,m,A,w),m.child;case 11:return A=m.type,I=m.pendingProps,I=m.elementType===A?I:bi(A,I),G1(d,m,A,I,w);case 7:return fn(d,m,m.pendingProps,w),m.child;case 8:return fn(d,m,m.pendingProps.children,w),m.child;case 12:return fn(d,m,m.pendingProps.children,w),m.child;case 10:t:{if(A=m.type._context,I=m.pendingProps,R=m.memoizedProps,G=I.value,Ve(ic,A._currentValue),A._currentValue=G,R!==null)if(wi(R.value,G)){if(R.children===I.children&&!In.current){m=Ms(d,m,w);break t}}else for(R=m.child,R!==null&&(R.return=m);R!==null;){var Z=R.dependencies;if(Z!==null){G=R.child;for(var Q=Z.firstContext;Q!==null;){if(Q.context===A){if(R.tag===1){Q=Rs(-1,w&-w),Q.tag=2;var pt=R.updateQueue;if(pt!==null){pt=pt.shared;var xt=pt.pending;xt===null?Q.next=Q:(Q.next=xt.next,xt.next=Q),pt.pending=Q}}R.lanes|=w,Q=R.alternate,Q!==null&&(Q.lanes|=w),xp(R.return,w,m),Z.lanes|=w;break}Q=Q.next}}else if(R.tag===10)G=R.type===m.type?null:R.child;else if(R.tag===18){if(G=R.return,G===null)throw Error(e(341));G.lanes|=w,Z=G.alternate,Z!==null&&(Z.lanes|=w),xp(G,w,m),G=R.sibling}else G=R.child;if(G!==null)G.return=R;else for(G=R;G!==null;){if(G===m){G=null;break}if(R=G.sibling,R!==null){R.return=G.return,G=R;break}G=G.return}R=G}fn(d,m,I.children,w),m=m.child}return m;case 9:return I=m.type,A=m.pendingProps.children,ll(m,w),I=ui(I),A=A(I),m.flags|=1,fn(d,m,A,w),m.child;case 14:return A=m.type,I=bi(A,m.pendingProps),I=bi(A.type,I),Y1(d,m,A,I,w);case 15:return $1(d,m,m.type,m.pendingProps,w);case 17:return A=m.type,I=m.pendingProps,I=m.elementType===A?I:bi(A,I),gc(d,m),m.tag=1,Rn(A)?(d=!0,Qu(m)):d=!1,ll(m,w),N1(m,A,I),Np(m,A,I,w),Up(null,m,A,!0,d,w);case 19:return Q1(d,m,w);case 22:return W1(d,m,w)}throw Error(e(156,m.tag))};function bw(d,m){return th(d,m)}function NR(d,m,w,A){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(d,m,w,A){return new NR(d,m,w,A)}function sm(d){return d=d.prototype,!(!d||!d.isReactComponent)}function OR(d){if(typeof d=="function")return sm(d)?1:0;if(d!=null){if(d=d.$$typeof,d===O)return 11;if(d===W)return 14}return 2}function va(d,m){var w=d.alternate;return w===null?(w=fi(d.tag,m,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=m,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&14680064,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,m=d.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function Cc(d,m,w,A,I,R){var G=2;if(A=d,typeof d=="function")sm(d)&&(G=1);else if(typeof d=="string")G=5;else t:switch(d){case C:return so(w.children,I,R,m);case M:G=8,I|=8;break;case P:return d=fi(12,w,m,I|2),d.elementType=P,d.lanes=R,d;case U:return d=fi(13,w,m,I),d.elementType=U,d.lanes=R,d;case H:return d=fi(19,w,m,I),d.elementType=H,d.lanes=R,d;case L:return Ic(w,I,R,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case F:G=10;break t;case V:G=9;break t;case O:G=11;break t;case W:G=14;break t;case B:G=16,A=null;break t}throw Error(e(130,d==null?d:typeof d,""))}return m=fi(G,w,m,I),m.elementType=d,m.type=A,m.lanes=R,m}function so(d,m,w,A){return d=fi(7,d,A,m),d.lanes=w,d}function Ic(d,m,w,A){return d=fi(22,d,A,m),d.elementType=L,d.lanes=w,d.stateNode={isHidden:!1},d}function am(d,m,w){return d=fi(6,d,null,m),d.lanes=w,d}function om(d,m,w){return m=fi(4,d.children!==null?d.children:[],d.key,m),m.lanes=w,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function DR(d,m,w,A,I){this.tag=m,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bf(0),this.expirationTimes=Bf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bf(0),this.identifierPrefix=A,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function lm(d,m,w,A,I,R,G,Z,Q){return d=new DR(d,m,w,Z,Q),m===1?(m=1,R===!0&&(m|=8)):m=0,R=fi(3,null,null,m),d.current=R,R.stateNode=d,R.memoizedState={element:A,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},_p(R),d}function LR(d,m,w){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:A==null?null:""+A,children:d,containerInfo:m,implementation:w}}function Ew(d){if(!d)return la;d=d._reactInternals;t:{if(Qi(d)!==d||d.tag!==1)throw Error(e(170));var m=d;do{switch(m.tag){case 3:m=m.stateNode.context;break t;case 1:if(Rn(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break t}}m=m.return}while(m!==null);throw Error(e(171))}if(d.tag===1){var w=d.type;if(Rn(w))return Zx(d,w,m)}return m}function Tw(d,m,w,A,I,R,G,Z,Q){return d=lm(w,A,!0,d,I,R,G,Z,Q),d.context=Ew(null),w=d.current,A=pn(),I=ma(w),R=Rs(A,I),R.callback=m??null,ca(w,R,I),d.current.lanes=I,rh(d,I,A),kn(d,A),d}function Rc(d,m,w,A){var I=m.current,R=pn(),G=ma(I);return w=Ew(w),m.context===null?m.context=w:m.pendingContext=w,m=Rs(R,G),m.payload={element:d},A=A===void 0?null:A,A!==null&&(m.callback=A),d=ca(I,m,G),d!==null&&(Si(d,I,G,R),ac(d,I,G)),G}function Mc(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function Sw(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<m?w:m}}function hm(d,m){Sw(d,m),(d=d.alternate)&&Sw(d,m)}function UR(){return null}var Aw=typeof reportError=="function"?reportError:function(d){console.error(d)};function um(d){this._internalRoot=d}Pc.prototype.render=um.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(e(409));Rc(d,m,null,null)},Pc.prototype.unmount=um.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;ro(function(){Rc(null,d,null,null)}),m[Ts]=null}};function Pc(d){this._internalRoot=d}Pc.prototype.unstable_scheduleHydration=function(d){if(d){var m=hx();d={blockedOn:null,target:d,priority:m};for(var w=0;w<na.length&&m!==0&&m<na[w].priority;w++);na.splice(w,0,d),w===0&&dx(d)}};function cm(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function kc(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function Cw(){}function VR(d,m,w,A,I){if(I){if(typeof A=="function"){var R=A;A=function(){var pt=Mc(G);R.call(pt)}}var G=Tw(m,A,d,0,null,!1,!1,"",Cw);return d._reactRootContainer=G,d[Ts]=G.current,gh(d.nodeType===8?d.parentNode:d),ro(),G}for(;I=d.lastChild;)d.removeChild(I);if(typeof A=="function"){var Z=A;A=function(){var pt=Mc(Q);Z.call(pt)}}var Q=lm(d,0,!1,null,null,!1,!1,"",Cw);return d._reactRootContainer=Q,d[Ts]=Q.current,gh(d.nodeType===8?d.parentNode:d),ro(function(){Rc(m,Q,w,A)}),Q}function Fc(d,m,w,A,I){var R=w._reactRootContainer;if(R){var G=R;if(typeof I=="function"){var Z=I;I=function(){var Q=Mc(G);Z.call(Q)}}Rc(m,G,d,I)}else G=VR(w,m,d,I,A);return Mc(G)}ox=function(d){switch(d.tag){case 3:var m=d.stateNode;if(m.current.memoizedState.isDehydrated){var w=eh(m.pendingLanes);w!==0&&(Nf(m,w|1),kn(m,gr()),!(Re&6)&&(fl=gr()+500,ha()))}break;case 13:ro(function(){var A=Is(d,1);if(A!==null){var I=pn();Si(A,d,1,I)}}),hm(d,1)}},Of=function(d){if(d.tag===13){var m=Is(d,134217728);if(m!==null){var w=pn();Si(m,d,134217728,w)}hm(d,134217728)}},lx=function(d){if(d.tag===13){var m=ma(d),w=Is(d,m);if(w!==null){var A=pn();Si(w,d,m,A)}hm(d,m)}},hx=function(){return De},ux=function(d,m){var w=De;try{return De=d,m()}finally{De=w}},qt=function(d,m,w){switch(m){case"input":if(Ct(d,w),m=w.name,w.type==="radio"&&m!=null){for(w=d;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<w.length;m++){var A=w[m];if(A!==d&&A.form===d.form){var I=Ku(A);if(!I)throw Error(e(90));yt(A),Ct(A,I)}}}break;case"textarea":Be(d,w);break;case"select":m=w.value,m!=null&&Qt(d,!!w.multiple,m,!1)}},$n=rm,tr=ro;var XR={usingClientEntryPoint:!1,Events:[xh,tl,Ku,Pr,Yn,rm]},Fh={findFiberByHostInstance:ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GR={bundleType:Fh.bundleType,version:Fh.version,rendererPackageName:Fh.rendererPackageName,rendererConfig:Fh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=za(d),d===null?null:d.stateNode},findFiberByHostInstance:Fh.findFiberByHostInstance||UR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{Pu=Bc.inject(GR),Ji=Bc}catch{}}return Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XR,Fn.createPortal=function(d,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cm(m))throw Error(e(200));return LR(d,m,null,w)},Fn.createRoot=function(d,m){if(!cm(d))throw Error(e(299));var w=!1,A="",I=Aw;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onRecoverableError!==void 0&&(I=m.onRecoverableError)),m=lm(d,1,!1,null,null,w,!1,A,I),d[Ts]=m.current,gh(d.nodeType===8?d.parentNode:d),new um(m)},Fn.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(e(188)):(d=Object.keys(d).join(","),Error(e(268,d)));return d=za(m),d=d===null?null:d.stateNode,d},Fn.flushSync=function(d){return ro(d)},Fn.hydrate=function(d,m,w){if(!kc(m))throw Error(e(200));return Fc(null,d,m,!0,w)},Fn.hydrateRoot=function(d,m,w){if(!cm(d))throw Error(e(405));var A=w!=null&&w.hydratedSources||null,I=!1,R="",G=Aw;if(w!=null&&(w.unstable_strictMode===!0&&(I=!0),w.identifierPrefix!==void 0&&(R=w.identifierPrefix),w.onRecoverableError!==void 0&&(G=w.onRecoverableError)),m=Tw(m,null,d,1,w??null,I,!1,R,G),d[Ts]=m.current,gh(d),A)for(d=0;d<A.length;d++)w=A[d],I=w._getVersion,I=I(w._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[w,I]:m.mutableSourceEagerHydrationData.push(w,I);return new Pc(m)},Fn.render=function(d,m,w){if(!kc(m))throw Error(e(200));return Fc(null,d,m,!1,w)},Fn.unmountComponentAtNode=function(d){if(!kc(d))throw Error(e(40));return d._reactRootContainer?(ro(function(){Fc(null,null,d,!1,function(){d._reactRootContainer=null,d[Ts]=null})}),!0):!1},Fn.unstable_batchedUpdates=rm,Fn.unstable_renderSubtreeIntoContainer=function(d,m,w,A){if(!kc(w))throw Error(e(200));if(d==null||d._reactInternals===void 0)throw Error(e(38));return Fc(d,m,w,!1,A)},Fn.version="18.3.1-next-f1338f8080-20240426",Fn}var Nw;function QR(){if(Nw)return pm.exports;Nw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),pm.exports=ZR(),pm.exports}var Ow;function JR(){if(Ow)return Nc;Ow=1;var i=QR();return Nc.createRoot=i.createRoot,Nc.hydrateRoot=i.hydrateRoot,Nc}var tM=JR();const eM=yu(tM);var Go=(i=>(i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2",i))(Go||{}),zE=(i=>(i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS",i))(zE||{}),dv=(i=>(i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL",i))(dv||{}),Gt=(i=>(i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR",i))(Gt||{}),Gi=(i=>(i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN",i))(Gi||{}),Et=(i=>(i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.RG=33319]="RG",i[i.RED=6403]="RED",i[i.RGBA_INTEGER=36249]="RGBA_INTEGER",i[i.RGB_INTEGER=36248]="RGB_INTEGER",i[i.RG_INTEGER=33320]="RG_INTEGER",i[i.RED_INTEGER=36244]="RED_INTEGER",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL",i))(Et||{}),Pl=(i=>(i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",i))(Pl||{}),$t=(i=>(i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.UNSIGNED_INT=5125]="UNSIGNED_INT",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",i[i.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",i[i.BYTE=5120]="BYTE",i[i.SHORT=5122]="SHORT",i[i.INT=5124]="INT",i[i.FLOAT=5126]="FLOAT",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",i[i.HALF_FLOAT=36193]="HALF_FLOAT",i))($t||{}),Pt=(i=>(i[i.FLOAT=0]="FLOAT",i[i.INT=1]="INT",i[i.UINT=2]="UINT",i))(Pt||{}),Zn=(i=>(i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR",i))(Zn||{}),Oa=(i=>(i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",i))(Oa||{}),$i=(i=>(i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON",i[i.ON_MANUAL=3]="ON_MANUAL",i))($i||{}),ji=(i=>(i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",i))(ji||{}),fs=(i=>(i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT",i))(fs||{}),My=(i=>(i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL",i))(My||{}),mi=(i=>(i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp",i))(mi||{}),Br=(i=>(i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",i[i.COLOR=4]="COLOR",i))(Br||{}),Mr=(i=>(i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH",i))(Mr||{}),ms=(i=>(i[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",i))(ms||{});const rM={createCanvas:(i,t)=>{const e=document.createElement("canvas");return e.width=i,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,t)=>fetch(i,t),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")},It={ADAPTER:rM,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var vm=/iPhone/i,Dw=/iPod/i,Lw=/iPad/i,Uw=/\biOS-universal(?:.+)Mac\b/i,ym=/\bAndroid(?:.+)Mobile\b/i,Vw=/Android/i,ml=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Oc=/Silk/i,ks=/Windows Phone/i,Xw=/\bWindows(?:.+)ARM\b/i,Gw=/BlackBerry/i,Yw=/BB10/i,$w=/Opera Mini/i,Ww=/\b(CriOS|Chrome)(?:.+)Mobile/i,Hw=/Mobile(?:.+)Firefox\b/i,zw=function(i){return typeof i<"u"&&i.platform==="MacIntel"&&typeof i.maxTouchPoints=="number"&&i.maxTouchPoints>1&&typeof MSStream>"u"};function nM(i){return function(t){return t.test(i)}}function jw(i){var t={userAgent:"",platform:"",maxTouchPoints:0};!i&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof i=="string"?t.userAgent=i:i&&i.userAgent&&(t={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0});var e=t.userAgent,r=e.split("[FBAN");typeof r[1]<"u"&&(e=r[0]),r=e.split("Twitter"),typeof r[1]<"u"&&(e=r[0]);var n=nM(e),s={apple:{phone:n(vm)&&!n(ks),ipod:n(Dw),tablet:!n(vm)&&(n(Lw)||zw(t))&&!n(ks),universal:n(Uw),device:(n(vm)||n(Dw)||n(Lw)||n(Uw)||zw(t))&&!n(ks)},amazon:{phone:n(ml),tablet:!n(ml)&&n(Oc),device:n(ml)||n(Oc)},android:{phone:!n(ks)&&n(ml)||!n(ks)&&n(ym),tablet:!n(ks)&&!n(ml)&&!n(ym)&&(n(Oc)||n(Vw)),device:!n(ks)&&(n(ml)||n(Oc)||n(ym)||n(Vw))||n(/\bokhttp\b/i)},windows:{phone:n(ks),tablet:n(Xw),device:n(ks)||n(Xw)},other:{blackberry:n(Gw),blackberry10:n(Yw),opera:n($w),firefox:n(Hw),chrome:n(Ww),device:n(Gw)||n(Yw)||n($w)||n(Hw)||n(Ww)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const iM=jw.default??jw,Ys=iM(globalThis.navigator);It.RETINA_PREFIX=/@([0-9\.]+)x/;It.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var xm={exports:{}},qw;function sM(){return qw||(qw=1,function(i){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function n(a,l,u){this.fn=a,this.context=l,this.once=u||!1}function s(a,l,u,c,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new n(u,c||a,f),g=e?e+l:l;return a._events[g]?a._events[g].fn?a._events[g]=[a._events[g],p]:a._events[g].push(p):(a._events[g]=p,a._eventsCount++),a}function o(a,l){--a._eventsCount===0?a._events=new r:delete a._events[l]}function h(){this._events=new r,this._eventsCount=0}h.prototype.eventNames=function(){var l=[],u,c;if(this._eventsCount===0)return l;for(c in u=this._events)t.call(u,c)&&l.push(e?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},h.prototype.listeners=function(l){var u=e?e+l:l,c=this._events[u];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,p=c.length,g=new Array(p);f<p;f++)g[f]=c[f].fn;return g},h.prototype.listenerCount=function(l){var u=e?e+l:l,c=this._events[u];return c?c.fn?1:c.length:0},h.prototype.emit=function(l,u,c,f,p,g){var v=e?e+l:l;if(!this._events[v])return!1;var y=this._events[v],x=arguments.length,_,b;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,c),!0;case 4:return y.fn.call(y.context,u,c,f),!0;case 5:return y.fn.call(y.context,u,c,f,p),!0;case 6:return y.fn.call(y.context,u,c,f,p,g),!0}for(b=1,_=new Array(x-1);b<x;b++)_[b-1]=arguments[b];y.fn.apply(y.context,_)}else{var E=y.length,T;for(b=0;b<E;b++)switch(y[b].once&&this.removeListener(l,y[b].fn,void 0,!0),x){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,u);break;case 3:y[b].fn.call(y[b].context,u,c);break;case 4:y[b].fn.call(y[b].context,u,c,f);break;default:if(!_)for(T=1,_=new Array(x-1);T<x;T++)_[T-1]=arguments[T];y[b].fn.apply(y[b].context,_)}}return!0},h.prototype.on=function(l,u,c){return s(this,l,u,c,!1)},h.prototype.once=function(l,u,c){return s(this,l,u,c,!0)},h.prototype.removeListener=function(l,u,c,f){var p=e?e+l:l;if(!this._events[p])return this;if(!u)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===u&&(!f||g.once)&&(!c||g.context===c)&&o(this,p);else{for(var v=0,y=[],x=g.length;v<x;v++)(g[v].fn!==u||f&&!g[v].once||c&&g[v].context!==c)&&y.push(g[v]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},h.prototype.removeAllListeners=function(l){var u;return l?(u=e?e+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,i.exports=h}(xm)),xm.exports}var aM=sM();const xu=yu(aM);var Dc={exports:{}},Kw;function oM(){if(Kw)return Dc.exports;Kw=1,Dc.exports=i,Dc.exports.default=i;function i(B,L,N){N=N||2;var Y=L&&L.length,D=Y?L[0]*N:B.length,k=t(B,0,D,N,!0),X=[];if(!k||k.next===k.prev)return X;var $,j,K,tt,ct,ft,mt;if(Y&&(k=a(B,L,k,N)),B.length>80*N){$=K=B[0],j=tt=B[1];for(var lt=N;lt<D;lt+=N)ct=B[lt],ft=B[lt+1],ct<$&&($=ct),ft<j&&(j=ft),ct>K&&(K=ct),ft>tt&&(tt=ft);mt=Math.max(K-$,tt-j),mt=mt!==0?32767/mt:0}return r(k,X,N,$,j,mt,0),X}function t(B,L,N,Y,D){var k,X;if(D===W(B,L,N,Y)>0)for(k=L;k<N;k+=Y)X=O(k,B[k],B[k+1],X);else for(k=N-Y;k>=L;k-=Y)X=O(k,B[k],B[k+1],X);return X&&E(X,X.next)&&(U(X),X=X.next),X}function e(B,L){if(!B)return B;L||(L=B);var N=B,Y;do if(Y=!1,!N.steiner&&(E(N,N.next)||b(N.prev,N,N.next)===0)){if(U(N),N=L=N.prev,N===N.next)break;Y=!0}else N=N.next;while(Y||N!==L);return L}function r(B,L,N,Y,D,k,X){if(B){!X&&k&&p(B,Y,D,k);for(var $=B,j,K;B.prev!==B.next;){if(j=B.prev,K=B.next,k?s(B,Y,D,k):n(B)){L.push(j.i/N|0),L.push(B.i/N|0),L.push(K.i/N|0),U(B),B=K.next,$=K.next;continue}if(B=K,B===$){X?X===1?(B=o(e(B),L,N),r(B,L,N,Y,D,k,2)):X===2&&h(B,L,N,Y,D,k):r(e(B),L,N,Y,D,k,1);break}}}}function n(B){var L=B.prev,N=B,Y=B.next;if(b(L,N,Y)>=0)return!1;for(var D=L.x,k=N.x,X=Y.x,$=L.y,j=N.y,K=Y.y,tt=D<k?D<X?D:X:k<X?k:X,ct=$<j?$<K?$:K:j<K?j:K,ft=D>k?D>X?D:X:k>X?k:X,mt=$>j?$>K?$:K:j>K?j:K,lt=Y.next;lt!==L;){if(lt.x>=tt&&lt.x<=ft&&lt.y>=ct&&lt.y<=mt&&x(D,$,k,j,X,K,lt.x,lt.y)&&b(lt.prev,lt,lt.next)>=0)return!1;lt=lt.next}return!0}function s(B,L,N,Y){var D=B.prev,k=B,X=B.next;if(b(D,k,X)>=0)return!1;for(var $=D.x,j=k.x,K=X.x,tt=D.y,ct=k.y,ft=X.y,mt=$<j?$<K?$:K:j<K?j:K,lt=tt<ct?tt<ft?tt:ft:ct<ft?ct:ft,gt=$>j?$>K?$:K:j>K?j:K,yt=tt>ct?tt>ft?tt:ft:ct>ft?ct:ft,St=v(mt,lt,L,N,Y),Rt=v(gt,yt,L,N,Y),it=B.prevZ,ut=B.nextZ;it&&it.z>=St&&ut&&ut.z<=Rt;){if(it.x>=mt&&it.x<=gt&&it.y>=lt&&it.y<=yt&&it!==D&&it!==X&&x($,tt,j,ct,K,ft,it.x,it.y)&&b(it.prev,it,it.next)>=0||(it=it.prevZ,ut.x>=mt&&ut.x<=gt&&ut.y>=lt&&ut.y<=yt&&ut!==D&&ut!==X&&x($,tt,j,ct,K,ft,ut.x,ut.y)&&b(ut.prev,ut,ut.next)>=0))return!1;ut=ut.nextZ}for(;it&&it.z>=St;){if(it.x>=mt&&it.x<=gt&&it.y>=lt&&it.y<=yt&&it!==D&&it!==X&&x($,tt,j,ct,K,ft,it.x,it.y)&&b(it.prev,it,it.next)>=0)return!1;it=it.prevZ}for(;ut&&ut.z<=Rt;){if(ut.x>=mt&&ut.x<=gt&&ut.y>=lt&&ut.y<=yt&&ut!==D&&ut!==X&&x($,tt,j,ct,K,ft,ut.x,ut.y)&&b(ut.prev,ut,ut.next)>=0)return!1;ut=ut.nextZ}return!0}function o(B,L,N){var Y=B;do{var D=Y.prev,k=Y.next.next;!E(D,k)&&T(D,Y,Y.next,k)&&P(D,k)&&P(k,D)&&(L.push(D.i/N|0),L.push(Y.i/N|0),L.push(k.i/N|0),U(Y),U(Y.next),Y=B=k),Y=Y.next}while(Y!==B);return e(Y)}function h(B,L,N,Y,D,k){var X=B;do{for(var $=X.next.next;$!==X.prev;){if(X.i!==$.i&&_(X,$)){var j=V(X,$);X=e(X,X.next),j=e(j,j.next),r(X,L,N,Y,D,k,0),r(j,L,N,Y,D,k,0);return}$=$.next}X=X.next}while(X!==B)}function a(B,L,N,Y){var D=[],k,X,$,j,K;for(k=0,X=L.length;k<X;k++)$=L[k]*Y,j=k<X-1?L[k+1]*Y:B.length,K=t(B,$,j,Y,!1),K===K.next&&(K.steiner=!0),D.push(y(K));for(D.sort(l),k=0;k<D.length;k++)N=u(D[k],N);return N}function l(B,L){return B.x-L.x}function u(B,L){var N=c(B,L);if(!N)return L;var Y=V(N,B);return e(Y,Y.next),e(N,N.next)}function c(B,L){var N=L,Y=B.x,D=B.y,k=-1/0,X;do{if(D<=N.y&&D>=N.next.y&&N.next.y!==N.y){var $=N.x+(D-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if($<=Y&&$>k&&(k=$,X=N.x<N.next.x?N:N.next,$===Y))return X}N=N.next}while(N!==L);if(!X)return null;var j=X,K=X.x,tt=X.y,ct=1/0,ft;N=X;do Y>=N.x&&N.x>=K&&Y!==N.x&&x(D<tt?Y:k,D,K,tt,D<tt?k:Y,D,N.x,N.y)&&(ft=Math.abs(D-N.y)/(Y-N.x),P(N,B)&&(ft<ct||ft===ct&&(N.x>X.x||N.x===X.x&&f(X,N)))&&(X=N,ct=ft)),N=N.next;while(N!==j);return X}function f(B,L){return b(B.prev,B,L.prev)<0&&b(L.next,B,B.next)<0}function p(B,L,N,Y){var D=B;do D.z===0&&(D.z=v(D.x,D.y,L,N,Y)),D.prevZ=D.prev,D.nextZ=D.next,D=D.next;while(D!==B);D.prevZ.nextZ=null,D.prevZ=null,g(D)}function g(B){var L,N,Y,D,k,X,$,j,K=1;do{for(N=B,B=null,k=null,X=0;N;){for(X++,Y=N,$=0,L=0;L<K&&($++,Y=Y.nextZ,!!Y);L++);for(j=K;$>0||j>0&&Y;)$!==0&&(j===0||!Y||N.z<=Y.z)?(D=N,N=N.nextZ,$--):(D=Y,Y=Y.nextZ,j--),k?k.nextZ=D:B=D,D.prevZ=k,k=D;N=Y}k.nextZ=null,K*=2}while(X>1);return B}function v(B,L,N,Y,D){return B=(B-N)*D|0,L=(L-Y)*D|0,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,B|L<<1}function y(B){var L=B,N=B;do(L.x<N.x||L.x===N.x&&L.y<N.y)&&(N=L),L=L.next;while(L!==B);return N}function x(B,L,N,Y,D,k,X,$){return(D-X)*(L-$)>=(B-X)*(k-$)&&(B-X)*(Y-$)>=(N-X)*(L-$)&&(N-X)*(k-$)>=(D-X)*(Y-$)}function _(B,L){return B.next.i!==L.i&&B.prev.i!==L.i&&!M(B,L)&&(P(B,L)&&P(L,B)&&F(B,L)&&(b(B.prev,B,L.prev)||b(B,L.prev,L))||E(B,L)&&b(B.prev,B,B.next)>0&&b(L.prev,L,L.next)>0)}function b(B,L,N){return(L.y-B.y)*(N.x-L.x)-(L.x-B.x)*(N.y-L.y)}function E(B,L){return B.x===L.x&&B.y===L.y}function T(B,L,N,Y){var D=C(b(B,L,N)),k=C(b(B,L,Y)),X=C(b(N,Y,B)),$=C(b(N,Y,L));return!!(D!==k&&X!==$||D===0&&S(B,N,L)||k===0&&S(B,Y,L)||X===0&&S(N,B,Y)||$===0&&S(N,L,Y))}function S(B,L,N){return L.x<=Math.max(B.x,N.x)&&L.x>=Math.min(B.x,N.x)&&L.y<=Math.max(B.y,N.y)&&L.y>=Math.min(B.y,N.y)}function C(B){return B>0?1:B<0?-1:0}function M(B,L){var N=B;do{if(N.i!==B.i&&N.next.i!==B.i&&N.i!==L.i&&N.next.i!==L.i&&T(N,N.next,B,L))return!0;N=N.next}while(N!==B);return!1}function P(B,L){return b(B.prev,B,B.next)<0?b(B,L,B.next)>=0&&b(B,B.prev,L)>=0:b(B,L,B.prev)<0||b(B,B.next,L)<0}function F(B,L){var N=B,Y=!1,D=(B.x+L.x)/2,k=(B.y+L.y)/2;do N.y>k!=N.next.y>k&&N.next.y!==N.y&&D<(N.next.x-N.x)*(k-N.y)/(N.next.y-N.y)+N.x&&(Y=!Y),N=N.next;while(N!==B);return Y}function V(B,L){var N=new H(B.i,B.x,B.y),Y=new H(L.i,L.x,L.y),D=B.next,k=L.prev;return B.next=L,L.prev=B,N.next=D,D.prev=N,Y.next=N,N.prev=Y,k.next=Y,Y.prev=k,Y}function O(B,L,N,Y){var D=new H(B,L,N);return Y?(D.next=Y.next,D.prev=Y,Y.next.prev=D,Y.next=D):(D.prev=D,D.next=D),D}function U(B){B.next.prev=B.prev,B.prev.next=B.next,B.prevZ&&(B.prevZ.nextZ=B.nextZ),B.nextZ&&(B.nextZ.prevZ=B.prevZ)}function H(B,L,N){this.i=B,this.x=L,this.y=N,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}i.deviation=function(B,L,N,Y){var D=L&&L.length,k=D?L[0]*N:B.length,X=Math.abs(W(B,0,k,N));if(D)for(var $=0,j=L.length;$<j;$++){var K=L[$]*N,tt=$<j-1?L[$+1]*N:B.length;X-=Math.abs(W(B,K,tt,N))}var ct=0;for($=0;$<Y.length;$+=3){var ft=Y[$]*N,mt=Y[$+1]*N,lt=Y[$+2]*N;ct+=Math.abs((B[ft]-B[lt])*(B[mt+1]-B[ft+1])-(B[ft]-B[mt])*(B[lt+1]-B[ft+1]))}return X===0&&ct===0?0:Math.abs((ct-X)/X)};function W(B,L,N,Y){for(var D=0,k=L,X=N-Y;k<N;k+=Y)D+=(B[X]-B[k])*(B[k+1]+B[X+1]),X=k;return D}return i.flatten=function(B){for(var L=B[0][0].length,N={vertices:[],holes:[],dimensions:L},Y=0,D=0;D<B.length;D++){for(var k=0;k<B[D].length;k++)for(var X=0;X<L;X++)N.vertices.push(B[D][k][X]);D>0&&(Y+=B[D-1].length,N.holes.push(Y))}return N},Dc.exports}var lM=oM();const Py=yu(lM);var ao={},Yh={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var hM=Yh.exports,Zw;function uM(){return Zw||(Zw=1,function(i,t){(function(e){var r=t&&!t.nodeType&&t,n=i&&!i.nodeType&&i,s=typeof Md=="object"&&Md;(s.global===s||s.window===s||s.self===s)&&(e=s);var o,h=2147483647,a=36,l=1,u=26,c=38,f=700,p=72,g=128,v="-",y=/^xn--/,x=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=a-l,T=Math.floor,S=String.fromCharCode,C;function M(D){throw new RangeError(b[D])}function P(D,k){for(var X=D.length,$=[];X--;)$[X]=k(D[X]);return $}function F(D,k){var X=D.split("@"),$="";X.length>1&&($=X[0]+"@",D=X[1]),D=D.replace(_,".");var j=D.split("."),K=P(j,k).join(".");return $+K}function V(D){for(var k=[],X=0,$=D.length,j,K;X<$;)j=D.charCodeAt(X++),j>=55296&&j<=56319&&X<$?(K=D.charCodeAt(X++),(K&64512)==56320?k.push(((j&1023)<<10)+(K&1023)+65536):(k.push(j),X--)):k.push(j);return k}function O(D){return P(D,function(k){var X="";return k>65535&&(k-=65536,X+=S(k>>>10&1023|55296),k=56320|k&1023),X+=S(k),X}).join("")}function U(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:a}function H(D,k){return D+22+75*(D<26)-((k!=0)<<5)}function W(D,k,X){var $=0;for(D=X?T(D/f):D>>1,D+=T(D/k);D>E*u>>1;$+=a)D=T(D/E);return T($+(E+1)*D/(D+c))}function B(D){var k=[],X=D.length,$,j=0,K=g,tt=p,ct,ft,mt,lt,gt,yt,St,Rt,it;for(ct=D.lastIndexOf(v),ct<0&&(ct=0),ft=0;ft<ct;++ft)D.charCodeAt(ft)>=128&&M("not-basic"),k.push(D.charCodeAt(ft));for(mt=ct>0?ct+1:0;mt<X;){for(lt=j,gt=1,yt=a;mt>=X&&M("invalid-input"),St=U(D.charCodeAt(mt++)),(St>=a||St>T((h-j)/gt))&&M("overflow"),j+=St*gt,Rt=yt<=tt?l:yt>=tt+u?u:yt-tt,!(St<Rt);yt+=a)it=a-Rt,gt>T(h/it)&&M("overflow"),gt*=it;$=k.length+1,tt=W(j-lt,$,lt==0),T(j/$)>h-K&&M("overflow"),K+=T(j/$),j%=$,k.splice(j++,0,K)}return O(k)}function L(D){var k,X,$,j,K,tt,ct,ft,mt,lt,gt,yt=[],St,Rt,it,ut;for(D=V(D),St=D.length,k=g,X=0,K=p,tt=0;tt<St;++tt)gt=D[tt],gt<128&&yt.push(S(gt));for($=j=yt.length,j&&yt.push(v);$<St;){for(ct=h,tt=0;tt<St;++tt)gt=D[tt],gt>=k&&gt<ct&&(ct=gt);for(Rt=$+1,ct-k>T((h-X)/Rt)&&M("overflow"),X+=(ct-k)*Rt,k=ct,tt=0;tt<St;++tt)if(gt=D[tt],gt<k&&++X>h&&M("overflow"),gt==k){for(ft=X,mt=a;lt=mt<=K?l:mt>=K+u?u:mt-K,!(ft<lt);mt+=a)ut=ft-lt,it=a-lt,yt.push(S(H(lt+ut%it,0))),ft=T(ut/it);yt.push(S(H(ft,0))),K=W(X,Rt,$==j),X=0,++$}++X,++k}return yt.join("")}function N(D){return F(D,function(k){return y.test(k)?B(k.slice(4).toLowerCase()):k})}function Y(D){return F(D,function(k){return x.test(k)?"xn--"+L(k):k})}if(o={version:"1.4.1",ucs2:{decode:V,encode:O},decode:B,encode:L,toASCII:Y,toUnicode:N},r&&n)if(i.exports==r)n.exports=o;else for(C in o)o.hasOwnProperty(C)&&(r[C]=o[C]);else e.punycode=o})(hM)}(Yh,Yh.exports)),Yh.exports}var wm,Qw;function Gl(){return Qw||(Qw=1,wm=TypeError),wm}const cM={},dM=Object.freeze(Object.defineProperty({__proto__:null,default:cM},Symbol.toStringTag,{value:"Module"})),fM=$R(dM);var _m,Jw;function lf(){if(Jw)return _m;Jw=1;var i=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=i&&t&&typeof t.get=="function"?t.get:null,r=i&&Map.prototype.forEach,n=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o=n&&s&&typeof s.get=="function"?s.get:null,h=n&&Set.prototype.forEach,a=typeof WeakMap=="function"&&WeakMap.prototype,l=a?WeakMap.prototype.has:null,u=typeof WeakSet=="function"&&WeakSet.prototype,c=u?WeakSet.prototype.has:null,f=typeof WeakRef=="function"&&WeakRef.prototype,p=f?WeakRef.prototype.deref:null,g=Boolean.prototype.valueOf,v=Object.prototype.toString,y=Function.prototype.toString,x=String.prototype.match,_=String.prototype.slice,b=String.prototype.replace,E=String.prototype.toUpperCase,T=String.prototype.toLowerCase,S=RegExp.prototype.test,C=Array.prototype.concat,M=Array.prototype.join,P=Array.prototype.slice,F=Math.floor,V=typeof BigInt=="function"?BigInt.prototype.valueOf:null,O=Object.getOwnPropertySymbols,U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,H=typeof Symbol=="function"&&typeof Symbol.iterator=="object",W=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===H||!0)?Symbol.toStringTag:null,B=Object.prototype.propertyIsEnumerable,L=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(rt){return rt.__proto__}:null);function N(rt,ht){if(rt===1/0||rt===-1/0||rt!==rt||rt&&rt>-1e3&&rt<1e3||S.call(/e/,ht))return ht;var ie=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof rt=="number"){var ye=rt<0?-F(-rt):F(rt);if(ye!==rt){var de=String(ye),qt=_.call(ht,de.length+1);return b.call(de,ie,"$&_")+"."+b.call(b.call(qt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(ht,ie,"$&_")}var Y=fM,D=Y.custom,k=St(D)?D:null,X={__proto__:null,double:'"',single:"'"},$={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};_m=function rt(ht,ie,ye,de){var qt=ie||{};if(ut(qt,"quoteStyle")&&!ut(X,qt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ut(qt,"maxStringLength")&&(typeof qt.maxStringLength=="number"?qt.maxStringLength<0&&qt.maxStringLength!==1/0:qt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var cr=ut(qt,"customInspect")?qt.customInspect:!0;if(typeof cr!="boolean"&&cr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ut(qt,"indent")&&qt.indent!==null&&qt.indent!=="	"&&!(parseInt(qt.indent,10)===qt.indent&&qt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ut(qt,"numericSeparator")&&typeof qt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Je=qt.numericSeparator;if(typeof ht>"u")return"undefined";if(ht===null)return"null";if(typeof ht=="boolean")return ht?"true":"false";if(typeof ht=="string")return me(ht,qt);if(typeof ht=="number"){if(ht===0)return 1/0/ht>0?"0":"-0";var Oe=String(ht);return Je?N(ht,Oe):Oe}if(typeof ht=="bigint"){var Pr=String(ht)+"n";return Je?N(ht,Pr):Pr}var Yn=typeof qt.depth>"u"?5:qt.depth;if(typeof ye>"u"&&(ye=0),ye>=Yn&&Yn>0&&typeof ht=="object")return tt(ht)?"[Array]":"[Object]";var $n=Zi(qt,ye);if(typeof de>"u")de=[];else if(jt(de,ht)>=0)return"[Circular]";function tr(Js,za,Ru){if(za&&(de=P.call(de),de.push(za)),Ru){var th={depth:qt.depth};return ut(qt,"quoteStyle")&&(th.quoteStyle=qt.quoteStyle),rt(Js,th,ye+1,de)}return rt(Js,qt,ye+1,de)}if(typeof ht=="function"&&!ft(ht)){var bs=zt(ht),Sn=Ie(ht,tr);return"[Function"+(bs?": "+bs:" (anonymous)")+"]"+(Sn.length>0?" { "+M.call(Sn,", ")+" }":"")}if(St(ht)){var An=H?b.call(String(ht),/^(Symbol\(.*\))_[^)]*$/,"$1"):U.call(ht);return typeof ht=="object"&&!H?Ne(An):An}if(Bt(ht)){for(var qr="<"+T.call(String(ht.nodeName)),Cn=ht.attributes||[],$o=0;$o<Cn.length;$o++)qr+=" "+Cn[$o].name+"="+j(K(Cn[$o].value),"double",qt);return qr+=">",ht.childNodes&&ht.childNodes.length&&(qr+="..."),qr+="</"+T.call(String(ht.nodeName))+">",qr}if(tt(ht)){if(ht.length===0)return"[]";var Es=Ie(ht,tr);return $n&&!Ue(Es)?"["+oi(Es,$n)+"]":"[ "+M.call(Es,", ")+" ]"}if(mt(ht)){var Qs=Ie(ht,tr);return!("cause"in Error.prototype)&&"cause"in ht&&!B.call(ht,"cause")?"{ ["+String(ht)+"] "+M.call(C.call("[cause]: "+tr(ht.cause),Qs),", ")+" }":Qs.length===0?"["+String(ht)+"]":"{ ["+String(ht)+"] "+M.call(Qs,", ")+" }"}if(typeof ht=="object"&&cr){if(k&&typeof ht[k]=="function"&&Y)return Y(ht,{depth:Yn-ye});if(cr!=="symbol"&&typeof ht.inspect=="function")return ht.inspect()}if(Wt(ht)){var Ha=[];return r&&r.call(ht,function(Js,za){Ha.push(tr(za,ht,!0)+" => "+tr(Js,ht))}),an("Map",e.call(ht),Ha,$n)}if(se(ht)){var Wo=[];return h&&h.call(ht,function(Js){Wo.push(tr(Js,ht))}),an("Set",o.call(ht),Wo,$n)}if(Qt(ht))return We("WeakMap");if(Be(ht))return We("WeakSet");if(ee(ht))return We("WeakRef");if(gt(ht))return Ne(tr(Number(ht)));if(Rt(ht))return Ne(tr(V.call(ht)));if(yt(ht))return Ne(g.call(ht));if(lt(ht))return Ne(tr(String(ht)));if(typeof window<"u"&&ht===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ht===globalThis||typeof Md<"u"&&ht===Md)return"{ [object globalThis] }";if(!ct(ht)&&!ft(ht)){var Ql=Ie(ht,tr),Cu=L?L(ht)===Object.prototype:ht instanceof Object||ht.constructor===Object,Jl=ht instanceof Object?"":"null prototype",Qi=!Cu&&W&&Object(ht)===ht&&W in ht?_.call(Ct(ht),8,-1):Jl?"Object":"",Iu=Cu||typeof ht.constructor!="function"?"":ht.constructor.name?ht.constructor.name+" ":"",Ho=Iu+(Qi||Jl?"["+M.call(C.call([],Qi||[],Jl||[]),": ")+"] ":"");return Ql.length===0?Ho+"{}":$n?Ho+"{"+oi(Ql,$n)+"}":Ho+"{ "+M.call(Ql,", ")+" }"}return String(ht)};function j(rt,ht,ie){var ye=ie.quoteStyle||ht,de=X[ye];return de+rt+de}function K(rt){return b.call(String(rt),/"/g,"&quot;")}function tt(rt){return Ct(rt)==="[object Array]"&&(!W||!(typeof rt=="object"&&W in rt))}function ct(rt){return Ct(rt)==="[object Date]"&&(!W||!(typeof rt=="object"&&W in rt))}function ft(rt){return Ct(rt)==="[object RegExp]"&&(!W||!(typeof rt=="object"&&W in rt))}function mt(rt){return Ct(rt)==="[object Error]"&&(!W||!(typeof rt=="object"&&W in rt))}function lt(rt){return Ct(rt)==="[object String]"&&(!W||!(typeof rt=="object"&&W in rt))}function gt(rt){return Ct(rt)==="[object Number]"&&(!W||!(typeof rt=="object"&&W in rt))}function yt(rt){return Ct(rt)==="[object Boolean]"&&(!W||!(typeof rt=="object"&&W in rt))}function St(rt){if(H)return rt&&typeof rt=="object"&&rt instanceof Symbol;if(typeof rt=="symbol")return!0;if(!rt||typeof rt!="object"||!U)return!1;try{return U.call(rt),!0}catch{}return!1}function Rt(rt){if(!rt||typeof rt!="object"||!V)return!1;try{return V.call(rt),!0}catch{}return!1}var it=Object.prototype.hasOwnProperty||function(rt){return rt in this};function ut(rt,ht){return it.call(rt,ht)}function Ct(rt){return v.call(rt)}function zt(rt){if(rt.name)return rt.name;var ht=x.call(y.call(rt),/^function\s*([\w$]+)/);return ht?ht[1]:null}function jt(rt,ht){if(rt.indexOf)return rt.indexOf(ht);for(var ie=0,ye=rt.length;ie<ye;ie++)if(rt[ie]===ht)return ie;return-1}function Wt(rt){if(!e||!rt||typeof rt!="object")return!1;try{e.call(rt);try{o.call(rt)}catch{return!0}return rt instanceof Map}catch{}return!1}function Qt(rt){if(!l||!rt||typeof rt!="object")return!1;try{l.call(rt,l);try{c.call(rt,c)}catch{return!0}return rt instanceof WeakMap}catch{}return!1}function ee(rt){if(!p||!rt||typeof rt!="object")return!1;try{return p.call(rt),!0}catch{}return!1}function se(rt){if(!o||!rt||typeof rt!="object")return!1;try{o.call(rt);try{e.call(rt)}catch{return!0}return rt instanceof Set}catch{}return!1}function Be(rt){if(!c||!rt||typeof rt!="object")return!1;try{c.call(rt,c);try{l.call(rt,l)}catch{return!0}return rt instanceof WeakSet}catch{}return!1}function Bt(rt){return!rt||typeof rt!="object"?!1:typeof HTMLElement<"u"&&rt instanceof HTMLElement?!0:typeof rt.nodeName=="string"&&typeof rt.getAttribute=="function"}function me(rt,ht){if(rt.length>ht.maxStringLength){var ie=rt.length-ht.maxStringLength,ye="... "+ie+" more character"+(ie>1?"s":"");return me(_.call(rt,0,ht.maxStringLength),ht)+ye}var de=$[ht.quoteStyle||"single"];de.lastIndex=0;var qt=b.call(b.call(rt,de,"\\$1"),/[\x00-\x1f]/g,Qe);return j(qt,"single",ht)}function Qe(rt){var ht=rt.charCodeAt(0),ie={8:"b",9:"t",10:"n",12:"f",13:"r"}[ht];return ie?"\\"+ie:"\\x"+(ht<16?"0":"")+E.call(ht.toString(16))}function Ne(rt){return"Object("+rt+")"}function We(rt){return rt+" { ? }"}function an(rt,ht,ie,ye){var de=ye?oi(ie,ye):M.call(ie,", ");return rt+" ("+ht+") {"+de+"}"}function Ue(rt){for(var ht=0;ht<rt.length;ht++)if(jt(rt[ht],`
`)>=0)return!1;return!0}function Zi(rt,ht){var ie;if(rt.indent==="	")ie="	";else if(typeof rt.indent=="number"&&rt.indent>0)ie=M.call(Array(rt.indent+1)," ");else return null;return{base:ie,prev:M.call(Array(ht+1),ie)}}function oi(rt,ht){if(rt.length===0)return"";var ie=`
`+ht.prev+ht.base;return ie+M.call(rt,","+ie)+`
`+ht.prev}function Ie(rt,ht){var ie=tt(rt),ye=[];if(ie){ye.length=rt.length;for(var de=0;de<rt.length;de++)ye[de]=ut(rt,de)?ht(rt[de],rt):""}var qt=typeof O=="function"?O(rt):[],cr;if(H){cr={};for(var Je=0;Je<qt.length;Je++)cr["$"+qt[Je]]=qt[Je]}for(var Oe in rt)ut(rt,Oe)&&(ie&&String(Number(Oe))===Oe&&Oe<rt.length||H&&cr["$"+Oe]instanceof Symbol||(S.call(/[^\w$]/,Oe)?ye.push(ht(Oe,rt)+": "+ht(rt[Oe],rt)):ye.push(Oe+": "+ht(rt[Oe],rt))));if(typeof O=="function")for(var Pr=0;Pr<qt.length;Pr++)B.call(rt,qt[Pr])&&ye.push("["+ht(qt[Pr])+"]: "+ht(rt[qt[Pr]],rt));return ye}return _m}var bm,t_;function pM(){if(t_)return bm;t_=1;var i=lf(),t=Gl(),e=function(h,a,l){for(var u=h,c;(c=u.next)!=null;u=c)if(c.key===a)return u.next=c.next,l||(c.next=h.next,h.next=c),c},r=function(h,a){if(h){var l=e(h,a);return l&&l.value}},n=function(h,a,l){var u=e(h,a);u?u.value=l:h.next={key:a,next:h.next,value:l}},s=function(h,a){return h?!!e(h,a):!1},o=function(h,a){if(h)return e(h,a,!0)};return bm=function(){var a,l={assert:function(u){if(!l.has(u))throw new t("Side channel does not contain "+i(u))},delete:function(u){var c=a&&a.next,f=o(a,u);return f&&c&&c===f&&(a=void 0),!!f},get:function(u){return r(a,u)},has:function(u){return s(a,u)},set:function(u,c){a||(a={next:void 0}),n(a,u,c)}};return l},bm}var Em,e_;function jE(){return e_||(e_=1,Em=Object),Em}var Tm,r_;function mM(){return r_||(r_=1,Tm=Error),Tm}var Sm,n_;function gM(){return n_||(n_=1,Sm=EvalError),Sm}var Am,i_;function vM(){return i_||(i_=1,Am=RangeError),Am}var Cm,s_;function yM(){return s_||(s_=1,Cm=ReferenceError),Cm}var Im,a_;function xM(){return a_||(a_=1,Im=SyntaxError),Im}var Rm,o_;function wM(){return o_||(o_=1,Rm=URIError),Rm}var Mm,l_;function _M(){return l_||(l_=1,Mm=Math.abs),Mm}var Pm,h_;function bM(){return h_||(h_=1,Pm=Math.floor),Pm}var km,u_;function EM(){return u_||(u_=1,km=Math.max),km}var Fm,c_;function TM(){return c_||(c_=1,Fm=Math.min),Fm}var Bm,d_;function SM(){return d_||(d_=1,Bm=Math.pow),Bm}var Nm,f_;function AM(){return f_||(f_=1,Nm=Math.round),Nm}var Om,p_;function CM(){return p_||(p_=1,Om=Number.isNaN||function(t){return t!==t}),Om}var Dm,m_;function IM(){if(m_)return Dm;m_=1;var i=CM();return Dm=function(e){return i(e)||e===0?e:e<0?-1:1},Dm}var Lm,g_;function RM(){return g_||(g_=1,Lm=Object.getOwnPropertyDescriptor),Lm}var Um,v_;function qE(){if(v_)return Um;v_=1;var i=RM();if(i)try{i([],"length")}catch{i=null}return Um=i,Um}var Vm,y_;function MM(){if(y_)return Vm;y_=1;var i=Object.defineProperty||!1;if(i)try{i({},"a",{value:1})}catch{i=!1}return Vm=i,Vm}var Xm,x_;function PM(){return x_||(x_=1,Xm=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),r=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;t[e]=n;for(var s in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(t,e);if(h.value!==n||h.enumerable!==!0)return!1}return!0}),Xm}var Gm,w_;function kM(){if(w_)return Gm;w_=1;var i=typeof Symbol<"u"&&Symbol,t=PM();return Gm=function(){return typeof i!="function"||typeof Symbol!="function"||typeof i("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Gm}var Ym,__;function KE(){return __||(__=1,Ym=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Ym}var $m,b_;function ZE(){if(b_)return $m;b_=1;var i=jE();return $m=i.getPrototypeOf||null,$m}var Wm,E_;function FM(){if(E_)return Wm;E_=1;var i="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,e=Math.max,r="[object Function]",n=function(a,l){for(var u=[],c=0;c<a.length;c+=1)u[c]=a[c];for(var f=0;f<l.length;f+=1)u[f+a.length]=l[f];return u},s=function(a,l){for(var u=[],c=l,f=0;c<a.length;c+=1,f+=1)u[f]=a[c];return u},o=function(h,a){for(var l="",u=0;u<h.length;u+=1)l+=h[u],u+1<h.length&&(l+=a);return l};return Wm=function(a){var l=this;if(typeof l!="function"||t.apply(l)!==r)throw new TypeError(i+l);for(var u=s(arguments,1),c,f=function(){if(this instanceof c){var x=l.apply(this,n(u,arguments));return Object(x)===x?x:this}return l.apply(a,n(u,arguments))},p=e(0,l.length-u.length),g=[],v=0;v<p;v++)g[v]="$"+v;if(c=Function("binder","return function ("+o(g,",")+"){ return binder.apply(this,arguments); }")(f),l.prototype){var y=function(){};y.prototype=l.prototype,c.prototype=new y,y.prototype=null}return c},Wm}var Hm,T_;function hf(){if(T_)return Hm;T_=1;var i=FM();return Hm=Function.prototype.bind||i,Hm}var zm,S_;function ky(){return S_||(S_=1,zm=Function.prototype.call),zm}var jm,A_;function QE(){return A_||(A_=1,jm=Function.prototype.apply),jm}var qm,C_;function BM(){return C_||(C_=1,qm=typeof Reflect<"u"&&Reflect&&Reflect.apply),qm}var Km,I_;function NM(){if(I_)return Km;I_=1;var i=hf(),t=QE(),e=ky(),r=BM();return Km=r||i.call(e,t),Km}var Zm,R_;function JE(){if(R_)return Zm;R_=1;var i=hf(),t=Gl(),e=ky(),r=NM();return Zm=function(s){if(s.length<1||typeof s[0]!="function")throw new t("a function is required");return r(i,e,s)},Zm}var Qm,M_;function OM(){if(M_)return Qm;M_=1;var i=JE(),t=qE(),e;try{e=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!e&&t&&t(Object.prototype,"__proto__"),n=Object,s=n.getPrototypeOf;return Qm=r&&typeof r.get=="function"?i([r.get]):typeof s=="function"?function(h){return s(h==null?h:n(h))}:!1,Qm}var Jm,P_;function DM(){if(P_)return Jm;P_=1;var i=KE(),t=ZE(),e=OM();return Jm=i?function(n){return i(n)}:t?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return t(n)}:e?function(n){return e(n)}:null,Jm}var tg,k_;function LM(){if(k_)return tg;k_=1;var i=Function.prototype.call,t=Object.prototype.hasOwnProperty,e=hf();return tg=e.call(i,t),tg}var eg,F_;function Fy(){if(F_)return eg;F_=1;var i,t=jE(),e=mM(),r=gM(),n=vM(),s=yM(),o=xM(),h=Gl(),a=wM(),l=_M(),u=bM(),c=EM(),f=TM(),p=SM(),g=AM(),v=IM(),y=Function,x=function(mt){try{return y('"use strict"; return ('+mt+").constructor;")()}catch{}},_=qE(),b=MM(),E=function(){throw new h},T=_?function(){try{return arguments.callee,E}catch{try{return _(arguments,"callee").get}catch{return E}}}():E,S=kM()(),C=DM(),M=ZE(),P=KE(),F=QE(),V=ky(),O={},U=typeof Uint8Array>"u"||!C?i:C(Uint8Array),H={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?i:ArrayBuffer,"%ArrayIteratorPrototype%":S&&C?C([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":typeof Atomics>"u"?i:Atomics,"%BigInt%":typeof BigInt>"u"?i:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?i:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?i:Float32Array,"%Float64Array%":typeof Float64Array>"u"?i:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?i:FinalizationRegistry,"%Function%":y,"%GeneratorFunction%":O,"%Int8Array%":typeof Int8Array>"u"?i:Int8Array,"%Int16Array%":typeof Int16Array>"u"?i:Int16Array,"%Int32Array%":typeof Int32Array>"u"?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&C?C(C([][Symbol.iterator]())):i,"%JSON%":typeof JSON=="object"?JSON:i,"%Map%":typeof Map>"u"?i:Map,"%MapIteratorPrototype%":typeof Map>"u"||!S||!C?i:C(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":_,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?i:Promise,"%Proxy%":typeof Proxy>"u"?i:Proxy,"%RangeError%":n,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?i:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?i:Set,"%SetIteratorPrototype%":typeof Set>"u"||!S||!C?i:C(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&C?C(""[Symbol.iterator]()):i,"%Symbol%":S?Symbol:i,"%SyntaxError%":o,"%ThrowTypeError%":T,"%TypedArray%":U,"%TypeError%":h,"%Uint8Array%":typeof Uint8Array>"u"?i:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?i:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?i:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?i:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?i:WeakMap,"%WeakRef%":typeof WeakRef>"u"?i:WeakRef,"%WeakSet%":typeof WeakSet>"u"?i:WeakSet,"%Function.prototype.call%":V,"%Function.prototype.apply%":F,"%Object.defineProperty%":b,"%Object.getPrototypeOf%":M,"%Math.abs%":l,"%Math.floor%":u,"%Math.max%":c,"%Math.min%":f,"%Math.pow%":p,"%Math.round%":g,"%Math.sign%":v,"%Reflect.getPrototypeOf%":P};if(C)try{null.error}catch(mt){var W=C(C(mt));H["%Error.prototype%"]=W}var B=function mt(lt){var gt;if(lt==="%AsyncFunction%")gt=x("async function () {}");else if(lt==="%GeneratorFunction%")gt=x("function* () {}");else if(lt==="%AsyncGeneratorFunction%")gt=x("async function* () {}");else if(lt==="%AsyncGenerator%"){var yt=mt("%AsyncGeneratorFunction%");yt&&(gt=yt.prototype)}else if(lt==="%AsyncIteratorPrototype%"){var St=mt("%AsyncGenerator%");St&&C&&(gt=C(St.prototype))}return H[lt]=gt,gt},L={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},N=hf(),Y=LM(),D=N.call(V,Array.prototype.concat),k=N.call(F,Array.prototype.splice),X=N.call(V,String.prototype.replace),$=N.call(V,String.prototype.slice),j=N.call(V,RegExp.prototype.exec),K=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,tt=/\\(\\)?/g,ct=function(lt){var gt=$(lt,0,1),yt=$(lt,-1);if(gt==="%"&&yt!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(yt==="%"&&gt!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var St=[];return X(lt,K,function(Rt,it,ut,Ct){St[St.length]=ut?X(Ct,tt,"$1"):it||Rt}),St},ft=function(lt,gt){var yt=lt,St;if(Y(L,yt)&&(St=L[yt],yt="%"+St[0]+"%"),Y(H,yt)){var Rt=H[yt];if(Rt===O&&(Rt=B(yt)),typeof Rt>"u"&&!gt)throw new h("intrinsic "+lt+" exists, but is not available. Please file an issue!");return{alias:St,name:yt,value:Rt}}throw new o("intrinsic "+lt+" does not exist!")};return eg=function(lt,gt){if(typeof lt!="string"||lt.length===0)throw new h("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof gt!="boolean")throw new h('"allowMissing" argument must be a boolean');if(j(/^%?[^%]*%?$/,lt)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var yt=ct(lt),St=yt.length>0?yt[0]:"",Rt=ft("%"+St+"%",gt),it=Rt.name,ut=Rt.value,Ct=!1,zt=Rt.alias;zt&&(St=zt[0],k(yt,D([0,1],zt)));for(var jt=1,Wt=!0;jt<yt.length;jt+=1){var Qt=yt[jt],ee=$(Qt,0,1),se=$(Qt,-1);if((ee==='"'||ee==="'"||ee==="`"||se==='"'||se==="'"||se==="`")&&ee!==se)throw new o("property names with quotes must have matching quotes");if((Qt==="constructor"||!Wt)&&(Ct=!0),St+="."+Qt,it="%"+St+"%",Y(H,it))ut=H[it];else if(ut!=null){if(!(Qt in ut)){if(!gt)throw new h("base intrinsic for "+lt+" exists, but the property is not available.");return}if(_&&jt+1>=yt.length){var Be=_(ut,Qt);Wt=!!Be,Wt&&"get"in Be&&!("originalValue"in Be.get)?ut=Be.get:ut=ut[Qt]}else Wt=Y(ut,Qt),ut=ut[Qt];Wt&&!Ct&&(H[it]=ut)}}return ut},eg}var rg,B_;function tT(){if(B_)return rg;B_=1;var i=Fy(),t=JE(),e=t([i("%String.prototype.indexOf%")]);return rg=function(n,s){var o=i(n,!!s);return typeof o=="function"&&e(n,".prototype.")>-1?t([o]):o},rg}var ng,N_;function eT(){if(N_)return ng;N_=1;var i=Fy(),t=tT(),e=lf(),r=Gl(),n=i("%Map%",!0),s=t("Map.prototype.get",!0),o=t("Map.prototype.set",!0),h=t("Map.prototype.has",!0),a=t("Map.prototype.delete",!0),l=t("Map.prototype.size",!0);return ng=!!n&&function(){var c,f={assert:function(p){if(!f.has(p))throw new r("Side channel does not contain "+e(p))},delete:function(p){if(c){var g=a(c,p);return l(c)===0&&(c=void 0),g}return!1},get:function(p){if(c)return s(c,p)},has:function(p){return c?h(c,p):!1},set:function(p,g){c||(c=new n),o(c,p,g)}};return f},ng}var ig,O_;function UM(){if(O_)return ig;O_=1;var i=Fy(),t=tT(),e=lf(),r=eT(),n=Gl(),s=i("%WeakMap%",!0),o=t("WeakMap.prototype.get",!0),h=t("WeakMap.prototype.set",!0),a=t("WeakMap.prototype.has",!0),l=t("WeakMap.prototype.delete",!0);return ig=s?function(){var c,f,p={assert:function(g){if(!p.has(g))throw new n("Side channel does not contain "+e(g))},delete:function(g){if(s&&g&&(typeof g=="object"||typeof g=="function")){if(c)return l(c,g)}else if(r&&f)return f.delete(g);return!1},get:function(g){return s&&g&&(typeof g=="object"||typeof g=="function")&&c?o(c,g):f&&f.get(g)},has:function(g){return s&&g&&(typeof g=="object"||typeof g=="function")&&c?a(c,g):!!f&&f.has(g)},set:function(g,v){s&&g&&(typeof g=="object"||typeof g=="function")?(c||(c=new s),h(c,g,v)):r&&(f||(f=r()),f.set(g,v))}};return p}:r,ig}var sg,D_;function VM(){if(D_)return sg;D_=1;var i=Gl(),t=lf(),e=pM(),r=eT(),n=UM(),s=n||r||e;return sg=function(){var h,a={assert:function(l){if(!a.has(l))throw new i("Side channel does not contain "+t(l))},delete:function(l){return!!h&&h.delete(l)},get:function(l){return h&&h.get(l)},has:function(l){return!!h&&h.has(l)},set:function(l,u){h||(h=s()),h.set(l,u)}};return a},sg}var ag,L_;function By(){if(L_)return ag;L_=1;var i=String.prototype.replace,t=/%20/g,e={RFC1738:"RFC1738",RFC3986:"RFC3986"};return ag={default:e.RFC3986,formatters:{RFC1738:function(r){return i.call(r,t,"+")},RFC3986:function(r){return String(r)}},RFC1738:e.RFC1738,RFC3986:e.RFC3986},ag}var og,U_;function rT(){if(U_)return og;U_=1;var i=By(),t=Object.prototype.hasOwnProperty,e=Array.isArray,r=function(){for(var y=[],x=0;x<256;++x)y.push("%"+((x<16?"0":"")+x.toString(16)).toUpperCase());return y}(),n=function(x){for(;x.length>1;){var _=x.pop(),b=_.obj[_.prop];if(e(b)){for(var E=[],T=0;T<b.length;++T)typeof b[T]<"u"&&E.push(b[T]);_.obj[_.prop]=E}}},s=function(x,_){for(var b=_&&_.plainObjects?{__proto__:null}:{},E=0;E<x.length;++E)typeof x[E]<"u"&&(b[E]=x[E]);return b},o=function y(x,_,b){if(!_)return x;if(typeof _!="object"&&typeof _!="function"){if(e(x))x.push(_);else if(x&&typeof x=="object")(b&&(b.plainObjects||b.allowPrototypes)||!t.call(Object.prototype,_))&&(x[_]=!0);else return[x,_];return x}if(!x||typeof x!="object")return[x].concat(_);var E=x;return e(x)&&!e(_)&&(E=s(x,b)),e(x)&&e(_)?(_.forEach(function(T,S){if(t.call(x,S)){var C=x[S];C&&typeof C=="object"&&T&&typeof T=="object"?x[S]=y(C,T,b):x.push(T)}else x[S]=T}),x):Object.keys(_).reduce(function(T,S){var C=_[S];return t.call(T,S)?T[S]=y(T[S],C,b):T[S]=C,T},E)},h=function(x,_){return Object.keys(_).reduce(function(b,E){return b[E]=_[E],b},x)},a=function(y,x,_){var b=y.replace(/\+/g," ");if(_==="iso-8859-1")return b.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(b)}catch{return b}},l=1024,u=function(x,_,b,E,T){if(x.length===0)return x;var S=x;if(typeof x=="symbol"?S=Symbol.prototype.toString.call(x):typeof x!="string"&&(S=String(x)),b==="iso-8859-1")return escape(S).replace(/%u[0-9a-f]{4}/gi,function(U){return"%26%23"+parseInt(U.slice(2),16)+"%3B"});for(var C="",M=0;M<S.length;M+=l){for(var P=S.length>=l?S.slice(M,M+l):S,F=[],V=0;V<P.length;++V){var O=P.charCodeAt(V);if(O===45||O===46||O===95||O===126||O>=48&&O<=57||O>=65&&O<=90||O>=97&&O<=122||T===i.RFC1738&&(O===40||O===41)){F[F.length]=P.charAt(V);continue}if(O<128){F[F.length]=r[O];continue}if(O<2048){F[F.length]=r[192|O>>6]+r[128|O&63];continue}if(O<55296||O>=57344){F[F.length]=r[224|O>>12]+r[128|O>>6&63]+r[128|O&63];continue}V+=1,O=65536+((O&1023)<<10|P.charCodeAt(V)&1023),F[F.length]=r[240|O>>18]+r[128|O>>12&63]+r[128|O>>6&63]+r[128|O&63]}C+=F.join("")}return C},c=function(x){for(var _=[{obj:{o:x},prop:"o"}],b=[],E=0;E<_.length;++E)for(var T=_[E],S=T.obj[T.prop],C=Object.keys(S),M=0;M<C.length;++M){var P=C[M],F=S[P];typeof F=="object"&&F!==null&&b.indexOf(F)===-1&&(_.push({obj:S,prop:P}),b.push(F))}return n(_),x},f=function(x){return Object.prototype.toString.call(x)==="[object RegExp]"},p=function(x){return!x||typeof x!="object"?!1:!!(x.constructor&&x.constructor.isBuffer&&x.constructor.isBuffer(x))},g=function(x,_){return[].concat(x,_)},v=function(x,_){if(e(x)){for(var b=[],E=0;E<x.length;E+=1)b.push(_(x[E]));return b}return _(x)};return og={arrayToObject:s,assign:h,combine:g,compact:c,decode:a,encode:u,isBuffer:p,isRegExp:f,maybeMap:v,merge:o},og}var lg,V_;function XM(){if(V_)return lg;V_=1;var i=VM(),t=rT(),e=By(),r=Object.prototype.hasOwnProperty,n={brackets:function(y){return y+"[]"},comma:"comma",indices:function(y,x){return y+"["+x+"]"},repeat:function(y){return y}},s=Array.isArray,o=Array.prototype.push,h=function(v,y){o.apply(v,s(y)?y:[y])},a=Date.prototype.toISOString,l=e.default,u={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,filter:void 0,format:l,formatter:e.formatters[l],indices:!1,serializeDate:function(y){return a.call(y)},skipNulls:!1,strictNullHandling:!1},c=function(y){return typeof y=="string"||typeof y=="number"||typeof y=="boolean"||typeof y=="symbol"||typeof y=="bigint"},f={},p=function v(y,x,_,b,E,T,S,C,M,P,F,V,O,U,H,W,B,L){for(var N=y,Y=L,D=0,k=!1;(Y=Y.get(f))!==void 0&&!k;){var X=Y.get(y);if(D+=1,typeof X<"u"){if(X===D)throw new RangeError("Cyclic object value");k=!0}typeof Y.get(f)>"u"&&(D=0)}if(typeof P=="function"?N=P(x,N):N instanceof Date?N=O(N):_==="comma"&&s(N)&&(N=t.maybeMap(N,function(it){return it instanceof Date?O(it):it})),N===null){if(T)return M&&!W?M(x,u.encoder,B,"key",U):x;N=""}if(c(N)||t.isBuffer(N)){if(M){var $=W?x:M(x,u.encoder,B,"key",U);return[H($)+"="+H(M(N,u.encoder,B,"value",U))]}return[H(x)+"="+H(String(N))]}var j=[];if(typeof N>"u")return j;var K;if(_==="comma"&&s(N))W&&M&&(N=t.maybeMap(N,M)),K=[{value:N.length>0?N.join(",")||null:void 0}];else if(s(P))K=P;else{var tt=Object.keys(N);K=F?tt.sort(F):tt}var ct=C?String(x).replace(/\./g,"%2E"):String(x),ft=b&&s(N)&&N.length===1?ct+"[]":ct;if(E&&s(N)&&N.length===0)return ft+"[]";for(var mt=0;mt<K.length;++mt){var lt=K[mt],gt=typeof lt=="object"&&lt&&typeof lt.value<"u"?lt.value:N[lt];if(!(S&&gt===null)){var yt=V&&C?String(lt).replace(/\./g,"%2E"):String(lt),St=s(N)?typeof _=="function"?_(ft,yt):ft:ft+(V?"."+yt:"["+yt+"]");L.set(y,D);var Rt=i();Rt.set(f,L),h(j,v(gt,St,_,b,E,T,S,C,_==="comma"&&W&&s(N)?null:M,P,F,V,O,U,H,W,B,Rt))}}return j},g=function(y){if(!y)return u;if(typeof y.allowEmptyArrays<"u"&&typeof y.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof y.encodeDotInKeys<"u"&&typeof y.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(y.encoder!==null&&typeof y.encoder<"u"&&typeof y.encoder!="function")throw new TypeError("Encoder has to be a function.");var x=y.charset||u.charset;if(typeof y.charset<"u"&&y.charset!=="utf-8"&&y.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var _=e.default;if(typeof y.format<"u"){if(!r.call(e.formatters,y.format))throw new TypeError("Unknown format option provided.");_=y.format}var b=e.formatters[_],E=u.filter;(typeof y.filter=="function"||s(y.filter))&&(E=y.filter);var T;if(y.arrayFormat in n?T=y.arrayFormat:"indices"in y?T=y.indices?"indices":"repeat":T=u.arrayFormat,"commaRoundTrip"in y&&typeof y.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var S=typeof y.allowDots>"u"?y.encodeDotInKeys===!0?!0:u.allowDots:!!y.allowDots;return{addQueryPrefix:typeof y.addQueryPrefix=="boolean"?y.addQueryPrefix:u.addQueryPrefix,allowDots:S,allowEmptyArrays:typeof y.allowEmptyArrays=="boolean"?!!y.allowEmptyArrays:u.allowEmptyArrays,arrayFormat:T,charset:x,charsetSentinel:typeof y.charsetSentinel=="boolean"?y.charsetSentinel:u.charsetSentinel,commaRoundTrip:!!y.commaRoundTrip,delimiter:typeof y.delimiter>"u"?u.delimiter:y.delimiter,encode:typeof y.encode=="boolean"?y.encode:u.encode,encodeDotInKeys:typeof y.encodeDotInKeys=="boolean"?y.encodeDotInKeys:u.encodeDotInKeys,encoder:typeof y.encoder=="function"?y.encoder:u.encoder,encodeValuesOnly:typeof y.encodeValuesOnly=="boolean"?y.encodeValuesOnly:u.encodeValuesOnly,filter:E,format:_,formatter:b,serializeDate:typeof y.serializeDate=="function"?y.serializeDate:u.serializeDate,skipNulls:typeof y.skipNulls=="boolean"?y.skipNulls:u.skipNulls,sort:typeof y.sort=="function"?y.sort:null,strictNullHandling:typeof y.strictNullHandling=="boolean"?y.strictNullHandling:u.strictNullHandling}};return lg=function(v,y){var x=v,_=g(y),b,E;typeof _.filter=="function"?(E=_.filter,x=E("",x)):s(_.filter)&&(E=_.filter,b=E);var T=[];if(typeof x!="object"||x===null)return"";var S=n[_.arrayFormat],C=S==="comma"&&_.commaRoundTrip;b||(b=Object.keys(x)),_.sort&&b.sort(_.sort);for(var M=i(),P=0;P<b.length;++P){var F=b[P],V=x[F];_.skipNulls&&V===null||h(T,p(V,F,S,C,_.allowEmptyArrays,_.strictNullHandling,_.skipNulls,_.encodeDotInKeys,_.encode?_.encoder:null,_.filter,_.sort,_.allowDots,_.serializeDate,_.format,_.formatter,_.encodeValuesOnly,_.charset,M))}var O=T.join(_.delimiter),U=_.addQueryPrefix===!0?"?":"";return _.charsetSentinel&&(_.charset==="iso-8859-1"?U+="utf8=%26%2310003%3B&":U+="utf8=%E2%9C%93&"),O.length>0?U+O:""},lg}var hg,X_;function GM(){if(X_)return hg;X_=1;var i=rT(),t=Object.prototype.hasOwnProperty,e=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:i.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},n=function(f){return f.replace(/&#(\d+);/g,function(p,g){return String.fromCharCode(parseInt(g,10))})},s=function(f,p,g){if(f&&typeof f=="string"&&p.comma&&f.indexOf(",")>-1)return f.split(",");if(p.throwOnLimitExceeded&&g>=p.arrayLimit)throw new RangeError("Array limit exceeded. Only "+p.arrayLimit+" element"+(p.arrayLimit===1?"":"s")+" allowed in an array.");return f},o="utf8=%26%2310003%3B",h="utf8=%E2%9C%93",a=function(p,g){var v={__proto__:null},y=g.ignoreQueryPrefix?p.replace(/^\?/,""):p;y=y.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var x=g.parameterLimit===1/0?void 0:g.parameterLimit,_=y.split(g.delimiter,g.throwOnLimitExceeded?x+1:x);if(g.throwOnLimitExceeded&&_.length>x)throw new RangeError("Parameter limit exceeded. Only "+x+" parameter"+(x===1?"":"s")+" allowed.");var b=-1,E,T=g.charset;if(g.charsetSentinel)for(E=0;E<_.length;++E)_[E].indexOf("utf8=")===0&&(_[E]===h?T="utf-8":_[E]===o&&(T="iso-8859-1"),b=E,E=_.length);for(E=0;E<_.length;++E)if(E!==b){var S=_[E],C=S.indexOf("]="),M=C===-1?S.indexOf("="):C+1,P,F;M===-1?(P=g.decoder(S,r.decoder,T,"key"),F=g.strictNullHandling?null:""):(P=g.decoder(S.slice(0,M),r.decoder,T,"key"),F=i.maybeMap(s(S.slice(M+1),g,e(v[P])?v[P].length:0),function(O){return g.decoder(O,r.decoder,T,"value")})),F&&g.interpretNumericEntities&&T==="iso-8859-1"&&(F=n(String(F))),S.indexOf("[]=")>-1&&(F=e(F)?[F]:F);var V=t.call(v,P);V&&g.duplicates==="combine"?v[P]=i.combine(v[P],F):(!V||g.duplicates==="last")&&(v[P]=F)}return v},l=function(f,p,g,v){var y=0;if(f.length>0&&f[f.length-1]==="[]"){var x=f.slice(0,-1).join("");y=Array.isArray(p)&&p[x]?p[x].length:0}for(var _=v?p:s(p,g,y),b=f.length-1;b>=0;--b){var E,T=f[b];if(T==="[]"&&g.parseArrays)E=g.allowEmptyArrays&&(_===""||g.strictNullHandling&&_===null)?[]:i.combine([],_);else{E=g.plainObjects?{__proto__:null}:{};var S=T.charAt(0)==="["&&T.charAt(T.length-1)==="]"?T.slice(1,-1):T,C=g.decodeDotInKeys?S.replace(/%2E/g,"."):S,M=parseInt(C,10);!g.parseArrays&&C===""?E={0:_}:!isNaN(M)&&T!==C&&String(M)===C&&M>=0&&g.parseArrays&&M<=g.arrayLimit?(E=[],E[M]=_):C!=="__proto__"&&(E[C]=_)}_=E}return _},u=function(p,g,v,y){if(p){var x=v.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,_=/(\[[^[\]]*])/,b=/(\[[^[\]]*])/g,E=v.depth>0&&_.exec(x),T=E?x.slice(0,E.index):x,S=[];if(T){if(!v.plainObjects&&t.call(Object.prototype,T)&&!v.allowPrototypes)return;S.push(T)}for(var C=0;v.depth>0&&(E=b.exec(x))!==null&&C<v.depth;){if(C+=1,!v.plainObjects&&t.call(Object.prototype,E[1].slice(1,-1))&&!v.allowPrototypes)return;S.push(E[1])}if(E){if(v.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+v.depth+" and strictDepth is true");S.push("["+x.slice(E.index)+"]")}return l(S,g,v,y)}},c=function(p){if(!p)return r;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.decodeDotInKeys<"u"&&typeof p.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(p.decoder!==null&&typeof p.decoder<"u"&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof p.throwOnLimitExceeded<"u"&&typeof p.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var g=typeof p.charset>"u"?r.charset:p.charset,v=typeof p.duplicates>"u"?r.duplicates:p.duplicates;if(v!=="combine"&&v!=="first"&&v!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var y=typeof p.allowDots>"u"?p.decodeDotInKeys===!0?!0:r.allowDots:!!p.allowDots;return{allowDots:y,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:r.allowPrototypes,allowSparse:typeof p.allowSparse=="boolean"?p.allowSparse:r.allowSparse,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:r.arrayLimit,charset:g,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:r.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:r.comma,decodeDotInKeys:typeof p.decodeDotInKeys=="boolean"?p.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof p.decoder=="function"?p.decoder:r.decoder,delimiter:typeof p.delimiter=="string"||i.isRegExp(p.delimiter)?p.delimiter:r.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:r.depth,duplicates:v,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:r.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:r.plainObjects,strictDepth:typeof p.strictDepth=="boolean"?!!p.strictDepth:r.strictDepth,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof p.throwOnLimitExceeded=="boolean"?p.throwOnLimitExceeded:!1}};return hg=function(f,p){var g=c(p);if(f===""||f===null||typeof f>"u")return g.plainObjects?{__proto__:null}:{};for(var v=typeof f=="string"?a(f,g):f,y=g.plainObjects?{__proto__:null}:{},x=Object.keys(v),_=0;_<x.length;++_){var b=x[_],E=u(b,v[b],g,typeof f=="string");y=i.merge(y,E,g)}return g.allowSparse===!0?y:i.compact(y)},hg}var ug,G_;function YM(){if(G_)return ug;G_=1;var i=XM(),t=GM(),e=By();return ug={formats:e,parse:t,stringify:i},ug}var Y_;function $M(){if(Y_)return ao;Y_=1;var i=uM();function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var e=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,n=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],o=["{","}","|","\\","^","`"].concat(s),h=["'"].concat(o),a=["%","/","?",";","#"].concat(h),l=["/","?","#"],u=255,c=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=YM();function x(T,S,C){if(T&&typeof T=="object"&&T instanceof t)return T;var M=new t;return M.parse(T,S,C),M}t.prototype.parse=function(T,S,C){if(typeof T!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof T);var M=T.indexOf("?"),P=M!==-1&&M<T.indexOf("#")?"?":"#",F=T.split(P),V=/\\/g;F[0]=F[0].replace(V,"/"),T=F.join(P);var O=T;if(O=O.trim(),!C&&T.split("#").length===1){var U=n.exec(O);if(U)return this.path=O,this.href=O,this.pathname=U[1],U[2]?(this.search=U[2],S?this.query=y.parse(this.search.substr(1)):this.query=this.search.substr(1)):S&&(this.search="",this.query={}),this}var H=e.exec(O);if(H){H=H[0];var W=H.toLowerCase();this.protocol=W,O=O.substr(H.length)}if(C||H||O.match(/^\/\/[^@/]+@[^@/]+/)){var B=O.substr(0,2)==="//";B&&!(H&&g[H])&&(O=O.substr(2),this.slashes=!0)}if(!g[H]&&(B||H&&!v[H])){for(var L=-1,N=0;N<l.length;N++){var Y=O.indexOf(l[N]);Y!==-1&&(L===-1||Y<L)&&(L=Y)}var D,k;L===-1?k=O.lastIndexOf("@"):k=O.lastIndexOf("@",L),k!==-1&&(D=O.slice(0,k),O=O.slice(k+1),this.auth=decodeURIComponent(D)),L=-1;for(var N=0;N<a.length;N++){var Y=O.indexOf(a[N]);Y!==-1&&(L===-1||Y<L)&&(L=Y)}L===-1&&(L=O.length),this.host=O.slice(0,L),O=O.slice(L),this.parseHost(),this.hostname=this.hostname||"";var X=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!X)for(var $=this.hostname.split(/\./),N=0,j=$.length;N<j;N++){var K=$[N];if(K&&!K.match(c)){for(var tt="",ct=0,ft=K.length;ct<ft;ct++)K.charCodeAt(ct)>127?tt+="x":tt+=K[ct];if(!tt.match(c)){var mt=$.slice(0,N),lt=$.slice(N+1),gt=K.match(f);gt&&(mt.push(gt[1]),lt.unshift(gt[2])),lt.length&&(O="/"+lt.join(".")+O),this.hostname=mt.join(".");break}}}this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),X||(this.hostname=i.toASCII(this.hostname));var yt=this.port?":"+this.port:"",St=this.hostname||"";this.host=St+yt,this.href+=this.host,X&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),O[0]!=="/"&&(O="/"+O))}if(!p[W])for(var N=0,j=h.length;N<j;N++){var Rt=h[N];if(O.indexOf(Rt)!==-1){var it=encodeURIComponent(Rt);it===Rt&&(it=escape(Rt)),O=O.split(Rt).join(it)}}var ut=O.indexOf("#");ut!==-1&&(this.hash=O.substr(ut),O=O.slice(0,ut));var Ct=O.indexOf("?");if(Ct!==-1?(this.search=O.substr(Ct),this.query=O.substr(Ct+1),S&&(this.query=y.parse(this.query)),O=O.slice(0,Ct)):S&&(this.search="",this.query={}),O&&(this.pathname=O),v[W]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var yt=this.pathname||"",zt=this.search||"";this.path=yt+zt}return this.href=this.format(),this};function _(T){return typeof T=="string"&&(T=x(T)),T instanceof t?T.format():t.prototype.format.call(T)}t.prototype.format=function(){var T=this.auth||"";T&&(T=encodeURIComponent(T),T=T.replace(/%3A/i,":"),T+="@");var S=this.protocol||"",C=this.pathname||"",M=this.hash||"",P=!1,F="";this.host?P=T+this.host:this.hostname&&(P=T+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(P+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(F=y.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var V=this.search||F&&"?"+F||"";return S&&S.substr(-1)!==":"&&(S+=":"),this.slashes||(!S||v[S])&&P!==!1?(P="//"+(P||""),C&&C.charAt(0)!=="/"&&(C="/"+C)):P||(P=""),M&&M.charAt(0)!=="#"&&(M="#"+M),V&&V.charAt(0)!=="?"&&(V="?"+V),C=C.replace(/[?#]/g,function(O){return encodeURIComponent(O)}),V=V.replace("#","%23"),S+P+C+V+M};function b(T,S){return x(T,!1,!0).resolve(S)}t.prototype.resolve=function(T){return this.resolveObject(x(T,!1,!0)).format()};function E(T,S){return T?x(T,!1,!0).resolveObject(S):S}return t.prototype.resolveObject=function(T){if(typeof T=="string"){var S=new t;S.parse(T,!1,!0),T=S}for(var C=new t,M=Object.keys(this),P=0;P<M.length;P++){var F=M[P];C[F]=this[F]}if(C.hash=T.hash,T.href==="")return C.href=C.format(),C;if(T.slashes&&!T.protocol){for(var V=Object.keys(T),O=0;O<V.length;O++){var U=V[O];U!=="protocol"&&(C[U]=T[U])}return v[C.protocol]&&C.hostname&&!C.pathname&&(C.pathname="/",C.path=C.pathname),C.href=C.format(),C}if(T.protocol&&T.protocol!==C.protocol){if(!v[T.protocol]){for(var H=Object.keys(T),W=0;W<H.length;W++){var B=H[W];C[B]=T[B]}return C.href=C.format(),C}if(C.protocol=T.protocol,!T.host&&!g[T.protocol]){for(var j=(T.pathname||"").split("/");j.length&&!(T.host=j.shift()););T.host||(T.host=""),T.hostname||(T.hostname=""),j[0]!==""&&j.unshift(""),j.length<2&&j.unshift(""),C.pathname=j.join("/")}else C.pathname=T.pathname;if(C.search=T.search,C.query=T.query,C.host=T.host||"",C.auth=T.auth,C.hostname=T.hostname||T.host,C.port=T.port,C.pathname||C.search){var L=C.pathname||"",N=C.search||"";C.path=L+N}return C.slashes=C.slashes||T.slashes,C.href=C.format(),C}var Y=C.pathname&&C.pathname.charAt(0)==="/",D=T.host||T.pathname&&T.pathname.charAt(0)==="/",k=D||Y||C.host&&T.pathname,X=k,$=C.pathname&&C.pathname.split("/")||[],j=T.pathname&&T.pathname.split("/")||[],K=C.protocol&&!v[C.protocol];if(K&&(C.hostname="",C.port=null,C.host&&($[0]===""?$[0]=C.host:$.unshift(C.host)),C.host="",T.protocol&&(T.hostname=null,T.port=null,T.host&&(j[0]===""?j[0]=T.host:j.unshift(T.host)),T.host=null),k=k&&(j[0]===""||$[0]==="")),D)C.host=T.host||T.host===""?T.host:C.host,C.hostname=T.hostname||T.hostname===""?T.hostname:C.hostname,C.search=T.search,C.query=T.query,$=j;else if(j.length)$||($=[]),$.pop(),$=$.concat(j),C.search=T.search,C.query=T.query;else if(T.search!=null){if(K){C.host=$.shift(),C.hostname=C.host;var tt=C.host&&C.host.indexOf("@")>0?C.host.split("@"):!1;tt&&(C.auth=tt.shift(),C.hostname=tt.shift(),C.host=C.hostname)}return C.search=T.search,C.query=T.query,(C.pathname!==null||C.search!==null)&&(C.path=(C.pathname?C.pathname:"")+(C.search?C.search:"")),C.href=C.format(),C}if(!$.length)return C.pathname=null,C.search?C.path="/"+C.search:C.path=null,C.href=C.format(),C;for(var ct=$.slice(-1)[0],ft=(C.host||T.host||$.length>1)&&(ct==="."||ct==="..")||ct==="",mt=0,lt=$.length;lt>=0;lt--)ct=$[lt],ct==="."?$.splice(lt,1):ct===".."?($.splice(lt,1),mt++):mt&&($.splice(lt,1),mt--);if(!k&&!X)for(;mt--;mt)$.unshift("..");k&&$[0]!==""&&(!$[0]||$[0].charAt(0)!=="/")&&$.unshift(""),ft&&$.join("/").substr(-1)!=="/"&&$.push("");var gt=$[0]===""||$[0]&&$[0].charAt(0)==="/";if(K){C.hostname=gt?"":$.length?$.shift():"",C.host=C.hostname;var tt=C.host&&C.host.indexOf("@")>0?C.host.split("@"):!1;tt&&(C.auth=tt.shift(),C.hostname=tt.shift(),C.host=C.hostname)}return k=k||C.host&&$.length,k&&!gt&&$.unshift(""),$.length>0?C.pathname=$.join("/"):(C.pathname=null,C.path=null),(C.pathname!==null||C.search!==null)&&(C.path=(C.pathname?C.pathname:"")+(C.search?C.search:"")),C.auth=T.auth||C.auth,C.slashes=C.slashes||T.slashes,C.href=C.format(),C},t.prototype.parseHost=function(){var T=this.host,S=r.exec(T);S&&(S=S[0],S!==":"&&(this.port=S.substr(1)),T=T.substr(0,T.length-S.length)),T&&(this.hostname=T)},ao.parse=x,ao.resolve=b,ao.resolveObject=E,ao.format=_,ao.Url=t,ao}var cg=$M();const $_={};function pe(i,t,e=3){if($_[t])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`):(r=r.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${i}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`),console.warn(r))),$_[t]=!0}function Ai(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function Nh(i){return i.split("?")[0].split("#")[0]}function WM(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function HM(i,t,e){return i.replace(new RegExp(WM(t),"g"),e)}function zM(i,t){let e="",r=0,n=-1,s=0,o=-1;for(let h=0;h<=i.length;++h){if(h<i.length)o=i.charCodeAt(h);else{if(o===47)break;o=47}if(o===47){if(!(n===h-1||s===1))if(n!==h-1&&s===2){if(e.length<2||r!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const a=e.lastIndexOf("/");if(a!==e.length-1){a===-1?(e="",r=0):(e=e.slice(0,a),r=e.length-1-e.lastIndexOf("/")),n=h,s=0;continue}}else if(e.length===2||e.length===1){e="",r=0,n=h,s=0;continue}}}else e.length>0?e+=`/${i.slice(n+1,h)}`:e=i.slice(n+1,h),r=h-n-1;n=h,s=0}else o===46&&s!==-1?++s:s=-1}return e}const qe={toPosix(i){return HM(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){Ai(i),i=this.toPosix(i);const t=/^file:\/\/\//.exec(i);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(i);return e?e[0]:""},toAbsolute(i,t,e){if(Ai(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const r=Nh(this.toPosix(t??It.ADAPTER.getBaseUrl())),n=Nh(this.toPosix(e??this.rootname(r)));return i=this.toPosix(i),i.startsWith("/")?qe.join(n,i.slice(1)):this.isAbsolute(i)?i:this.join(r,i)},normalize(i){if(Ai(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let t="";const e=i.startsWith("/");this.hasProtocol(i)&&(t=this.rootname(i),i=i.slice(t.length));const r=i.endsWith("/");return i=zM(i),i.length>0&&r&&(i+="/"),e?`/${i}`:t+i},isAbsolute(i){return Ai(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let t;for(let e=0;e<i.length;++e){const r=i[e];if(Ai(r),r.length>0)if(t===void 0)t=r;else{const n=i[e-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?t+=`/../${r}`:t+=`/${r}`}}return t===void 0?".":this.normalize(t)},dirname(i){if(Ai(i),i.length===0)return".";i=this.toPosix(i);let t=i.charCodeAt(0);const e=t===47;let r=-1,n=!0;const s=this.getProtocol(i),o=i;i=i.slice(s.length);for(let h=i.length-1;h>=1;--h)if(t=i.charCodeAt(h),t===47){if(!n){r=h;break}}else n=!1;return r===-1?e?"/":this.isUrl(o)?s+i:s:e&&r===1?"//":s+i.slice(0,r)},rootname(i){Ai(i),i=this.toPosix(i);let t="";if(i.startsWith("/")?t="/":t=this.getProtocol(i),this.isUrl(i)){const e=i.indexOf("/",t.length);e!==-1?t=i.slice(0,e):t=i,t.endsWith("/")||(t+="/")}return t},basename(i,t){Ai(i),t&&Ai(t),i=Nh(this.toPosix(i));let e=0,r=-1,n=!0,s;if(t!==void 0&&t.length>0&&t.length<=i.length){if(t.length===i.length&&t===i)return"";let o=t.length-1,h=-1;for(s=i.length-1;s>=0;--s){const a=i.charCodeAt(s);if(a===47){if(!n){e=s+1;break}}else h===-1&&(n=!1,h=s+1),o>=0&&(a===t.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=h))}return e===r?r=h:r===-1&&(r=i.length),i.slice(e,r)}for(s=i.length-1;s>=0;--s)if(i.charCodeAt(s)===47){if(!n){e=s+1;break}}else r===-1&&(n=!1,r=s+1);return r===-1?"":i.slice(e,r)},extname(i){Ai(i),i=Nh(this.toPosix(i));let t=-1,e=0,r=-1,n=!0,s=0;for(let o=i.length-1;o>=0;--o){const h=i.charCodeAt(o);if(h===47){if(!n){e=o+1;break}continue}r===-1&&(n=!1,r=o+1),h===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||r===-1||s===0||s===1&&t===r-1&&t===e+1?"":i.slice(t,r)},parse(i){Ai(i);const t={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return t;i=Nh(this.toPosix(i));let e=i.charCodeAt(0);const r=this.isAbsolute(i);let n;t.root=this.rootname(i),r||this.hasProtocol(i)?n=1:n=0;let s=-1,o=0,h=-1,a=!0,l=i.length-1,u=0;for(;l>=n;--l){if(e=i.charCodeAt(l),e===47){if(!a){o=l+1;break}continue}h===-1&&(a=!1,h=l+1),e===46?s===-1?s=l:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||h===-1||u===0||u===1&&s===h-1&&s===o+1?h!==-1&&(o===0&&r?t.base=t.name=i.slice(1,h):t.base=t.name=i.slice(o,h)):(o===0&&r?(t.name=i.slice(1,s),t.base=i.slice(1,h)):(t.name=i.slice(o,s),t.base=i.slice(o,h)),t.ext=i.slice(s,h)),t.dir=this.dirname(i),t},sep:"/",delimiter:":",joinExtensions:[".html"]};var qn=(i=>(i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR",i))(qn||{}),$h=(i=>(i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",i))($h||{});let dg;async function jM(){return dg??(dg=(async()=>{var s;const i=document.createElement("canvas").getContext("webgl");if(!i)return $h.UNPACK;const t=await new Promise(o=>{const h=document.createElement("video");h.onloadeddata=()=>o(h),h.onerror=()=>o(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!t)return $h.UNPACK;const e=i.createTexture();i.bindTexture(i.TEXTURE_2D,e);const r=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,r),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t);const n=new Uint8Array(4);return i.readPixels(0,0,1,1,i.RGBA,i.UNSIGNED_BYTE,n),i.deleteFramebuffer(r),i.deleteTexture(e),(s=i.getExtension("WEBGL_lose_context"))==null||s.loseContext(),n[0]<=n[3]?$h.PMA:$h.UNPACK})()),dg}let fg;function qM(){return typeof fg>"u"&&(fg=function(){var t;const i={stencil:!0,failIfMajorPerformanceCaveat:It.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!It.ADAPTER.getWebGLRenderingContext())return!1;const e=It.ADAPTER.createCanvas();let r=e.getContext("webgl",i)||e.getContext("experimental-webgl",i);const n=!!((t=r==null?void 0:r.getContextAttributes())!=null&&t.stencil);if(r){const s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,n}catch{return!1}}()),fg}var KM={grad:.9,turn:360,rad:360/(2*Math.PI)},Fs=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},Wr=function(i,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*i)/e+0},gi=function(i,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),i>e?e:i>t?i:t},nT=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},W_=function(i){return{r:gi(i.r,0,255),g:gi(i.g,0,255),b:gi(i.b,0,255),a:gi(i.a)}},pg=function(i){return{r:Wr(i.r),g:Wr(i.g),b:Wr(i.b),a:Wr(i.a,3)}},ZM=/^#([0-9a-f]{3,8})$/i,Lc=function(i){var t=i.toString(16);return t.length<2?"0"+t:t},iT=function(i){var t=i.r,e=i.g,r=i.b,n=i.a,s=Math.max(t,e,r),o=s-Math.min(t,e,r),h=o?s===t?(e-r)/o:s===e?2+(r-t)/o:4+(t-e)/o:0;return{h:60*(h<0?h+6:h),s:s?o/s*100:0,v:s/255*100,a:n}},sT=function(i){var t=i.h,e=i.s,r=i.v,n=i.a;t=t/360*6,e/=100,r/=100;var s=Math.floor(t),o=r*(1-e),h=r*(1-(t-s)*e),a=r*(1-(1-t+s)*e),l=s%6;return{r:255*[r,h,o,o,a,r][l],g:255*[a,r,r,h,o,o][l],b:255*[o,o,a,r,r,h][l],a:n}},H_=function(i){return{h:nT(i.h),s:gi(i.s,0,100),l:gi(i.l,0,100),a:gi(i.a)}},z_=function(i){return{h:Wr(i.h),s:Wr(i.s),l:Wr(i.l),a:Wr(i.a,3)}},j_=function(i){return sT((e=(t=i).s,{h:t.h,s:(e*=((r=t.l)<50?r:100-r)/100)>0?2*e/(r+e)*100:0,v:r+e,a:t.a}));var t,e,r},nu=function(i){return{h:(t=iT(i)).h,s:(n=(200-(e=t.s))*(r=t.v)/100)>0&&n<200?e*r/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,e,r,n},QM=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,JM=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tP=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eP=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fv={string:[[function(i){var t=ZM.exec(i);return t?(i=t[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?Wr(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?Wr(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var t=tP.exec(i)||eP.exec(i);return t?t[2]!==t[4]||t[4]!==t[6]?null:W_({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(i){var t=QM.exec(i)||JM.exec(i);if(!t)return null;var e,r,n=H_({h:(e=t[1],r=t[2],r===void 0&&(r="deg"),Number(e)*(KM[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return j_(n)},"hsl"]],object:[[function(i){var t=i.r,e=i.g,r=i.b,n=i.a,s=n===void 0?1:n;return Fs(t)&&Fs(e)&&Fs(r)?W_({r:Number(t),g:Number(e),b:Number(r),a:Number(s)}):null},"rgb"],[function(i){var t=i.h,e=i.s,r=i.l,n=i.a,s=n===void 0?1:n;if(!Fs(t)||!Fs(e)||!Fs(r))return null;var o=H_({h:Number(t),s:Number(e),l:Number(r),a:Number(s)});return j_(o)},"hsl"],[function(i){var t=i.h,e=i.s,r=i.v,n=i.a,s=n===void 0?1:n;if(!Fs(t)||!Fs(e)||!Fs(r))return null;var o=function(h){return{h:nT(h.h),s:gi(h.s,0,100),v:gi(h.v,0,100),a:gi(h.a)}}({h:Number(t),s:Number(e),v:Number(r),a:Number(s)});return sT(o)},"hsv"]]},q_=function(i,t){for(var e=0;e<t.length;e++){var r=t[e][0](i);if(r)return[r,t[e][1]]}return[null,void 0]},rP=function(i){return typeof i=="string"?q_(i.trim(),fv.string):typeof i=="object"&&i!==null?q_(i,fv.object):[null,void 0]},mg=function(i,t){var e=nu(i);return{h:e.h,s:gi(e.s+100*t,0,100),l:e.l,a:e.a}},gg=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},K_=function(i,t){var e=nu(i);return{h:e.h,s:e.s,l:gi(e.l+100*t,0,100),a:e.a}},pv=function(){function i(t){this.parsed=rP(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return Wr(gg(this.rgba),2)},i.prototype.isDark=function(){return gg(this.rgba)<.5},i.prototype.isLight=function(){return gg(this.rgba)>=.5},i.prototype.toHex=function(){return t=pg(this.rgba),e=t.r,r=t.g,n=t.b,o=(s=t.a)<1?Lc(Wr(255*s)):"","#"+Lc(e)+Lc(r)+Lc(n)+o;var t,e,r,n,s,o},i.prototype.toRgb=function(){return pg(this.rgba)},i.prototype.toRgbString=function(){return t=pg(this.rgba),e=t.r,r=t.g,n=t.b,(s=t.a)<1?"rgba("+e+", "+r+", "+n+", "+s+")":"rgb("+e+", "+r+", "+n+")";var t,e,r,n,s},i.prototype.toHsl=function(){return z_(nu(this.rgba))},i.prototype.toHslString=function(){return t=z_(nu(this.rgba)),e=t.h,r=t.s,n=t.l,(s=t.a)<1?"hsla("+e+", "+r+"%, "+n+"%, "+s+")":"hsl("+e+", "+r+"%, "+n+"%)";var t,e,r,n,s},i.prototype.toHsv=function(){return t=iT(this.rgba),{h:Wr(t.h),s:Wr(t.s),v:Wr(t.v),a:Wr(t.a,3)};var t},i.prototype.invert=function(){return as({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},i.prototype.saturate=function(t){return t===void 0&&(t=.1),as(mg(this.rgba,t))},i.prototype.desaturate=function(t){return t===void 0&&(t=.1),as(mg(this.rgba,-t))},i.prototype.grayscale=function(){return as(mg(this.rgba,-1))},i.prototype.lighten=function(t){return t===void 0&&(t=.1),as(K_(this.rgba,t))},i.prototype.darken=function(t){return t===void 0&&(t=.1),as(K_(this.rgba,-t))},i.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},i.prototype.alpha=function(t){return typeof t=="number"?as({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Wr(this.rgba.a,3);var e},i.prototype.hue=function(t){var e=nu(this.rgba);return typeof t=="number"?as({h:t,s:e.s,l:e.l,a:e.a}):Wr(e.h)},i.prototype.isEqual=function(t){return this.toHex()===as(t).toHex()},i}(),as=function(i){return i instanceof pv?i:new pv(i)},Z_=[],nP=function(i){i.forEach(function(t){Z_.indexOf(t)<0&&(t(pv,fv),Z_.push(t))})};function iP(i,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var n in e)r[e[n]]=n;var s={};i.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,a,l=r[this.toHex()];if(l)return l;if(o!=null&&o.closest){var u=this.toRgb(),c=1/0,f="black";if(!s.length)for(var p in e)s[p]=new i(e[p]).toRgb();for(var g in e){var v=(h=u,a=s[g],Math.pow(h.r-a.r,2)+Math.pow(h.g-a.g,2)+Math.pow(h.b-a.b,2));v<c&&(c=v,f=g)}return f}},t.string.push([function(o){var h=o.toLowerCase(),a=h==="transparent"?"#0000":e[h];return a?new i(a).toRgb():null},"name"])}nP([iP]);const _l=class vd{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof vd)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const r=typeof t;if(r!==typeof e)return!1;if(r==="number"||r==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((n,s)=>n===e[s]);if(t!==null&&e!==null){const n=Object.keys(t),s=Object.keys(e);return n.length!==s.length?!1:n.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,r,n]=this._components;return{r:t,g:e,b:r,a:n}}toRgb(){const[t,e,r]=this._components;return{r:t,g:e,b:r}}toRgbaString(){const[t,e,r]=this.toUint8RgbArray();return`rgba(${t},${e},${r},${this.alpha})`}toUint8RgbArray(t){const[e,r,n]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(r*255),t[2]=Math.round(n*255),t}toRgbArray(t){t=t??[];const[e,r,n]=this._components;return t[0]=e,t[1]=r,t[2]=n,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,r,n,s]=vd.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=r,this._components[2]*=n,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,s=this._int&255;return e&&(r=r*t+.5|0,n=n*t+.5|0,s=s*t+.5|0),(t*255<<24)+(r<<16)+(n<<8)+s}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,r,n]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(r*t)/t,this._components[2]=Math.round(n*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,r,n,s]=this._components;return t[0]=e,t[1]=r,t[2]=n,t[3]=s,t}normalize(t){let e,r,n,s;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,r=(o>>8&255)/255,n=(o&255)/255,s=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,r,n,s=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,r,n,s=255]=t,e/=255,r/=255,n/=255,s/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const h=vd.HEX_PATTERN.exec(t);h&&(t=`#${h[2]}`)}const o=as(t);o.isValid()&&({r:e,g:r,b:n,a:s}=o.rgba,e/=255,r/=255,n/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=r,this._components[2]=n,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,r]=this._components;this._int=(t*255<<16)+(e*255<<8)+(r*255|0)}_clamp(t,e=0,r=1){return typeof t=="number"?Math.min(Math.max(t,e),r):(t.forEach((n,s)=>{t[s]=Math.min(Math.max(n,e),r)}),t)}};_l.shared=new _l,_l.temp=new _l,_l.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ye=_l;function sP(i,t=[]){return pe("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),Ye.shared.setValue(i).toRgbArray(t)}function aP(i){return pe("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Ye.shared.setValue(i).toHex()}function yd(i){return pe("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Ye.shared.setValue(i).toNumber()}function oP(){const i=[],t=[];for(let r=0;r<32;r++)i[r]=r,t[r]=r;i[qn.NORMAL_NPM]=qn.NORMAL,i[qn.ADD_NPM]=qn.ADD,i[qn.SCREEN_NPM]=qn.SCREEN,t[qn.NORMAL]=qn.NORMAL_NPM,t[qn.ADD]=qn.ADD_NPM,t[qn.SCREEN]=qn.SCREEN_NPM;const e=[];return e.push(t),e.push(i),e}const aT=oP();function oT(i,t){return aT[t?1:0][i]}function lP(i,t=null){const e=i*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let r=0,n=0;r<e;r+=6,n+=4)t[r+0]=n+0,t[r+1]=n+1,t[r+2]=n+2,t[r+3]=n+0,t[r+4]=n+2,t[r+5]=n+3;return t}function lT(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}function Pd(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Q_(i){return!(i&i-1)&&!!i}function J_(i){let t=(i>65535?1:0)<<4;i>>>=t;let e=(i>255?1:0)<<3;return i>>>=e,t|=e,e=(i>15?1:0)<<2,i>>>=e,t|=e,e=(i>3?1:0)<<1,i>>>=e,t|=e,t|i>>1}function kl(i,t,e){const r=i.length;let n;if(t>=r||e===0)return;e=t+e>r?r-t:e;const s=r-e;for(n=t;n<s;++n)i[n]=i[n+e];i.length=s}function Fa(i){return i===0?0:i<0?-1:1}let hP=0;function Lo(){return++hP}const mv=class{constructor(i,t,e,r){this.left=i,this.top=t,this.right=e,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};mv.EMPTY=new mv(0,0,0,0);let tb=mv;const eb={},os=Object.create(null),xa=Object.create(null);class uP{constructor(t,e,r){this._canvas=It.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||It.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function rb(i,t,e){for(let r=0,n=4*e*t;r<t;++r,n+=4)if(i[n+3]!==0)return!1;return!0}function nb(i,t,e,r,n){const s=4*t;for(let o=r,h=r*s+4*e;o<=n;++o,h+=s)if(i[h+3]!==0)return!1;return!0}function cP(i){const{width:t,height:e}=i,r=i.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const n=r.getImageData(0,0,t,e).data;let s=0,o=0,h=t-1,a=e-1;for(;o<e&&rb(n,t,o);)++o;if(o===e)return tb.EMPTY;for(;rb(n,t,a);)--a;for(;nb(n,t,s,o,a);)++s;for(;nb(n,t,h,o,a);)--h;return++h,++a,new tb(s,o,h,a)}function dP(i){const t=cP(i),{width:e,height:r}=t;let n=null;if(!t.isEmpty()){const s=i.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");n=s.getImageData(t.left,t.top,e,r)}return{width:e,height:r,data:n}}function fP(i,t=globalThis.location){if(i.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(i,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function zs(i,t=1){var r;const e=(r=It.RETINA_PREFIX)==null?void 0:r.exec(i);return e?parseFloat(e[1]):t}var At=(i=>(i.Renderer="renderer",i.Application="application",i.RendererSystem="renderer-webgl-system",i.RendererPlugin="renderer-webgl-plugin",i.CanvasRendererSystem="renderer-canvas-system",i.CanvasRendererPlugin="renderer-canvas-plugin",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i))(At||{});const gv=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},ib=(i,t)=>gv(i).priority??t,Dt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(gv).forEach(t=>{t.type.forEach(e=>{var r,n;return(n=(r=this._removeHandlers)[e])==null?void 0:n.call(r,t)})}),this},add(...i){return i.map(gv).forEach(t=>{t.type.forEach(e=>{var s,o;const r=this._addHandlers,n=this._queue;r[e]?(s=r[e])==null||s.call(r,t):(n[e]=n[e]||[],(o=n[e])==null||o.push(t))})}),this},handle(i,t,e){var o;const r=this._addHandlers,n=this._removeHandlers;if(r[i]||n[i])throw new Error(`Extension type ${i} already has a handler`);r[i]=t,n[i]=e;const s=this._queue;return s[i]&&((o=s[i])==null||o.forEach(h=>t(h)),delete s[i]),this},handleByMap(i,t){return this.handle(i,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(i,t,e=-1){return this.handle(i,r=>{t.includes(r.ref)||(t.push(r.ref),t.sort((n,s)=>ib(s,e)-ib(n,e)))},r=>{const n=t.indexOf(r.ref);n!==-1&&t.splice(n,1)})}};let vv=class{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}};const pP=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function mP(i){let t="";for(let e=0;e<i;++e)e>0&&(t+=`
else `),e<i-1&&(t+=`if(test == ${e}.0){}`);return t}function gP(i,t){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const r=pP.replace(/%forloop%/gi,mP(i));if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))i=i/2|0;else break}return i}const vg=0,yg=1,xg=2,wg=3,_g=4,bg=5;let Ya=class hT{constructor(){this.data=0,this.blendMode=Gt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<vg)}set blend(t){!!(this.data&1<<vg)!==t&&(this.data^=1<<vg)}get offsets(){return!!(this.data&1<<yg)}set offsets(t){!!(this.data&1<<yg)!==t&&(this.data^=1<<yg)}get culling(){return!!(this.data&1<<xg)}set culling(t){!!(this.data&1<<xg)!==t&&(this.data^=1<<xg)}get depthTest(){return!!(this.data&1<<wg)}set depthTest(t){!!(this.data&1<<wg)!==t&&(this.data^=1<<wg)}get depthMask(){return!!(this.data&1<<bg)}set depthMask(t){!!(this.data&1<<bg)!==t&&(this.data^=1<<bg)}get clockwiseFrontFace(){return!!(this.data&1<<_g)}set clockwiseFrontFace(t){!!(this.data&1<<_g)!==t&&(this.data^=1<<_g)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==Gt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new hT;return t.depthTest=!1,t.blend=!0,t}};Ya.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const yv=[];function uT(i,t){if(!i)return null;let e="";if(typeof i=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);r&&(e=r[1].toLowerCase())}for(let r=yv.length-1;r>=0;--r){const n=yv[r];if(n.test&&n.test(i,e))return new n(i,t)}throw new Error("Unrecognized source type to auto-detect Resource")}let Yi=class{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,r,n,s,o,h,a){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:u}=this;this._aliasCount++;for(let c=0,f=u.length;c<f;c++)u[c][l](t,e,r,n,s,o,h,a);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}};Object.defineProperties(Yi.prototype,{dispatch:{value:Yi.prototype.emit},run:{value:Yi.prototype.emit}});let ou=class{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Yi("setRealSize"),this.onUpdate=new Yi("update"),this.onError=new Yi("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}},uf=class extends ou{constructor(t,e){const{width:r,height:n}=e||{};if(!r||!n)throw new Error("BufferResource width or height invalid");super(r,n),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,r){const n=t.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===ji.UNPACK);const s=e.realWidth,o=e.realHeight;return r.width===s&&r.height===o?n.texSubImage2D(e.target,0,0,0,s,o,e.format,r.type,this.data):(r.width=s,r.height=o,n.texImage2D(e.target,0,r.internalFormat,s,o,0,e.format,r.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}};const vP={scaleMode:Zn.NEAREST,alphaMode:ji.NPM},xv=class bl extends xu{constructor(t=null,e=null){super(),e=Object.assign({},bl.defaultOptions,e);const{alphaMode:r,mipmap:n,anisotropicLevel:s,scaleMode:o,width:h,height:a,wrapMode:l,format:u,type:c,target:f,resolution:p,resourceOptions:g}=e;t&&!(t instanceof ou)&&(t=uT(t,g),t.internal=!0),this.resolution=p||It.RESOLUTION,this.width=Math.round((h||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=s,this._wrapMode=l,this._scaleMode=o,this.format=u,this.type=c,this.target=f,this.alphaMode=r,this.uid=Lo(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=h>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let r;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)}setRealSize(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Q_(this.realWidth)&&Q_(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xa[this.cacheId],delete os[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),bl.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,r=It.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else{if(!t._pixiId){const h=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${h}_${Lo()}`}s=t._pixiId}let o=xa[s];if(n&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new bl(t,e),o.cacheId=s,bl.addToCache(o,s)),o}static fromBuffer(t,e,r,n){t=t||new Float32Array(e*r*4);const s=new uf(t,{width:e,height:r,...n==null?void 0:n.resourceOptions});let o,h;return t instanceof Float32Array?(o=Et.RGBA,h=$t.FLOAT):t instanceof Int32Array?(o=Et.RGBA_INTEGER,h=$t.INT):t instanceof Uint32Array?(o=Et.RGBA_INTEGER,h=$t.UNSIGNED_INT):t instanceof Int16Array?(o=Et.RGBA_INTEGER,h=$t.SHORT):t instanceof Uint16Array?(o=Et.RGBA_INTEGER,h=$t.UNSIGNED_SHORT):t instanceof Int8Array?(o=Et.RGBA,h=$t.BYTE):(o=Et.RGBA,h=$t.UNSIGNED_BYTE),s.internal=!0,new bl(s,Object.assign({},vP,{type:h,format:o},n))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),xa[e]&&xa[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),xa[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=xa[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete xa[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete xa[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};xv.defaultOptions={mipmap:$i.POW2,anisotropicLevel:0,scaleMode:Zn.LINEAR,wrapMode:Oa.CLAMP,alphaMode:ji.UNPACK,target:Pl.TEXTURE_2D,format:Et.RGBA,type:$t.UNSIGNED_BYTE},xv._globalBatch=0;let re=xv,wv=class{constructor(){this.texArray=null,this.blend=0,this.type=Gi.TRIANGLES,this.start=0,this.size=0,this.data=null}},yP=0,Nr=class cT{constructor(t,e=!0,r=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=yP++,this.disposeRunner=new Yi("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?ms.ELEMENT_ARRAY_BUFFER:ms.ARRAY_BUFFER}get index(){return this.type===ms.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new cT(t)}},sb=class dT{constructor(t,e=0,r=!1,n=$t.FLOAT,s,o,h,a=1){this.buffer=t,this.size=e,this.normalized=r,this.type=n,this.stride=s,this.start=o,this.instance=h,this.divisor=a}destroy(){this.buffer=null}static from(t,e,r,n,s){return new dT(t,e,r,n,s)}};const xP={Float32Array,Uint32Array,Int32Array,Uint8Array};function wP(i,t){let e=0,r=0;const n={};for(let a=0;a<i.length;a++)r+=t[a],e+=i[a].length;const s=new ArrayBuffer(e*4);let o=null,h=0;for(let a=0;a<i.length;a++){const l=t[a],u=i[a],c=lT(u);n[c]||(n[c]=new xP[c](s)),o=n[c];for(let f=0;f<u.length;f++){const p=(f/l|0)*r+h,g=f%l;o[p+g]=u[f]}h+=l}return new Float32Array(s)}const ab={5126:4,5123:2,5121:1};let _P=0;const bP={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};let wu=class _v{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=_P++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Yi("disposeGeometry"),this.refCount=0}addAttribute(t,e,r=0,n=!1,s,o,h,a=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Nr||(e instanceof Array&&(e=new Float32Array(e)),e=new Nr(e));const l=t.split("|");if(l.length>1){for(let c=0;c<l.length;c++)this.addAttribute(l[c],e,r,n,s);return this}let u=this.buffers.indexOf(e);return u===-1&&(this.buffers.push(e),u=this.buffers.length-1),this.attributes[t]=new sb(u,r,n,s,o,h,a),this.instanced=this.instanced||a,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Nr||(t instanceof Array&&(t=new Uint16Array(t)),t=new Nr(t)),t.type=ms.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],r=new Nr;let n;for(n in this.attributes){const s=this.attributes[n],o=this.buffers[s.buffer];t.push(o.data),e.push(s.size*ab[s.type]/4),s.buffer=0}for(r.data=wP(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new _v;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new Nr(this.buffers[e].data.slice(0));for(const e in this.attributes){const r=this.attributes[e];t.attributes[e]=new sb(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=ms.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new _v,r=[],n=[],s=[];let o;for(let h=0;h<t.length;h++){o=t[h];for(let a=0;a<o.buffers.length;a++)n[a]=n[a]||0,n[a]+=o.buffers[a].data.length,s[a]=0}for(let h=0;h<o.buffers.length;h++)r[h]=new bP[lT(o.buffers[h].data)](n[h]),e.buffers[h]=new Nr(r[h]);for(let h=0;h<t.length;h++){o=t[h];for(let a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,s[a]),s[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=ms.ELEMENT_ARRAY_BUFFER;let h=0,a=0,l=0,u=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){u=c;break}for(const c in o.attributes){const f=o.attributes[c];(f.buffer|0)===u&&(a+=f.size*ab[f.type]/4)}for(let c=0;c<t.length;c++){const f=t[c].indexBuffer.data;for(let p=0;p<f.length;p++)e.indexBuffer.data[p+l]+=h;h+=t[c].buffers[u].data.length/a,l+=f.length}}return e}},fT=class extends wu{constructor(t=!1){super(),this._buffer=new Nr(null,t,!1),this._indexBuffer=new Nr(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,$t.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,$t.FLOAT).addAttribute("aColor",this._buffer,4,!0,$t.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,$t.FLOAT).addIndex(this._indexBuffer)}};const kd=Math.PI*2,EP=180/Math.PI,TP=Math.PI/180;var nn=(i=>(i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC",i))(nn||{});let Pe=class pT{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new pT(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}};Pe.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Uc=[new Pe,new Pe,new Pe,new Pe];let le=class bv{constructor(t=0,e=0,r=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=nn.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new bv(0,0,0,0)}clone(){return new bv(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const M=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=M)return!1;const P=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>P}const r=this.left,n=this.right,s=this.top,o=this.bottom;if(n<=r||o<=s)return!1;const h=Uc[0].set(t.left,t.top),a=Uc[1].set(t.left,t.bottom),l=Uc[2].set(t.right,t.top),u=Uc[3].set(t.right,t.bottom);if(l.x<=h.x||a.y<=h.y)return!1;const c=Math.sign(e.a*e.d-e.b*e.c);if(c===0||(e.apply(h,h),e.apply(a,a),e.apply(l,l),e.apply(u,u),Math.max(h.x,a.x,l.x,u.x)<=r||Math.min(h.x,a.x,l.x,u.x)>=n||Math.max(h.y,a.y,l.y,u.y)<=s||Math.min(h.y,a.y,l.y,u.y)>=o))return!1;const f=c*(a.y-h.y),p=c*(h.x-a.x),g=f*r+p*s,v=f*n+p*s,y=f*r+p*o,x=f*n+p*o;if(Math.max(g,v,y,x)<=f*h.x+p*h.y||Math.min(g,v,y,x)>=f*u.x+p*u.y)return!1;const _=c*(h.y-l.y),b=c*(l.x-h.x),E=_*r+b*s,T=_*n+b*s,S=_*r+b*o,C=_*n+b*o;return!(Math.max(E,T,S,C)<=_*h.x+b*h.y||Math.min(E,T,S,C)>=_*u.x+b*u.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(t=1,e=.001){const r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=s-n,this}};le.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};let mT=class gT{constructor(t=0,e=0,r=0){this.x=t,this.y=e,this.radius=r,this.type=nn.CIRC}clone(){return new gT(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const r=this.radius*this.radius;let n=this.x-t,s=this.y-e;return n*=n,s*=s,n+s<=r}getBounds(){return new le(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}};mT.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};let vT=class yT{constructor(t=0,e=0,r=0,n=0){this.x=t,this.y=e,this.width=r,this.height=n,this.type=nn.ELIP}clone(){return new yT(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1}getBounds(){return new le(this.x-this.width,this.y-this.height,this.width,this.height)}};vT.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};let Fl=class xT{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const r=[];for(let n=0,s=e.length;n<s;n++)r.push(e[n].x,e[n].y);e=r}this.points=e,this.type=nn.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new xT(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let r=!1;const n=this.points.length/2;for(let s=0,o=n-1;s<n;o=s++){const h=this.points[s*2],a=this.points[s*2+1],l=this.points[o*2],u=this.points[o*2+1];a>e!=u>e&&t<(l-h)*((e-a)/(u-a))+h&&(r=!r)}return r}};Fl.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((i,t)=>`${i}, ${t}`,"")}]`};let wT=class _T{constructor(t=0,e=0,r=0,n=0,s=20){this.x=t,this.y=e,this.width=r,this.height=n,this.radius=s,this.type=nn.RREC}clone(){return new _T(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let n=t-(this.x+r),s=e-(this.y+r);const o=r*r;if(n*n+s*s<=o||(n=t-(this.x+this.width-r),n*n+s*s<=o)||(s=e-(this.y+this.height-r),n*n+s*s<=o)||(n=t-(this.x+r),n*n+s*s<=o))return!0}return!1}};wT.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};let Ze=class xd{constructor(t=1,e=0,r=0,n=1,s=0,o=0){this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=s,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,r,n,s,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=s,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,e){e=e||new Pe;const r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e}applyInverse(t,e){e=e||new Pe;const r=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*r*n+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*s+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),r=Math.sin(t),n=this.a,s=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=s*e-this.d*r,this.d=s*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this}append(t){const e=this.a,r=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*s+this.ty,this}setTransform(t,e,r,n,s,o,h,a,l){return this.a=Math.cos(h+l)*s,this.b=Math.sin(h+l)*s,this.c=-Math.sin(h-a)*o,this.d=Math.cos(h-a)*o,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,r=this.b,n=this.c,s=this.d,o=t.pivot,h=-Math.atan2(-n,s),a=Math.atan2(r,e),l=Math.abs(h+a);return l<1e-5||Math.abs(kd-l)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*r+o.y*s),t}invert(){const t=this.a,e=this.b,r=this.c,n=this.d,s=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*s)/o,this.ty=-(t*this.ty-e*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new xd;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new xd}static get TEMP_MATRIX(){return new xd}};Ze.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const po=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],mo=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],go=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vo=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ev=[],bT=[],Vc=Math.sign;function SP(){for(let i=0;i<16;i++){const t=[];Ev.push(t);for(let e=0;e<16;e++){const r=Vc(po[i]*po[e]+go[i]*mo[e]),n=Vc(mo[i]*po[e]+vo[i]*mo[e]),s=Vc(po[i]*go[e]+go[i]*vo[e]),o=Vc(mo[i]*go[e]+vo[i]*vo[e]);for(let h=0;h<16;h++)if(po[h]===r&&mo[h]===n&&go[h]===s&&vo[h]===o){t.push(h);break}}}for(let i=0;i<16;i++){const t=new Ze;t.set(po[i],mo[i],go[i],vo[i],0,0),bT.push(t)}}SP();const lr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>po[i],uY:i=>mo[i],vX:i=>go[i],vY:i=>vo[i],inv:i=>i&8?i&15:-i&7,add:(i,t)=>Ev[i][t],sub:(i,t)=>Ev[i][lr.inv(t)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,t)=>Math.abs(i)*2<=Math.abs(t)?t>=0?lr.S:lr.N:Math.abs(t)*2<=Math.abs(i)?i>0?lr.E:lr.W:t>0?i>0?lr.SE:lr.SW:i>0?lr.NE:lr.NW,matrixAppendRotationInv:(i,t,e=0,r=0)=>{const n=bT[lr.inv(t)];n.tx=e,n.ty=r,i.append(n)}};let Co=class ET{constructor(t,e,r=0,n=0){this._x=r,this._y=n,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new ET(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}};Co.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Tv=class{constructor(){this.worldTransform=new Ze,this.localTransform=new Ze,this.position=new Co(this.onChange,this,0,0),this.scale=new Co(this.onChange,this,1,1),this.pivot=new Co(this.onChange,this,0,0),this.skew=new Co(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(i){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==i._worldID){const e=i.worldTransform,r=this.worldTransform;r.a=t.a*e.a+t.b*e.c,r.b=t.a*e.b+t.b*e.d,r.c=t.c*e.a+t.d*e.c,r.d=t.c*e.b+t.d*e.d,r.tx=t.tx*e.a+t.ty*e.c+e.tx,r.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=i._worldID,this._worldID++}}setFromMatrix(i){i.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(i){this._rotation!==i&&(this._rotation=i,this.updateSkew())}};Tv.IDENTITY=new Tv;let cf=Tv;cf.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var AP=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,CP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function ob(i,t,e){const r=i.createShader(t);return i.shaderSource(r,e),i.compileShader(r),r}function Eg(i){const t=new Array(i);for(let e=0;e<t.length;e++)t[e]=!1;return t}function TT(i,t){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Eg(2*t);case"bvec3":return Eg(3*t);case"bvec4":return Eg(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Bl=[{test:i=>i.type==="float"&&i.size===1&&!i.isArray,code:i=>`
            if(uv["${i}"] !== ud["${i}"].value)
            {
                ud["${i}"].value = uv["${i}"]
                gl.uniform1f(ud["${i}"].location, uv["${i}"])
            }
            `},{test:(i,t)=>(i.type==="sampler2D"||i.type==="samplerCube"||i.type==="sampler2DArray")&&i.size===1&&!i.isArray&&(t==null||t.castToBaseTexture!==void 0),code:i=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${i}"], t);

            if(ud["${i}"].value !== t)
            {
                ud["${i}"].value = t;
                gl.uniform1i(ud["${i}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(i,t)=>i.type==="mat3"&&i.size===1&&!i.isArray&&t.a!==void 0,code:i=>`
            gl.uniformMatrix3fv(ud["${i}"].location, false, uv["${i}"].toArray(true));
            `,codeUbo:i=>`
                var ${i}_matrix = uv.${i}.toArray(true);

                data[offset] = ${i}_matrix[0];
                data[offset+1] = ${i}_matrix[1];
                data[offset+2] = ${i}_matrix[2];
        
                data[offset + 4] = ${i}_matrix[3];
                data[offset + 5] = ${i}_matrix[4];
                data[offset + 6] = ${i}_matrix[5];
        
                data[offset + 8] = ${i}_matrix[6];
                data[offset + 9] = ${i}_matrix[7];
                data[offset + 10] = ${i}_matrix[8];
            `},{test:(i,t)=>i.type==="vec2"&&i.size===1&&!i.isArray&&t.x!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${i}"].location, v.x, v.y);
                }`,codeUbo:i=>`
                v = uv.${i};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:i=>i.type==="vec2"&&i.size===1&&!i.isArray,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${i}"].location, v[0], v[1]);
                }
            `},{test:(i,t)=>i.type==="vec4"&&i.size===1&&!i.isArray&&t.width!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${i}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(i,t)=>i.type==="vec4"&&i.size===1&&!i.isArray&&t.red!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${i}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(i,t)=>i.type==="vec3"&&i.size===1&&!i.isArray&&t.red!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${i}"].location, v.red, v.green, v.blue)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:i=>i.type==="vec4"&&i.size===1&&!i.isArray,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${i}"].location, v[0], v[1], v[2], v[3])
                }`}],IP={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},RP={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function MP(i,t){var r;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in i.uniforms){const s=t[n];if(!s){((r=i.uniforms[n])==null?void 0:r.group)===!0&&(i.uniforms[n].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=i.uniforms[n];let h=!1;for(let a=0;a<Bl.length;a++)if(Bl[a].test(s,o)){e.push(Bl[a].code(n,o)),h=!0;break}if(!h){const a=(s.size===1&&!s.isArray?IP:RP)[s.type].replace("location",`ud["${n}"].location`);e.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${a};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const ST={};let gl=ST;function PP(){if(gl===ST||gl!=null&&gl.isContextLost()){const i=It.ADAPTER.createCanvas();let t;It.PREFER_ENV>=Go.WEBGL2&&(t=i.getContext("webgl2",{})),t||(t=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),gl=t}return gl}let Xc;function kP(){if(!Xc){Xc=mi.MEDIUM;const i=PP();if(i&&i.getShaderPrecisionFormat){const t=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);t&&(Xc=t.precision?mi.HIGH:mi.MEDIUM)}}return Xc}function lb(i,t){const e=i.getShaderSource(t).split(`
`).map((l,u)=>`${u}: ${l}`),r=i.getShaderInfoLog(t),n=r.split(`
`),s={},o=n.map(l=>parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(l=>l&&!s[l]?(s[l]=!0,!0):!1),h=[""];o.forEach(l=>{e[l-1]=`%c${e[l-1]}%c`,h.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const a=e.join(`
`);h[0]=a,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...h),console.groupEnd()}function FP(i,t,e,r){i.getProgramParameter(t,i.LINK_STATUS)||(i.getShaderParameter(e,i.COMPILE_STATUS)||lb(i,e),i.getShaderParameter(r,i.COMPILE_STATUS)||lb(i,r),console.error("PixiJS Error: Could not initialize shader."),i.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(t)))}const BP={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function AT(i){return BP[i]}let Gc=null;const hb={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function CT(i,t){if(!Gc){const e=Object.keys(hb);Gc={};for(let r=0;r<e.length;++r){const n=e[r];Gc[i[n]]=hb[n]}}return Gc[t]}function ub(i,t,e){if(i.substring(0,9)!=="precision"){let r=t;return t===mi.HIGH&&e!==mi.HIGH&&(r=mi.MEDIUM),`precision ${r} float;
${i}`}else if(e!==mi.HIGH&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}let Oh;function NP(){if(typeof Oh=="boolean")return Oh;try{Oh=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Oh=!1}return Oh}let OP=0;const Yc={},Sv=class El{constructor(t,e,r="pixi-shader",n={}){this.extra={},this.id=OP++,this.vertexSrc=t||El.defaultVertexSrc,this.fragmentSrc=e||El.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Yc[r]?(Yc[r]++,r+=`-${Yc[r]}`):Yc[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=ub(this.vertexSrc,El.defaultVertexPrecision,mi.HIGH),this.fragmentSrc=ub(this.fragmentSrc,El.defaultFragmentPrecision,kP())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return CP}static get defaultFragmentSrc(){return AP}static from(t,e,r){const n=t+e;let s=eb[n];return s||(eb[n]=s=new El(t,e,r)),s}};Sv.defaultVertexPrecision=mi.HIGH,Sv.defaultFragmentPrecision=Ys.apple.device?mi.HIGH:mi.MEDIUM;let $s=Sv,DP=0,ko=class wd{constructor(t,e,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=DP++,this.static=!!e,this.ubo=!!r,t instanceof Nr?(this.buffer=t,this.buffer.type=ms.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Nr(new Float32Array(1)),this.buffer.type=ms.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,r){if(!this.ubo)this.uniforms[t]=new wd(e,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,r){return new wd(t,e,r)}static uboFrom(t,e){return new wd(t,e??!0,!0)}},Da=class IT{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof ko?this.uniformGroup=e:this.uniformGroup=new ko(e):this.uniformGroup=new ko({}),this.disposeRunner=new Yi("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const r in e.uniforms){const n=e.uniforms[r];if(n.group===!0&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,r){const n=$s.from(t,e);return new IT(n,r)}},LP=class{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const r=new Int32Array(t);for(let s=0;s<t;s++)r[s]=s;this.defaultGroupCache[t]=ko.from({uSamplers:r},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new $s(this.vertexSrc,n)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ze,default:this.defaultGroupCache[t]};return new Da(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let r=0;r<t;r++)r>0&&(e+=`
else `),r<t-1&&(e+=`if(vTextureId < ${r}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}},Av=class{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}};function UP(){return!Ys.apple.device}function VP(i){let t=!0;const e=It.ADAPTER.getNavigator();if(Ys.tablet||Ys.phone){if(Ys.apple.device){const r=e.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(t=!1)}if(Ys.android.device){const r=e.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(t=!1)}}return t?i:4}let df=class{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}};var XP=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,GP=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Wh=class Ii extends df{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=fT,this.vertexSize=6,this.state=Ya.for2d(),this.size=Ii.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??VP(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??UP(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return pe("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return GP}static get defaultFragmentTemplate(){return XP}setShaderGenerator({vertex:t=Ii.defaultVertexSrc,fragment:e=Ii.defaultFragmentTemplate}={}){this.shaderGenerator=new LP(t,e)}contextChange(){const t=this.renderer.gl;It.PREFER_ENV===Go.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Ii.defaultMaxTextures),this.maxTextures=gP(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=Ii,r=this.size/4,n=Math.floor(r/this.maxTextures)+1;for(;t.length<r;)t.push(new wv);for(;e.length<n;)e.push(new Av);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,r=Ii._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let h=++re._globalBatch,a=0,l=r[0],u=0;n.copyBoundTextures(s,e);for(let c=0;c<this._bufferSize;++c){const f=t[c];t[c]=null,f._batchEnabled!==h&&(l.count>=e&&(n.boundArray(l,s,h,e),this.buildDrawCalls(l,u,c),u=c,l=r[++a],++h),f._batchEnabled=h,f.touched=o,l.elements[l.count++]=f)}l.count>0&&(n.boundArray(l,s,h,e),this.buildDrawCalls(l,u,this._bufferSize),++a,++h);for(let c=0;c<s.length;c++)s[c]=null;re._globalBatch=h}buildDrawCalls(t,e,r){const{_bufferedElements:n,_attributeBuffer:s,_indexBuffer:o,vertexSize:h}=this,a=Ii._drawCallPool;let l=this._dcIndex,u=this._aIndex,c=this._iIndex,f=a[l];f.start=this._iIndex,f.texArray=t;for(let p=e;p<r;++p){const g=n[p],v=g._texture.baseTexture,y=aT[v.alphaMode?1:0][g.blendMode];n[p]=null,e<p&&f.blend!==y&&(f.size=c-f.start,e=p,f=a[++l],f.texArray=t,f.start=c),this.packInterleavedGeometry(g,s,o,u,c),u+=g.vertexData.length/2*h,c+=g.indices.length,f.blend=y}e<r&&(f.size=c-f.start,++l),this._dcIndex=l,this._aIndex=u,this._iIndex=c}bindAndClearTexArray(t){const e=this.renderer.texture;for(let r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:r}=this;Ii.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:r}=this.renderer,n=Ii._drawCallPool;let s=null;for(let o=0;o<t;o++){const{texArray:h,type:a,size:l,start:u,blend:c}=n[o];s!==h&&(s=h,this.bindAndClearTexArray(h)),this.state.blendMode=c,r.set(this.state),e.drawElements(a,l,e.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ii.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=Pd(Math.ceil(t/8)),r=J_(e),n=e*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new vv(n*this.vertexSize*4)),s}getIndexBuffer(t){const e=Pd(Math.ceil(t/12)),r=J_(e),n=e*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(n)),s}packInterleavedGeometry(t,e,r,n,s){const{uint32View:o,float32View:h}=e,a=n/this.vertexSize,l=t.uvs,u=t.indices,c=t.vertexData,f=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),g=Ye.shared.setValue(t._tintRGB).toPremultiplied(p,t._texture.baseTexture.alphaMode>0);for(let v=0;v<c.length;v+=2)h[n++]=c[v],h[n++]=c[v+1],h[n++]=l[v],h[n++]=l[v+1],o[n++]=g,h[n++]=f;for(let v=0;v<u.length;v++)r[s++]=a+u[v]}};Wh.defaultBatchSize=4096,Wh.extension={name:"batch",type:At.RendererPlugin},Wh._drawCallPool=[],Wh._textureArrayPool=[];let yo=Wh;Dt.add(yo);var YP=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,$P=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Cv=class Hh extends Da{constructor(t,e,r){const n=$s.from(t||Hh.defaultVertexSrc,e||Hh.defaultFragmentSrc);super(n,r),this.padding=0,this.resolution=Hh.defaultResolution,this.multisample=Hh.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Ya}apply(t,e,r,n,s){t.applyFilter(this,e,r,n)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return $P}static get defaultFragmentSrc(){return YP}};Cv.defaultResolution=1,Cv.defaultMultisample=Mr.NONE;let _n=Cv;class Fd{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ye(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:r,backgroundAlpha:n}=t,s=r??e;s!==void 0&&(this.color=s),this.alpha=n}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Fd.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Fd.extension={type:[At.RendererSystem,At.CanvasRendererSystem],name:"background"};Dt.add(Fd);let RT=class{constructor(t){this.renderer=t,this.emptyRenderer=new df(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:r}=this.renderer.texture;for(let n=e-1;n>=0;--n)t[n]=r[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,e,r,n){const{elements:s,ids:o,count:h}=t;let a=0;for(let l=0;l<h;l++){const u=s[l],c=u._batchLocation;if(c>=0&&c<n&&e[c]===u){o[l]=c;continue}for(;a<n;){const f=e[a];if(f&&f._batchEnabled===r&&f._batchLocation===a){a++;continue}o[l]=a,u._batchLocation=a,e[a]=u;break}}}destroy(){this.renderer=null}};RT.extension={type:At.RendererSystem,name:"batch"};Dt.add(RT);let cb=0,Bd=class{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=cb++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,r=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:r,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=cb++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let r;if(It.PREFER_ENV>=Go.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}};Bd.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Bd.extension={type:At.RendererSystem,name:"context"};Dt.add(Bd);let Iv=class{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Yi("disposeFramebuffer"),this.multisample=Mr.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new re(null,{scaleMode:Zn.NEAREST,resolution:1,mipmap:$i.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new re(null,{scaleMode:Zn.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:$i.OFF,format:Et.DEPTH_COMPONENT,type:$t.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const n=this.colorTextures[r],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}},MT=class extends re{constructor(t={}){if(typeof t=="number"){const e=arguments[0],r=arguments[1],n=arguments[2],s=arguments[3];t={width:e,height:r,scaleMode:n,resolution:s}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=Mr.NONE),super(null,t),this.mipmap=$i.OFF,this.valid=!0,this._clear=new Ye([0,0,0,0]),this.framebuffer=new Iv(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}},js=class extends ou{constructor(t){const e=t,r=e.naturalWidth||e.videoWidth||e.displayWidth||e.width,n=e.naturalHeight||e.videoHeight||e.displayHeight||e.height;super(r,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,r){r===void 0&&!e.startsWith("data:")?t.crossOrigin=fP(e):r!==!1&&(t.crossOrigin=typeof r=="string"?r:"anonymous")}upload(t,e,r,n){const s=t.gl,o=e.realWidth,h=e.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===ji.UNPACK),!this.noSubImage&&e.target===s.TEXTURE_2D&&r.width===o&&r.height===h?s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,r.type,n):(r.width=o,r.height=h,s.texImage2D(e.target,0,r.internalFormat,e.format,r.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(e,r),super.update()}dispose(){this.source=null}},PT=class extends js{constructor(t,e){if(e=e||{},typeof t=="string"){const r=new Image;js.crossOrigin(r,t,e.crossorigin),r.src=t,t=r}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??It.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,r)=>{const n=this.source;this.url=n.src;const s=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};n.complete&&n.src?s():(n.onload=s,n.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,r=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then(n=>n.blob()).then(n=>e(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ji.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,r){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,r,this.bitmap),!this.preserveBitmap){let n=!0;const s=e._glTextures;for(const o in s){const h=s[o];if(h!==r&&h.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}},Ny=class{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,r){const n=e.width,s=e.height;if(r){const o=t.width/2/n,h=t.height/2/s,a=t.x/n+o,l=t.y/s+h;r=lr.add(r,lr.NW),this.x0=a+o*lr.uX(r),this.y0=l+h*lr.uY(r),r=lr.add(r,2),this.x1=a+o*lr.uX(r),this.y1=l+h*lr.uY(r),r=lr.add(r,2),this.x2=a+o*lr.uX(r),this.y2=l+h*lr.uY(r),r=lr.add(r,2),this.x3=a+o*lr.uX(r),this.y3=l+h*lr.uY(r)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}};Ny.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const db=new Ny;function $c(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}let ve=class Ge extends xu{constructor(t,e,r,n,s,o,h){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new le(0,0,1,1)),t instanceof Ge&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this.destroyed=!1,this._uvs=db,this.uvMatrix=null,this.orig=r||e,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Pe(o.x,o.y):new Pe(0,0),this.defaultBorders=h,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&os[e.url]&&Ge.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Ge.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var n;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),r=new Ge(this.baseTexture,!this.noFrame&&t,e,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=t),r}updateUvs(){this._uvs===db&&(this._uvs=new Ny),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},r=It.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else if(t instanceof re){if(!t.cacheId){const h=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${h}-${Lo()}`,re.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const h=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${h}_${Lo()}`}s=t._pixiId}let o=os[s];if(n&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(t instanceof re)?(e.resolution||(e.resolution=zs(t)),o=new Ge(new re(t,e)),o.baseTexture.cacheId=s,re.addToCache(o.baseTexture,s),Ge.addToCache(o,s)):!o&&t instanceof re&&(o=new Ge(t),Ge.addToCache(o,s)),o}static fromURL(t,e){const r=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),n=Ge.from(t,Object.assign({resourceOptions:r},e),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then(()=>Promise.resolve(n))}static fromBuffer(t,e,r,n){return new Ge(re.fromBuffer(t,e,r,n))}static fromLoader(t,e,r,n){const s=new re(t,Object.assign({scaleMode:re.defaultOptions.scaleMode,resolution:zs(e)},n)),{resource:o}=s;o instanceof PT&&(o.url=e);const h=new Ge(s);return r||(r=e),re.addToCache(h.baseTexture,r),Ge.addToCache(h,r),r!==e&&(re.addToCache(h.baseTexture,e),Ge.addToCache(h,e)),h.baseTexture.valid?Promise.resolve(h):new Promise(a=>{h.baseTexture.once("loaded",()=>a(h))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),os[e]&&os[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),os[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=os[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete os[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)os[t.textureCacheIds[e]]===t&&delete os[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:r,width:n,height:s}=t,o=e+n>this.baseTexture.width,h=r+s>this.baseTexture.height;if(o||h){const a=o&&h?"and":"or",l=`X: ${e} + ${n} = ${e+n} > ${this.baseTexture.width}`,u=`Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${l} ${a} ${u}`)}this.valid=n&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Ge._EMPTY||(Ge._EMPTY=new Ge(new re),$c(Ge._EMPTY),$c(Ge._EMPTY.baseTexture)),Ge._EMPTY}static get WHITE(){if(!Ge._WHITE){const t=It.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),Ge._WHITE=new Ge(re.from(t)),$c(Ge._WHITE),$c(Ge._WHITE.baseTexture)}return Ge._WHITE}},_u=class kT extends ve{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,r=!0){const n=this.baseTexture.resolution,s=Math.round(t*n)/n,o=Math.round(e*n)/n;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new kT(new MT(t))}},FT=class{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,r=Mr.NONE){const n=new MT(Object.assign({width:t,height:e,resolution:1,multisample:r},this.textureOptions));return new _u(n)}getOptimalTexture(t,e,r=1,n=Mr.NONE){let s;t=Math.max(Math.ceil(t*r-1e-6),1),e=Math.max(Math.ceil(e*r-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=Pd(t),e=Pd(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(t,e,n)),o.filterPoolKey=s,o.setResolution(r),o}getFilterTexture(t,e,r){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,r||Mr.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const r=this.texturePool[e];if(r)for(let n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const r=this.texturePool[e];if(r)for(let n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}};FT.SCREEN_KEY=-1;let WP=class extends wu{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}},BT=class extends wu{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Nr(this.vertices),this.uvBuffer=new Nr(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}},HP=class{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Mr.NONE,this.sourceFrame=new le,this.destinationFrame=new le,this.bindingSourceFrame=new le,this.bindingDestinationFrame=new le,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}};const Wc=[new Pe,new Pe,new Pe,new Pe],Tg=new Ze;let NT=class{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new FT,this.statePool=[],this.quad=new WP,this.quadUv=new BT,this.tempRect=new le,this.activeState={},this.globalUniforms=new ko({outputFrame:new le,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const r=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new HP,o=r.renderTexture;let h,a;if(o.current){const y=o.current;h=y.resolution,a=y.multisample}else h=r.resolution,a=r.multisample;let l=e[0].resolution||h,u=e[0].multisample??a,c=e[0].padding,f=e[0].autoFit,p=e[0].legacy??!0;for(let y=1;y<e.length;y++){const x=e[y];l=Math.min(l,x.resolution||h),u=Math.min(u,x.multisample??a),c=this.useMaxPadding?Math.max(c,x.padding):c+x.padding,f=f&&x.autoFit,p=p||(x.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(s),s.resolution=l,s.multisample=u,s.legacy=p,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(c);const g=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(Tg.copyFrom(r.projection.transform).invert(),g),f?(s.sourceFrame.fit(g),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(g)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,l,u),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const v=this.tempRect;v.x=0,v.y=0,v.width=s.sourceFrame.width,v.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,v),r.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const s=n.inputSize,o=n.inputPixel,h=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*e.resolution),o[1]=Math.round(s[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],h[0]=.5*o[2],h[1]=.5*o[3],h[2]=e.sourceFrame.width*s[2]-.5*o[2],h[3]=e.sourceFrame.height*s[3]-.5*o[3],e.legacy){const l=n.filterArea;l[0]=e.destinationFrame.width,l[1]=e.destinationFrame.height,l[2]=e.sourceFrame.x,l[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const a=t[t.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,e.renderTexture,a.renderTexture,fs.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let l=e.renderTexture,u=this.getOptimalFilterTexture(l.width,l.height,e.resolution);u.filterFrame=l.filterFrame;let c=0;for(c=0;c<r.length-1;++c){c===1&&e.multisample>1&&(u=this.getOptimalFilterTexture(l.width,l.height,e.resolution),u.filterFrame=l.filterFrame),r[c].apply(this,l,u,fs.CLEAR,e);const f=l;l=u,u=f}r[c].apply(this,l,a.renderTexture,fs.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(u)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=fs.CLEAR){const{renderTexture:r,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,r.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=n.stateId&1||this.forceClear;(e===fs.CLEAR||e===fs.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,r,n){const s=this.renderer;s.state.set(t.state),this.bindAndClear(r,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Gi.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Gi.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:r,destinationFrame:n}=this.activeState,{orig:s}=e._texture,o=t.set(n.width,0,0,n.height,r.x,r.y),h=e.worldTransform.copyTo(Ze.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/s.width,1/s.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,r=1,n=Mr.NONE){return this.texturePool.getOptimalTexture(t,e,r,n)}getFilterTexture(t,e,r){if(typeof t=="number"){const s=t;t=e,e=s}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,r||Mr.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const r=Wc[0],n=Wc[1],s=Wc[2],o=Wc[3];r.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(r,r),t.apply(n,n),t.apply(s,s),t.apply(o,o);const h=Math.min(r.x,n.x,s.x,o.x),a=Math.min(r.y,n.y,s.y,o.y),l=Math.max(r.x,n.x,s.x,o.x),u=Math.max(r.y,n.y,s.y,o.y);e.x=h,e.y=a,e.width=l-h,e.height=u-a}roundFrame(t,e,r,n,s){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(s){const{a:o,b:h,c:a,d:l}=s;if((Math.abs(h)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}s=s?Tg.copyFrom(s):Tg.identity(),s.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)}}};NT.extension={type:At.RendererSystem,name:"filter"};Dt.add(NT);let zP=class{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Mr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}};const jP=new le;let OT=class{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Iv(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new le,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;It.PREFER_ENV===Go.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=n=>e.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,r=0){const{gl:n}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=r),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const h=t.colorTextures[o];this.renderer.texture.unbind(h.parentTextureArray||h)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>r,h=e.height>>r,a=o/e.width;this.setViewport(e.x*a,e.y*a,o,h)}else{const o=t.width>>r,h=t.height>>r;this.setViewport(0,0,o,h)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,r,n){const s=this.viewport;t=Math.round(t),e=Math.round(e),r=Math.round(r),n=Math.round(n),(s.width!==r||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=r,s.height=n,this.gl.viewport(t,e,r,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,r,n,s=dv.COLOR|dv.DEPTH){const{gl:o}=this;o.clearColor(t,e,r,n),o.clear(s)}initFramebuffer(t){const{gl:e}=this,r=new zP(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r}resizeFramebuffer(t){const{gl:e}=this,r=t.glFramebuffers[this.CONTEXT_UID];if(r.stencil){e.bindRenderbuffer(e.RENDERBUFFER,r.stencil);let o;this.renderer.context.webGLVersion===1?o=e.DEPTH_STENCIL:t.depth&&t.stencil?o=e.DEPTH24_STENCIL8:t.depth?o=e.DEPTH_COMPONENT24:o=e.STENCIL_INDEX8,r.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,o,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,o,t.width,t.height)}const n=t.colorTextures;let s=n.length;e.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const h=n[o],a=h.parentTextureArray||h;this.renderer.texture.bind(a,0),o===0&&r.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,a._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:r}=this,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let o=s.length;r.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer():n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const h=[];for(let a=0;a<o;a++){const l=s[a],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),a===0&&n.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+a,l.target,u._glTextures[this.CONTEXT_UID].texture,e),h.push(r.COLOR_ATTACHMENT0+a))}if(h.length>1&&r.drawBuffers(h),t.depthTexture&&this.writeDepthTexture){const a=t.depthTexture;this.renderer.texture.bind(a,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){n.stencil=n.stencil||r.createRenderbuffer();let a,l;this.renderer.context.webGLVersion===1?(a=r.DEPTH_STENCIL_ATTACHMENT,l=r.DEPTH_STENCIL):t.depth&&t.stencil?(a=r.DEPTH_STENCIL_ATTACHMENT,l=r.DEPTH24_STENCIL8):t.depth?(a=r.DEPTH_ATTACHMENT,l=r.DEPTH_COMPONENT24):(a=r.STENCIL_ATTACHMENT,l=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,l,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,a,r.RENDERBUFFER,n.stencil)}else n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let r=Mr.NONE;if(t<=1||e===null)return r;for(let n=0;n<e.length;n++)if(e[n]<=t){r=e[n];break}return r===1&&(r=Mr.NONE),r}blit(t,e,r){const{current:n,renderer:s,gl:o,CONTEXT_UID:h}=this;if(s.context.webGLVersion!==2||!n)return;const a=n.glFramebuffers[h];if(!a)return;if(!t){if(!a.msaaBuffer)return;const u=n.colorTextures[0];if(!u)return;a.blitFramebuffer||(a.blitFramebuffer=new Iv(n.width,n.height),a.blitFramebuffer.addColorTexture(0,u)),t=a.blitFramebuffer,t.colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||(e=jP,e.width=n.width,e.height=n.height),r||(r=e);const l=e.width===r.width&&e.height===r.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,a.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!r)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const r=t.width,n=t.height,s=this.gl,o=e.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let h,a;this.renderer.context.webGLVersion===1?(h=s.DEPTH_STENCIL_ATTACHMENT,a=s.DEPTH_STENCIL):t.depth?(h=s.DEPTH_STENCIL_ATTACHMENT,a=s.DEPTH24_STENCIL8):(h=s.STENCIL_ATTACHMENT,a=s.STENCIL_INDEX8),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,a,r,n):s.renderbufferStorage(s.RENDERBUFFER,a,r,n),s.framebufferRenderbuffer(s.FRAMEBUFFER,h,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new le}destroy(){this.renderer=null}};OT.extension={type:At.RendererSystem,name:"framebuffer"};Dt.add(OT);const Sg={5126:4,5123:2,5121:1};let DT=class{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;It.PREFER_ENV===Go.WEBGL_LEGACY&&(r=null),r?(t.createVertexArray=()=>r.createVertexArrayOES(),t.bindVertexArray=n=>r.bindVertexArrayOES(n),t.deleteVertexArray=n=>r.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const r=t.getExtension("ANGLE_instanced_arrays");r?(t.vertexAttribDivisor=(n,s)=>r.vertexAttribDivisorANGLE(n,s),t.drawElementsInstanced=(n,s,o,h,a)=>r.drawElementsInstancedANGLE(n,s,o,h,a),t.drawArraysInstanced=(n,s,o,h)=>r.drawArraysInstancedANGLE(n,s,o,h)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:r}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);const o=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let r=0;r<t.buffers.length;r++){const n=t.buffers[r];e.update(n)}}checkCompatibility(t,e){const r=t.attributes,n=e.attributeData;for(const s in n)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,e){const r=t.attributes,n=e.attributeData,s=["g",t.id];for(const o in r)n[o]&&s.push(o,n[o].location);return s.join("-")}initGeometryVao(t,e,r=!0){const n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,h=e.program;h.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,h);const a=this.getSignature(t,h),l=t.glVertexArrayObjects[this.CONTEXT_UID];let u=l[a];if(u)return l[h.id]=u,u;const c=t.buffers,f=t.attributes,p={},g={};for(const v in c)p[v]=0,g[v]=0;for(const v in f)!f[v].size&&h.attributeData[v]?f[v].size=h.attributeData[v].size:f[v].size||console.warn(`PIXI Geometry attribute '${v}' size cannot be determined (likely the bound shader does not have the attribute)`),p[f[v].buffer]+=f[v].size*Sg[f[v].type];for(const v in f){const y=f[v],x=y.size;y.stride===void 0&&(p[y.buffer]===x*Sg[y.type]?y.stride=0:y.stride=p[y.buffer]),y.start===void 0&&(y.start=g[y.buffer],g[y.buffer]+=x*Sg[y.type])}u=n.createVertexArray(),n.bindVertexArray(u);for(let v=0;v<c.length;v++){const y=c[v];o.bind(y),r&&y._glBuffers[s].refCount++}return this.activateVao(t,h),l[h.id]=u,l[a]=u,n.bindVertexArray(null),o.unbind(ms.ARRAY_BUFFER),u}disposeGeometry(t,e){var h;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=t.buffers,o=(h=this.renderer)==null?void 0:h.buffer;if(t.disposeRunner.remove(this),!!r){if(o)for(let a=0;a<s.length;a++){const l=s[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&o.dispose(s[a],e))}if(!e){for(const a in r)if(a[0]==="g"){const l=r[a];this._activeVao===l&&this.unbind(),n.deleteVertexArray(l)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t)}activateVao(t,e){const r=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,h=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let a=null;for(const l in h){const u=h[l],c=o[u.buffer],f=c._glBuffers[n];if(e.attributeData[l]){a!==f&&(s.bind(c),a=f);const p=e.attributeData[l].location;if(r.enableVertexAttribArray(p),r.vertexAttribPointer(p,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)r.vertexAttribDivisor(p,u.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,r,n){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const h=o.indexBuffer.data.BYTES_PER_ELEMENT,a=h===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;h===2||h===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(r||0)*h,n||1):s.drawElements(t,e||o.indexBuffer.data.length,a,(r||0)*h):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,r,e||o.getSize(),n||1):s.drawArrays(t,r,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}};DT.extension={type:At.RendererSystem,name:"geometry"};Dt.add(DT);const fb=new Ze;let LT=class{constructor(t,e){this._texture=t,this.mapCoord=new Ze,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const r=this.mapCoord;for(let n=0;n<t.length;n+=2){const s=t[n],o=t[n+1];e[n]=s*r.a+o*r.c+r.tx,e[n+1]=s*r.b+o*r.d+r.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=e.orig,s=e.trim;s&&(fb.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(fb));const o=e.baseTexture,h=this.uClampFrame,a=this.clampMargin/o.resolution,l=this.clampOffset;return h[0]=(e._frame.x+a+l)/o.width,h[1]=(e._frame.y+a+l)/o.height,h[2]=(e._frame.x+e._frame.width-a+l)/o.width,h[3]=(e._frame.y+e._frame.height-a+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}};var qP=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,KP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;let ZP=class extends _n{constructor(t,e,r){let n=null;typeof t!="string"&&e===void 0&&r===void 0&&(n=t,t=void 0,e=void 0,r=void 0),super(t||KP,e||qP,r),this.maskSprite=n,this.maskMatrix=new Ze}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,r,n){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new LT(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,r,n))}},QP=class{constructor(t=null){this.type=Br.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=_n.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Br.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}},UT=class{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let r=e;if(!r.isMaskData){const s=this.maskDataPool.pop()||new QP;s.pooled=!0,s.maskObject=e,r=s}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=t,r.type!==Br.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Br.SCISSOR:this.renderer.scissor.push(r);break;case Br.STENCIL:this.renderer.stencil.push(r);break;case Br.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Br.COLOR:this.pushColorMask(r);break}r.type===Br.SPRITE&&this.maskStack.push(r)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case Br.SCISSOR:this.renderer.scissor.pop(e);break;case Br.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Br.SPRITE:this.popSpriteMask(e);break;case Br.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===Br.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=Br.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Br.SCISSOR:t.type=Br.STENCIL:t.type=Br.COLOR}pushSpriteMask(t){const{maskObject:e}=t,r=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new ZP])),n[0].resolution=t.resolution,n[0].multisample=t.multisample,n[0].maskSprite=e;const s=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,n),r.filterArea=s,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,r=t._colorMask=e&t.colorMask;r!==e&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(t){const e=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}};UT.extension={type:At.RendererSystem,name:"mask"};Dt.add(UT);let VT=class{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,r=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==r&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}};const pb=new Ze,mb=[],XT=class _d extends VT{constructor(t){super(t),this.glConst=It.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:r}=t,{renderer:n}=this,s=n.renderTexture,o=r.getBounds(!0,mb.pop()??new le);this.roundFrameToPixels(o,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),e&&o.fit(e),t._scissorRectLocal=o}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:r,c:n,d:s}=t;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(s)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||_d.isMatrixRotated(e.worldTransform)||_d.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,e,r,n,s){_d.isMatrixRotated(s)||(s=s?pb.copyFrom(s):pb.identity(),s.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(s,t),t.fit(n),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&mb.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};XT.extension={type:At.RendererSystem,name:"scissor"};let JP=XT;Dt.add(JP);let GT=class extends VT{constructor(t){super(t),this.glConst=It.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:r}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(t._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;n!==0&&(r._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(r._colorMask=n,e.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}};GT.extension={type:At.RendererSystem,name:"stencil"};Dt.add(GT);class YT{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return pe("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return pe("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return pe("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}YT.extension={type:[At.RendererSystem,At.CanvasRendererSystem],name:"_plugin"};Dt.add(YT);let $T=class{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ze,this.transform=null}update(t,e,r,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,e,r,n){const s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=o*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-o-e.y*s.d}setTransform(t){}destroy(){this.renderer=null}};$T.extension={type:At.RendererSystem,name:"projection"};Dt.add($T);const t2=new cf,gb=new le;class WT{constructor(t){this.renderer=t,this._tempMatrix=new Ze}generateTexture(t,e){const{region:r,...n}=e||{},s=(r==null?void 0:r.copyTo(gb))||t.getLocalBounds(gb,!0),o=n.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),n.width=s.width,n.height=s.height,n.resolution=o,n.multisample??(n.multisample=this.renderer.multisample);const h=_u.create(n);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=t.transform;return t.transform=t2,this.renderer.render(t,{renderTexture:h,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,h}destroy(){}}WT.extension={type:[At.RendererSystem,At.CanvasRendererSystem],name:"textureGenerator"};Dt.add(WT);const oo=new le,Dh=new le;let HT=class{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new le,this.destinationFrame=new le,this.viewportFrame=new le}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,r){const n=this.renderer;this.current=t;let s,o,h;t?(s=t.baseTexture,h=s.resolution,e||(oo.width=t.frame.width,oo.height=t.frame.height,e=oo),r||(Dh.x=t.frame.x,Dh.y=t.frame.y,Dh.width=e.width,Dh.height=e.height,r=Dh),o=s.framebuffer):(h=n.resolution,e||(oo.width=n._view.screen.width,oo.height=n._view.screen.height,e=oo),r||(r=oo,r.width=e.width,r.height=e.height));const a=this.viewportFrame;a.x=r.x*h,a.y=r.y*h,a.width=r.width*h,a.height=r.height*h,t||(a.y=n.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(o,a),this.renderer.projection.update(r,e,h,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)}clear(t,e){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=Ye.shared.setValue(t||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,h=s.width!==o.width||s.height!==o.height;if(h){let{x:a,y:l,width:u,height:c}=this.viewportFrame;a=Math.round(a),l=Math.round(l),u=Math.round(u),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,l,u,c)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,e),h&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}};HT.extension={type:At.RendererSystem,name:"renderTexture"};Dt.add(HT);let e2=class{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}};function r2(i,t){const e={},r=t.getProgramParameter(i,t.ACTIVE_ATTRIBUTES);for(let n=0;n<r;n++){const s=t.getActiveAttrib(i,n);if(s.name.startsWith("gl_"))continue;const o=CT(t,s.type),h={type:o,name:s.name,size:AT(o),location:t.getAttribLocation(i,s.name)};e[s.name]=h}return e}function n2(i,t){const e={},r=t.getProgramParameter(i,t.ACTIVE_UNIFORMS);for(let n=0;n<r;n++){const s=t.getActiveUniform(i,n),o=s.name.replace(/\[.*?\]$/,""),h=!!s.name.match(/\[.*?\]$/),a=CT(t,s.type);e[o]={name:o,index:n,type:a,size:s.size,isArray:h,value:TT(a,s.size)}}return e}function i2(i,t){var h;const e=ob(i,i.VERTEX_SHADER,t.vertexSrc),r=ob(i,i.FRAGMENT_SHADER,t.fragmentSrc),n=i.createProgram();i.attachShader(n,e),i.attachShader(n,r);const s=(h=t.extra)==null?void 0:h.transformFeedbackVaryings;if(s&&(typeof i.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):i.transformFeedbackVaryings(n,s.names,s.bufferMode==="separate"?i.SEPARATE_ATTRIBS:i.INTERLEAVED_ATTRIBS)),i.linkProgram(n),i.getProgramParameter(n,i.LINK_STATUS)||FP(i,n,e,r),t.attributeData=r2(n,i),t.uniformData=n2(n,i),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const a=Object.keys(t.attributeData);a.sort((l,u)=>l>u?1:-1);for(let l=0;l<a.length;l++)t.attributeData[a[l]].location=l,i.bindAttribLocation(n,l,a[l]);i.linkProgram(n)}i.deleteShader(e),i.deleteShader(r);const o={};for(const a in t.uniformData){const l=t.uniformData[a];o[a]={location:i.getUniformLocation(n,a),value:TT(l.type,l.size)}}return new e2(n,o)}function s2(i,t,e,r,n){e.buffer.update(n)}const a2={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},zT={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function o2(i){const t=i.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let e=0,r=0,n=0;for(let s=0;s<t.length;s++){const o=t[s];if(e=zT[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,r%e!==0&&r<16){const h=r%e%16;r+=h,n+=h}r+e>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=e,r=e):(o.offset=n,r+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function l2(i,t){const e=[];for(const r in i)t[r]&&e.push(t[r]);return e.sort((r,n)=>r.index-n.index),e}function h2(i,t){if(!i.autoManage)return{size:0,syncFunc:s2};const e=l2(i.uniforms,t),{uboElements:r,size:n}=o2(e),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){const h=r[o],a=i.uniforms[h.data.name],l=h.data.name;let u=!1;for(let c=0;c<Bl.length;c++){const f=Bl[c];if(f.codeUbo&&f.test(h.data,a)){s.push(`offset = ${h.offset/4};`,Bl[c].codeUbo(h.data.name,a)),u=!0;break}}if(!u)if(h.data.size>1){const c=AT(h.data.type),f=Math.max(zT[h.data.type]/16,1),p=c/f,g=(4-p%4)%4;s.push(`
                cv = ud.${l}.value;
                v = uv.${l};
                offset = ${h.offset/4};

                t = 0;

                for(var i=0; i < ${h.data.size*f}; i++)
                {
                    for(var j = 0; j < ${p}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${g};
                }

                `)}else{const c=a2[h.data.type];s.push(`
                cv = ud.${l}.value;
                v = uv.${l};
                offset = ${h.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let u2=0;const Hc={textureCount:0,uboCount:0};let jT=class{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=u2++}systemCheck(){if(!NP())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const r=t.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),e||(Hc.textureCount=0,Hc.uboCount=0,this.syncUniformGroup(t.uniformGroup,Hc)),n}setUniforms(t){const e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)}syncUniformGroup(t,e){const r=this.getGlProgram();(!t.static||t.dirtyId!==r.uniformDirtyGroups[t.id])&&(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))}syncUniforms(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=MP(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const r=this.getGlProgram();if(!t.static||t.dirtyId!==0||!r.uniformGroups[t.id]){t.dirtyId=0;const n=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e);t.buffer.update(),n(r.uniformData,t.uniforms,this.renderer,Hc,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])}createSyncBufferGroup(t,e,r){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(e.program,r);e.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let h=this._uboCache[o];if(h||(h=this._uboCache[o]=h2(t,this.shader.program.uniformData)),t.autoManage){const a=new Float32Array(h.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=h.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,r){const n=t.uniforms,s=[`${r}-`];for(const o in n)s.push(o),e[o]&&s.push(e[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,r=t.program,n=i2(e,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}};jT.extension={type:At.RendererSystem,name:"shader"};Dt.add(jT);class Nd{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.4.2 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}Nd.defaultOptions={hello:!1},Nd.extension={type:[At.RendererSystem,At.CanvasRendererSystem],name:"startup"};Dt.add(Nd);function c2(i,t=[]){return t[Gt.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.ADD]=[i.ONE,i.ONE],t[Gt.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.NONE]=[0,0],t[Gt.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],t[Gt.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Gt.SRC_IN]=[i.DST_ALPHA,i.ZERO],t[Gt.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],t[Gt.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],t[Gt.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],t[Gt.DST_IN]=[i.ZERO,i.SRC_ALPHA],t[Gt.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],t[Gt.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],t[Gt.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],t[Gt.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],t}const d2=0,f2=1,p2=2,m2=3,g2=4,v2=5,qT=class Rv{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Gt.NONE,this._blendEq=!1,this.map=[],this.map[d2]=this.setBlend,this.map[f2]=this.setOffset,this.map[p2]=this.setCullFace,this.map[m2]=this.setDepthTest,this.map[g2]=this.setFrontFace,this.map[v2]=this.setDepthMask,this.checks=[],this.defaultState=new Ya,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=c2(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,r=0;for(;e;)e&1&&this.map[r].call(this,!!(t.data&1<<r)),e=e>>1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Rv.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Rv.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],r=this.gl;e.length===2?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const r=this.checks.indexOf(t);e&&r===-1?this.checks.push(t):!e&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};qT.extension={type:At.RendererSystem,name:"state"};let y2=qT;Dt.add(y2);class x2 extends xu{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(n=>t.systems[n]),r=[...e,...Object.keys(t.systems).filter(n=>!e.includes(n))];for(const n of r)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(e=>{this.runners[e]=new Yi(e)})}addSystem(t,e){const r=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=r,this._systemsHash[e]=r;for(const n in this.runners)this.runners[n].add(r);return this}emitWithCustomOptions(t,e){const r=Object.keys(this._systemsHash);t.items.forEach(n=>{const s=r.find(o=>this._systemsHash[o]===n);n[t.name](e[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const zh=class bd{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=bd.defaultMaxIdle,this.checkCountMax=bd.defaultCheckCountMax,this.mode=bd.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==My.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let r=!1;for(let n=0;n<e.length;n++){const s=e[n];s.resource&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,r=!0)}if(r){let n=0;for(let s=0;s<e.length;s++)e[s]!==null&&(e[n++]=e[s]);e.length=n}}unload(t){const e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(let n=t.children.length-1;n>=0;n--)this.unload(t.children[n])}destroy(){this.renderer=null}};zh.defaultMode=My.AUTO,zh.defaultMaxIdle=60*60,zh.defaultCheckCountMax=60*10,zh.extension={type:At.RendererSystem,name:"textureGC"};let xo=zh;Dt.add(xo);let Ag=class{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=$t.UNSIGNED_BYTE,this.internalFormat=Et.RGBA,this.samplerType=0}};function w2(i){let t;return"WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext?t={[i.RGB]:Pt.FLOAT,[i.RGBA]:Pt.FLOAT,[i.ALPHA]:Pt.FLOAT,[i.LUMINANCE]:Pt.FLOAT,[i.LUMINANCE_ALPHA]:Pt.FLOAT,[i.R8]:Pt.FLOAT,[i.R8_SNORM]:Pt.FLOAT,[i.RG8]:Pt.FLOAT,[i.RG8_SNORM]:Pt.FLOAT,[i.RGB8]:Pt.FLOAT,[i.RGB8_SNORM]:Pt.FLOAT,[i.RGB565]:Pt.FLOAT,[i.RGBA4]:Pt.FLOAT,[i.RGB5_A1]:Pt.FLOAT,[i.RGBA8]:Pt.FLOAT,[i.RGBA8_SNORM]:Pt.FLOAT,[i.RGB10_A2]:Pt.FLOAT,[i.RGB10_A2UI]:Pt.FLOAT,[i.SRGB8]:Pt.FLOAT,[i.SRGB8_ALPHA8]:Pt.FLOAT,[i.R16F]:Pt.FLOAT,[i.RG16F]:Pt.FLOAT,[i.RGB16F]:Pt.FLOAT,[i.RGBA16F]:Pt.FLOAT,[i.R32F]:Pt.FLOAT,[i.RG32F]:Pt.FLOAT,[i.RGB32F]:Pt.FLOAT,[i.RGBA32F]:Pt.FLOAT,[i.R11F_G11F_B10F]:Pt.FLOAT,[i.RGB9_E5]:Pt.FLOAT,[i.R8I]:Pt.INT,[i.R8UI]:Pt.UINT,[i.R16I]:Pt.INT,[i.R16UI]:Pt.UINT,[i.R32I]:Pt.INT,[i.R32UI]:Pt.UINT,[i.RG8I]:Pt.INT,[i.RG8UI]:Pt.UINT,[i.RG16I]:Pt.INT,[i.RG16UI]:Pt.UINT,[i.RG32I]:Pt.INT,[i.RG32UI]:Pt.UINT,[i.RGB8I]:Pt.INT,[i.RGB8UI]:Pt.UINT,[i.RGB16I]:Pt.INT,[i.RGB16UI]:Pt.UINT,[i.RGB32I]:Pt.INT,[i.RGB32UI]:Pt.UINT,[i.RGBA8I]:Pt.INT,[i.RGBA8UI]:Pt.UINT,[i.RGBA16I]:Pt.INT,[i.RGBA16UI]:Pt.UINT,[i.RGBA32I]:Pt.INT,[i.RGBA32UI]:Pt.UINT,[i.DEPTH_COMPONENT16]:Pt.FLOAT,[i.DEPTH_COMPONENT24]:Pt.FLOAT,[i.DEPTH_COMPONENT32F]:Pt.FLOAT,[i.DEPTH_STENCIL]:Pt.FLOAT,[i.DEPTH24_STENCIL8]:Pt.FLOAT,[i.DEPTH32F_STENCIL8]:Pt.FLOAT}:t={[i.RGB]:Pt.FLOAT,[i.RGBA]:Pt.FLOAT,[i.ALPHA]:Pt.FLOAT,[i.LUMINANCE]:Pt.FLOAT,[i.LUMINANCE_ALPHA]:Pt.FLOAT,[i.DEPTH_STENCIL]:Pt.FLOAT},t}function _2(i){let t;return"WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext?t={[$t.UNSIGNED_BYTE]:{[Et.RGBA]:i.RGBA8,[Et.RGB]:i.RGB8,[Et.RG]:i.RG8,[Et.RED]:i.R8,[Et.RGBA_INTEGER]:i.RGBA8UI,[Et.RGB_INTEGER]:i.RGB8UI,[Et.RG_INTEGER]:i.RG8UI,[Et.RED_INTEGER]:i.R8UI,[Et.ALPHA]:i.ALPHA,[Et.LUMINANCE]:i.LUMINANCE,[Et.LUMINANCE_ALPHA]:i.LUMINANCE_ALPHA},[$t.BYTE]:{[Et.RGBA]:i.RGBA8_SNORM,[Et.RGB]:i.RGB8_SNORM,[Et.RG]:i.RG8_SNORM,[Et.RED]:i.R8_SNORM,[Et.RGBA_INTEGER]:i.RGBA8I,[Et.RGB_INTEGER]:i.RGB8I,[Et.RG_INTEGER]:i.RG8I,[Et.RED_INTEGER]:i.R8I},[$t.UNSIGNED_SHORT]:{[Et.RGBA_INTEGER]:i.RGBA16UI,[Et.RGB_INTEGER]:i.RGB16UI,[Et.RG_INTEGER]:i.RG16UI,[Et.RED_INTEGER]:i.R16UI,[Et.DEPTH_COMPONENT]:i.DEPTH_COMPONENT16},[$t.SHORT]:{[Et.RGBA_INTEGER]:i.RGBA16I,[Et.RGB_INTEGER]:i.RGB16I,[Et.RG_INTEGER]:i.RG16I,[Et.RED_INTEGER]:i.R16I},[$t.UNSIGNED_INT]:{[Et.RGBA_INTEGER]:i.RGBA32UI,[Et.RGB_INTEGER]:i.RGB32UI,[Et.RG_INTEGER]:i.RG32UI,[Et.RED_INTEGER]:i.R32UI,[Et.DEPTH_COMPONENT]:i.DEPTH_COMPONENT24},[$t.INT]:{[Et.RGBA_INTEGER]:i.RGBA32I,[Et.RGB_INTEGER]:i.RGB32I,[Et.RG_INTEGER]:i.RG32I,[Et.RED_INTEGER]:i.R32I},[$t.FLOAT]:{[Et.RGBA]:i.RGBA32F,[Et.RGB]:i.RGB32F,[Et.RG]:i.RG32F,[Et.RED]:i.R32F,[Et.DEPTH_COMPONENT]:i.DEPTH_COMPONENT32F},[$t.HALF_FLOAT]:{[Et.RGBA]:i.RGBA16F,[Et.RGB]:i.RGB16F,[Et.RG]:i.RG16F,[Et.RED]:i.R16F},[$t.UNSIGNED_SHORT_5_6_5]:{[Et.RGB]:i.RGB565},[$t.UNSIGNED_SHORT_4_4_4_4]:{[Et.RGBA]:i.RGBA4},[$t.UNSIGNED_SHORT_5_5_5_1]:{[Et.RGBA]:i.RGB5_A1},[$t.UNSIGNED_INT_2_10_10_10_REV]:{[Et.RGBA]:i.RGB10_A2,[Et.RGBA_INTEGER]:i.RGB10_A2UI},[$t.UNSIGNED_INT_10F_11F_11F_REV]:{[Et.RGB]:i.R11F_G11F_B10F},[$t.UNSIGNED_INT_5_9_9_9_REV]:{[Et.RGB]:i.RGB9_E5},[$t.UNSIGNED_INT_24_8]:{[Et.DEPTH_STENCIL]:i.DEPTH24_STENCIL8},[$t.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Et.DEPTH_STENCIL]:i.DEPTH32F_STENCIL8}}:t={[$t.UNSIGNED_BYTE]:{[Et.RGBA]:i.RGBA,[Et.RGB]:i.RGB,[Et.ALPHA]:i.ALPHA,[Et.LUMINANCE]:i.LUMINANCE,[Et.LUMINANCE_ALPHA]:i.LUMINANCE_ALPHA},[$t.UNSIGNED_SHORT_5_6_5]:{[Et.RGB]:i.RGB},[$t.UNSIGNED_SHORT_4_4_4_4]:{[Et.RGBA]:i.RGBA},[$t.UNSIGNED_SHORT_5_5_5_1]:{[Et.RGBA]:i.RGBA}},t}let KT=class{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new re,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=_2(t),this.samplerTypes=w2(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};const r=new Ag(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Ag(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,e=0){const{gl:r}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<r.length;n++)r[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<r.length;n++)r[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[n]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:r,CONTEXT_UID:n}=this;if(r)for(let s=t-1;s>=0;--s){const o=e[s];o&&o._glTextures[n].samplerType!==Pt.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new Ag(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var r;e.internalFormat=((r=this.internalFormats[t.type])==null?void 0:r[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??Pt.FLOAT,this.webGLVersion===2&&t.type===$t.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var n;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const r=this.renderer;if(this.initTextureType(t,e),(n=t.resource)==null?void 0:n.upload(r,t,e))e.samplerType!==Pt.FLOAT&&(this.hasIntegerTextures=!0);else{const s=t.realWidth,o=t.realHeight,h=r.gl;(e.width!==s||e.height!==o||e.dirtyId<0)&&(e.width=s,e.height=o,h.texImage2D(t.target,0,e.internalFormat,s,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:r}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const n=this.managedTextures.indexOf(t);n!==-1&&kl(this.managedTextures,n,1)}}updateTextureStyle(t){var r;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===$i.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Oa.CLAMP:e.wrapMode=t.wrapMode,(r=t.resource)!=null&&r.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const r=this.gl;if(e.mipmap&&t.mipmap!==$i.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===Zn.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===Zn.LINEAR){const s=Math.min(t.anisotropicLevel,r.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===Zn.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===Zn.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}};KT.extension={type:At.RendererSystem,name:"texture"};Dt.add(KT);class ZT{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glTransformFeedbacks[r]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:r,renderer:n}=this;e&&n.shader.bind(e),r.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:r,CONTEXT_UID:n}=this,s=e.createTransformFeedback();t._glTransformFeedbacks[n]=s,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s);for(let o=0;o<t.buffers.length;o++){const h=t.buffers[o];h&&(r.buffer.update(h),h._glBuffers[n].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,h._glBuffers[n].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,e){const r=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<t.buffers.length;o++){const h=t.buffers[o];if(!h)continue;const a=h._glBuffers[this.CONTEXT_UID];a&&(a.refCount--,a.refCount===0&&!e&&s.dispose(h,e))}r&&(e||n.deleteTransformFeedback(r),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}ZT.extension={type:At.RendererSystem,name:"transformFeedback"};Dt.add(ZT);class Od{constructor(t){this.renderer=t}init(t){this.screen=new le(0,0,t.width,t.height),this.element=t.view||It.ADAPTER.createCanvas(),this.resolution=t.resolution||It.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const r=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",r,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Od.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Od.extension={type:[At.RendererSystem,At.CanvasRendererSystem],name:"_view"};Dt.add(Od);It.PREFER_ENV=Go.WEBGL2;It.STRICT_TEXTURE_CACHE=!1;It.RENDER_OPTIONS={...Bd.defaultOptions,...Fd.defaultOptions,...Od.defaultOptions,...Nd.defaultOptions};Object.defineProperties(It,{WRAP_MODE:{get(){return re.defaultOptions.wrapMode},set(i){pe("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),re.defaultOptions.wrapMode=i}},SCALE_MODE:{get(){return re.defaultOptions.scaleMode},set(i){pe("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),re.defaultOptions.scaleMode=i}},MIPMAP_TEXTURES:{get(){return re.defaultOptions.mipmap},set(i){pe("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),re.defaultOptions.mipmap=i}},ANISOTROPIC_LEVEL:{get(){return re.defaultOptions.anisotropicLevel},set(i){pe("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),re.defaultOptions.anisotropicLevel=i}},FILTER_RESOLUTION:{get(){return pe("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),_n.defaultResolution},set(i){_n.defaultResolution=i}},FILTER_MULTISAMPLE:{get(){return pe("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),_n.defaultMultisample},set(i){_n.defaultMultisample=i}},SPRITE_MAX_TEXTURES:{get(){return yo.defaultMaxTextures},set(i){pe("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),yo.defaultMaxTextures=i}},SPRITE_BATCH_SIZE:{get(){return yo.defaultBatchSize},set(i){pe("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),yo.defaultBatchSize=i}},CAN_UPLOAD_SAME_BUFFER:{get(){return yo.canUploadSameBuffer},set(i){pe("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),yo.canUploadSameBuffer=i}},GC_MODE:{get(){return xo.defaultMode},set(i){pe("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),xo.defaultMode=i}},GC_MAX_IDLE:{get(){return xo.defaultMaxIdle},set(i){pe("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),xo.defaultMaxIdle=i}},GC_MAX_CHECK_COUNT:{get(){return xo.defaultCheckCountMax},set(i){pe("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),xo.defaultCheckCountMax=i}},PRECISION_VERTEX:{get(){return $s.defaultVertexPrecision},set(i){pe("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),$s.defaultVertexPrecision=i}},PRECISION_FRAGMENT:{get(){return $s.defaultFragmentPrecision},set(i){pe("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),$s.defaultFragmentPrecision=i}}});var Uo=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(Uo||{});let Cg=class{constructor(t,e=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=n}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}};const QT=class Kn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Cg(null,null,1/0),this.deltaMS=1/Kn.targetFPMS,this.elapsedMS=1/Kn.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=Uo.NORMAL){return this._addListener(new Cg(t,e,r))}addOnce(t,e,r=Uo.NORMAL){return this._addListener(new Cg(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(!e)t.connect(r);else{for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}return this._startIfPossible(),this}remove(t,e){let r=this._head.next;for(;r;)r.match(t,e)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const s=t-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=t-s%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Kn.targetFPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,Kn.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Kn._shared){const t=Kn._shared=new Kn;t.autoStart=!0,t._protected=!0}return Kn._shared}static get system(){if(!Kn._system){const t=Kn._system=new Kn;t.autoStart=!0,t._protected=!0}return Kn._system}};QT.targetFPMS=.06;let Qn=QT;Object.defineProperties(It,{TARGET_FPMS:{get(){return Qn.targetFPMS},set(i){pe("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Qn.targetFPMS=i}}});class JT{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Uo.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Qn.shared:new Qn,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}JT.extension=At.Application;Dt.add(JT);const tS=[];Dt.handleByList(At.Renderer,tS);function b2(i){for(const t of tS)if(t.test(i))return new t(i);throw new Error("Unable to auto-detect a suitable renderer.")}var E2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,T2=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const S2=E2,eS=T2;class rS{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const r=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,r)}else{const r=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r)}e>=Mr.HIGH?this.multisample=Mr.HIGH:e>=Mr.MEDIUM?this.multisample=Mr.MEDIUM:e>=Mr.LOW?this.multisample=Mr.LOW:this.multisample=Mr.NONE}destroy(){}}rS.extension={type:At.RendererSystem,name:"_multisample"};Dt.add(rS);let A2=class{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}},nS=class{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:r,CONTEXT_UID:n}=this;if(this.boundBufferBases[e]!==t){const s=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,r.bindBufferBase(r.UNIFORM_BUFFER,e,s.buffer)}}bindBufferRange(t,e,r){const{gl:n,CONTEXT_UID:s}=this;r=r||0;const o=t._glBuffers[s]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,o.buffer,r*256,256)}update(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const s=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,s)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const r=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),r&&(e||n.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let r=0;r<e.length;r++)this.dispose(this.managedBuffers[e[r]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:r}=this;return t._glBuffers[e]=new A2(r.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}};nS.extension={type:At.RendererSystem,name:"buffer"};Dt.add(nS);class iS{constructor(t){this.renderer=t}render(t,e){const r=this.renderer;let n,s,o,h;if(e&&(n=e.renderTexture,s=e.clear,o=e.transform,h=e.skipUpdateTransform),this.renderingToScreen=!n,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(n||(this.lastObjectRendered=t),!h){const a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}r.renderTexture.bind(n),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),t.render(r),r.batch.currentRenderer.flush(),n&&(e.blit&&r.framebuffer.blit(),n.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}iS.extension={type:At.RendererSystem,name:"objectRenderer"};Dt.add(iS);const Ed=class Mv extends x2{constructor(t){super(),this.type=zE.WEBGL,t=Object.assign({},It.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ko({projectionMatrix:new Ze},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Mv.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(pe("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=Mv.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:qM()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return pe("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return pe("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return pe("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return pe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){pe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return pe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){pe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return pe("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};Ed.extension={type:At.Renderer,priority:1},Ed.__plugins={},Ed.__systems={};let Oy=Ed;Dt.handleByMap(At.RendererPlugin,Oy.__plugins);Dt.handleByMap(At.RendererSystem,Oy.__systems);Dt.add(Oy);let sS=class extends ou{constructor(t,e){const{width:r,height:n}=e||{};super(r,n),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const o=new re;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof ou?this.addResourceAt(t[r],r):this.addResourceAt(uT(t[r],e),r))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:r}=this.items[0];return this.resize(e,r),this.update(),Promise.resolve(this)}),this._load}},C2=class extends sS{constructor(t,e){const{width:r,height:n}=e||{};let s,o;Array.isArray(t)?(s=t,o=t.length):o=t,super(o,{width:r,height:n}),s&&this.initFromArray(s,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Pl.TEXTURE_2D_ARRAY}upload(t,e,r){const{length:n,itemDirtyIds:s,items:o}=this,{gl:h}=t;r.dirtyId<0&&h.texImage3D(h.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,e.format,r.type,null);for(let a=0;a<n;a++){const l=o[a];s[a]<l.dirtyId&&(s[a]=l.dirtyId,l.valid&&h.texSubImage3D(h.TEXTURE_2D_ARRAY,0,0,0,a,l.resource.width,l.resource.height,1,e.format,r.type,l.resource.source))}return!0}},I2=class extends js{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}};const aS=class jh extends sS{constructor(t,e){const{width:r,height:n,autoLoad:s,linkBaseTexture:o}=e||{};if(t&&t.length!==jh.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:r,height:n});for(let h=0;h<jh.SIDES;h++)this.items[h].target=Pl.TEXTURE_CUBE_MAP_POSITIVE_X+h;this.linkBaseTexture=o!==!1,t&&this.initFromArray(t,e),s!==!1&&this.load()}bind(t){super.bind(t),t.target=Pl.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=Pl.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,r){const n=this.itemDirtyIds;for(let s=0;s<jh.SIDES;s++){const o=this.items[s];(n[s]<o.dirtyId||r.dirtyId<e.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(t,o,r),n[s]=o.dirtyId):n[s]<-1&&(t.gl.texImage2D(o.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),n[s]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===jh.SIDES}};aS.SIDES=6;let R2=aS,M2=class qh extends js{constructor(t,e){e=e||{};let r,n,s;typeof t=="string"?(r=qh.EMPTY,n=t,s=!0):(r=t,n=null,s=!1),super(r),this.url=n,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??s,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const r=await It.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await r.blob();if(this.destroyed)return;const s=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ji.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),t(this)}catch(r){if(this.destroyed)return;e(r),this.onError.emit(r)}}),this._load)}upload(t,e,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return qh._EMPTY=qh._EMPTY??It.ADAPTER.createCanvas(0,0),qh._EMPTY}};const Pv=class Td extends js{constructor(t,e){e=e||{},super(It.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},Td.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;js.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,r=t.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=e*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*e,s=this._overrideHeight||this._overrideWidth/e*r),n=Math.round(n),s=Math.round(s);const o=this.source;o.width=n,o.height=s,o._pixiId=`canvas_${Lo()}`,o.getContext("2d").drawImage(t,0,0,e,r,0,0,n,s),this._resolve(),this._resolve=null}}static getSize(t){const e=Td.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&Td.SVG_XML.test(t)}};Pv.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Pv.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let kv=Pv;class P2 extends js{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const Fv=class Bv extends js{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");e.autoLoad!==!1&&r.setAttribute("preload","auto"),e.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),e.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),e.loop===!0&&r.setAttribute("loop",""),e.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const n=t[0].src||t[0];js.crossOrigin(r,n,e.crossorigin);for(let s=0;s<t.length;++s){const o=document.createElement("source");let{src:h,mime:a}=t[s];if(h=h||t[s],h.startsWith("data:"))a=h.slice(5,h.indexOf(";"));else if(!h.startsWith("blob:")){const l=h.split("?").shift().toLowerCase(),u=l.slice(l.lastIndexOf(".")+1);a=a||Bv.MIME_TYPES[u]||`video/${u}`}o.src=h,a&&(o.type=a),r.appendChild(o)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=Qn.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,r)=>{this.valid?e(this):(this._resolve=e,this._reject=r,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Qn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Qn.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Qn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||Bv.TYPES.includes(e)}};Fv.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Fv.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let oS=Fv;yv.push(M2,PT,I2,oS,P2,kv,uf,R2,C2);let Dd=class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?le.EMPTY:(t=t||new le(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:r,b:n,c:s,d:o,tx:h,ty:a}=t,l=r*e.x+s*e.y+h,u=n*e.x+o*e.y+a;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(t){let e=this.minX,r=this.minY,n=this.maxX,s=this.maxY,o=t[0],h=t[1];e=o<e?o:e,r=h<r?h:r,n=o>n?o:n,s=h>s?h:s,o=t[2],h=t[3],e=o<e?o:e,r=h<r?h:r,n=o>n?o:n,s=h>s?h:s,o=t[4],h=t[5],e=o<e?o:e,r=h<r?h:r,n=o>n?o:n,s=h>s?h:s,o=t[6],h=t[7],e=o<e?o:e,r=h<r?h:r,n=o>n?o:n,s=h>s?h:s,this.minX=e,this.minY=r,this.maxX=n,this.maxY=s}addFrame(t,e,r,n,s){this.addFrameMatrix(t.worldTransform,e,r,n,s)}addFrameMatrix(t,e,r,n,s){const o=t.a,h=t.b,a=t.c,l=t.d,u=t.tx,c=t.ty;let f=this.minX,p=this.minY,g=this.maxX,v=this.maxY,y=o*e+a*r+u,x=h*e+l*r+c;f=y<f?y:f,p=x<p?x:p,g=y>g?y:g,v=x>v?x:v,y=o*n+a*r+u,x=h*n+l*r+c,f=y<f?y:f,p=x<p?x:p,g=y>g?y:g,v=x>v?x:v,y=o*e+a*s+u,x=h*e+l*s+c,f=y<f?y:f,p=x<p?x:p,g=y>g?y:g,v=x>v?x:v,y=o*n+a*s+u,x=h*n+l*s+c,f=y<f?y:f,p=x<p?x:p,g=y>g?y:g,v=x>v?x:v,this.minX=f,this.minY=p,this.maxX=g,this.maxY=v}addVertexData(t,e,r){let n=this.minX,s=this.minY,o=this.maxX,h=this.maxY;for(let a=e;a<r;a+=2){const l=t[a],u=t[a+1];n=l<n?l:n,s=u<s?u:s,o=l>o?l:o,h=u>h?u:h}this.minX=n,this.minY=s,this.maxX=o,this.maxY=h}addVertices(t,e,r,n){this.addVerticesMatrix(t.worldTransform,e,r,n)}addVerticesMatrix(t,e,r,n,s=0,o=s){const h=t.a,a=t.b,l=t.c,u=t.d,c=t.tx,f=t.ty;let p=this.minX,g=this.minY,v=this.maxX,y=this.maxY;for(let x=r;x<n;x+=2){const _=e[x],b=e[x+1],E=h*_+l*b+c,T=u*b+a*_+f;p=Math.min(p,E-s),v=Math.max(v,E+s),g=Math.min(g,T-o),y=Math.max(y,T+o)}this.minX=p,this.minY=g,this.maxX=v,this.maxY=y}addBounds(t){const e=this.minX,r=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,e){const r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=s&&n<=o){const h=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=r<h?r:h,this.minY=n<a?n:a,this.maxX=s>l?s:l,this.maxY=o>u?o:u}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=s&&n<=o){const h=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=r<h?r:h,this.minY=n<a?n:a,this.maxX=s>l?s:l,this.maxY=o>u?o:u}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,r,n,s,o){t-=s,e-=o,r+=s,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n}},Er=class lS extends xu{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new cf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Dd,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let r=0;r<e.length;++r){const n=e[r];Object.defineProperty(lS.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new le),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new le),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Dd);const e=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(r==null?void 0:r.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-s,o}toGlobal(t,e,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,r=1,n=1,s=0,o=0,h=0,a=0,l=0){return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=s,this.skew.x=o,this.skew.y=h,this.pivot.x=a,this.pivot.y=l,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new k2),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*EP}set angle(t){this.transform.rotation=t*TP}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}},k2=class extends Er{constructor(){super(...arguments),this.sortDirty=null}};Er.prototype.displayObjectUpdateTransform=Er.prototype.updateTransform;const F2=new Ze;function B2(i,t){return i.zIndex===t.zIndex?i._lastSortedIndex-t._lastSortedIndex:i.zIndex-t.zIndex}const hS=class Nv extends Er{constructor(){super(),this.children=[],this.sortableChildren=Nv.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(t);kl(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],r=this.children.indexOf(e);if(r===-1)return null;e.parent=null,e.transform._parentID=-1,kl(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,kl(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const r=t,n=e,s=n-r;let o;if(s>0&&s<=n){o=this.children.splice(r,s);for(let h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,r=this.children.length;e<r;++e){const n=this.children[e];n._lastSortedIndex=e,!t&&n.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(B2),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const r=this.children[t];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(e._bounds,r._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const r=super.getLocalBounds(t);if(!e)for(let n=0,s=this.children.length;n<s;++n){const o=this.children[n];o.visible&&o.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let r,n;this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==Nv.prototype._render&&(r=this.getBounds(!0));const s=t.projection.transform;if(s&&(n?(n=F2.copyFrom(n),n.prepend(s)):n=s),r&&e.intersects(r,n))this._render(t);else if(this.cullArea)return;for(let o=0,h=this.children.length;o<h;++o){const a=this.children[o],l=a.cullable;a.cullable=l||!this.cullArea,a.render(t),a.cullable=l}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let r=0,n=this.children.length;r<n;++r)this.children[r].render(t)}}renderAdvanced(t){var s,o,h;const e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<e.length;a++)e[a].enabled&&this._enabledFilters.push(e[a])}const n=e&&((s=this._enabledFilters)==null?void 0:s.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Br.NONE));if(n&&t.batch.flush(),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(t)}n&&t.batch.flush(),r&&t.mask.pop(this),e&&((h=this._enabledFilters)!=null&&h.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,r=this.removeChildren(0,this.children.length);if(e)for(let n=0;n<r.length;++n)r[n].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};hS.defaultSortableChildren=!1;let bn=hS;bn.prototype.containerUpdateTransform=bn.prototype.updateTransform;Object.defineProperties(It,{SORTABLE_CHILDREN:{get(){return bn.defaultSortableChildren},set(i){pe("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),bn.defaultSortableChildren=i}}});const Lh=new Pe,N2=new Uint16Array([0,1,2,0,2,3]);let bu=class uS extends bn{constructor(t){super(),this._anchor=new Co(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Ye(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Gt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||ve.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=N2,this.pluginName="batch",this.isSprite=!0,this._roundPixels=It.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Fa(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Fa(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,r=e.a,n=e.b,s=e.c,o=e.d,h=e.tx,a=e.ty,l=this.vertexData,u=t.trim,c=t.orig,f=this._anchor;let p=0,g=0,v=0,y=0;if(u?(g=u.x-f._x*c.width,p=g+u.width,y=u.y-f._y*c.height,v=y+u.height):(g=-f._x*c.width,p=g+c.width,y=-f._y*c.height,v=y+c.height),l[0]=r*g+s*y+h,l[1]=o*y+n*g+a,l[2]=r*p+s*y+h,l[3]=o*y+n*p+a,l[4]=r*p+s*v+h,l[5]=o*v+n*p+a,l[6]=r*g+s*v+h,l[7]=o*v+n*g+a,this._roundPixels){const x=It.RESOLUTION;for(let _=0;_<l.length;++_)l[_]=Math.round(l[_]*x)/x}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,s=this.transform.worldTransform,o=s.a,h=s.b,a=s.c,l=s.d,u=s.tx,c=s.ty,f=-n._x*r.width,p=f+r.width,g=-n._y*r.height,v=g+r.height;if(e[0]=o*f+a*g+u,e[1]=l*g+h*f+c,e[2]=o*p+a*g+u,e[3]=l*g+h*p+c,e[4]=o*p+a*v+u,e[5]=l*v+h*p+c,e[6]=o*f+a*v+u,e[7]=l*v+h*f+c,this._roundPixels){const y=It.RESOLUTION;for(let x=0;x<e.length;++x)e[x]=Math.round(e[x]*y)/y}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Dd),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new le),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Lh);const e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x;let s=0;return Lh.x>=n&&Lh.x<n+e&&(s=-r*this.anchor.y,Lh.y>=s&&Lh.y<s+r)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const r=t instanceof ve?t:ve.from(t,e);return new uS(r)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=Fa(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=Fa(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ve.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}};const cS=new Ze;Er.prototype._cacheAsBitmap=!1;Er.prototype._cacheData=null;Er.prototype._cacheAsBitmapResolution=null;Er.prototype._cacheAsBitmapMultisample=null;class O2{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Er.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(i){i!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(i){i!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(i){if(this._cacheAsBitmap===i)return;this._cacheAsBitmap=i;let t;i?(this._cacheData||(this._cacheData=new O2),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});Er.prototype._renderCached=function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(i),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(i))};Er.prototype._initCachedDisplayObject=function(i){var f,p;if((f=this._cacheData)!=null&&f.sprite)return;const t=this.alpha;this.alpha=1,i.batch.flush();const e=this.getLocalBounds(new le,!0);if((p=this.filters)!=null&&p.length){const g=this.filters[0].padding;e.pad(g)}const r=this.cacheAsBitmapResolution||i.resolution;e.ceil(r),e.width=Math.max(e.width,1/r),e.height=Math.max(e.height,1/r);const n=i.renderTexture.current,s=i.renderTexture.sourceFrame.clone(),o=i.renderTexture.destinationFrame.clone(),h=i.projection.transform,a=_u.create({width:e.width,height:e.height,resolution:r,multisample:this.cacheAsBitmapMultisample??i.multisample}),l=`cacheAsBitmap_${Lo()}`;this._cacheData.textureCacheId=l,re.addToCache(a.baseTexture,l),ve.addToCache(a,l);const u=this.transform.localTransform.copyTo(cS).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,i.render(this,{renderTexture:a,clear:!0,transform:u,skipUpdateTransform:!1}),i.framebuffer.blit(),i.projection.transform=h,i.renderTexture.bind(n,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const c=new bu(a);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=t,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};Er.prototype._renderCachedCanvas=function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(i),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(i))};Er.prototype._initCachedDisplayObjectCanvas=function(i){var u;if((u=this._cacheData)!=null&&u.sprite)return;const t=this.getLocalBounds(new le,!0),e=this.alpha;this.alpha=1;const r=i.canvasContext.activeContext,n=i._projTransform,s=this.cacheAsBitmapResolution||i.resolution;t.ceil(s),t.width=Math.max(t.width,1/s),t.height=Math.max(t.height,1/s);const o=_u.create({width:t.width,height:t.height,resolution:s}),h=`cacheAsBitmap_${Lo()}`;this._cacheData.textureCacheId=h,re.addToCache(o.baseTexture,h),ve.addToCache(o,h);const a=cS;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=t.x,a.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,i.render(this,{renderTexture:o,clear:!0,transform:a,skipUpdateTransform:!1}),i.canvasContext.activeContext=r,i._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const l=new bu(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(t.x/t.width),l.anchor.y=-(t.y/t.height),l.alpha=e,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=i._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)};Er.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Er.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Er.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,re.removeFromCache(this._cacheData.textureCacheId),ve.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Er.prototype._cacheAsBitmapDestroy=function(i){this.cacheAsBitmap=!1,this.destroy(i)};Er.prototype.name=null;bn.prototype.getChildByName=function(i,t){for(let e=0,r=this.children.length;e<r;e++)if(this.children[e].name===i)return this.children[e];if(t)for(let e=0,r=this.children.length;e<r;e++){const n=this.children[e];if(!n.getChildByName)continue;const s=n.getChildByName(i,!0);if(s)return s}return null};Er.prototype.getGlobalPosition=function(i=new Pe,t=!1){return this.parent?this.parent.toGlobal(this.position,i,t):(i.x=this.position.x,i.y=this.position.y),i};var D2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class L2 extends _n{constructor(t=1){super(S2,D2,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const U2={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},V2=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function X2(i){const t=U2[i],e=t.length;let r=V2,n="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let h=0;h<i;h++){let a=s.replace("%index%",h.toString());o=h,h>=e&&(o=i-h-1),a=a.replace("%value%",t[o].toString()),n+=a,n+=`
`}return r=r.replace("%blur%",n),r=r.replace("%size%",i.toString()),r}const G2=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function Y2(i,t){const e=Math.ceil(i/2);let r=G2,n="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<i;o++){let h=s.replace("%index%",o.toString());h=h.replace("%sampleIndex%",`${o-(e-1)}.0`),n+=h,n+=`
`}return r=r.replace("%blur%",n),r=r.replace("%size%",i.toString()),r}class Ov extends _n{constructor(t,e=8,r=4,n=_n.defaultResolution,s=5){const o=Y2(s,t),h=X2(s);super(o,h),this.horizontal=t,this.resolution=n,this._quality=0,this.quality=r,this.blur=e}apply(t,e,r,n){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/e.width):this.uniforms.strength=1/r.height*(r.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,r,n);else{const s=t.getFilterTexture(),o=t.renderer;let h=e,a=s;this.state.blend=!1,t.applyFilter(this,h,a,fs.CLEAR);for(let l=1;l<this.passes-1;l++){t.bindAndClear(h,fs.BLIT),this.uniforms.uSampler=a;const u=a;a=h,h=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,r,n),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class $2 extends _n{constructor(t=8,e=4,r=_n.defaultResolution,n=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Ov(!0,t,e,r,n),this.blurYFilter=new Ov(!1,t,e,r,n),this.resolution=r,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,r,n){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const h=t.getFilterTexture();this.blurXFilter.apply(t,e,h,fs.CLEAR),this.blurYFilter.apply(t,h,r,n),t.returnFilterTexture(h)}else o?this.blurYFilter.apply(t,e,r,n):this.blurXFilter.apply(t,e,r,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var W2=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Dv extends _n{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(eS,W2,t),this.alpha=1}_loadMatrix(t,e=!1){let r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}tint(t,e){const[r,n,s]=Ye.shared.setValue(t).toArray(),o=[r,0,0,0,0,0,n,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,e)}greyscale(t,e){const r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const r=Math.cos(t),n=Math.sin(t),s=Math.sqrt,o=1/3,h=s(o),a=r+(1-r)*o,l=o*(1-r)-h*n,u=o*(1-r)+h*n,c=o*(1-r)+h*n,f=r+o*(1-r),p=o*(1-r)-h*n,g=o*(1-r)-h*n,v=o*(1-r)+h*n,y=r+o*(1-r),x=[a,l,u,0,0,c,f,p,0,0,g,v,y,0,0,0,0,0,1,0];this._loadMatrix(x,e)}contrast(t,e){const r=(t||0)+1,n=-.5*(r-1),s=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(s,e)}saturate(t=0,e){const r=t*2/3+1,n=(r-1)*-.5,s=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(s,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,r,n,s){t=t||.2,e=e||.15,r=r||16770432,n=n||3375104;const o=Ye.shared,[h,a,l]=o.setValue(r).toArray(),[u,c,f]=o.setValue(n).toArray(),p=[.3,.59,.11,0,0,h,a,l,t,0,u,c,f,e,0,h-u,a-c,l-f,0,0];this._loadMatrix(p,s)}night(t,e){t=t||.1;const r=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(r,e)}predator(t,e){const r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}Dv.prototype.grayscale=Dv.prototype.greyscale;var H2=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,z2=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class j2 extends _n{constructor(t,e){const r=new Ze;t.renderable=!1,super(z2,H2,{mapSampler:t._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=r,e==null&&(e=20),this.scale=new Pe(e,e)}apply(t,e,r,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),h=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&h!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/h,this.uniforms.rotation[3]=s.d/h),t.applyFilter(this,e,r,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var q2=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,K2=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class Z2 extends _n{constructor(){super(K2,q2)}}var Q2=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class J2 extends _n{constructor(t=.5,e=Math.random()){super(eS,Q2,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const vb={AlphaFilter:L2,BlurFilter:$2,BlurFilterPass:Ov,ColorMatrixFilter:Dv,DisplacementFilter:j2,FXAAFilter:Z2,NoiseFilter:J2};Object.entries(vb).forEach(([i,t])=>{Object.defineProperty(vb,i,{get(){return pe("7.1.0",`filters.${i} has moved to ${i}`),t}})});class tk{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(Qn.system.add(this.tickerUpdate,this,Uo.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Qn.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const ka=new tk;class Eu{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Eu.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Pe,this.page=new Pe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,r,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Ld extends Eu{constructor(){super(...arguments),this.client=new Pe,this.movement=new Pe,this.offset=new Pe,this.global=new Pe,this.screen=new Pe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,r,n,s,o,h,a,l,u,c,f,p,g,v){throw new Error("Method not implemented.")}}class Ri extends Ld{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Nl extends Ld{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Nl.DOM_DELTA_PIXEL=0,Nl.DOM_DELTA_LINE=1,Nl.DOM_DELTA_PAGE=2;const ek=2048,rk=new Pe,Ig=new Pe;class nk{constructor(t){this.dispatch=new xu,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((r,n)=>r.priority-n.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let r=0,n=e.length;r<n;r++)e[r].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){ka.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[r](this.rootTarget,this.rootTarget.eventMode,rk.set(t,e),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(t,e){if(!t.target)return;const r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,s=r.length-1;n<s;n++)if(t.currentTarget=r[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let n=r.length-2;n>=0;n--)if(t.currentTarget=r[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,r=this._allInteractiveElements){if(r.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const n=Array.isArray(e)?e:[e];for(let s=r.length-1;s>=0;s--)n.forEach(o=>{t.currentTarget=r[s],this.notifyTarget(t,o)})}propagationPath(t){const e=[t];for(let r=0;r<ek&&t!==this.rootTarget;r++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,r,n,s,o=!1){let h=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(ka.pauseUpdate=!1),t.interactiveChildren&&t.children){const u=t.children;for(let c=u.length-1;c>=0;c--){const f=u[c],p=this.hitTestMoveRecursive(f,this._isInteractive(e)?e:f.eventMode,r,n,s,o||s(t,r));if(p){if(p.length>0&&!p[p.length-1].parent)continue;const g=t.isInteractive();(p.length>0||g)&&(g&&this._allInteractiveElements.push(t),p.push(t)),this._hitElements.length===0&&(this._hitElements=p),h=!0}}}const a=this._isInteractive(e),l=t.isInteractive();return a&&l&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:h?this._hitElements:a&&!s(t,r)&&n(t,r)?l?[t]:[]:null}hitTestRecursive(t,e,r,n,s){if(this._interactivePrune(t)||s(t,r))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(ka.pauseUpdate=!1),t.interactiveChildren&&t.children){const a=t.children;for(let l=a.length-1;l>=0;l--){const u=a[l],c=this.hitTestRecursive(u,this._isInteractive(e)?e:u.eventMode,r,n,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;const f=t.isInteractive();return(c.length>0||f)&&c.push(t),c}}}const o=this._isInteractive(e),h=t.isInteractive();return o&&n(t,r)?h?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var r;if(t.hitArea&&(t.worldTransform.applyInverse(e,Ig),!t.hitArea.contains(Ig.x,Ig.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!((r=n.containsPoint)!=null&&r.call(n,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var s,o;e=e??t.type;const r=`on${e}`;(o=(s=t.currentTarget)[r])==null||o.call(s,t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof Ri)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const n=e.button===2;this.dispatchEvent(e,n?"rightdown":"mousedown")}const r=this.trackingData(t.pointerId);r.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var a,l;if(!(t instanceof Ri)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const r=e.pointerType==="mouse"||e.pointerType==="pen",n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.overTargets);if(((a=n.overTargets)==null?void 0:a.length)>0&&s!==e.target){const u=t.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(t,u,s);if(this.dispatchEvent(c,"pointerout"),r&&this.dispatchEvent(c,"mouseout"),!e.composedPath().includes(s)){const f=this.createPointerEvent(t,"pointerleave",s);for(f.eventPhase=f.AT_TARGET;f.target&&!e.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),r&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(c)}if(s!==e.target){const u=t.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(e,u);this.dispatchEvent(c,"pointerover"),r&&this.dispatchEvent(c,"mouseover");let f=s==null?void 0:s.parent;for(;f&&f!==this.rootTarget.parent&&f!==e.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const p=this.clonePointerEvent(e,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==s&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),r&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(c)}const o=[],h=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(e,"pointermove"),h&&o.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),h&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),h&&o.push("globalmousemove"),this.cursor=(l=e.target)==null?void 0:l.cursor),o.length>0&&this.all(e,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var o;if(!(t instanceof Ri)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),r=this.createPointerEvent(t),n=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),n&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=(o=r.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;e.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof Ri)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const r=t.pointerType==="mouse"||t.pointerType==="pen",n=this.findMountedTarget(e.overTargets),s=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(t,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;e.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Ri)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const h=r.button===2;this.dispatchEvent(r,h?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.pressTargetsByButton[t.button]);let o=s;if(s&&!r.composedPath().includes(s)){let h=s;for(;h&&!r.composedPath().includes(h);){if(r.currentTarget=h,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const a=r.button===2;this.notifyTarget(r,a?"rightupoutside":"mouseupoutside")}h=h.parent}delete n.pressTargetsByButton[t.button],o=h}if(o){const h=this.clonePointerEvent(r,"click");h.target=o,h.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:h.target,timeStamp:e});const a=n.clicksByButton[t.button];if(a.target===h.target&&e-a.timeStamp<200?++a.clickCount:a.clickCount=1,a.target=h.target,a.timeStamp=e,h.detail=a.clickCount,h.pointerType==="mouse"){const l=h.button===2;this.dispatchEvent(h,l?"rightclick":"click")}else h.pointerType==="touch"&&this.dispatchEvent(h,"tap");this.dispatchEvent(h,"pointertap"),this.freeEvent(h)}this.freeEvent(r)}mapPointerUpOutside(t){if(!(t instanceof Ri)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),r=this.findMountedTarget(e.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(r){let s=r;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof Nl)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let r=1;r<t.length&&t[r].parent===e;r++)e=t[r];return e}createPointerEvent(t,e,r){const n=this.allocateEvent(Ri);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=r??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof e=="string"&&(n.type=e),n}createWheelEvent(t){const e=this.allocateEvent(Nl);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const r=this.allocateEvent(Ri);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=e??r.type,r}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof Ri&&e instanceof Ri&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof Ld&&e instanceof Ld&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const r=t.currentTarget._events[e];if(r&&t.currentTarget.isInteractive())if("fn"in r)r.once&&t.currentTarget.removeListener(e,r.fn,void 0,!0),r.fn.call(r.context,t);else for(let n=0,s=r.length;n<s&&!t.propagationImmediatelyStopped;n++)r[n].once&&t.currentTarget.removeListener(e,r[n].fn,void 0,!0),r[n].fn.call(r[n].context,t)}}const ik=1,sk={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Lv=class Uv{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new nk(null),ka.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ri(null),this.rootWheelEvent=new Nl(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Uv.defaultEventFeatures},{set:(e,r,n)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),e[r]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:r}=this.renderer;this.setTargetElement(e),this.resolution=r,Uv._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.domElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.domElement.style,r);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let r=0,n=e.length;r<n;r++){const s=e[r],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,ka.pointerMoved();const e=this.normalizeToPointerData(t);for(let r=0,n=e.length;r<n;r++){const s=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const r=e!==this.domElement?"outside":"",n=this.normalizeToPointerData(t);for(let s=0,o=n.length;s<o;s++){const h=this.bootstrapEvent(this.rootPointerEvent,n[s]);h.type+=r,this.rootBoundary.mapEvent(h)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);for(let r=0,n=e.length;r<n;r++){const s=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,ka.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;ka.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;ka.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,r){const n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;t.x=(e-n.left)*(this.domElement.width/n.width)*s,t.y=(r-n.top)*(this.domElement.height/n.height)*s}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let r=0,n=t.changedTouches.length;r<n;r++){const s=t.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,e.push(s)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const r=t;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=ik),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,e.push(r)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=sk[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};Lv.extension={name:"events",type:[At.RendererSystem,At.CanvasRendererSystem]},Lv.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Vv=Lv;Dt.add(Vv);function yb(i){return i==="dynamic"||i==="static"}const ak={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??yb(Vv.defaultEventMode)},set interactive(i){pe("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=i,this.eventMode=i?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Vv.defaultEventMode},set eventMode(i){this._internalInteractive=yb(i),this._internalEventMode=i},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(i,t,e){const r=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof e=="object"?e.signal:void 0,s=typeof e=="object"?e.once===!0:!1,o=typeof t=="function"?void 0:t;i=r?`${i}capture`:i;const h=typeof t=="function"?t:t.handleEvent,a=this;n&&n.addEventListener("abort",()=>{a.off(i,h,o)}),s?a.once(i,h,o):a.on(i,h,o)},removeEventListener(i,t,e){const r=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof t=="function"?void 0:t;i=r?`${i}capture`:i,t=typeof t=="function"?t:t.handleEvent,this.off(i,t,n)},dispatchEvent(i){if(!(i instanceof Eu))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return i.defaultPrevented=!1,i.path=null,i.target=this,i.manager.dispatchEvent(i),!i.defaultPrevented}};Er.mixin(ak);const ok={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Er.mixin(ok);const lk=9,zc=100,hk=0,uk=0,xb=2,wb=1,ck=-1e3,dk=-1e3,fk=2;class dS{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ys.tablet||Ys.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${zc}px`,e.style.height=`${zc}px`,e.style.position="absolute",e.style.top=`${hk}px`,e.style.left=`${uk}px`,e.style.zIndex=xb.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${wb}px`,t.style.height=`${wb}px`,t.style.position="absolute",t.style.top=`${ck}px`,t.style.left=`${dk}px`,t.style.zIndex=fk.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}update(){const t=performance.now();if(Ys.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:r,width:n,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:h,resolution:a}=this.renderer,l=n/o*a,u=s/h*a;let c=this.div;c.style.left=`${e}px`,c.style.top=`${r}px`,c.style.width=`${o}px`,c.style.height=`${h}px`;for(let f=0;f<this.children.length;f++){const p=this.children[f];if(p.renderId!==this.renderId)p._accessibleActive=!1,kl(this.children,f,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,f--;else{c=p._accessibleDiv;let g=p.hitArea;const v=p.worldTransform;p.hitArea?(c.style.left=`${(v.tx+g.x*v.a)*l}px`,c.style.top=`${(v.ty+g.y*v.d)*u}px`,c.style.width=`${g.width*v.a*l}px`,c.style.height=`${g.height*v.d*u}px`):(g=p.getBounds(),this.capHitArea(g),c.style.left=`${g.x*l}px`,c.style.top=`${g.y*u}px`,c.style.width=`${g.width*l}px`,c.style.height=`${g.height*u}px`,c.title!==p.accessibleTitle&&p.accessibleTitle!==null&&(c.title=p.accessibleTitle),c.getAttribute("aria-label")!==p.accessibleHint&&p.accessibleHint!==null&&c.setAttribute("aria-label",p.accessibleHint)),(p.accessibleTitle!==c.title||p.tabIndex!==c.tabIndex)&&(c.title=p.accessibleTitle,c.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:r}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>r&&(t.height=r-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${zc}px`,e.style.height=`${zc}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=xb.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:r}=t.target,n=this.renderer.events.rootBoundary,s=Object.assign(new Eu(n),{target:r});n.rootTarget=this.renderer.lastObjectRendered,e.forEach(o=>n.dispatchEvent(s,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===lk&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}dS.extension={name:"accessibility",type:[At.RendererPlugin,At.CanvasRendererPlugin]};Dt.add(dS);const fS=class Xv{constructor(t){this.stage=new bn,t=Object.assign({forceCanvas:!1},t),this.renderer=b2(t),Xv._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){const r=Xv._plugins.slice(0);r.reverse(),r.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};fS._plugins=[];let pS=fS;Dt.handleByList(At.Application,pS._plugins);class mS{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,r;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:s}=this._resizeTo;e=n,r=s}this.renderer.resize(e,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}mS.extension=At.Application;Dt.add(mS);const _b={loader:At.LoadParser,resolver:At.ResolveParser,cache:At.CacheParser,detection:At.DetectionParser};Dt.handle(At.Asset,i=>{const t=i.ref;Object.entries(_b).filter(([e])=>!!t[e]).forEach(([e,r])=>Dt.add(Object.assign(t[e],{extension:t[e].extension??r})))},i=>{const t=i.ref;Object.keys(_b).filter(e=>!!t[e]).forEach(e=>Dt.remove(t[e]))});class pk{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<e;r++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Yl(i,t){if(Array.isArray(t)){for(const e of t)if(i.startsWith(`data:${e}`))return!0;return!1}return i.startsWith(`data:${t}`)}function Vn(i,t){const e=i.split("?")[0],r=qe.extname(e).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}const Xi=(i,t,e=!1)=>(Array.isArray(i)||(i=[i]),t?i.map(r=>typeof r=="string"||e?t(r):r):i),Gv=(i,t)=>{const e=t.split("?")[1];return e&&(i+=`?${e}`),i};function gS(i,t,e,r,n){const s=t[e];for(let o=0;o<s.length;o++){const h=s[o];e<t.length-1?gS(i.replace(r[e],h),t,e+1,r,n):n.push(i.replace(r[e],h))}}function mk(i){const t=/\{(.*?)\}/g,e=i.match(t),r=[];if(e){const n=[];e.forEach(s=>{const o=s.substring(1,s.length-1).split(",");n.push(o)}),gS(i,n,0,e,r)}else r.push(i);return r}const Ud=i=>!Array.isArray(i);class gk{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const r=Xi(t);let n;for(let h=0;h<this.parsers.length;h++){const a=this.parsers[h];if(a.test(e)){n=a.getCacheableAssets(r,e);break}}n||(n={},r.forEach(h=>{n[h]=e}));const s=Object.keys(n),o={cacheKeys:s,keys:r};if(r.forEach(h=>{this._cacheMap.set(h,o)}),s.forEach(h=>{this._cache.has(h)&&this._cache.get(h)!==e&&console.warn("[Cache] already has key:",h),this._cache.set(h,n[h])}),e instanceof ve){const h=e;r.forEach(a=>{h.baseTexture!==ve.EMPTY.baseTexture&&re.addToCache(h.baseTexture,a),ve.addToCache(h,a)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(r=>{this._cache.delete(r)}),e.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Ao=new gk;class vk{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,r)=>(this._parsersValidated=!1,t[e]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const r={promise:null,parser:null};return r.promise=(async()=>{var o,h;let n=null,s=null;if(e.loadParser&&(s=this._parserHash[e.loadParser],s||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!s){for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.load&&((o=l.test)!=null&&o.call(l,t,e,this))){s=l;break}}if(!s)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await s.load(t,e,this),r.parser=s;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];l.parse&&l.parse&&await((h=l.testParse)==null?void 0:h.call(l,n,e,this))&&(n=await l.parse(n,e,this)||n,r.parser=l)}return n})(),r}async load(t,e){this._parsersValidated||this._validateParsers();let r=0;const n={},s=Ud(t),o=Xi(t,l=>({alias:[l],src:l})),h=o.length,a=o.map(async l=>{const u=qe.toAbsolute(l.src);if(!n[l.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,l)),n[l.src]=await this.promiseCache[u].promise,e&&e(++r/h)}catch(c){throw delete this.promiseCache[u],delete n[l.src],new Error(`[Loader.load] Failed to load ${u}.
${c}`)}});return await Promise.all(a),s?n[o[0].src]:n}async unload(t){const e=Xi(t,r=>({alias:[r],src:r})).map(async r=>{var o,h;const n=qe.toAbsolute(r.src),s=this.promiseCache[n];if(s){const a=await s.promise;delete this.promiseCache[n],(h=(o=s.parser)==null?void 0:o.unload)==null||h.call(o,a,r,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}}var si=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(si||{});const yk=".json",xk="application/json",wk={extension:{type:At.LoadParser,priority:si.Low},name:"loadJson",test(i){return Yl(i,xk)||Vn(i,yk)},async load(i){return await(await It.ADAPTER.fetch(i)).json()}};Dt.add(wk);const _k=".txt",bk="text/plain",Ek={name:"loadTxt",extension:{type:At.LoadParser,priority:si.Low},test(i){return Yl(i,bk)||Vn(i,_k)},async load(i){return await(await It.ADAPTER.fetch(i)).text()}};Dt.add(Ek);const Tk=["normal","bold","100","200","300","400","500","600","700","800","900"],Sk=[".ttf",".otf",".woff",".woff2"],Ak=["font/ttf","font/otf","font/woff","font/woff2"],Ck=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Ik(i){const t=qe.extname(i),e=qe.basename(i,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let r=e.length>0;for(const s of e)if(!s.match(Ck)){r=!1;break}let n=e.join(" ");return r||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}const Rk=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Mk(i){return Rk.test(i)?i:encodeURI(i)}const Pk={extension:{type:At.LoadParser,priority:si.Low},name:"loadWebFont",test(i){return Yl(i,Ak)||Vn(i,Sk)},async load(i,t){var r,n,s;const e=It.ADAPTER.getFontFaceSet();if(e){const o=[],h=((r=t.data)==null?void 0:r.family)??Ik(i),a=((s=(n=t.data)==null?void 0:n.weights)==null?void 0:s.filter(u=>Tk.includes(u)))??["normal"],l=t.data??{};for(let u=0;u<a.length;u++){const c=a[u],f=new FontFace(h,`url(${Mk(i)})`,{...l,weight:c});await f.load(),e.add(f),o.push(f)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){(Array.isArray(i)?i:[i]).forEach(t=>It.ADAPTER.getFontFaceSet().delete(t))}};Dt.add(Pk);const kk=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Ol=null,Yv=class{constructor(){Ol||(Ol=URL.createObjectURL(new Blob([kk],{type:"application/javascript"}))),this.worker=new Worker(Ol)}};Yv.revokeObjectURL=function(){Ol&&(URL.revokeObjectURL(Ol),Ol=null)};const Fk=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Dl=null;class vS{constructor(){Dl||(Dl=URL.createObjectURL(new Blob([Fk],{type:"application/javascript"}))),this.worker=new Worker(Dl)}}vS.revokeObjectURL=function(){Dl&&(URL.revokeObjectURL(Dl),Dl=null)};let bb=0,Rg;class Bk{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new Yv;e.addEventListener("message",r=>{e.terminate(),Yv.revokeObjectURL(),t(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Rg===void 0&&(Rg=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Rg&&(this._createdWorkers++,t=new vS().worker,t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const r=new Promise((n,s)=>{this.queue.push({id:t,arguments:e,resolve:n,reject:s})});return this.next(),r}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),r=e.id;this.resolveHash[bb]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:bb++,id:r})}}const Eb=new Bk;function Tu(i,t,e){i.resource.internal=!0;const r=new ve(i),n=()=>{delete t.promiseCache[e],Ao.has(e)&&Ao.remove(e)};return r.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),n())}),r.once("destroyed",()=>{i.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),n())}),r}const Nk=[".jpeg",".jpg",".png",".webp",".avif"],Ok=["image/jpeg","image/png","image/webp","image/avif"];async function Dk(i){const t=await It.ADAPTER.fetch(i);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const ff={name:"loadTextures",extension:{type:At.LoadParser,priority:si.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return Yl(i,Ok)||Vn(i,Nk)},async load(i,t,e){var h;const r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let n;r?this.config.preferWorkers&&await Eb.isImageBitmapSupported()?n=await Eb.loadImageBitmap(i):n=await Dk(i):n=await new Promise((a,l)=>{const u=new Image;u.crossOrigin=this.config.crossOrigin,u.src=i,u.complete?a(u):(u.onload=()=>a(u),u.onerror=c=>l(c))});const s={...t.data};s.resolution??(s.resolution=zs(i)),r&&((h=s.resourceOptions)==null?void 0:h.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new re(n,s);return o.resource.src=i,Tu(o,e,i)},unload(i){i.destroy(!0)}};Dt.add(ff);const Lk=".svg",Uk="image/svg+xml",Vk={extension:{type:At.LoadParser,priority:si.High},name:"loadSVG",test(i){return Yl(i,Uk)||Vn(i,Lk)},async testParse(i){return kv.test(i)},async parse(i,t,e){var s;const r=new kv(i,(s=t==null?void 0:t.data)==null?void 0:s.resourceOptions);await r.load();const n=new re(r,{resolution:zs(i),...t==null?void 0:t.data});return n.resource.src=t.src,Tu(n,e,t.src)},async load(i,t){return(await It.ADAPTER.fetch(i)).text()},unload:ff.unload};Dt.add(Vk);const Xk=[".mp4",".m4v",".webm",".ogv"],Gk=["video/mp4","video/webm","video/ogg"],Yk={name:"loadVideo",extension:{type:At.LoadParser,priority:si.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(i){return Yl(i,Gk)||Vn(i,Xk)},async load(i,t,e){var o;let r;const n=await(await It.ADAPTER.fetch(i)).blob(),s=URL.createObjectURL(n);try{const h={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions,autoLoad:!0},a=new oS(s,h);await a.load();const l=new re(a,{alphaMode:await jM(),resolution:zs(i),...t==null?void 0:t.data});l.resource.src=i,r=Tu(l,e,i),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(h){throw URL.revokeObjectURL(s),h}return r},unload(i){i.destroy(!0)}};Dt.add(Yk);class $k{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`).join("&")}}getAlias(t){const{alias:e,name:r,src:n,srcs:s}=t;return Xi(e||r||n||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(h=>(h==null?void 0:h.src)??(h==null?void 0:h.srcs)??h):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const r=[];Array.isArray(e)?e.forEach(n=>{const s=n.src??n.srcs,o=n.alias??n.name;let h;if(typeof o=="string"){const a=this._createBundleAssetId(t,o);r.push(a),h=[o,a]}else{const a=o.map(l=>this._createBundleAssetId(t,l));r.push(...a),h=[...o,...a]}this.add({...n,alias:h,src:s})}):Object.keys(e).forEach(n=>{const s=[n,this._createBundleAssetId(t,n)];if(typeof e[n]=="string")this.add({alias:s,src:e[n]});else if(Array.isArray(e[n]))this.add({alias:s,src:e[n]});else{const o=e[n],h=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(h)?h:[h]})}r.push(...s)}),this._bundles[t]=r}add(t,e,r,n,s){const o=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(pe("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:t,src:e,data:r,format:n,loadParser:s})):Array.isArray(t)?o.push(...t):o.push(t);let h;h=a=>{this.hasKey(a)&&console.warn(`[Resolver] already has key: ${a} overwriting`)},Xi(o).forEach(a=>{const{src:l,srcs:u}=a;let{data:c,format:f,loadParser:p}=a;const g=Xi(l||u).map(x=>typeof x=="string"?mk(x):Array.isArray(x)?x:[x]),v=this.getAlias(a);Array.isArray(v)?v.forEach(h):h(v);const y=[];g.forEach(x=>{x.forEach(_=>{let b={};if(typeof _!="object"){b.src=_;for(let E=0;E<this._parsers.length;E++){const T=this._parsers[E];if(T.test(_)){b=T.parse(_);break}}}else c=_.data??c,f=_.format??f,p=_.loadParser??p,b={...b,..._};if(!v)throw new Error(`[Resolver] alias is undefined for this asset: ${b.src}`);b=this.buildResolvedAsset(b,{aliases:v,data:c,format:f,loadParser:p}),y.push(b)})}),v.forEach(x=>{this._assetMap[x]=y})})}resolveBundle(t){const e=Ud(t);t=Xi(t);const r={};return t.forEach(n=>{const s=this._bundles[n];if(s){const o=this.resolve(s),h={};for(const a in o){const l=o[a];h[this._extractAssetIdFromBundle(n,a)]=l}r[n]=h}}),e?r[t[0]]:r}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const r={};for(const n in e)r[n]=e[n].src;return r}return e.src}resolve(t){const e=Ud(t);t=Xi(t);const r={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let s=this._assetMap[n];const o=s[0],h=this._getPreferredOrder(s);h==null||h.priority.forEach(a=>{h.params[a].forEach(l=>{const u=s.filter(c=>c[a]?c[a]===l:!1);u.length&&(s=u)})}),this._resolverHash[n]=s[0]??o}else this._resolverHash[n]=this.buildResolvedAsset({alias:[n],src:n},{});r[n]=this._resolverHash[n]}),e?r[t[0]]:r}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const r=t[0],n=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:r,data:n,loadParser:s,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=qe.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=r??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...n||{},...t.data},t.loadParser=s??t.loadParser,t.format=o??t.format??qe.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class Wk{constructor(){this._detections=[],this._initialized=!1,this.resolver=new $k,this.loader=new vk,this.cache=Ao,this._backgroundLoader=new pk(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let h=t.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}const e=((s=t.texturePreference)==null?void 0:s.resolution)??1,r=typeof e=="number"?[e]:e,n=await this._detectFormats({preferredFormats:(o=t.texturePreference)==null?void 0:o.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:r}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,r,n,s){this.resolver.add(t,e,r,n,s)}async load(t,e){this._initialized||await this.init();const r=Ud(t),n=Xi(t).map(h=>{if(typeof h!="string"){const a=this.resolver.getAlias(h);return a.some(l=>!this.resolver.hasKey(l))&&this.add(h),Array.isArray(a)?a[0]:a}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),s=this.resolver.resolve(n),o=await this._mapLoadToResolve(s,e);return r?o[n[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let r=!1;typeof t=="string"&&(r=!0,t=[t]);const n=this.resolver.resolveBundle(t),s={},o=Object.keys(n);let h=0,a=0;const l=()=>{e==null||e(++h/a)},u=o.map(c=>{const f=n[c];return a+=Object.keys(f).length,this._mapLoadToResolve(f,l).then(p=>{s[c]=p})});return await Promise.all(u),r?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Ao.get(t);const e={};for(let r=0;r<t.length;r++)e[r]=Ao.get(t[r]);return e}async _mapLoadToResolve(t,e){const r=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(r,e);this._backgroundLoader.active=!0;const o={};return r.forEach((h,a)=>{const l=s[h.src],u=[h.src];h.alias&&u.push(...h.alias),o[n[a]]=l,Ao.set(u,l)}),o}async unload(t){this._initialized||await this.init();const e=Xi(t).map(n=>typeof n!="string"?n.src:n),r=this.resolver.resolve(e);await this._unloadFromResolved(r)}async unloadBundle(t){this._initialized||await this.init(),t=Xi(t);const e=this.resolver.resolveBundle(t),r=Object.keys(e).map(n=>this._unloadFromResolved(e[n]));await Promise.all(r)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(r=>{Ao.remove(r.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const r of t.detections)t.skipDetections||await r.test()?e=await r.add(e):t.skipDetections||(e=await r.remove(e));return e=e.filter((r,n)=>e.indexOf(r)===n),e}get detections(){return this._detections}get preferWorkers(){return ff.config.preferWorkers}set preferWorkers(t){pe("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(r=>r in t).forEach(r=>{e.config[r]=t[r]})})}}const jc=new Wk;Dt.handleByList(At.LoadParser,jc.loader.parsers).handleByList(At.ResolveParser,jc.resolver.parsers).handleByList(At.CacheParser,jc.cache.parsers).handleByList(At.DetectionParser,jc.detections);const Hk={extension:At.CacheParser,test:i=>Array.isArray(i)&&i.every(t=>t instanceof ve),getCacheableAssets:(i,t)=>{const e={};return i.forEach(r=>{t.forEach((n,s)=>{e[r+(s===0?"":s+1)]=n})}),e}};Dt.add(Hk);async function yS(i){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(i)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const zk={extension:{type:At.DetectionParser,priority:1},test:async()=>yS("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async i=>[...i,"avif"],remove:async i=>i.filter(t=>t!=="avif")};Dt.add(zk);const jk={extension:{type:At.DetectionParser,priority:0},test:async()=>yS("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async i=>[...i,"webp"],remove:async i=>i.filter(t=>t!=="webp")};Dt.add(jk);const Tb=["png","jpg","jpeg"],qk={extension:{type:At.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...Tb],remove:async i=>i.filter(t=>!Tb.includes(t))};Dt.add(qk);const Kk="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Dy(i){return Kk?!1:document.createElement("video").canPlayType(i)!==""}const Zk={extension:{type:At.DetectionParser,priority:0},test:async()=>Dy("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(t=>t!=="webm")};Dt.add(Zk);const Qk={extension:{type:At.DetectionParser,priority:0},test:async()=>Dy("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(t=>t!=="mp4"&&t!=="m4v")};Dt.add(Qk);const Jk={extension:{type:At.DetectionParser,priority:0},test:async()=>Dy("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(t=>t!=="ogv")};Dt.add(Jk);const tF={extension:At.ResolveParser,test:ff.test,parse:i=>{var t;return{resolution:parseFloat(((t=It.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:qe.extname(i).slice(1),src:i}}};Dt.add(tF);var Jr=(i=>(i[i.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",i[i.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",i[i.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",i[i.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",i[i.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",i[i.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",i[i.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",i[i.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",i[i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",i[i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",i[i.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",i[i.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",i[i.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",i[i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",i[i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",i[i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",i))(Jr||{});const Vd={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let ls,Tl;function Sb(){Tl={bptc:ls.getExtension("EXT_texture_compression_bptc"),astc:ls.getExtension("WEBGL_compressed_texture_astc"),etc:ls.getExtension("WEBGL_compressed_texture_etc"),s3tc:ls.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:ls.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:ls.getExtension("WEBGL_compressed_texture_pvrtc")||ls.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:ls.getExtension("WEBGL_compressed_texture_etc1"),atc:ls.getExtension("WEBGL_compressed_texture_atc")}}const eF={extension:{type:At.DetectionParser,priority:2},test:async()=>{const i=It.ADAPTER.createCanvas().getContext("webgl");return i?(ls=i,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async i=>{Tl||Sb();const t=[];for(const e in Tl)Tl[e]&&t.push(e);return[...t,...i]},remove:async i=>(Tl||Sb(),i.filter(t=>!(t in Tl)))};Dt.add(eF);class rF extends uf{constructor(t,e={width:1,height:1,autoLoad:!0}){let r,n;typeof t=="string"?(r=t,n=new Uint8Array):(r=null,n=t),super(n,e),this.origin=r,this.buffer=n?new vv(n):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new vv(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class Fo extends rF{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=Fo._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||Fo._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,r){const n=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;n.pixelStorei(n.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:h,levelWidth:a,levelHeight:l,levelBuffer:u}=this._levelBuffers[s];n.compressedTexImage2D(n.TEXTURE_2D,h,this.format,a,l,0,u)}return!0}onBlobLoaded(){this._levelBuffers=Fo._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=35916&&t<=35919)return"s3tc_sRGB";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t===36196)return"etc1";if(t===35986||t===35987||t===34798)return"atc";if(t>=36492&&t<=36495)return"bptc";if(t===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${t}`)}static _createLevelBuffers(t,e,r,n,s,o,h){const a=new Array(r);let l=t.byteOffset,u=o,c=h,f=u+n-1&~(n-1),p=c+s-1&~(s-1),g=f*p*Vd[e];for(let v=0;v<r;v++)a[v]={levelID:v,levelWidth:r>1?u:f,levelHeight:r>1?c:p,levelBuffer:new Uint8Array(t.buffer,l,g)},l+=g,u=u>>1||1,c=c>>1||1,f=u+n-1&~(n-1),p=c+s-1&~(s-1),g=f*p*Vd[e];return a}}const Mg=4,qc=124,nF=32,Ab=20,iF=542327876,Kc={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},sF={FOURCC:2},Zc={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},aF=1,oF=2,lF=4,hF=64,uF=512,cF=131072,dF=827611204,fF=861165636,pF=894720068,mF=808540228,gF=4,vF={[dF]:Jr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[fF]:Jr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[pF]:Jr.COMPRESSED_RGBA_S3TC_DXT5_EXT},yF={70:Jr.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Jr.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Jr.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Jr.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Jr.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Jr.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Jr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Jr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Jr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Jr.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Jr.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Jr.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Jr.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function xF(i){const t=new Uint32Array(i);if(t[0]!==iF)throw new Error("Invalid DDS file magic word");const e=new Uint32Array(i,0,qc/Uint32Array.BYTES_PER_ELEMENT),r=e[Kc.HEIGHT],n=e[Kc.WIDTH],s=e[Kc.MIPMAP_COUNT],o=new Uint32Array(i,Kc.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,nF/Uint32Array.BYTES_PER_ELEMENT),h=o[aF];if(h&lF){const a=o[sF.FOURCC];if(a!==mF){const _=vF[a],b=Mg+qc,E=new Uint8Array(i,b);return[new Fo(E,{format:_,width:n,height:r,levels:s})]}const l=Mg+qc,u=new Uint32Array(t.buffer,l,Ab/Uint32Array.BYTES_PER_ELEMENT),c=u[Zc.DXGI_FORMAT],f=u[Zc.RESOURCE_DIMENSION],p=u[Zc.MISC_FLAG],g=u[Zc.ARRAY_SIZE],v=yF[c];if(v===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${c}`);if(p===gF)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const y=new Array,x=Mg+qc+Ab;if(g===1)y.push(new Uint8Array(i,x));else{const _=Vd[v];let b=0,E=n,T=r;for(let C=0;C<s;C++){const M=Math.max(1,E+3&-4),P=Math.max(1,T+3&-4),F=M*P*_;b+=F,E=E>>>1,T=T>>>1}let S=x;for(let C=0;C<g;C++)y.push(new Uint8Array(i,S,b)),S+=b}return y.map(_=>new Fo(_,{format:v,width:n,height:r,levels:s}))}throw h&hF?new Error("DDSParser does not support uncompressed texture data."):h&uF?new Error("DDSParser does not supported YUV uncompressed texture data."):h&cF?new Error("DDSParser does not support single-channel (lumninance) texture data!"):h&oF?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Cb=[171,75,84,88,32,49,49,187,13,10,26,10],wF=67305985,Ci={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},$v=64,Ib={[$t.UNSIGNED_BYTE]:1,[$t.UNSIGNED_SHORT]:2,[$t.INT]:4,[$t.UNSIGNED_INT]:4,[$t.FLOAT]:4,[$t.HALF_FLOAT]:8},_F={[Et.RGBA]:4,[Et.RGB]:3,[Et.RG]:2,[Et.RED]:1,[Et.LUMINANCE]:1,[Et.LUMINANCE_ALPHA]:2,[Et.ALPHA]:1},bF={[$t.UNSIGNED_SHORT_4_4_4_4]:2,[$t.UNSIGNED_SHORT_5_5_5_1]:2,[$t.UNSIGNED_SHORT_5_6_5]:2};function EF(i,t,e=!1){const r=new DataView(t);if(!TF(i,r))return null;const n=r.getUint32(Ci.ENDIANNESS,!0)===wF,s=r.getUint32(Ci.GL_TYPE,n),o=r.getUint32(Ci.GL_FORMAT,n),h=r.getUint32(Ci.GL_INTERNAL_FORMAT,n),a=r.getUint32(Ci.PIXEL_WIDTH,n),l=r.getUint32(Ci.PIXEL_HEIGHT,n)||1,u=r.getUint32(Ci.PIXEL_DEPTH,n)||1,c=r.getUint32(Ci.NUMBER_OF_ARRAY_ELEMENTS,n)||1,f=r.getUint32(Ci.NUMBER_OF_FACES,n),p=r.getUint32(Ci.NUMBER_OF_MIPMAP_LEVELS,n),g=r.getUint32(Ci.BYTES_OF_KEY_VALUE_DATA,n);if(l===0||u!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const v=4,y=4,x=a+3&-4,_=l+3&-4,b=new Array(c);let E=a*l;s===0&&(E=x*_);let T;if(s!==0?Ib[s]?T=Ib[s]*_F[o]:T=bF[s]:T=Vd[h],T===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const S=e?AF(r,g,n):null;let C=E*T,M=a,P=l,F=x,V=_,O=$v+g;for(let U=0;U<p;U++){const H=r.getUint32(O,n);let W=O+4;for(let B=0;B<c;B++){let L=b[B];L||(L=b[B]=new Array(p)),L[U]={levelID:U,levelWidth:p>1||s!==0?M:F,levelHeight:p>1||s!==0?P:V,levelBuffer:new Uint8Array(t,W,C)},W+=C}O+=H+4,O=O%4!==0?O+4-O%4:O,M=M>>1||1,P=P>>1||1,F=M+v-1&-4,V=P+y-1&-4,C=F*V*T}return s!==0?{uncompressed:b.map(U=>{let H=U[0].levelBuffer,W=!1;return s===$t.FLOAT?H=new Float32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4):s===$t.UNSIGNED_INT?(W=!0,H=new Uint32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4)):s===$t.INT&&(W=!0,H=new Int32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4)),{resource:new uf(H,{width:U[0].levelWidth,height:U[0].levelHeight}),type:s,format:W?SF(o):o}}),kvData:S}:{compressed:b.map(U=>new Fo(null,{format:h,width:a,height:l,levels:p,levelBuffers:U})),kvData:S}}function TF(i,t){for(let e=0;e<Cb.length;e++)if(t.getUint8(e)!==Cb[e])return console.error(`${i} is not a valid *.ktx file!`),!1;return!0}function SF(i){switch(i){case Et.RGBA:return Et.RGBA_INTEGER;case Et.RGB:return Et.RGB_INTEGER;case Et.RG:return Et.RG_INTEGER;case Et.RED:return Et.RED_INTEGER;default:return i}}function AF(i,t,e){const r=new Map;let n=0;for(;n<t;){const s=i.getUint32($v+n,e),o=$v+n+4,h=3-(s+3)%4;if(s===0||s>t-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let a=0;for(;a<s&&i.getUint8(o+a)!==0;a++);if(a===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const l=new TextDecoder().decode(new Uint8Array(i.buffer,o,a)),u=new DataView(i.buffer,o+a+1,s-a-1);r.set(l,u),n+=4+s+h}return r}const CF={extension:{type:At.LoadParser,priority:si.High},name:"loadDDS",test(i){return Vn(i,".dds")},async load(i,t,e){const r=await(await It.ADAPTER.fetch(i)).arrayBuffer(),n=xF(r).map(s=>{const o=new re(s,{mipmap:$i.OFF,alphaMode:ji.NO_PREMULTIPLIED_ALPHA,resolution:zs(i),...t.data});return Tu(o,e,i)});return n.length===1?n[0]:n},unload(i){Array.isArray(i)?i.forEach(t=>t.destroy(!0)):i.destroy(!0)}};Dt.add(CF);const IF={extension:{type:At.LoadParser,priority:si.High},name:"loadKTX",test(i){return Vn(i,".ktx")},async load(i,t,e){const r=await(await It.ADAPTER.fetch(i)).arrayBuffer(),{compressed:n,uncompressed:s,kvData:o}=EF(i,r),h=n??s,a={mipmap:$i.OFF,alphaMode:ji.NO_PREMULTIPLIED_ALPHA,resolution:zs(i),...t.data},l=h.map(u=>{h===s&&Object.assign(a,{type:u.type,format:u.format});const c=u.resource??u,f=new re(c,a);return f.ktxKeyValueData=o,Tu(f,e,i)});return l.length===1?l[0]:l},unload(i){Array.isArray(i)?i.forEach(t=>t.destroy(!0)):i.destroy(!0)}};Dt.add(IF);const RF=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],MF={extension:At.ResolveParser,test:i=>{const t=qe.extname(i).slice(1);return["basis","ktx","dds"].includes(t)},parse:i=>{var r,n;const t=i.split("."),e=t.pop();if(["ktx","dds"].includes(e)){const s=t.pop();if(RF.includes(s))return{resolution:parseFloat(((r=It.RETINA_PREFIX.exec(i))==null?void 0:r[1])??"1"),format:s,src:i}}return{resolution:parseFloat(((n=It.RETINA_PREFIX.exec(i))==null?void 0:n[1])??"1"),format:e,src:i}}};Dt.add(MF);const Qc=new le,PF=4,xS=class Kh{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,e,r,n){const s=new Image;return s.src=await this.base64(t,e,r,n),s}async base64(t,e,r,n){const s=this.canvas(t,n);if(s.toBlob!==void 0)return new Promise((o,h)=>{s.toBlob(a=>{if(!a){h(new Error("ICanvas.toBlob failed!"));return}const l=new FileReader;l.onload=()=>o(l.result),l.onerror=h,l.readAsDataURL(a)},e,r)});if(s.toDataURL!==void 0)return s.toDataURL(e,r);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:e,quality:r});return new Promise((h,a)=>{const l=new FileReader;l.onload=()=>h(l.result),l.onerror=a,l.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:r,width:n,height:s,flipY:o,premultipliedAlpha:h}=this._rawPixels(t,e);o&&Kh._flipY(r,n,s),h&&Kh._unpremultiplyAlpha(r);const a=new uP(n,s,1),l=new ImageData(new Uint8ClampedArray(r.buffer),n,s);return a.context.putImageData(l,0,0),a.canvas}pixels(t,e){const{pixels:r,width:n,height:s,flipY:o,premultipliedAlpha:h}=this._rawPixels(t,e);return o&&Kh._flipY(r,n,s),h&&Kh._unpremultiplyAlpha(r),r}_rawPixels(t,e){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let n,s=!1,o=!1,h,a=!1;t&&(t instanceof _u?h=t:(h=r.generateTexture(t,{region:e,resolution:r.resolution,multisample:r.multisample}),a=!0,e&&(Qc.width=e.width,Qc.height=e.height,e=Qc)));const l=r.gl;if(h){if(n=h.baseTexture.resolution,e=e??h.frame,s=!1,o=h.baseTexture.alphaMode>0&&h.baseTexture.format===Et.RGBA,!a){r.renderTexture.bind(h);const p=h.framebuffer.glFramebuffers[r.CONTEXT_UID];p.blitFramebuffer&&r.framebuffer.bind(p.blitFramebuffer)}}else n=r.resolution,e||(e=Qc,e.width=r.width/n,e.height=r.height/n),s=!0,o=this._rendererPremultipliedAlpha,r.renderTexture.bind();const u=Math.max(Math.round(e.width*n),1),c=Math.max(Math.round(e.height*n),1),f=new Uint8Array(PF*u*c);return l.readPixels(Math.round(e.x*n),Math.round(e.y*n),u,c,l.RGBA,l.UNSIGNED_BYTE,f),a&&(h==null||h.destroy(!0)),{pixels:f,width:u,height:c,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(t,e,r){const n=e<<2,s=r>>1,o=new Uint8Array(n);for(let h=0;h<s;h++){const a=h*n,l=(r-h-1)*n;o.set(t.subarray(a,a+n)),t.copyWithin(a,l,l+n),t.set(o,l)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let r=0;r<e;r+=4){const n=t[r+3];if(n!==0){const s=255.001/n;t[r]=t[r]*s+.5,t[r+1]=t[r+1]*s+.5,t[r+2]=t[r+2]*s+.5}}}};xS.extension={name:"extract",type:At.RendererSystem};let kF=xS;Dt.add(kF);const Xd={build(i){const t=i.points;let e,r,n,s,o,h;if(i.type===nn.CIRC){const g=i.shape;e=g.x,r=g.y,o=h=g.radius,n=s=0}else if(i.type===nn.ELIP){const g=i.shape;e=g.x,r=g.y,o=g.width,h=g.height,n=s=0}else{const g=i.shape,v=g.width/2,y=g.height/2;e=g.x+v,r=g.y+y,o=h=Math.max(0,Math.min(g.radius,Math.min(v,y))),n=v-o,s=y-h}if(!(o>=0&&h>=0&&n>=0&&s>=0)){t.length=0;return}const a=Math.ceil(2.3*Math.sqrt(o+h)),l=a*8+(n?4:0)+(s?4:0);if(t.length=l,l===0)return;if(a===0){t.length=8,t[0]=t[6]=e+n,t[1]=t[3]=r+s,t[2]=t[4]=e-n,t[5]=t[7]=r-s;return}let u=0,c=a*4+(n?2:0)+2,f=c,p=l;{const g=n+o,v=s,y=e+g,x=e-g,_=r+v;if(t[u++]=y,t[u++]=_,t[--c]=_,t[--c]=x,s){const b=r-v;t[f++]=x,t[f++]=b,t[--p]=b,t[--p]=y}}for(let g=1;g<a;g++){const v=Math.PI/2*(g/a),y=n+Math.cos(v)*o,x=s+Math.sin(v)*h,_=e+y,b=e-y,E=r+x,T=r-x;t[u++]=_,t[u++]=E,t[--c]=E,t[--c]=b,t[f++]=b,t[f++]=T,t[--p]=T,t[--p]=_}{const g=n,v=s+h,y=e+g,x=e-g,_=r+v,b=r-v;t[u++]=y,t[u++]=_,t[--p]=b,t[--p]=y,n&&(t[u++]=x,t[u++]=_,t[--p]=b,t[--p]=x)}},triangulate(i,t){const e=i.points,r=t.points,n=t.indices;if(e.length===0)return;let s=r.length/2;const o=s;let h,a;if(i.type!==nn.RREC){const u=i.shape;h=u.x,a=u.y}else{const u=i.shape;h=u.x+u.width/2,a=u.y+u.height/2}const l=i.matrix;r.push(i.matrix?l.a*h+l.c*a+l.tx:h,i.matrix?l.b*h+l.d*a+l.ty:a),s++,r.push(e[0],e[1]);for(let u=2;u<e.length;u+=2)r.push(e[u],e[u+1]),n.push(s++,o,s);n.push(o+1,o,s)}};function Rb(i,t=!1){const e=i.length;if(e<6)return;let r=0;for(let n=0,s=i[e-2],o=i[e-1];n<e;n+=2){const h=i[n],a=i[n+1];r+=(h-s)*(a+o),s=h,o=a}if(!t&&r>0||t&&r<=0){const n=e/2;for(let s=n+n%2;s<e;s+=2){const o=e-s-2,h=e-s-1,a=s,l=s+1;[i[o],i[a]]=[i[a],i[o]],[i[h],i[l]]=[i[l],i[h]]}}}const wS={build(i){i.points=i.shape.points.slice()},triangulate(i,t){let e=i.points;const r=i.holes,n=t.points,s=t.indices;if(e.length>=6){Rb(e,!1);const o=[];for(let l=0;l<r.length;l++){const u=r[l];Rb(u.points,!0),o.push(e.length/2),e=e.concat(u.points)}const h=Py(e,o,2);if(!h)return;const a=n.length/2;for(let l=0;l<h.length;l+=3)s.push(h[l]+a),s.push(h[l+1]+a),s.push(h[l+2]+a);for(let l=0;l<e.length;l++)n.push(e[l])}}},FF={build(i){const t=i.shape,e=t.x,r=t.y,n=t.width,s=t.height,o=i.points;o.length=0,n>=0&&s>=0&&o.push(e,r,e+n,r,e+n,r+s,e,r+s)},triangulate(i,t){const e=i.points,r=t.points;if(e.length===0)return;const n=r.length/2;r.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},BF={build(i){Xd.build(i)},triangulate(i,t){Xd.triangulate(i,t)}};var pi=(i=>(i.MITER="miter",i.BEVEL="bevel",i.ROUND="round",i))(pi||{}),Ba=(i=>(i.BUTT="butt",i.ROUND="round",i.SQUARE="square",i))(Ba||{});const Xl={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(i,t=20){if(!this.adaptive||!i||isNaN(i))return t;let e=Math.ceil(i/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};let Mb=class{static curveTo(t,e,r,n,s,o){const h=o[o.length-2],a=o[o.length-1]-e,l=h-t,u=n-e,c=r-t,f=Math.abs(a*c-l*u);if(f<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const p=a*a+l*l,g=u*u+c*c,v=a*u+l*c,y=s*Math.sqrt(p)/f,x=s*Math.sqrt(g)/f,_=y*v/p,b=x*v/g,E=y*c+x*l,T=y*u+x*a,S=l*(x+_),C=a*(x+_),M=c*(y+b),P=u*(y+b),F=Math.atan2(C-T,S-E),V=Math.atan2(P-T,M-E);return{cx:E+t,cy:T+e,radius:s,startAngle:F,endAngle:V,anticlockwise:l*u>c*a}}static arc(t,e,r,n,s,o,h,a,l){const u=h-o,c=Xl._segmentsCount(Math.abs(u)*s,Math.ceil(Math.abs(u)/kd)*40),f=u/(c*2),p=f*2,g=Math.cos(f),v=Math.sin(f),y=c-1,x=y%1/y;for(let _=0;_<=y;++_){const b=_+x*_,E=f+o+p*b,T=Math.cos(E),S=-Math.sin(E);l.push((g*T+v*S)*s+r,(g*-S+v*T)*s+n)}}},NF=class{constructor(){this.reset()}begin(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}},OF=class _S{static curveLength(t,e,r,n,s,o,h,a){let l=0,u=0,c=0,f=0,p=0,g=0,v=0,y=0,x=0,_=0,b=0,E=t,T=e;for(let S=1;S<=10;++S)u=S/10,c=u*u,f=c*u,p=1-u,g=p*p,v=g*p,y=v*t+3*g*u*r+3*p*c*s+f*h,x=v*e+3*g*u*n+3*p*c*o+f*a,_=E-y,b=T-x,E=y,T=x,l+=Math.sqrt(_*_+b*b);return l}static curveTo(t,e,r,n,s,o,h){const a=h[h.length-2],l=h[h.length-1];h.length-=2;const u=Xl._segmentsCount(_S.curveLength(a,l,t,e,r,n,s,o));let c=0,f=0,p=0,g=0,v=0;h.push(a,l);for(let y=1,x=0;y<=u;++y)x=y/u,c=1-x,f=c*c,p=f*c,g=x*x,v=g*x,h.push(p*a+3*f*x*t+3*c*g*r+v*s,p*l+3*f*x*e+3*c*g*n+v*o)}};function Pb(i,t,e,r,n,s,o,h){const a=i-e*n,l=t-r*n,u=i+e*s,c=t+r*s;let f,p;o?(f=r,p=-e):(f=-r,p=e);const g=a+f,v=l+p,y=u+f,x=c+p;return h.push(g,v,y,x),2}function lo(i,t,e,r,n,s,o,h){const a=e-i,l=r-t;let u=Math.atan2(a,l),c=Math.atan2(n-i,s-t);h&&u<c?u+=Math.PI*2:!h&&u>c&&(c+=Math.PI*2);let f=u;const p=c-u,g=Math.abs(p),v=Math.sqrt(a*a+l*l),y=(15*g*Math.sqrt(v)/Math.PI>>0)+1,x=p/y;if(f+=x,h){o.push(i,t,e,r);for(let _=1,b=f;_<y;_++,b+=x)o.push(i,t,i+Math.sin(b)*v,t+Math.cos(b)*v);o.push(i,t,n,s)}else{o.push(e,r,i,t);for(let _=1,b=f;_<y;_++,b+=x)o.push(i+Math.sin(b)*v,t+Math.cos(b)*v,i,t);o.push(n,s,i,t)}return y*2}function DF(i,t){const e=i.shape;let r=i.points||e.points.slice();const n=t.closePointEps;if(r.length===0)return;const s=i.lineStyle,o=new Pe(r[0],r[1]),h=new Pe(r[r.length-2],r[r.length-1]),a=e.type!==nn.POLY||e.closeStroke,l=Math.abs(o.x-h.x)<n&&Math.abs(o.y-h.y)<n;if(a){r=r.slice(),l&&(r.pop(),r.pop(),h.set(r[r.length-2],r[r.length-1]));const L=(o.x+h.x)*.5,N=(h.y+o.y)*.5;r.unshift(L,N),r.push(L,N)}const u=t.points,c=r.length/2;let f=r.length;const p=u.length/2,g=s.width/2,v=g*g,y=s.miterLimit*s.miterLimit;let x=r[0],_=r[1],b=r[2],E=r[3],T=0,S=0,C=-(_-E),M=x-b,P=0,F=0,V=Math.sqrt(C*C+M*M);C/=V,M/=V,C*=g,M*=g;const O=s.alignment,U=(1-O)*2,H=O*2;a||(s.cap===Ba.ROUND?f+=lo(x-C*(U-H)*.5,_-M*(U-H)*.5,x-C*U,_-M*U,x+C*H,_+M*H,u,!0)+2:s.cap===Ba.SQUARE&&(f+=Pb(x,_,C,M,U,H,!0,u))),u.push(x-C*U,_-M*U,x+C*H,_+M*H);for(let L=1;L<c-1;++L){x=r[(L-1)*2],_=r[(L-1)*2+1],b=r[L*2],E=r[L*2+1],T=r[(L+1)*2],S=r[(L+1)*2+1],C=-(_-E),M=x-b,V=Math.sqrt(C*C+M*M),C/=V,M/=V,C*=g,M*=g,P=-(E-S),F=b-T,V=Math.sqrt(P*P+F*F),P/=V,F/=V,P*=g,F*=g;const N=b-x,Y=_-E,D=b-T,k=S-E,X=N*D+Y*k,$=Y*D-k*N,j=$<0;if(Math.abs($)<.001*Math.abs(X)){u.push(b-C*U,E-M*U,b+C*H,E+M*H),X>=0&&(s.join===pi.ROUND?f+=lo(b,E,b-C*U,E-M*U,b-P*U,E-F*U,u,!1)+4:f+=2,u.push(b-P*H,E-F*H,b+P*U,E+F*U));continue}const K=(-C+x)*(-M+E)-(-C+b)*(-M+_),tt=(-P+T)*(-F+E)-(-P+b)*(-F+S),ct=(N*tt-D*K)/$,ft=(k*K-Y*tt)/$,mt=(ct-b)*(ct-b)+(ft-E)*(ft-E),lt=b+(ct-b)*U,gt=E+(ft-E)*U,yt=b-(ct-b)*H,St=E-(ft-E)*H,Rt=Math.min(N*N+Y*Y,D*D+k*k),it=j?U:H,ut=Rt+it*it*v,Ct=mt<=ut;let zt=s.join;if(zt===pi.MITER&&mt/v>y&&(zt=pi.BEVEL),Ct)switch(zt){case pi.MITER:{u.push(lt,gt,yt,St);break}case pi.BEVEL:{j?u.push(lt,gt,b+C*H,E+M*H,lt,gt,b+P*H,E+F*H):u.push(b-C*U,E-M*U,yt,St,b-P*U,E-F*U,yt,St),f+=2;break}case pi.ROUND:{j?(u.push(lt,gt,b+C*H,E+M*H),f+=lo(b,E,b+C*H,E+M*H,b+P*H,E+F*H,u,!0)+4,u.push(lt,gt,b+P*H,E+F*H)):(u.push(b-C*U,E-M*U,yt,St),f+=lo(b,E,b-C*U,E-M*U,b-P*U,E-F*U,u,!1)+4,u.push(b-P*U,E-F*U,yt,St));break}}else{switch(u.push(b-C*U,E-M*U,b+C*H,E+M*H),zt){case pi.MITER:{j?u.push(yt,St,yt,St):u.push(lt,gt,lt,gt),f+=2;break}case pi.ROUND:{j?f+=lo(b,E,b+C*H,E+M*H,b+P*H,E+F*H,u,!0)+2:f+=lo(b,E,b-C*U,E-M*U,b-P*U,E-F*U,u,!1)+2;break}}u.push(b-P*U,E-F*U,b+P*H,E+F*H),f+=2}}x=r[(c-2)*2],_=r[(c-2)*2+1],b=r[(c-1)*2],E=r[(c-1)*2+1],C=-(_-E),M=x-b,V=Math.sqrt(C*C+M*M),C/=V,M/=V,C*=g,M*=g,u.push(b-C*U,E-M*U,b+C*H,E+M*H),a||(s.cap===Ba.ROUND?f+=lo(b-C*(U-H)*.5,E-M*(U-H)*.5,b-C*U,E-M*U,b+C*H,E+M*H,u,!1)+2:s.cap===Ba.SQUARE&&(f+=Pb(b,E,C,M,U,H,!1,u)));const W=t.indices,B=Xl.epsilon*Xl.epsilon;for(let L=p;L<f+p-2;++L)x=u[L*2],_=u[L*2+1],b=u[(L+1)*2],E=u[(L+1)*2+1],T=u[(L+2)*2],S=u[(L+2)*2+1],!(Math.abs(x*(E-S)+b*(S-_)+T*(_-E))<B)&&W.push(L,L+1,L+2)}function LF(i,t){let e=0;const r=i.shape,n=i.points||r.points,s=r.type!==nn.POLY||r.closeStroke;if(n.length===0)return;const o=t.points,h=t.indices,a=n.length/2,l=o.length/2;let u=l;for(o.push(n[0],n[1]),e=1;e<a;e++)o.push(n[e*2],n[e*2+1]),h.push(u,u+1),u++;s&&h.push(u,l)}function kb(i,t){i.lineStyle.native?LF(i,t):DF(i,t)}let UF=class bS{static curveLength(t,e,r,n,s,o){const h=t-2*r+s,a=e-2*n+o,l=2*r-2*t,u=2*n-2*e,c=4*(h*h+a*a),f=4*(h*l+a*u),p=l*l+u*u,g=2*Math.sqrt(c+f+p),v=Math.sqrt(c),y=2*c*v,x=2*Math.sqrt(p),_=f/v;return(y*g+v*f*(g-x)+(4*p*c-f*f)*Math.log((2*v+_+g)/(_+x)))/(4*y)}static curveTo(t,e,r,n,s){const o=s[s.length-2],h=s[s.length-1],a=Xl._segmentsCount(bS.curveLength(o,h,t,e,r,n));let l=0,u=0;for(let c=1;c<=a;++c){const f=c/a;l=o+(t-o)*f,u=h+(e-h)*f,s.push(l+(t+(r-t)*f-l)*f,u+(e+(n-e)*f-u)*f)}}};const Pg={[nn.POLY]:wS,[nn.CIRC]:Xd,[nn.ELIP]:Xd,[nn.RECT]:FF,[nn.RREC]:BF},Fb=[],Jc=[];let Bb=class ES{constructor(t,e=null,r=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=n,this.type=t.type}clone(){return new ES(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}};const vl=new Pe,TS=class SS extends fT{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Dd,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Jc.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),Fb.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,r=null,n=null){const s=new Bb(t,e,r,n);return this.graphicsData.push(s),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const r=new Bb(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let r=0;r<e.length;++r){const n=e[r];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(t,vl):vl.copyFrom(t),n.shape.contains(vl.x,vl.y))){let s=!1;if(n.holes){for(let o=0;o<n.holes.length;o++)if(n.holes[o].shape.contains(vl.x,vl.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const l=e[a],u=l.fillStyle,c=l.lineStyle;Pg[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(u.visible||c.visible)&&this.processHoles(l.holes);for(let f=0;f<2;f++){const p=f===0?u:c;if(!p.visible)continue;const g=p.texture.baseTexture,v=this.indices.length,y=this.points.length/2;g.wrapMode=Oa.REPEAT,f===0?this.processFill(l):this.processLine(l);const x=this.points.length/2-y;x!==0&&(r&&!this._compareStyles(n,p)&&(r.end(v,y),r=null),r||(r=Fb.pop()||new NF,r.begin(p,v,y),this.batches.push(r),n=p),this.addUvs(this.points,t,p.texture,y,x,p.matrix))}}const s=this.indices.length,o=this.points.length/2;if(r&&r.end(s,o),this.batches.length===0){this.batchable=!0;return}const h=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&h===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=h?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const r=this.graphicsData[t],n=r.fillStyle,s=r.lineStyle;if(n&&!n.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,r=t.length;e<r;e++){const n=t[e];for(let s=0;s<n.size;s++){const o=n.start+s;this.indicesUint16[o]=this.indicesUint16[o]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<SS.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++re._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),Jc.push(this.drawCalls[c]);this.drawCalls.length=0;const e=this.colors,r=this.textureIds;let n=Jc.pop();n||(n=new wv,n.texArray=new Av),n.texArray.count=0,n.start=0,n.size=0,n.type=Gi.TRIANGLES;let s=0,o=null,h=0,a=!1,l=Gi.TRIANGLES,u=0;this.drawCalls.push(n);for(let c=0;c<this.batches.length;c++){const f=this.batches[c],p=8,g=f.style,v=g.texture.baseTexture;a!==!!g.native&&(a=!!g.native,l=a?Gi.LINES:Gi.TRIANGLES,o=null,s=p,t++),o!==v&&(o=v,v._batchEnabled!==t&&(s===p&&(t++,s=0,n.size>0&&(n=Jc.pop(),n||(n=new wv,n.texArray=new Av),this.drawCalls.push(n)),n.start=u,n.size=0,n.texArray.count=0,n.type=l),v.touched=1,v._batchEnabled=t,v._batchLocation=s,v.wrapMode=Oa.REPEAT,n.texArray.elements[n.texArray.count++]=v,s++)),n.size+=f.size,u+=f.size,h=v._batchLocation,this.addColors(e,g.color,g.alpha,f.attribSize,f.attribStart),this.addTextureIds(r,h,f.attribSize,f.attribStart)}re._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,r=this.colors,n=this.textureIds,s=new ArrayBuffer(t.length*3*4),o=new Float32Array(s),h=new Uint32Array(s);let a=0;for(let l=0;l<t.length/2;l++)o[a++]=t[l*2],o[a++]=t[l*2+1],o[a++]=e[l*2],o[a++]=e[l*2+1],h[a++]=r[l],o[a++]=n[l];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?wS.triangulate(t,this):Pg[t.type].triangulate(t,this)}processLine(t){kb(t,this);for(let e=0;e<t.holes.length;e++)kb(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const r=t[e];Pg[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let r=0;r<t.length/2;r++){const n=t[r*2],s=t[r*2+1];t[r*2]=e.a*n+e.c*s+e.tx,t[r*2+1]=e.b*n+e.d*s+e.ty}}addColors(t,e,r,n,s=0){const o=Ye.shared.setValue(e).toLittleEndianNumber(),h=Ye.shared.setValue(o).toPremultiplied(r);t.length=Math.max(t.length,s+n);for(let a=0;a<n;a++)t[s+a]=h}addTextureIds(t,e,r,n=0){t.length=Math.max(t.length,n+r);for(let s=0;s<r;s++)t[n+s]=e}addUvs(t,e,r,n,s,o=null){let h=0;const a=e.length,l=r.frame;for(;h<s;){let c=t[(n+h)*2],f=t[(n+h)*2+1];if(o){const p=o.a*c+o.c*f+o.tx;f=o.b*c+o.d*f+o.ty,c=p}h++,e.push(c/l.width,f/l.height)}const u=r.baseTexture;(l.width<u.width||l.height<u.height)&&this.adjustUvs(e,r,a,s)}adjustUvs(t,e,r,n){const s=e.baseTexture,o=1e-6,h=r+n*2,a=e.frame,l=a.width/s.width,u=a.height/s.height;let c=a.x/a.width,f=a.y/a.height,p=Math.floor(t[r]+o),g=Math.floor(t[r+1]+o);for(let v=r+2;v<h;v+=2)p=Math.min(p,Math.floor(t[v]+o)),g=Math.min(g,Math.floor(t[v+1]+o));c-=p,f-=g;for(let v=r;v<h;v+=2)t[v]=(t[v]+c)*l,t[v+1]=(t[v+1]+f)*u}};TS.BATCHABLE_SIZE=100;let VF=TS,AS=class CS{constructor(){this.color=16777215,this.alpha=1,this.texture=ve.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new CS;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=ve.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}},XF=class IS extends AS{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Ba.BUTT,this.join=pi.MITER,this.miterLimit=10}clone(){const t=new IS;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Ba.BUTT,this.join=pi.MITER,this.miterLimit=10}};const kg={},Wv=class Sd extends bn{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new AS,this._lineStyle=new XF,this._matrix=null,this._holeMode=!1,this.state=Ya.for2d(),this._geometry=t||new VF,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Ye(16777215),this.blendMode=Gt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Sd(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,r,n=.5,s=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:r,alignment:n,native:s}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:ve.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Ba.BUTT,join:pi.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Fl,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Fl,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],s=r[r.length-1];return(n!==t||s!==e)&&r.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,r,n){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),UF.curveTo(t,e,r,n,s),this}bezierCurveTo(t,e,r,n,s,o){return this._initCurve(),OF.curveTo(t,e,r,n,s,o,this.currentPath.points),this}arcTo(t,e,r,n,s){this._initCurve(t,e);const o=this.currentPath.points,h=Mb.curveTo(t,e,r,n,s,o);if(h){const{cx:a,cy:l,radius:u,startAngle:c,endAngle:f,anticlockwise:p}=h;this.arc(a,l,u,c,f,p)}return this}arc(t,e,r,n,s,o=!1){if(n===s)return this;if(!o&&s<=n?s+=kd:o&&n<=s&&(n+=kd),s-n===0)return this;const h=t+Math.cos(n)*r,a=e+Math.sin(n)*r,l=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const c=Math.abs(u[u.length-2]-h),f=Math.abs(u[u.length-1]-a);c<l&&f<l||u.push(h,a)}else this.moveTo(h,a),u=this.currentPath.points;return Mb.arc(h,a,t,e,r,n,s,o,u),this}beginFill(t=0,e){return this.beginTextureFill({texture:ve.WHITE,color:t,alpha:e})}normalizeColor(t){const e=Ye.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:ve.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,r,n){return this.drawShape(new le(t,e,r,n))}drawRoundedRect(t,e,r,n,s){return this.drawShape(new wT(t,e,r,n,s))}drawCircle(t,e,r){return this.drawShape(new mT(t,e,r))}drawEllipse(t,e,r,n){return this.drawShape(new vT(t,e,r,n))}drawPolygon(...t){let e,r=!0;const n=t[0];n.points?(r=n.closeStroke,e=n.points):Array.isArray(t[0])?e=t[0]:e=t;const s=new Fl(e);return s.closeStroke=r,this.drawShape(s),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===nn.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(let n=0;n<r;n++){const s=t.batches[n],o=s.style.color,h=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),a=new Float32Array(t.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),l=new Uint16Array(t.indicesUint16.buffer,s.start*2,s.size),u={vertexData:h,blendMode:e,indices:l,uvs:a,_batchRGB:Ye.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[n]=u}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,r=this.batches.length;e<r;e++){const n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}}_renderDirect(t){const e=this._resolveDirectShader(t),r=this._geometry,n=this.worldAlpha,s=e.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,Ye.shared.setValue(this._tintColor).premultiply(n).toArray(s.tint),t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(let h=0,a=o.length;h<a;h++)this._renderDrawCallDirect(t,r.drawCalls[h])}_renderDrawCallDirect(t,e){const{texArray:r,type:n,size:s,start:o}=e,h=r.count;for(let a=0;a<h;a++)t.texture.bind(r.elements[a],a);t.geometry.draw(n,s,o)}_resolveDirectShader(t){let e=this.shader;const r=this.pluginName;if(!e){if(!kg[r]){const{maxTextures:n}=t.plugins[r],s=new Int32Array(n);for(let a=0;a<n;a++)s[a]=a;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ze,default:ko.from({uSamplers:s},!0)},h=t.plugins[r]._shader.program;kg[r]=new Da(h,o)}e=kg[r]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:r,maxX:n,maxY:s}=t.bounds;this._bounds.addFrame(this.transform,e,r,n,s)}containsPoint(t){return this.worldTransform.applyInverse(t,Sd._TEMP_POINT),this._geometry.containsPoint(Sd._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=Ye.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,r=e.a,n=e.b,s=e.c,o=e.d,h=e.tx,a=e.ty,l=this._geometry.points,u=this.vertexData;let c=0;for(let f=0;f<l.length;f+=2){const p=l[f],g=l[f+1];u[c++]=r*p+s*g+h,u[c++]=o*g+n*p+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Wv.curves=Xl,Wv._TEMP_POINT=new Pe;let pf=Wv,GF=class{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}};const Fg=new Pe,Nb=new Fl,RS=class MS extends bn{constructor(t,e,r,n=Gi.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=r||Ya.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=It.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Gi.TRIANGLES&&e.length<MS.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,r=t._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const n=this.transform.worldTransform,s=n.a,o=n.b,h=n.c,a=n.d,l=n.tx,u=n.ty,c=this.vertexData;for(let f=0;f<c.length/2;f++){const p=e[f*2],g=e[f*2+1];c[f*2]=s*p+h*g+l,c[f*2+1]=o*p+a*g+u}if(this._roundPixels){const f=It.RESOLUTION;for(let p=0;p<c.length;++p)c[p]=Math.round(c[p]*f)/f}this.vertexDirty=r}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new GF(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Fg);const e=this.geometry.getBuffer("aVertexPosition").data,r=Nb.points,n=this.geometry.getIndex().data,s=n.length,o=this.drawMode===4?3:1;for(let h=0;h+2<s;h+=o){const a=n[h]*2,l=n[h+1]*2,u=n[h+2]*2;if(r[0]=e[a],r[1]=e[a+1],r[2]=e[l],r[3]=e[l+1],r[4]=e[u],r[5]=e[u+1],Nb.contains(Fg.x,Fg.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};RS.BATCHABLE_SIZE=100;let Hv=RS,PS=class extends wu{constructor(t,e,r){super();const n=new Nr(t),s=new Nr(e,!0),o=new Nr(r,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,$t.FLOAT).addAttribute("aTextureCoord",s,2,!1,$t.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}};var YF=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,$F=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;let zv=class extends Da{constructor(t,e){const r={uSampler:t,alpha:1,uTextureMatrix:Ze.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(r,e.uniforms),super(e.program||$s.from($F,YF),r),this._colorDirty=!1,this.uvMatrix=new LT(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new Ye(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;Ye.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}},WF=class extends Hv{constructor(t=ve.EMPTY,e,r,n,s){const o=new PS(e,r,n);o.getBuffer("aVertexPosition").static=!1;const h=new zv(t);super(o,h,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}};class Ob{constructor(t,e,r){this.geometry=new wu,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let s=t[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||$t.FLOAT,offset:s.offset},e[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new Nr(lP(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const h=this.dynamicProperties[o];h.offset=e,e+=h.size,this.dynamicStride+=h.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new Nr(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const h=this.staticProperties[o];h.offset=n,n+=h.size,this.staticStride+=h.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Nr(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const h=this.dynamicProperties[o];t.addAttribute(h.attributeName,this.dynamicBuffer,0,h.type===$t.UNSIGNED_BYTE,h.type,this.dynamicStride*4,h.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const h=this.staticProperties[o];t.addAttribute(h.attributeName,this.staticBuffer,0,h.type===$t.UNSIGNED_BYTE,h.type,this.staticStride*4,h.offset*4)}}uploadDynamic(t,e,r){for(let n=0;n<this.dynamicProperties.length;n++){const s=this.dynamicProperties[n];s.uploadFunction(t,e,r,s.type===$t.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,r){for(let n=0;n<this.staticProperties.length;n++){const s=this.staticProperties[n];s.uploadFunction(t,e,r,s.type===$t.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var HF=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,zF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class kS extends df{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Ze,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:$t.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Da.from(zF,HF,{}),this.state=Ya.for2d()}render(t){const e=t.children,r=t._maxSize,n=t._batchSize,s=this.renderer;let o=e.length;if(o===0)return;o>r&&!t.autoResize&&(o=r);let h=t._buffers;h||(h=t._buffers=this.generateBuffers(t));const a=e[0]._texture.baseTexture,l=a.alphaMode>0;this.state.blendMode=oT(t.blendMode,l),s.state.set(this.state);const u=s.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=Ye.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,l).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);let f=!1;for(let p=0,g=0;p<o;p+=n,g+=1){let v=o-p;v>n&&(v=n),g>=h.length&&h.push(this._generateOneMoreBuffer(t));const y=h[g];y.uploadDynamic(e,p,v);const x=t._bufferUpdateIDs[g]||0;f=f||y._updateID<x,f&&(y._updateID=t._updateID,y.uploadStatic(e,p,v)),s.geometry.bind(y.geometry),u.drawElements(u.TRIANGLES,v*6,u.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],r=t._maxSize,n=t._batchSize,s=t._properties;for(let o=0;o<r;o+=n)e.push(new Ob(this.properties,s,n));return e}_generateOneMoreBuffer(t){const e=t._batchSize,r=t._properties;return new Ob(this.properties,r,e)}uploadVertices(t,e,r,n,s,o){let h=0,a=0,l=0,u=0;for(let c=0;c<r;++c){const f=t[e+c],p=f._texture,g=f.scale.x,v=f.scale.y,y=p.trim,x=p.orig;y?(a=y.x-f.anchor.x*x.width,h=a+y.width,u=y.y-f.anchor.y*x.height,l=u+y.height):(h=x.width*(1-f.anchor.x),a=x.width*-f.anchor.x,l=x.height*(1-f.anchor.y),u=x.height*-f.anchor.y),n[o]=a*g,n[o+1]=u*v,n[o+s]=h*g,n[o+s+1]=u*v,n[o+s*2]=h*g,n[o+s*2+1]=l*v,n[o+s*3]=a*g,n[o+s*3+1]=l*v,o+=s*4}}uploadPosition(t,e,r,n,s,o){for(let h=0;h<r;h++){const a=t[e+h].position;n[o]=a.x,n[o+1]=a.y,n[o+s]=a.x,n[o+s+1]=a.y,n[o+s*2]=a.x,n[o+s*2+1]=a.y,n[o+s*3]=a.x,n[o+s*3+1]=a.y,o+=s*4}}uploadRotation(t,e,r,n,s,o){for(let h=0;h<r;h++){const a=t[e+h].rotation;n[o]=a,n[o+s]=a,n[o+s*2]=a,n[o+s*3]=a,o+=s*4}}uploadUvs(t,e,r,n,s,o){for(let h=0;h<r;++h){const a=t[e+h]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+s]=a.x1,n[o+s+1]=a.y1,n[o+s*2]=a.x2,n[o+s*2+1]=a.y2,n[o+s*3]=a.x3,n[o+s*3+1]=a.y3,o+=s*4):(n[o]=0,n[o+1]=0,n[o+s]=0,n[o+s+1]=0,n[o+s*2]=0,n[o+s*2+1]=0,n[o+s*3]=0,n[o+s*3+1]=0,o+=s*4)}}uploadTint(t,e,r,n,s,o){for(let h=0;h<r;++h){const a=t[e+h],l=Ye.shared.setValue(a._tintRGB).toPremultiplied(a.alpha,a.texture.baseTexture.alphaMode>0);n[o]=l,n[o+s]=l,n[o+s*2]=l,n[o+s*3]=l,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}kS.extension={name:"particle",type:At.RendererPlugin};Dt.add(kS);var mf=(i=>(i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",i))(mf||{});const td={willReadFrequently:!0},hs=class Vt{static get experimentalLetterSpacingSupported(){let t=Vt._experimentalLetterSpacingSupported;if(t!==void 0){const e=It.ADAPTER.getCanvasRenderingContext2D().prototype;t=Vt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,r,n,s,o,h,a,l){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=s,this.lineWidths=o,this.lineHeight=h,this.maxLineWidth=a,this.fontProperties=l}static measureText(t,e,r,n=Vt._canvas){r=r??e.wordWrap;const s=e.toFontString(),o=Vt.measureFont(s);o.fontSize===0&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);const h=n.getContext("2d",td);h.font=s;const a=(r?Vt.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),l=new Array(a.length);let u=0;for(let g=0;g<a.length;g++){const v=Vt._measureText(a[g],e.letterSpacing,h);l[g]=v,u=Math.max(u,v)}let c=u+e.strokeThickness;e.dropShadow&&(c+=e.dropShadowDistance);const f=e.lineHeight||o.fontSize+e.strokeThickness;let p=Math.max(f,o.fontSize+e.strokeThickness*2)+e.leading+(a.length-1)*(f+e.leading);return e.dropShadow&&(p+=e.dropShadowDistance),new Vt(t,e,c,p,a,l,f+e.leading,u,o)}static _measureText(t,e,r){let n=!1;Vt.experimentalLetterSpacingSupported&&(Vt.experimentalLetterSpacing?(r.letterSpacing=`${e}px`,r.textLetterSpacing=`${e}px`,n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let s=r.measureText(t).width;return s>0&&(n?s-=e:s+=(Vt.graphemeSegmenter(t).length-1)*e),s}static wordWrap(t,e,r=Vt._canvas){const n=r.getContext("2d",td);let s=0,o="",h="";const a=Object.create(null),{letterSpacing:l,whiteSpace:u}=e,c=Vt.collapseSpaces(u),f=Vt.collapseNewlines(u);let p=!c;const g=e.wordWrapWidth+l,v=Vt.tokenize(t);for(let y=0;y<v.length;y++){let x=v[y];if(Vt.isNewline(x)){if(!f){h+=Vt.addLine(o),p=!c,o="",s=0;continue}x=" "}if(c){const b=Vt.isBreakingSpace(x),E=Vt.isBreakingSpace(o[o.length-1]);if(b&&E)continue}const _=Vt.getFromCache(x,l,a,n);if(_>g)if(o!==""&&(h+=Vt.addLine(o),o="",s=0),Vt.canBreakWords(x,e.breakWords)){const b=Vt.wordWrapSplit(x);for(let E=0;E<b.length;E++){let T=b[E],S=T,C=1;for(;b[E+C];){const P=b[E+C];if(!Vt.canBreakChars(S,P,x,E,e.breakWords))T+=P;else break;S=P,C++}E+=C-1;const M=Vt.getFromCache(T,l,a,n);M+s>g&&(h+=Vt.addLine(o),p=!1,o="",s=0),o+=T,s+=M}}else{o.length>0&&(h+=Vt.addLine(o),o="",s=0);const b=y===v.length-1;h+=Vt.addLine(x,!b),p=!1,o="",s=0}else _+s>g&&(p=!1,h+=Vt.addLine(o),o="",s=0),(o.length>0||!Vt.isBreakingSpace(x)||p)&&(o+=x,s+=_)}return h+=Vt.addLine(o,!1),h}static addLine(t,e=!0){return t=Vt.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,r,n){let s=r[t];return typeof s!="number"&&(s=Vt._measureText(t,e,n)+e,r[t]=s),s}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const r=t[e];if(!Vt.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:Vt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:Vt._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let r="";if(typeof t!="string")return e;for(let n=0;n<t.length;n++){const s=t[n],o=t[n+1];if(Vt.isBreakingSpace(s,o)||Vt.isNewline(s)){r!==""&&(e.push(r),r=""),e.push(s);continue}r+=s}return r!==""&&e.push(r),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,r,n,s){return!0}static wordWrapSplit(t){return Vt.graphemeSegmenter(t)}static measureFont(t){if(Vt._fonts[t])return Vt._fonts[t];const e={ascent:0,descent:0,fontSize:0},r=Vt._canvas,n=Vt._context;n.font=t;const s=Vt.METRICS_STRING+Vt.BASELINE_SYMBOL,o=Math.ceil(n.measureText(s).width);let h=Math.ceil(n.measureText(Vt.BASELINE_SYMBOL).width);const a=Math.ceil(Vt.HEIGHT_MULTIPLIER*h);if(h=h*Vt.BASELINE_MULTIPLIER|0,o===0||a===0)return Vt._fonts[t]=e,e;r.width=o,r.height=a,n.fillStyle="#f00",n.fillRect(0,0,o,a),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,h);const l=n.getImageData(0,0,o,a).data,u=l.length,c=o*4;let f=0,p=0,g=!1;for(f=0;f<h;++f){for(let v=0;v<c;v+=4)if(l[p+v]!==255){g=!0;break}if(!g)p+=c;else break}for(e.ascent=h-f,p=u-c,g=!1,f=a;f>h;--f){for(let v=0;v<c;v+=4)if(l[p+v]!==255){g=!0;break}if(!g)p-=c;else break}return e.descent=f-h,e.fontSize=e.ascent+e.descent,Vt._fonts[t]=e,e}static clearMetrics(t=""){t?delete Vt._fonts[t]:Vt._fonts={}}static get _canvas(){var t;if(!Vt.__canvas){let e;try{const r=new OffscreenCanvas(0,0);if((t=r.getContext("2d",td))!=null&&t.measureText)return Vt.__canvas=r,r;e=It.ADAPTER.createCanvas()}catch{e=It.ADAPTER.createCanvas()}e.width=e.height=10,Vt.__canvas=e}return Vt.__canvas}static get _context(){return Vt.__context||(Vt.__context=Vt._canvas.getContext("2d",td)),Vt.__context}};hs.METRICS_STRING="|q",hs.BASELINE_SYMBOL="M",hs.BASELINE_MULTIPLIER=1.4,hs.HEIGHT_MULTIPLIER=2,hs.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const i=new Intl.Segmenter;return t=>[...i.segment(t)].map(e=>e.segment)}return i=>[...i]})(),hs.experimentalLetterSpacing=!1,hs._fonts={},hs._newlines=[10,13],hs._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Ra=hs;const jF=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],FS=class Zh{constructor(t){this.styleID=0,this.reset(),Ng(this,t,t)}clone(){const t={};return Ng(t,this,Zh.defaultStyle),new Zh(t)}reset(){Ng(this,Zh.defaultStyle,Zh.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Bg(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Bg(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){qF(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Bg(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let r=e.length-1;r>=0;r--){let n=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!jF.includes(n)&&(n=`"${n}"`),e[r]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};FS.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:mf.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let La=FS;function Bg(i){const t=Ye.shared,e=r=>{const n=t.setValue(r);return n.alpha===1?n.toHex():n.toRgbaString()};return Array.isArray(i)?i.map(e):e(i)}function qF(i,t){if(!Array.isArray(i)||!Array.isArray(t)||i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(i[e]!==t[e])return!1;return!0}function Ng(i,t,e){for(const r in e)Array.isArray(t[r])?i[r]=t[r].slice():i[r]=t[r]}const KF={texture:!0,children:!1,baseTexture:!0},BS=class jv extends bu{constructor(t,e,r){let n=!1;r||(r=It.ADAPTER.createCanvas(),n=!0),r.width=3,r.height=3;const s=ve.from(r);s.orig=new le,s.trim=new le,super(s),this._ownCanvas=n,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=jv.defaultResolution??It.RESOLUTION,this._autoResolution=jv.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return Ra.experimentalLetterSpacing}static set experimentalLetterSpacing(t){pe("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Ra.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const r=this.context,n=Ra.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=n.width,o=n.height,h=n.lines,a=n.lineHeight,l=n.lineWidths,u=n.maxLineWidth,c=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+e.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;let f,p;const g=e.dropShadow?2:1;for(let v=0;v<g;++v){const y=e.dropShadow&&v===0,x=y?Math.ceil(Math.max(1,o)+e.padding*2):0,_=x*this._resolution;if(y){r.fillStyle="black",r.strokeStyle="black";const E=e.dropShadowColor,T=e.dropShadowBlur*this._resolution,S=e.dropShadowDistance*this._resolution;r.shadowColor=Ye.shared.setValue(E).setAlpha(e.dropShadowAlpha).toRgbaString(),r.shadowBlur=T,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*S,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*S+_}else r.fillStyle=this._generateFillStyle(e,h,n),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let b=(a-c.fontSize)/2;a-c.fontSize<0&&(b=0);for(let E=0;E<h.length;E++)f=e.strokeThickness/2,p=e.strokeThickness/2+E*a+c.ascent+b,e.align==="right"?f+=u-l[E]:e.align==="center"&&(f+=(u-l[E])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(h[E],f+e.padding,p+e.padding-x,!0),e.fill&&this.drawLetterSpacing(h[E],f+e.padding,p+e.padding-x)}this.updateTexture()}drawLetterSpacing(t,e,r,n=!1){const s=this._style.letterSpacing;let o=!1;if(Ra.experimentalLetterSpacingSupported&&(Ra.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r);return}let h=e;const a=Ra.graphemeSegmenter(t);let l=this.context.measureText(t).width,u=0;for(let c=0;c<a.length;++c){const f=a[c];n?this.context.strokeText(f,h,r):this.context.fillText(f,h,r);let p="";for(let g=c+1;g<a.length;++g)p+=a[g];u=this.context.measureText(p).width,h+=l-u+s,l=u}}updateTexture(){const t=this.canvas;if(this._style.trim){const o=dP(t);o.data&&(t.width=o.width,t.height=o.height,this.context.putImageData(o.data,0,0))}const e=this._texture,r=this._style,n=r.trim?0:r.padding,s=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-n*2,e.orig.height=e._frame.height-n*2,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,r){const n=t.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let s;const o=t.dropShadow?t.dropShadowDistance:0,h=t.padding||0,a=this.canvas.width/this._resolution-o-h*2,l=this.canvas.height/this._resolution-o-h*2,u=n.slice(),c=t.fillGradientStops.slice();if(!c.length){const f=u.length+1;for(let p=1;p<f;++p)c.push(p/f)}if(u.unshift(n[0]),c.unshift(0),u.push(n[n.length-1]),c.push(1),t.fillGradientType===mf.LINEAR_VERTICAL){s=this.context.createLinearGradient(a/2,h,a/2,l+h);const f=r.fontProperties.fontSize+t.strokeThickness;for(let p=0;p<e.length;p++){const g=r.lineHeight*(p-1)+f,v=r.lineHeight*p;let y=v;p>0&&g>v&&(y=(v+g)/2);const x=v+f,_=r.lineHeight*(p+1);let b=x;p+1<e.length&&_<x&&(b=(x+_)/2);const E=(b-y)/l;for(let T=0;T<u.length;T++){let S=0;typeof c[T]=="number"?S=c[T]:S=T/u.length;let C=Math.min(1,Math.max(0,y/l+S*E));C=Number(C.toFixed(5)),s.addColorStop(C,u[T])}}}else{s=this.context.createLinearGradient(h,l/2,a+h,l/2);const f=u.length+1;let p=1;for(let g=0;g<u.length;g++){let v;typeof c[g]=="number"?v=c[g]:v=p/f,s.addColorStop(v,u[g]),p++}}return s}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},KF,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Fa(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Fa(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof La?this._style=t:this._style=new La(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};BS.defaultAutoResolution=!0;let Ly=BS;class ZF{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function QF(i,t){var r;let e=!1;if((r=i==null?void 0:i._textures)!=null&&r.length){for(let n=0;n<i._textures.length;n++)if(i._textures[n]instanceof ve){const s=i._textures[n].baseTexture;t.includes(s)||(t.push(s),e=!0)}}return e}function JF(i,t){if(i.baseTexture instanceof re){const e=i.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function tB(i,t){if(i._texture&&i._texture instanceof ve){const e=i._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function eB(i,t){return t instanceof Ly?(t.updateText(!0),!0):!1}function rB(i,t){if(t instanceof La){const e=t.toFontString();return Ra.measureFont(e),!0}return!1}function nB(i,t){if(i instanceof Ly){t.includes(i.style)||t.push(i.style),t.includes(i)||t.push(i);const e=i._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function iB(i,t){return i instanceof La?(t.includes(i)||t.push(i),!0):!1}const NS=class OS{constructor(t){this.limiter=new ZF(OS.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(nB),this.registerFindHook(iB),this.registerFindHook(QF),this.registerFindHook(JF),this.registerFindHook(tB),this.registerUploadHook(eB),this.registerUploadHook(rB)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,Qn.system.addOnce(this.tick,this,Uo.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Qn.system.addOnce(this.tick,this,Uo.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,r=t.length;e<r;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof bn)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&Qn.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};NS.uploadsPerFrame=4;let qv=NS;Object.defineProperties(It,{UPLOADS_PER_FRAME:{get(){return qv.uploadsPerFrame},set(i){pe("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),qv.uploadsPerFrame=i}}});function DS(i,t){return t instanceof re?(t._glTextures[i.CONTEXT_UID]||i.texture.bind(t),!0):!1}function sB(i,t){if(!(t instanceof pf))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:r}=e;for(let n=0;n<r.length;n++){const{texture:s}=r[n].style;s&&DS(i,s.baseTexture)}return e.batchable||i.geometry.bind(e,t._resolveDirectShader(i)),!0}function aB(i,t){return i instanceof pf?(t.push(i),!0):!1}class LS extends qv{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(aB),this.registerUploadHook(DS),this.registerUploadHook(sB)}}LS.extension={name:"prepare",type:At.RendererSystem};Dt.add(LS);var oB=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,lB=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,hB=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Db=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,uB=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const ed=new Ze;class US extends df{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new BT,this.state=Ya.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=Da.from(Db,uB,e),this.shader=t.context.webGLVersion>1?Da.from(lB,oB,e):Da.from(Db,hB,e)}render(t){const e=this.renderer,r=this.quad;let n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;n=r.uvs,n[0]=n[6]=-s,n[1]=n[3]=-o,n[2]=n[4]=1-s,n[5]=n[7]=1-o,r.invalidate();const h=t._texture,a=h.baseTexture,l=a.alphaMode>0,u=t.tileTransform.localTransform,c=t.uvMatrix;let f=a.isPowerOfTwo&&h.frame.width===a.width&&h.frame.height===a.height;f&&(a._glTextures[e.CONTEXT_UID]?f=a.wrapMode!==Oa.CLAMP:a.wrapMode===Oa.CLAMP&&(a.wrapMode=Oa.REPEAT));const p=f?this.simpleShader:this.shader,g=h.width,v=h.height,y=t._width,x=t._height;ed.set(u.a*g/y,u.b*g/x,u.c*v/y,u.d*v/x,u.tx/y,u.ty/x),ed.invert(),f?ed.prepend(c.mapCoord):(p.uniforms.uMapCoord=c.mapCoord.toArray(!0),p.uniforms.uClampFrame=c.uClampFrame,p.uniforms.uClampOffset=c.uClampOffset),p.uniforms.uTransform=ed.toArray(!0),p.uniforms.uColor=Ye.shared.setValue(t.tint).premultiply(t.worldAlpha,l).toArray(p.uniforms.uColor),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=h,e.shader.bind(p),e.geometry.bind(r),this.state.blendMode=oT(t.blendMode,l),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}US.extension={name:"tilingSprite",type:At.RendererPlugin};Dt.add(US);const VS=class Qh{constructor(t,e,r){this.linkedSheets=[],(t instanceof re||t instanceof ve)&&(t={texture:t,data:e,resolutionFilename:r});const{texture:n,data:s,resolutionFilename:o=null,cachePrefix:h=""}=t;this.cachePrefix=h,this._texture=n instanceof ve?n:null,this.baseTexture=n instanceof re?n:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const a=this.baseTexture.resource;this.resolution=this._updateResolution(o||(a?a.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let r=zs(t,null);return r===null&&(r=typeof e=="number"?e:parseFloat(e??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Qh.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const r=Qh.BATCH_SIZE;for(;e-t<r&&e<this._frameKeys.length;){const n=this._frameKeys[e],s=this._frames[n],o=s.frame;if(o){let h=null,a=null;const l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new le(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?h=new le(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):h=new le(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(a=new le(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new ve(this.baseTexture,h,u,a,s.rotated?2:0,s.anchor,s.borders),ve.addToCache(this.textures[n],this.cachePrefix+n.toString())}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let r=0;r<t[e].length;r++){const n=t[e][r];this.animations[e].push(this.textures[n])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Qh.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Qh.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};VS.BATCH_SIZE=1e3;let Lb=VS;const cB=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function XS(i,t,e){const r={};if(i.forEach(n=>{r[n]=t}),Object.keys(t.textures).forEach(n=>{r[`${t.cachePrefix}${n}`]=t.textures[n]}),!e){const n=qe.dirname(i[0]);t.linkedSheets.forEach((s,o)=>{Object.assign(r,XS([`${n}/${t.data.meta.related_multi_packs[o]}`],s,!0))})}return r}const dB={extension:At.Asset,cache:{test:i=>i instanceof Lb,getCacheableAssets:(i,t)=>XS(i,t,!1)},resolver:{test:i=>{const t=i.split("?")[0].split("."),e=t.pop(),r=t.pop();return e==="json"&&cB.includes(r)},parse:i=>{var e;const t=i.split(".");return{resolution:parseFloat(((e=It.RETINA_PREFIX.exec(i))==null?void 0:e[1])??"1"),format:t[t.length-2],src:i}}},loader:{name:"spritesheetLoader",extension:{type:At.LoadParser,priority:si.Normal},async testParse(i,t){return qe.extname(t.src).toLowerCase()===".json"&&!!i.frames},async parse(i,t,e){var u,c;const{texture:r,imageFilename:n,cachePrefix:s}=(t==null?void 0:t.data)??{};let o=qe.dirname(t.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let h;if(r&&r.baseTexture)h=r;else{const f=Gv(o+(n??i.meta.image),t.src);h=(await e.load([f]))[f]}const a=new Lb({texture:h.baseTexture,data:i,resolutionFilename:t.src,cachePrefix:s});await a.parse();const l=(u=i==null?void 0:i.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(l)){const f=[];for(const g of l){if(typeof g!="string")continue;let v=o+g;(c=t.data)!=null&&c.ignoreMultiPack||(v=Gv(v,t.src),f.push(e.load({src:v,data:{ignoreMultiPack:!0}})))}const p=await Promise.all(f);a.linkedSheets=p,p.forEach(g=>{g.linkedSheets=[a].concat(a.linkedSheets.filter(v=>v!==g))})}return a},unload(i){i.destroy(!0)}}};Dt.add(dB);class Gd{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Ad{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in e){const o=e[s].match(/^[a-z]+/gm)[0],h=e[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(const l in h){const u=h[l].split("="),c=u[0],f=u[1].replace(/"/gm,""),p=parseFloat(f),g=isNaN(p)?f:p;a[c]=g}r[o].push(a)}const n=new Gd;return r.info.forEach(s=>n.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>n.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>n.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>n.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>n.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>n.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),n}}class Kv{static test(t){const e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new Gd,r=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),h=t.getElementsByTagName("kerning"),a=t.getElementsByTagName("distanceField");for(let l=0;l<r.length;l++)e.info.push({face:r[l].getAttribute("face"),size:parseInt(r[l].getAttribute("size"),10)});for(let l=0;l<n.length;l++)e.common.push({lineHeight:parseInt(n[l].getAttribute("lineHeight"),10)});for(let l=0;l<s.length;l++)e.page.push({id:parseInt(s[l].getAttribute("id"),10)||0,file:s[l].getAttribute("file")});for(let l=0;l<o.length;l++){const u=o[l];e.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(let l=0;l<h.length;l++)e.kerning.push({first:parseInt(h[l].getAttribute("first"),10),second:parseInt(h[l].getAttribute("second"),10),amount:parseInt(h[l].getAttribute("amount"),10)});for(let l=0;l<a.length;l++)e.distanceField.push({fieldType:a[l].getAttribute("fieldType"),distanceRange:parseInt(a[l].getAttribute("distanceRange"),10)});return e}}class Zv{static test(t){return typeof t=="string"&&t.includes("<font>")?Kv.test(It.ADAPTER.parseXML(t)):!1}static parse(t){return Kv.parse(It.ADAPTER.parseXML(t))}}const Og=[Ad,Kv,Zv];function fB(i){for(let t=0;t<Og.length;t++)if(Og[t].test(i))return Og[t];return null}function pB(i,t,e,r,n,s){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let h;const a=e.dropShadow?e.dropShadowDistance:0,l=e.padding||0,u=i.width/r-a-l*2,c=i.height/r-a-l*2,f=o.slice(),p=e.fillGradientStops.slice();if(!p.length){const g=f.length+1;for(let v=1;v<g;++v)p.push(v/g)}if(f.unshift(o[0]),p.unshift(0),f.push(o[o.length-1]),p.push(1),e.fillGradientType===mf.LINEAR_VERTICAL){h=t.createLinearGradient(u/2,l,u/2,c+l);let g=0;const v=(s.fontProperties.fontSize+e.strokeThickness)/c;for(let y=0;y<n.length;y++){const x=s.lineHeight*y;for(let _=0;_<f.length;_++){let b=0;typeof p[_]=="number"?b=p[_]:b=_/f.length;const E=x/c+b*v;let T=Math.max(g,E);T=Math.min(T,1),h.addColorStop(T,f[_]),g=T}}}else{h=t.createLinearGradient(l,c/2,u+l,c/2);const g=f.length+1;let v=1;for(let y=0;y<f.length;y++){let x;typeof p[y]=="number"?x=p[y]:x=v/g,h.addColorStop(x,f[y]),v++}}return h}function mB(i,t,e,r,n,s,o){const h=e.text,a=e.fontProperties;t.translate(r,n),t.scale(s,s);const l=o.strokeThickness/2,u=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=pB(i,t,o,s,[h],e),t.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,f=o.dropShadowBlur*s,p=o.dropShadowDistance*s;t.shadowColor=Ye.shared.setValue(c).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=f,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(h,l,u+e.lineHeight-a.descent),o.fill&&t.fillText(h,l,u+e.lineHeight-a.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Cd(i){return i.codePointAt?i.codePointAt(0):i.charCodeAt(0)}function GS(i){return Array.from?Array.from(i):i.split("")}function gB(i){typeof i=="string"&&(i=[i]);const t=[];for(let e=0,r=i.length;e<r;e++){const n=i[e];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let h=s,a=o;h<=a;h++)t.push(String.fromCharCode(h))}else t.push(...GS(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const ba=class us{constructor(t,e,r){var u;const[n]=t.info,[s]=t.common,[o]=t.page,[h]=t.distanceField,a=zs(o.file),l={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/a,this.chars={},this.pageTextures=l;for(let c=0;c<t.page.length;c++){const{id:f,file:p}=t.page[c];l[f]=e instanceof Array?e[c]:e[p],h!=null&&h.fieldType&&h.fieldType!=="none"&&(l[f].baseTexture.alphaMode=ji.NO_PREMULTIPLIED_ALPHA,l[f].baseTexture.mipmap=$i.OFF)}for(let c=0;c<t.char.length;c++){const{id:f,page:p}=t.char[c];let{x:g,y:v,width:y,height:x,xoffset:_,yoffset:b,xadvance:E}=t.char[c];g/=a,v/=a,y/=a,x/=a,_/=a,b/=a,E/=a;const T=new le(g+l[p].frame.x/a,v+l[p].frame.y/a,y,x);this.chars[f]={xOffset:_,yOffset:b,xAdvance:E,kerning:{},texture:new ve(l[p].baseTexture,T),page:p}}for(let c=0;c<t.kerning.length;c++){let{first:f,second:p,amount:g}=t.kerning[c];f/=a,p/=a,g/=a,this.chars[p]&&(this.chars[p].kerning[f]=g)}this.distanceFieldRange=h==null?void 0:h.distanceRange,this.distanceFieldType=((u=h==null?void 0:h.fieldType)==null?void 0:u.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,r){let n;if(t instanceof Gd)n=t;else{const o=fB(t);if(!o)throw new Error("Unrecognized data format for font.");n=o.parse(t)}e instanceof ve&&(e=[e]);const s=new us(n,e,r);return us.available[s.font]=s,s}static uninstall(t){const e=us.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete us.available[t]}static from(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:s,resolution:o,textureWidth:h,textureHeight:a,...l}=Object.assign({},us.defaultOptions,r),u=gB(n),c=e instanceof La?e:new La(e),f=h,p=new Gd;p.info[0]={face:c.fontFamily,size:c.fontSize},p.common[0]={lineHeight:c.fontSize};let g=0,v=0,y,x,_,b=0;const E=[];for(let S=0;S<u.length;S++){y||(y=It.ADAPTER.createCanvas(),y.width=h,y.height=a,x=y.getContext("2d"),_=new re(y,{resolution:o,...l}),E.push(new ve(_)),p.page.push({id:E.length-1,file:""}));const C=u[S],M=Ra.measureText(C,c,!1,y),P=M.width,F=Math.ceil(M.height),V=Math.ceil((c.fontStyle==="italic"?2:1)*P);if(v>=a-F*o){if(v===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${C}')`);--S,y=null,x=null,_=null,v=0,g=0,b=0;continue}if(b=Math.max(F+M.fontProperties.descent,b),V*o+g>=f){if(g===0)throw new Error(`[BitmapFont] textureWidth ${h}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${C}')`);--S,v+=b*o,v=Math.ceil(v),g=0,b=0;continue}mB(y,x,M,g,v,o,c);const O=Cd(M.text);p.char.push({id:O,page:E.length-1,x:g/o,y:v/o,width:V,height:F,xoffset:0,yoffset:0,xadvance:P-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),g+=(V+2*s)*o,g=Math.ceil(g)}if(!(r!=null&&r.skipKerning))for(let S=0,C=u.length;S<C;S++){const M=u[S];for(let P=0;P<C;P++){const F=u[P],V=x.measureText(M).width,O=x.measureText(F).width,U=x.measureText(M+F).width-(V+O);U&&p.kerning.push({first:Cd(M),second:Cd(F),amount:U})}}const T=new us(p,E,!0);return us.available[t]!==void 0&&us.uninstall(t),us.available[t]=T,T}};ba.ALPHA=[["a","z"],["A","Z"]," "],ba.NUMERIC=[["0","9"]],ba.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ba.ASCII=[[" ","~"]],ba.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ba.ALPHANUMERIC},ba.available={};let Ea=ba;var vB=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,yB=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const Ub=[],Vb=[],Xb=[],xB=class YS extends bn{constructor(t,e={}){super();const{align:r,tint:n,maxWidth:s,letterSpacing:o,fontName:h,fontSize:a}=Object.assign({},YS.styleDefaults,e);if(!Ea.available[h])throw new Error(`Missing BitmapFont "${h}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new Ye(n),this._font=void 0,this._fontName=h,this._fontSize=a,this.text=t,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Co(()=>{this.dirty=!0},this,0,0),this._roundPixels=It.ROUND_PIXELS,this.dirty=!0,this._resolution=It.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var V;const t=Ea.available[this._fontName],e=this.fontSize,r=e/t.size,n=new Pe,s=[],o=[],h=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=GS(a),u=this._maxWidth*t.size/e,c=t.distanceFieldType==="none"?Ub:Vb;let f=null,p=0,g=0,v=0,y=-1,x=0,_=0,b=0,E=0;for(let O=0;O<l.length;O++){const U=l[O],H=Cd(U);if(/(?:\s)/.test(U)&&(y=O,x=p,E++),U==="\r"||U===`
`){o.push(p),h.push(-1),g=Math.max(g,p),++v,++_,n.x=0,n.y+=t.lineHeight,f=null,E=0;continue}const W=t.chars[H];if(!W)continue;f&&W.kerning[f]&&(n.x+=W.kerning[f]);const B=Xb.pop()||{texture:ve.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Pe};B.texture=W.texture,B.line=v,B.charCode=H,B.position.x=Math.round(n.x+W.xOffset+this._letterSpacing/2),B.position.y=Math.round(n.y+W.yOffset),B.prevSpaces=E,s.push(B),p=B.position.x+Math.max(W.xAdvance-W.xOffset,W.texture.orig.width),n.x+=W.xAdvance+this._letterSpacing,b=Math.max(b,W.yOffset+W.texture.height),f=H,y!==-1&&u>0&&n.x>u&&(++_,kl(s,1+y-_,1+O-y),O=y,y=-1,o.push(x),h.push(s.length>0?s[s.length-1].prevSpaces:0),g=Math.max(g,x),v++,n.x=0,n.y+=t.lineHeight,f=null,E=0)}const T=l[l.length-1];T!=="\r"&&T!==`
`&&(/(?:\s)/.test(T)&&(p=x),o.push(p),g=Math.max(g,p),h.push(-1));const S=[];for(let O=0;O<=v;O++){let U=0;this._align==="right"?U=g-o[O]:this._align==="center"?U=(g-o[O])/2:this._align==="justify"&&(U=h[O]<0?0:(g-o[O])/h[O]),S.push(U)}const C=s.length,M={},P=[],F=this._activePagesMeshData;c.push(...F);for(let O=0;O<C;O++){const U=s[O].texture,H=U.baseTexture.uid;if(!M[H]){let W=c.pop();if(!W){const L=new PS;let N,Y;t.distanceFieldType==="none"?(N=new zv(ve.EMPTY),Y=Gt.NORMAL):(N=new zv(ve.EMPTY,{program:$s.from(yB,vB),uniforms:{uFWidth:0}}),Y=Gt.NORMAL_NPM);const D=new Hv(L,N);D.blendMode=Y,W={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:D,vertices:null,uvs:null,indices:null}}W.index=0,W.indexCount=0,W.vertexCount=0,W.uvsCount=0,W.total=0;const{_textureCache:B}=this;B[H]=B[H]||new ve(U.baseTexture),W.mesh.texture=B[H],W.mesh.tint=this._tintColor.value,P.push(W),M[H]=W}M[H].total++}for(let O=0;O<F.length;O++)P.includes(F[O])||this.removeChild(F[O].mesh);for(let O=0;O<P.length;O++)P[O].mesh.parent!==this&&this.addChild(P[O].mesh);this._activePagesMeshData=P;for(const O in M){const U=M[O],H=U.total;if(!(((V=U.indices)==null?void 0:V.length)>6*H)||U.vertices.length<Hv.BATCHABLE_SIZE*2)U.vertices=new Float32Array(4*2*H),U.uvs=new Float32Array(4*2*H),U.indices=new Uint16Array(6*H);else{const W=U.total,B=U.vertices;for(let L=W*4*2;L<B.length;L++)B[L]=0}U.mesh.size=6*H}for(let O=0;O<C;O++){const U=s[O];let H=U.position.x+S[U.line]*(this._align==="justify"?U.prevSpaces:1);this._roundPixels&&(H=Math.round(H));const W=H*r,B=U.position.y*r,L=U.texture,N=M[L.baseTexture.uid],Y=L.frame,D=L._uvs,k=N.index++;N.indices[k*6+0]=0+k*4,N.indices[k*6+1]=1+k*4,N.indices[k*6+2]=2+k*4,N.indices[k*6+3]=0+k*4,N.indices[k*6+4]=2+k*4,N.indices[k*6+5]=3+k*4,N.vertices[k*8+0]=W,N.vertices[k*8+1]=B,N.vertices[k*8+2]=W+Y.width*r,N.vertices[k*8+3]=B,N.vertices[k*8+4]=W+Y.width*r,N.vertices[k*8+5]=B+Y.height*r,N.vertices[k*8+6]=W,N.vertices[k*8+7]=B+Y.height*r,N.uvs[k*8+0]=D.x0,N.uvs[k*8+1]=D.y0,N.uvs[k*8+2]=D.x1,N.uvs[k*8+3]=D.y1,N.uvs[k*8+4]=D.x2,N.uvs[k*8+5]=D.y2,N.uvs[k*8+6]=D.x3,N.uvs[k*8+7]=D.y3}this._textWidth=g*r,this._textHeight=(n.y+t.lineHeight)*r;for(const O in M){const U=M[O];if(this.anchor.x!==0||this.anchor.y!==0){let L=0;const N=this._textWidth*this.anchor.x,Y=this._textHeight*this.anchor.y;for(let D=0;D<U.total;D++)U.vertices[L++]-=N,U.vertices[L++]-=Y,U.vertices[L++]-=N,U.vertices[L++]-=Y,U.vertices[L++]-=N,U.vertices[L++]-=Y,U.vertices[L++]-=N,U.vertices[L++]-=Y}this._maxLineHeight=b*r;const H=U.mesh.geometry.getBuffer("aVertexPosition"),W=U.mesh.geometry.getBuffer("aTextureCoord"),B=U.mesh.geometry.getIndex();H.data=U.vertices,W.data=U.uvs,B.data=U.indices,H.update(),W.update(),B.update()}for(let O=0;O<s.length;O++)Xb.push(s[O]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:r,size:n}=Ea.available[this._fontName];if(r!=="none"){const{a:s,b:o,c:h,d:a}=this.worldTransform,l=Math.sqrt(s*s+o*o),u=Math.sqrt(h*h+a*a),c=(Math.abs(l)+Math.abs(u))/2,f=this.fontSize/n,p=t._view.resolution;for(const g of this._activePagesMeshData)g.mesh.shader.uniforms.uFWidth=c*e*f*p}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=Ea.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!Ea.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??Ea.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,r=Ea.available[this._fontName].distanceFieldType==="none"?Ub:Vb;r.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],r.filter(n=>e[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=ve.EMPTY});for(const n in e)e[n].destroy(),delete e[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};xB.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const wB=[".xml",".fnt"],_B={extension:{type:At.LoadParser,priority:si.Normal},name:"loadBitmapFont",test(i){return wB.includes(qe.extname(i).toLowerCase())},async testParse(i){return Ad.test(i)||Zv.test(i)},async parse(i,t,e){const r=Ad.test(i)?Ad.parse(i):Zv.parse(i),{src:n}=t,{page:s}=r,o=[];for(let l=0;l<s.length;++l){const u=s[l].file;let c=qe.join(qe.dirname(n),u);c=Gv(c,n),o.push(c)}const h=await e.load(o),a=o.map(l=>h[l]);return Ea.install(r,a,!0)},async load(i,t){return(await It.ADAPTER.fetch(i)).text()},unload(i){i.destroy()}};Dt.add(_B);const Qv=class Sl extends La{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new Sl(Object.keys(Sl.defaultOptions).reduce((e,r)=>({...e,[r]:t[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete Sl.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:r}=Sl;if(r[t]){const n=r[t];return this._fonts.push(n),n.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return It.ADAPTER.fetch(t).then(n=>n.blob()).then(async n=>new Promise((s,o)=>{const h=URL.createObjectURL(n),a=new FileReader;a.onload=()=>s([h,a.result]),a.onerror=o,a.readAsDataURL(n)})).then(async([n,s])=>{const o=Object.assign({family:qe.basename(t,qe.extname(t)),weight:"normal",style:"normal",display:"auto",src:n,dataSrc:s,refs:1,originalUrl:t,fontFace:null},e);r[t]=o,this._fonts.push(o),this.styleID++;const h=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=h,await h.load(),document.fonts.add(h),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(r=>!this._overrides.includes(r));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(r=>this._overrides.includes(r));e.length>0&&(this._overrides=this._overrides.filter(r=>!e.includes(r)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style};
                font-display: ${e.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=yd(t)),typeof t=="number"?aP(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const s=`${r}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${s} ${t}`}reset(){Object.assign(this,Sl.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=It.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Qv.availableFonts={},Qv.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let Dg=Qv;const rd=class Al extends bu{constructor(t="",e={}){super(ve.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const r=new Image,n=ve.from(r,{scaleMode:It.SCALE_MODE,resourceOptions:{autoLoad:!1}});n.orig=new le,n.trim=new le,this.texture=n;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",h=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject"),l=document.createElementNS(o,"div"),u=document.createElementNS(o,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",h.appendChild(a),this.maxWidth=Al.defaultMaxWidth,this.maxHeight=Al.defaultMaxHeight,this._domElement=l,this._styleElement=u,this._svgRoot=h,this._foreignObject=a,this._foreignObject.appendChild(u),this._foreignObject.appendChild(l),this._image=r,this._loadImage=new Image,this._autoResolution=Al.defaultAutoResolution,this._resolution=Al.defaultResolution??It.RESOLUTION,this.text=t,this.style=e}measureText(t){var u,c;const{text:e,style:r,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:r.toCSS(n)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:h}=s;(o>this.maxWidth||h>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const a=Math.min(this.maxWidth,Math.ceil(o)),l=Math.min(this.maxHeight,Math.ceil(h));return this._svgRoot.setAttribute("width",a.toString()),this._svgRoot.setAttribute("height",l.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:(u=this._style)==null?void 0:u.toCSS(n)}),this._styleElement.textContent=(c=this._style)==null?void 0:c.toGlobalCSS()),{width:a+r.padding*2,height:l+r.padding*2}}async updateText(t=!0){const{style:e,_image:r,_loadImage:n}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:s,height:o}=this.measureText();r.width=n.width=Math.ceil(Math.max(1,s)),r.height=n.height=Math.ceil(Math.max(1,o)),this._updateID++;const h=this._updateID;await new Promise(a=>{n.onload=async()=>{if(h<this._updateID){a();return}await e.onBeforeDraw(),r.src=n.src,n.onload=null,n.src="",this.updateTexture(),a()};const l=new XMLSerializer().serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(l)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:r,resolution:n}=this,{padding:s}=t,{baseTexture:o}=e;e.trim.width=e._frame.width=r.width/n,e.trim.height=e._frame.height=r.height/n,e.trim.x=-s,e.trim.y=-s,e.orig.width=e._frame.width-s*2,e.orig.height=e._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(r.width,r.height,n),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var r,n,s,o,h;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Al.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((r=this._style)==null||r.cleanFonts()),this._style=e,(n=this._svgRoot)==null||n.remove(),this._svgRoot=e,(s=this._domElement)==null||s.remove(),this._domElement=e,(o=this._foreignObject)==null||o.remove(),this._foreignObject=e,(h=this._styleElement)==null||h.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=Fa(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=Fa(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof Dg?(this.ownsStyle=!1,this._style=t):t instanceof La?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Dg.from(t)):(this.ownsStyle=!0,this._style=new Dg(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};rd.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},rd.defaultMaxWidth=2024,rd.defaultMaxHeight=2024,rd.defaultAutoResolution=!0;var ue=(i=>(i[i.Region=0]="Region",i[i.BoundingBox=1]="BoundingBox",i[i.Mesh=2]="Mesh",i[i.LinkedMesh=3]="LinkedMesh",i[i.Path=4]="Path",i[i.Point=5]="Point",i[i.Clipping=6]="Clipping",i))(ue||{});let Yd=class{constructor(t,e=new Array,r=0,n=new DataView(t.buffer)){this.strings=e,this.index=r,this.buffer=n}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){const t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){const t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),r=e&127;return e&128&&(e=this.readByte(),r|=(e&127)<<7,e&128&&(e=this.readByte(),r|=(e&127)<<14,e&128&&(e=this.readByte(),r|=(e&127)<<21,e&128&&(e=this.readByte(),r|=(e&127)<<28)))),t?r:r>>>1^-(r&1)}readStringRef(){const t=this.readInt(!0);return t==0?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let r=0;r<t;){const n=this.readUnsignedByte();switch(n>>4){case 12:case 13:e+=String.fromCharCode((n&31)<<6|this.readByte()&63),r+=2;break;case 14:e+=String.fromCharCode((n&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),r+=3;break;default:e+=String.fromCharCode(n),r++}}return e}readFloat(){const t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return this.readByte()!=0}};var z=(i=>(i[i.setup=0]="setup",i[i.first=1]="first",i[i.replace=2]="replace",i[i.add=3]="add",i))(z||{}),he=(i=>(i[i.mixIn=0]="mixIn",i[i.mixOut=1]="mixOut",i))(he||{}),ur=(i=>(i[i.Fixed=0]="Fixed",i[i.Percent=1]="Percent",i))(ur||{}),br=(i=>(i[i.Tangent=0]="Tangent",i[i.Chain=1]="Chain",i[i.ChainScale=2]="ChainScale",i))(br||{}),ne=(i=>(i[i.Normal=0]="Normal",i[i.OnlyTranslation=1]="OnlyTranslation",i[i.NoRotationOrReflection=2]="NoRotationOrReflection",i[i.NoScale=3]="NoScale",i[i.NoScaleOrReflection=4]="NoScaleOrReflection",i))(ne||{});function Gb(i){switch(i.toLowerCase()){case"nearest":return Ln.Nearest;case"linear":return Ln.Linear;case"mipmap":return Ln.MipMap;case"mipmapnearestnearest":return Ln.MipMapNearestNearest;case"mipmaplinearnearest":return Ln.MipMapLinearNearest;case"mipmapnearestlinear":return Ln.MipMapNearestLinear;case"mipmaplinearlinear":return Ln.MipMapLinearLinear;default:throw new Error(`Unknown texture filter ${i}`)}}var Ln=(i=>(i[i.Nearest=9728]="Nearest",i[i.Linear=9729]="Linear",i[i.MipMap=9987]="MipMap",i[i.MipMapNearestNearest=9984]="MipMapNearestNearest",i[i.MipMapLinearNearest=9985]="MipMapLinearNearest",i[i.MipMapNearestLinear=9986]="MipMapNearestLinear",i[i.MipMapLinearLinear=9987]="MipMapLinearLinear",i))(Ln||{}),Io=(i=>(i[i.MirroredRepeat=33648]="MirroredRepeat",i[i.ClampToEdge=33071]="ClampToEdge",i[i.Repeat=10497]="Repeat",i))(Io||{});let Jv=class{constructor(){this.size=null,this.names=null,this.values=null,this.renderObject=null}get width(){const t=this.texture;return t.trim?t.trim.width:t.orig.width}get height(){const t=this.texture;return t.trim?t.trim.height:t.orig.height}get u(){return this.texture._uvs.x0}get v(){return this.texture._uvs.y0}get u2(){return this.texture._uvs.x2}get v2(){return this.texture._uvs.y2}get offsetX(){const t=this.texture;return t.trim?t.trim.x:0}get offsetY(){return this.spineOffsetY}get pixiOffsetY(){const t=this.texture;return t.trim?t.trim.y:0}get spineOffsetY(){const t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)}get originalWidth(){return this.texture.orig.width}get originalHeight(){return this.texture.orig.height}get x(){return this.texture.frame.x}get y(){return this.texture.frame.y}get rotate(){return this.texture.rotate!==0}get degrees(){return(360-this.texture.rotate*45)%360}};class bB{constructor(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0}}class $d{constructor(t,e,r){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,r)}addTexture(t,e){const r=this.pages;let n=null;for(let o=0;o<r.length;o++)if(r[o].baseTexture===e.baseTexture){n=r[o];break}if(n===null){n=new Yb,n.name="texturePage";const o=e.baseTexture;n.width=o.realWidth,n.height=o.realHeight,n.baseTexture=o,n.minFilter=n.magFilter=Ln.Nearest,n.uWrap=Io.ClampToEdge,n.vWrap=Io.ClampToEdge,r.push(n)}const s=new $b;return s.name=t,s.page=n,s.texture=e,s.index=-1,this.regions.push(s),s}addTextureHash(t,e){for(const r in t)t.hasOwnProperty(r)&&this.addTexture(e&&r.indexOf(".")!==-1?r.substr(0,r.lastIndexOf(".")):r,t[r])}addSpineAtlas(t,e,r){return this.load(t,e,r)}load(t,e,r){if(e==null)throw new Error("textureLoader cannot be null.");const n=new EB(t),s=new Array(4);let o=null;const h={};let a=null;h.size=()=>{o.width=parseInt(s[1]),o.height=parseInt(s[2])},h.format=()=>{},h.filter=()=>{o.minFilter=Gb(s[1]),o.magFilter=Gb(s[2])},h.repeat=()=>{s[1].indexOf("x")!=-1&&(o.uWrap=Io.Repeat),s[1].indexOf("y")!=-1&&(o.vWrap=Io.Repeat)},h.pma=()=>{o.pma=s[1]=="true"};const l={};l.xy=()=>{a.x=parseInt(s[1]),a.y=parseInt(s[2])},l.size=()=>{a.width=parseInt(s[1]),a.height=parseInt(s[2])},l.bounds=()=>{a.x=parseInt(s[1]),a.y=parseInt(s[2]),a.width=parseInt(s[3]),a.height=parseInt(s[4])},l.offset=()=>{a.offsetX=parseInt(s[1]),a.offsetY=parseInt(s[2])},l.orig=()=>{a.originalWidth=parseInt(s[1]),a.originalHeight=parseInt(s[2])},l.offsets=()=>{a.offsetX=parseInt(s[1]),a.offsetY=parseInt(s[2]),a.originalWidth=parseInt(s[3]),a.originalHeight=parseInt(s[4])},l.rotate=()=>{const f=s[1];let p=0;f.toLocaleLowerCase()=="true"?p=6:f.toLocaleLowerCase()=="false"?p=0:p=(720-parseFloat(f))%360/45,a.rotate=p},l.index=()=>{a.index=parseInt(s[1])};let u=n.readLine();for(;u!=null&&u.trim().length==0;)u=n.readLine();for(;!(u==null||u.trim().length==0||n.readEntry(s,u)==0);)u=n.readLine();const c=()=>{for(;;){if(u==null)return r&&r(this);if(u.trim().length==0)o=null,u=n.readLine();else if(o===null){for(o=new Yb,o.name=u.trim();n.readEntry(s,u=n.readLine())!=0;){const f=h[s[0]];f&&f()}this.pages.push(o),e(o.name,f=>{if(f===null)return this.pages.splice(this.pages.indexOf(o),1),r&&r(null);o.baseTexture=f,o.pma&&(f.alphaMode=ji.PMA),f.valid||f.setSize(o.width,o.height),o.setFilters(),(!o.width||!o.height)&&(o.width=f.realWidth,o.height=f.realHeight,(!o.width||!o.height)&&console.log(`ERROR spine atlas page ${o.name}: meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)`)),c()});break}else{a=new bB;const f=new $b;f.name=u,f.page=o;let p=null,g=null;for(;;){const E=n.readEntry(s,u=n.readLine());if(E==0)break;const T=l[s[0]];if(T)T();else{p==null&&(p=[],g=[]),p.push(s[0]);const S=[];for(let C=0;C<E;C++)S.push(parseInt(s[C+1]));g.push(S)}}a.originalWidth==0&&a.originalHeight==0&&(a.originalWidth=a.width,a.originalHeight=a.height);const v=o.baseTexture.resolution;a.x/=v,a.y/=v,a.width/=v,a.height/=v,a.originalWidth/=v,a.originalHeight/=v,a.offsetX/=v,a.offsetY/=v;const y=a.rotate%4!==0,x=new le(a.x,a.y,y?a.height:a.width,y?a.width:a.height),_=new le(0,0,a.originalWidth,a.originalHeight),b=new le(a.offsetX,a.originalHeight-a.height-a.offsetY,a.width,a.height);f.texture=new ve(f.page.baseTexture,x,_,b,a.rotate),f.index=a.index,f.texture.updateUvs(),this.regions.push(f)}}};c()}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()}}class EB{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(e==null||(e=e.trim(),e.length==0))return 0;const r=e.indexOf(":");if(r==-1)return 0;t[0]=e.substr(0,r).trim();for(let n=1,s=r+1;;n++){const o=e.indexOf(",",s);if(o==-1)return t[n]=e.substr(s).trim(),n;if(t[n]=e.substr(s,o-s).trim(),s=o+1,n==4)return 4}}}class Yb{constructor(){this.minFilter=Ln.Nearest,this.magFilter=Ln.Nearest,this.uWrap=Io.ClampToEdge,this.vWrap=Io.ClampToEdge}setFilters(){const t=this.baseTexture,e=this.minFilter;e==Ln.Linear?t.scaleMode=Zn.LINEAR:this.minFilter==Ln.Nearest?t.scaleMode=Zn.NEAREST:(t.mipmap=$i.POW2,e==Ln.MipMapNearestNearest?t.scaleMode=Zn.NEAREST:t.scaleMode=Zn.LINEAR)}}class $b extends Jv{}class $S{constructor(){this.array=new Array}add(t){const e=this.contains(t);return this.array[t|0]=t|0,!e}contains(t){return this.array[t|0]!=null}remove(t){this.array[t|0]=void 0}clear(){this.array.length=0}}let WS=class{constructor(){this.entries={},this.size=0}add(t){const e=this.entries[t];return this.entries[t]=!0,e?!1:(this.size++,!0)}addAll(t){const e=this.size;for(let r=0,n=t.length;r<n;r++)this.add(t[r]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}};const Yo=class{constructor(i=0,t=0,e=0,r=0){this.r=i,this.g=t,this.b=e,this.a=r}set(i,t,e,r){return this.r=i,this.g=t,this.b=e,this.a=r,this.clamp()}setFromColor(i){return this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this}setFromString(i){return i=i.charAt(0)=="#"?i.substr(1):i,this.r=parseInt(i.substr(0,2),16)/255,this.g=parseInt(i.substr(2,2),16)/255,this.b=parseInt(i.substr(4,2),16)/255,this.a=i.length!=8?1:parseInt(i.substr(6,2),16)/255,this}add(i,t,e,r){return this.r+=i,this.g+=t,this.b+=e,this.a+=r,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(i,t){i.r=((t&4278190080)>>>24)/255,i.g=((t&16711680)>>>16)/255,i.b=((t&65280)>>>8)/255,i.a=(t&255)/255}static rgb888ToColor(i,t){i.r=((t&16711680)>>>16)/255,i.g=((t&65280)>>>8)/255,i.b=(t&255)/255}static fromString(i){return new Yo().setFromString(i)}};let bt=Yo;bt.WHITE=new Yo(1,1,1,1);bt.RED=new Yo(1,0,0,1);bt.GREEN=new Yo(0,1,0,1);bt.BLUE=new Yo(0,0,1,1);bt.MAGENTA=new Yo(1,0,1,1);const Hs=class{static clamp(i,t,e){return i<t?t:i>e?e:i}static cosDeg(i){return Math.cos(i*Hs.degRad)}static sinDeg(i){return Math.sin(i*Hs.degRad)}static signum(i){return Math.sign(i)}static toInt(i){return i>0?Math.floor(i):Math.ceil(i)}static cbrt(i){const t=Math.pow(Math.abs(i),.3333333333333333);return i<0?-t:t}static randomTriangular(i,t){return Hs.randomTriangularWith(i,t,(i+t)*.5)}static randomTriangularWith(i,t,e){const r=Math.random(),n=t-i;return r<=(e-i)/n?i+Math.sqrt(r*n*(e-i)):t-Math.sqrt((1-r)*n*(t-e))}static isPowerOfTwo(i){return i&&(i&i-1)===0}};let q=Hs;q.PI=3.1415927;q.PI2=Hs.PI*2;q.radiansToDegrees=180/Hs.PI;q.radDeg=Hs.radiansToDegrees;q.degreesToRadians=Hs.PI/180;q.degRad=Hs.degreesToRadians;let TB=class{apply(t,e,r){return t+(e-t)*this.applyInternal(r)}},SB=class extends TB{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(t*2,this.power)/2:Math.pow((t-1)*2,this.power)/(this.power%2==0?-2:2)+1}};class HS extends SB{applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}}const Cl=class{static arrayCopy(i,t,e,r,n){for(let s=t,o=r;s<t+n;s++,o++)e[o]=i[s]}static arrayFill(i,t,e,r){for(let n=t;n<e;n++)i[n]=r}static setArraySize(i,t,e=0){const r=i.length;if(r==t)return i;if(i.length=t,r<t)for(let n=r;n<t;n++)i[n]=e;return i}static ensureArrayCapacity(i,t,e=0){return i.length>=t?i:Cl.setArraySize(i,t,e)}static newArray(i,t){const e=new Array(i);for(let r=0;r<i;r++)e[r]=t;return e}static newFloatArray(i){if(Cl.SUPPORTS_TYPED_ARRAYS)return new Float32Array(i);const t=new Array(i);for(let e=0;e<t.length;e++)t[e]=0;return t}static newShortArray(i){if(Cl.SUPPORTS_TYPED_ARRAYS)return new Int16Array(i);const t=new Array(i);for(let e=0;e<t.length;e++)t[e]=0;return t}static toFloatArray(i){return Cl.SUPPORTS_TYPED_ARRAYS?new Float32Array(i):i}static toSinglePrecision(i){return Cl.SUPPORTS_TYPED_ARRAYS?Math.fround(i):i}static webkit602BugfixHelper(i,t){}static contains(i,t,e=!0){for(let r=0;r<i.length;r++)if(i[r]==t)return!0;return!1}static enumValue(i,t){return i[t[0].toUpperCase()+t.slice(1)]}};let et=Cl;et.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";let gf=class{constructor(t){this.items=new Array,this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}},lu=class{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){const t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){const t=this.length();return t!=0&&(this.x/=t,this.y/=t),this}},Uy=class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new gf(()=>et.newFloatArray(16))}update(t,e){if(!t)throw new Error("skeleton cannot be null.");const r=this.boundingBoxes,n=this.polygons,s=this.polygonPool,o=t.slots,h=o.length;r.length=0,s.freeAll(n),n.length=0;for(let a=0;a<h;a++){const l=o[a];if(!l.bone.active)continue;const u=l.getAttachment();if(u!=null&&u.type===ue.BoundingBox){const c=u;r.push(c);let f=s.obtain();f.length!=c.worldVerticesLength&&(f=et.newFloatArray(c.worldVerticesLength)),n.push(f),c.computeWorldVertices(l,0,c.worldVerticesLength,f,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;const s=this.polygons;for(let o=0,h=s.length;o<h;o++){const a=s[o],l=a;for(let u=0,c=a.length;u<c;u+=2){const f=l[u],p=l[u+1];t=Math.min(t,f),e=Math.min(e,p),r=Math.max(r,f),n=Math.max(n,p)}}this.minX=t,this.minY=e,this.maxX=r,this.maxY=n}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,r,n){const s=this.minX,o=this.minY,h=this.maxX,a=this.maxY;if(t<=s&&r<=s||e<=o&&n<=o||t>=h&&r>=h||e>=a&&n>=a)return!1;const l=(n-e)/(r-t);let u=l*(s-t)+e;if(u>o&&u<a||(u=l*(h-t)+e,u>o&&u<a))return!0;let c=(o-e)/l+t;return c>s&&c<h||(c=(a-e)/l+t,c>s&&c<h)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){const r=this.polygons;for(let n=0,s=r.length;n<s;n++)if(this.containsPointPolygon(r[n],t,e))return this.boundingBoxes[n];return null}containsPointPolygon(t,e,r){const n=t,s=t.length;let o=s-2,h=!1;for(let a=0;a<s;a+=2){const l=n[a+1],u=n[o+1];if(l<r&&u>=r||u<r&&l>=r){const c=n[a];c+(r-l)/(u-l)*(n[o]-c)<e&&(h=!h)}o=a}return h}intersectsSegment(t,e,r,n){const s=this.polygons;for(let o=0,h=s.length;o<h;o++)if(this.intersectsSegmentPolygon(s[o],t,e,r,n))return this.boundingBoxes[o];return null}intersectsSegmentPolygon(t,e,r,n,s){const o=t,h=t.length,a=e-n,l=r-s,u=e*s-r*n;let c=o[h-2],f=o[h-1];for(let p=0;p<h;p+=2){const g=o[p],v=o[p+1],y=c*v-f*g,x=c-g,_=f-v,b=a*_-l*x,E=(u*x-a*y)/b;if((E>=c&&E<=g||E>=g&&E<=c)&&(E>=e&&E<=n||E>=n&&E<=e)){const T=(u*_-l*y)/b;if((T>=f&&T<=v||T>=v&&T<=f)&&(T>=r&&T<=s||T>=s&&T<=r))return!0}c=g,f=v}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");const e=this.boundingBoxes.indexOf(t);return e==-1?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}};const AB={GLOBAL_DELAY_LIMIT:0},wa=[0,0,0];let CB=class extends bu{constructor(){super(...arguments),this.region=null,this.attachment=null}},IB=class extends WF{constructor(t,e,r,n,s){super(t,e,r,n,s),this.region=null,this.attachment=null}};const zS=class extends bn{constructor(i){if(super(),!i)throw new Error("The spineData param is required.");if(typeof i=="string")throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');this.spineData=i,this.createSkeleton(i),this.slotContainers=[],this.tempClipContainers=[];for(let t=0,e=this.skeleton.slots.length;t<e;t++){const r=this.skeleton.slots[t],n=r.getAttachment(),s=this.newContainer();if(this.slotContainers.push(s),this.addChild(s),this.tempClipContainers.push(null),!!n)if(n.type===ue.Region){const o=n.name,h=this.createSprite(r,n,o);r.currentSprite=h,r.currentSpriteName=o,s.addChild(h)}else if(n.type===ue.Mesh){const o=this.createMesh(r,n);r.currentMesh=o,r.currentMeshId=n.id,r.currentMeshName=n.name,s.addChild(o)}else n.type===ue.Clipping&&(this.createGraphics(r,n),s.addChild(r.clippingContainer),s.addChild(r.currentGraphics))}this.tintRgb=new Float32Array([1,1,1]),this.autoUpdate=!0,this.visible=!0}get debug(){return this._debug}set debug(i){var t;i!=this._debug&&((t=this._debug)==null||t.unregisterSpine(this),i==null||i.registerSpine(this),this._debug=i)}get autoUpdate(){return this._autoUpdate}set autoUpdate(i){i!==this._autoUpdate&&(this._autoUpdate=i,this.updateTransform=i?zS.prototype.autoUpdateTransform:bn.prototype.updateTransform)}get tint(){return yd(this.tintRgb)}set tint(i){this.tintRgb=sP(i,this.tintRgb)}get delayLimit(){return(typeof this.localDelayLimit<"u"?this.localDelayLimit:AB.GLOBAL_DELAY_LIMIT)||Number.MAX_VALUE}update(i){var l;const t=this.delayLimit;if(i>t&&(i=t),this.state.update(i),this.state.apply(this.skeleton),!this.skeleton)return;this.skeleton.updateWorldTransform();const e=this.skeleton.slots,r=this.color;let n=null,s=null;r?(n=r.light,s=r.dark):n=this.tintRgb;for(let u=0,c=e.length;u<c;u++){const f=e[u],p=f.getAttachment(),g=this.slotContainers[u];if(!p){g.visible=!1;continue}let v=null;p.sequence&&p.sequence.apply(f,p);let y=p.region;const x=p.color;switch(p!=null&&p.type){case ue.Region:if(g.transform.setFromMatrix(f.bone.matrix),y=p.region,f.currentMesh&&(f.currentMesh.visible=!1,f.currentMesh=null,f.currentMeshId=void 0,f.currentMeshName=void 0),!y){f.currentSprite&&(f.currentSprite.renderable=!1);break}if(!f.currentSpriteName||f.currentSpriteName!==p.name){const E=p.name;if(f.currentSprite&&(f.currentSprite.visible=!1),f.sprites=f.sprites||{},f.sprites[E]!==void 0)f.sprites[E].visible=!0;else{const T=this.createSprite(f,p,E);g.addChild(T)}f.currentSprite=f.sprites[E],f.currentSpriteName=E}f.currentSprite.renderable=!0,f.hackRegion||this.setSpriteRegion(p,f.currentSprite,y),f.currentSprite.color?v=f.currentSprite.color:(wa[0]=n[0]*f.color.r*x.r,wa[1]=n[1]*f.color.g*x.g,wa[2]=n[2]*f.color.b*x.b,f.currentSprite.tint=yd(wa)),f.currentSprite.blendMode=f.blendMode;break;case ue.Mesh:if(f.currentSprite){f.currentSprite.visible=!1,f.currentSprite=null,f.currentSpriteName=void 0;const E=new cf;E._parentID=-1,E._worldID=g.transform._worldID,g.transform=E}if(!y){f.currentMesh&&(f.currentMesh.renderable=!1);break}const b=p.id;if(f.currentMeshId===void 0||f.currentMeshId!==b){const E=b;if(f.currentMesh&&(f.currentMesh.visible=!1),f.meshes=f.meshes||{},f.meshes[E]!==void 0)f.meshes[E].visible=!0;else{const T=this.createMesh(f,p);g.addChild(T)}f.currentMesh=f.meshes[E],f.currentMeshName=p.name,f.currentMeshId=E}f.currentMesh.renderable=!0,p.computeWorldVerticesOld(f,f.currentMesh.vertices),f.currentMesh.color?v=f.currentMesh.color:(wa[0]=n[0]*f.color.r*x.r,wa[1]=n[1]*f.color.g*x.g,wa[2]=n[2]*f.color.b*x.b,f.currentMesh.tint=yd(wa)),f.currentMesh.blendMode=f.blendMode,f.hackRegion||this.setMeshRegion(p,f.currentMesh,y);break;case ue.Clipping:f.currentGraphics||(this.createGraphics(f,p),g.addChild(f.clippingContainer),g.addChild(f.currentGraphics)),this.updateGraphics(f,p),g.alpha=1,g.visible=!0;continue;default:g.visible=!1;continue}if(g.visible=!0,v){let _=f.color.r*x.r,b=f.color.g*x.g,E=f.color.b*x.b;v.setLight(n[0]*_+s[0]*(1-_),n[1]*b+s[1]*(1-b),n[2]*E+s[2]*(1-E)),f.darkColor?(_=f.darkColor.r,b=f.darkColor.g,E=f.darkColor.b):(_=0,b=0,E=0),v.setDark(n[0]*_+s[0]*(1-_),n[1]*b+s[1]*(1-b),n[2]*E+s[2]*(1-E))}g.alpha=f.color.a}const o=this.skeleton.drawOrder;let h=null,a=null;for(let u=0,c=o.length;u<c;u++){const f=e[o[u].data.index],p=this.slotContainers[o[u].data.index];if(a||p.parent!==null&&p.parent!==this&&(p.parent.removeChild(p),p.parent=this),f.currentGraphics&&f.getAttachment())a=f.clippingContainer,h=f.getAttachment(),a.children.length=0,this.children[u]=p,h.endSlot===f.data&&(h.endSlot=null);else if(a){let g=this.tempClipContainers[u];g||(g=this.tempClipContainers[u]=this.newContainer(),g.visible=!1),this.children[u]=g,p.parent=null,a.addChild(p),h.endSlot==f.data&&(a.renderable=!0,a=null,h=null)}else this.children[u]=p}(l=this._debug)==null||l.renderDebug(this)}setSpriteRegion(i,t,e){t.attachment===i&&t.region===e||(t.region=e,t.attachment=i,t.texture=e.texture,t.rotation=i.rotation*q.degRad,t.position.x=i.x,t.position.y=i.y,t.alpha=i.color.a,e.size?(t.scale.x=e.size.width/e.originalWidth,t.scale.y=-e.size.height/e.originalHeight):(t.scale.x=i.scaleX*i.width/e.originalWidth,t.scale.y=-i.scaleY*i.height/e.originalHeight))}setMeshRegion(i,t,e){t.attachment===i&&t.region===e||(t.region=e,t.attachment=i,t.texture=e.texture,e.texture.updateUvs(),t.uvBuffer.update(i.regionUVs))}autoUpdateTransform(){{this.lastTime=this.lastTime||Date.now();const i=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(i)}bn.prototype.updateTransform.call(this)}createSprite(i,t,e){let r=t.region;i.hackAttachment===t&&(r=i.hackRegion);const n=r?r.texture:null,s=this.newSprite(n);return s.anchor.set(.5),r&&this.setSpriteRegion(t,s,t.region),i.sprites=i.sprites||{},i.sprites[e]=s,s}createMesh(i,t){let e=t.region;i.hackAttachment===t&&(e=i.hackRegion,i.hackAttachment=null,i.hackRegion=null);const r=this.newMesh(e?e.texture:null,new Float32Array(t.regionUVs.length),t.regionUVs,new Uint16Array(t.triangles),Gi.TRIANGLES);return typeof r._canvasPadding<"u"&&(r._canvasPadding=1.5),r.alpha=t.color.a,r.region=t.region,e&&this.setMeshRegion(t,r,e),i.meshes=i.meshes||{},i.meshes[t.id]=r,r}createGraphics(i,t){const e=this.newGraphics(),r=new Fl([]);return e.clear(),e.beginFill(16777215,1),e.drawPolygon(r),e.renderable=!1,i.currentGraphics=e,i.clippingContainer=this.newContainer(),i.clippingContainer.mask=i.currentGraphics,e}updateGraphics(i,t){const e=i.currentGraphics.geometry,r=e.graphicsData[0].shape.points,n=t.worldVerticesLength;r.length=n,t.computeWorldVertices(i,0,n,r,0,2),e.invalidate()}hackTextureBySlotIndex(i,t=null,e=null){const r=this.skeleton.slots[i];if(!r)return!1;const n=r.getAttachment();let s=n.region;return t?(s=new Jv,s.texture=t,s.size=e,r.hackRegion=s,r.hackAttachment=n):(r.hackRegion=null,r.hackAttachment=null),r.currentSprite?this.setSpriteRegion(n,r.currentSprite,s):r.currentMesh&&this.setMeshRegion(n,r.currentMesh,s),!0}hackTextureBySlotName(i,t=null,e=null){const r=this.skeleton.findSlotIndex(i);return r==-1?!1:this.hackTextureBySlotIndex(r,t,e)}hackTextureAttachment(i,t,e,r=null){const n=this.skeleton.findSlotIndex(i),s=this.skeleton.getAttachmentByName(i,t);s.region.texture=e;const o=this.skeleton.slots[n];if(!o)return!1;const h=o.getAttachment();if(t===h.name){let a=s.region;return e?(a=new Jv,a.texture=e,a.size=r,o.hackRegion=a,o.hackAttachment=h):(o.hackRegion=null,o.hackAttachment=null),o.currentSprite&&o.currentSprite.region!=a?(this.setSpriteRegion(h,o.currentSprite,a),o.currentSprite.region=a):o.currentMesh&&o.currentMesh.region!=a&&this.setMeshRegion(h,o.currentMesh,a),!0}return!1}newContainer(){return new bn}newSprite(i){return new CB(i)}newGraphics(){return new pf}newMesh(i,t,e,r,n){return new IB(i,t,e,r,n)}transformHack(){return 1}hackAttachmentGroups(i,t,e){if(!i)return;const r=[],n=[];for(let s=0,o=this.skeleton.slots.length;s<o;s++){const h=this.skeleton.slots[s],a=h.currentSpriteName||h.currentMeshName||"",l=h.currentSprite||h.currentMesh;a.endsWith(i)?(l.parentGroup=t,n.push(l)):e&&l&&(l.parentGroup=e,r.push(l))}return[r,n]}destroy(i){this.debug=null;for(let t=0,e=this.skeleton.slots.length;t<e;t++){const r=this.skeleton.slots[t];for(const n in r.meshes)r.meshes[n].destroy(i);r.meshes=null;for(const n in r.sprites)r.sprites[n].destroy(i);r.sprites=null}for(let t=0,e=this.slotContainers.length;t<e;t++)this.slotContainers[t].destroy(i);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,super.destroy(i)}};let $l=zS;$l.clippingPolygon=[];Object.defineProperty($l.prototype,"visible",{get(){return this._visible},set(i){i!==this._visible&&(this._visible=i,i&&(this.lastTime=0))}});const RB={extension:At.Asset,loader:{extension:{type:At.LoadParser,priority:si.Normal},test(i){return Vn(i,".atlas")},async load(i){return await(await It.ADAPTER.fetch(i)).text()},testParse(i,t){const e=Vn(t.src,".atlas"),r=typeof i=="string";return Promise.resolve(e&&r)},async parse(i,t,e){const r=t.data;let n=qe.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let s=null,o=null;const h=new Promise((u,c)=>{s=u,o=c});let a;const l=u=>{u||o(`Something went terribly wrong loading a spine .atlas file
Most likely your texture failed to load.`),s(a)};if(r.image||r.images){const u=Object.assign(r.image?{default:r.image}:{},r.images);a=new $d(i,(c,f)=>{const p=u[c]||u.default;p&&p.baseTexture?f(p.baseTexture):f(p)},l)}else a=new $d(i,jS(e,n,r.imageMetadata),l);return await h},unload(i){i.dispose()}}},jS=(i,t,e)=>async(r,n)=>{const s=qe.normalize([...t.split(qe.sep),r].join(qe.sep)),o=await i.load({src:s,data:e});n(o.baseTexture)};Dt.add(RB);function Wb(i){return i.hasOwnProperty("bones")}function MB(i){return i instanceof ArrayBuffer}class PB{constructor(){}installLoader(){const t=this,e={extension:At.Asset,loader:{extension:{type:At.LoadParser,priority:si.Normal},test(r){return Vn(r,".skel")},async load(r){return await(await It.ADAPTER.fetch(r)).arrayBuffer()},testParse(r,n){var a;const s=Vn(n.src,".json")&&Wb(r),o=Vn(n.src,".skel")&&MB(r),h=((a=n.data)==null?void 0:a.spineAtlas)===!1;return Promise.resolve(s&&!h||o)},async parse(r,n,s){const o=qe.extname(n.src).toLowerCase(),h=qe.basename(n.src,o);let a=qe.dirname(n.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");const l=Vn(n.src,".json")&&Wb(r);let u=null,c=r;l?u=t.createJsonParser():(u=t.createBinaryParser(),c=new Uint8Array(r));const f=n.data||{},p=(f==null?void 0:f.spineSkeletonScale)??null;p&&(u.scale=p);const g=f.spineAtlas;if(g&&g.pages)return t.parseData(u,g,c);const v=f.atlasRawData;if(v){let _=null,b=null;const E=new Promise((C,M)=>{_=C,b=M}),T=new $d(v,jS(s,a,f.imageMetadata),C=>{C||b(`Something went terribly wrong loading a spine .atlas file
Most likely your texture failed to load.`),_(T)}),S=await E;return t.parseData(u,S,c)}let y=f.spineAtlasFile;y||(y=`${a+h}.atlas`);const x=await s.load({src:y,data:f,alias:f.spineAtlasAlias});return t.parseData(u,x,c)}}};return Dt.add(e),e}}let Vy=class{constructor(t){if(t==null)throw new Error("name cannot be null.");this.name=t}};const qS=class extends Vy{constructor(t){super(t),this.id=(qS.nextID++&65535)<<11,this.worldVerticesLength=0,this.deformAttachment=this}computeWorldVerticesOld(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)}computeWorldVertices(t,e,r,n,s,o){r=s+(r>>1)*o;const h=t.bone.skeleton,a=t.deform;let l=this.vertices;const u=this.bones;if(u==null){a.length>0&&(l=a);const g=t.bone.matrix,v=g.tx,y=g.ty,x=g.a,_=g.c,b=g.b,E=g.d;for(let T=e,S=s;S<r;T+=2,S+=o){const C=l[T],M=l[T+1];n[S]=C*x+M*_+v,n[S+1]=C*b+M*E+y}return}let c=0,f=0;for(let g=0;g<e;g+=2){const v=u[c];c+=v+1,f+=v}const p=h.bones;if(a.length==0)for(let g=s,v=f*3;g<r;g+=o){let y=0,x=0,_=u[c++];for(_+=c;c<_;c++,v+=3){const b=p[u[c]].matrix,E=l[v],T=l[v+1],S=l[v+2];y+=(E*b.a+T*b.c+b.tx)*S,x+=(E*b.b+T*b.d+b.ty)*S}n[g]=y,n[g+1]=x}else{const g=a;for(let v=s,y=f*3,x=f<<1;v<r;v+=o){let _=0,b=0,E=u[c++];for(E+=c;c<E;c++,y+=3,x+=2){const T=p[u[c]].matrix,S=l[y]+g[x],C=l[y+1]+g[x+1],M=l[y+2];_+=(S*T.a+C*T.c+T.tx)*M,b+=(S*T.b+C*T.d+T.ty)*M}n[v]=_,n[v+1]=b}}}copyTo(t){this.bones!=null?(t.bones=new Array(this.bones.length),et.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices!=null?(t.vertices=et.newFloatArray(this.vertices.length),et.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment}};let $a=qS;$a.nextID=0;let KS=class ZS extends $a{constructor(t){super(t),this.type=ue.BoundingBox,this.color=new bt(1,1,1,1)}copy(){const t=new ZS(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},QS=class JS extends $a{constructor(t){super(t),this.type=ue.Clipping,this.color=new bt(.2275,.2275,.8078,1)}copy(){const t=new JS(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},vf=class ty extends $a{constructor(t){super(t),this.type=ue.Mesh,this.color=new bt(1,1,1,1),this.tempColor=new bt(0,0,0,0)}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t!=null&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh!=null)return this.newLinkedMesh();const t=new ty(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),et.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),et.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges!=null&&(t.edges=new Array(this.edges.length),et.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}newLinkedMesh(){const t=new ty(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh!=null?this.parentMesh:this),t}},hu=class tA extends $a{constructor(t){super(t),this.type=ue.Path,this.closed=!1,this.constantSpeed=!1,this.color=new bt(1,1,1,1)}copy(){const t=new tA(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),et.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},eA=class rA extends $a{constructor(t){super(t),this.type=ue.Point,this.color=new bt(.38,.94,0,1)}computeWorldPosition(t,e){const r=t.matrix;return e.x=this.x*r.a+this.y*r.c+t.worldX,e.y=this.x*r.b+this.y*r.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix,r=q.cosDeg(this.rotation),n=q.sinDeg(this.rotation),s=r*e.a+n*e.c,o=r*e.b+n*e.d;return Math.atan2(o,s)*q.radDeg}copy(){const t=new rA(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},Xy=class{constructor(t,e){if(this.deform=new Array,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new bt,this.darkColor=t.darkColor==null?null:new bt,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}};const Yr=class extends Vy{constructor(t){super(t),this.type=ue.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new bt(1,1,1,1),this.offset=et.newFloatArray(8),this.uvs=et.newFloatArray(8),this.tempColor=new bt(1,1,1,1)}updateOffset(){const t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,s=r+this.region.width*t,o=n+this.region.height*e,h=this.rotation*Math.PI/180,a=Math.cos(h),l=Math.sin(h),u=r*a+this.x,c=r*l,f=n*a+this.y,p=n*l,g=s*a+this.x,v=s*l,y=o*a+this.y,x=o*l,_=this.offset;_[Yr.OX1]=u-p,_[Yr.OY1]=f+c,_[Yr.OX2]=u-x,_[Yr.OY2]=y+c,_[Yr.OX3]=g-x,_[Yr.OY3]=y+v,_[Yr.OX4]=g-p,_[Yr.OY4]=f+v}setRegion(t){this.region=t;const e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,r,n){const s=this.offset,o=t instanceof Xy?t.bone.matrix:t.matrix,h=o.tx,a=o.ty,l=o.a,u=o.c,c=o.b,f=o.d;let p=0,g=0;p=s[Yr.OX1],g=s[Yr.OY1],e[r]=p*l+g*u+h,e[r+1]=p*c+g*f+a,r+=n,p=s[Yr.OX2],g=s[Yr.OY2],e[r]=p*l+g*u+h,e[r+1]=p*c+g*f+a,r+=n,p=s[Yr.OX3],g=s[Yr.OY3],e[r]=p*l+g*u+h,e[r+1]=p*c+g*f+a,r+=n,p=s[Yr.OX4],g=s[Yr.OY4],e[r]=p*l+g*u+h,e[r+1]=p*c+g*f+a}copy(){const t=new Yr(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,et.arrayCopy(this.uvs,0,t.uvs,0,8),et.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}};let ae=Yr;ae.OX1=0;ae.OY1=1;ae.OX2=2;ae.OY2=3;ae.OX3=4;ae.OY3=5;ae.OX4=6;ae.OY4=7;ae.X1=0;ae.Y1=1;ae.C1R=2;ae.C1G=3;ae.C1B=4;ae.C1A=5;ae.U1=6;ae.V1=7;ae.X2=8;ae.Y2=9;ae.C2R=10;ae.C2G=11;ae.C2B=12;ae.C2A=13;ae.U2=14;ae.V2=15;ae.X3=16;ae.Y3=17;ae.C3R=18;ae.C3G=19;ae.C3B=20;ae.C3A=21;ae.U3=22;ae.V3=23;ae.X4=24;ae.Y4=25;ae.C4R=26;ae.C4G=27;ae.C4B=28;ae.C4A=29;ae.U4=30;ae.V4=31;let kB=class{constructor(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}begin(t){}transform(t,e,r,n){t.x+=q.randomTriangular(-this.jitterX,this.jitterY),t.y+=q.randomTriangular(-this.jitterX,this.jitterY)}end(){}};const nA=class{constructor(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}begin(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY}transform(t,e,r,n){const s=this.angle*q.degreesToRadians,o=t.x-this.worldX,h=t.y-this.worldY,a=Math.sqrt(o*o+h*h);if(a<this.radius){const l=nA.interpolation.apply(0,s,(this.radius-a)/this.radius),u=Math.cos(l),c=Math.sin(l);t.x=u*o-c*h+this.worldX,t.y=c*o+u*h+this.worldY}}end(){}};let iA=nA;iA.interpolation=new HS(2);let Tr=class{constructor(t,e,r){if(t==null)throw new Error("name cannot be null.");if(e==null)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(let n=0;n<e.length;n++)this.timelineIds[e[n].getPropertyId()]=!0;this.duration=r}hasTimeline(t){return this.timelineIds[t]==!0}apply(t,e,r,n,s,o,h,a){if(t==null)throw new Error("skeleton cannot be null.");n&&this.duration!=0&&(r%=this.duration,e>0&&(e%=this.duration));const l=this.timelines;for(let u=0,c=l.length;u<c;u++)l[u].apply(t,e,r,s,o,h,a)}static binarySearch(t,e,r=1){let n=0,s=t.length/r-2;if(s==0)return r;let o=s>>>1;for(;;){if(t[(o+1)*r]<=e?n=o+1:s=o,n==s)return(n+1)*r;o=n+s>>>1}}static linearSearch(t,e,r){for(let n=0,s=t.length-r;n<=s;n+=r)if(t[n]>e)return n;return-1}};var sA=(i=>(i[i.rotate=0]="rotate",i[i.translate=1]="translate",i[i.scale=2]="scale",i[i.shear=3]="shear",i[i.attachment=4]="attachment",i[i.color=5]="color",i[i.deform=6]="deform",i[i.event=7]="event",i[i.drawOrder=8]="drawOrder",i[i.ikConstraint=9]="ikConstraint",i[i.transformConstraint=10]="transformConstraint",i[i.pathConstraintPosition=11]="pathConstraintPosition",i[i.pathConstraintSpacing=12]="pathConstraintSpacing",i[i.pathConstraintMix=13]="pathConstraintMix",i[i.twoColor=14]="twoColor",i))(sA||{});const yr=class{constructor(t){if(t<=0)throw new Error(`frameCount must be > 0: ${t}`);this.curves=et.newFloatArray((t-1)*yr.BEZIER_SIZE)}getFrameCount(){return this.curves.length/yr.BEZIER_SIZE+1}setLinear(t){this.curves[t*yr.BEZIER_SIZE]=yr.LINEAR}setStepped(t){this.curves[t*yr.BEZIER_SIZE]=yr.STEPPED}getCurveType(t){const e=t*yr.BEZIER_SIZE;if(e==this.curves.length)return yr.LINEAR;const r=this.curves[e];return r==yr.LINEAR?yr.LINEAR:r==yr.STEPPED?yr.STEPPED:yr.BEZIER}setCurve(t,e,r,n,s){const o=(-e*2+n)*.03,h=(-r*2+s)*.03,a=((e-n)*3+1)*.006,l=((r-s)*3+1)*.006;let u=o*2+a,c=h*2+l,f=e*.3+o+a*.16666667,p=r*.3+h+l*.16666667,g=t*yr.BEZIER_SIZE;const v=this.curves;v[g++]=yr.BEZIER;let y=f,x=p;for(let _=g+yr.BEZIER_SIZE-1;g<_;g+=2)v[g]=y,v[g+1]=x,f+=u,p+=c,u+=a,c+=l,y+=f,x+=p}getCurvePercent(t,e){e=q.clamp(e,0,1);const r=this.curves;let n=t*yr.BEZIER_SIZE;const s=r[n];if(s==yr.LINEAR)return e;if(s==yr.STEPPED)return 0;n++;let o=0;for(let a=n,l=n+yr.BEZIER_SIZE-1;n<l;n+=2)if(o=r[n],o>=e){let u,c;return n==a?(u=0,c=0):(u=r[n-2],c=r[n-1]),c+(r[n+1]-c)*(e-u)/(o-u)}const h=r[n-1];return h+(1-h)*(e-o)/(1-o)}};let Xn=yr;Xn.LINEAR=0;Xn.STEPPED=1;Xn.BEZIER=2;Xn.BEZIER_SIZE=10*2-1;const Ta=class extends Xn{constructor(t){super(t),this.frames=et.newFloatArray(t<<1)}getPropertyId(){return 0+this.boneIndex}setFrame(t,e,r){t<<=1,this.frames[t]=e,this.frames[t+Ta.ROTATION]=r}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.bones[this.boneIndex];if(!l.active)return;if(r<a[0]){switch(o){case z.setup:l.rotation=l.data.rotation;return;case z.first:const v=l.data.rotation-l.rotation;l.rotation+=(v-(16384-(16384.499999999996-v/360|0))*360)*s}return}if(r>=a[a.length-Ta.ENTRIES]){let v=a[a.length+Ta.PREV_ROTATION];switch(o){case z.setup:l.rotation=l.data.rotation+v*s;break;case z.first:case z.replace:v+=l.data.rotation-l.rotation,v-=(16384-(16384.499999999996-v/360|0))*360;case z.add:l.rotation+=v*s}return}const u=Tr.binarySearch(a,r,Ta.ENTRIES),c=a[u+Ta.PREV_ROTATION],f=a[u],p=this.getCurvePercent((u>>1)-1,1-(r-f)/(a[u+Ta.PREV_TIME]-f));let g=a[u+Ta.ROTATION]-c;switch(g=c+(g-(16384-(16384.499999999996-g/360|0))*360)*p,o){case z.setup:l.rotation=l.data.rotation+(g-(16384-(16384.499999999996-g/360|0))*360)*s;break;case z.first:case z.replace:g+=l.data.rotation-l.rotation;case z.add:l.rotation+=(g-(16384-(16384.499999999996-g/360|0))*360)*s}}};let tn=Ta;tn.ENTRIES=2;tn.PREV_TIME=-2;tn.PREV_ROTATION=-1;tn.ROTATION=1;const mn=class extends Xn{constructor(t){super(t),this.frames=et.newFloatArray(t*mn.ENTRIES)}getPropertyId(){return(1<<24)+this.boneIndex}setFrame(t,e,r,n){t*=mn.ENTRIES,this.frames[t]=e,this.frames[t+mn.X]=r,this.frames[t+mn.Y]=n}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.bones[this.boneIndex];if(!l.active)return;if(r<a[0]){switch(o){case z.setup:l.x=l.data.x,l.y=l.data.y;return;case z.first:l.x+=(l.data.x-l.x)*s,l.y+=(l.data.y-l.y)*s}return}let u=0,c=0;if(r>=a[a.length-mn.ENTRIES])u=a[a.length+mn.PREV_X],c=a[a.length+mn.PREV_Y];else{const f=Tr.binarySearch(a,r,mn.ENTRIES);u=a[f+mn.PREV_X],c=a[f+mn.PREV_Y];const p=a[f],g=this.getCurvePercent(f/mn.ENTRIES-1,1-(r-p)/(a[f+mn.PREV_TIME]-p));u+=(a[f+mn.X]-u)*g,c+=(a[f+mn.Y]-c)*g}switch(o){case z.setup:l.x=l.data.x+u*s,l.y=l.data.y+c*s;break;case z.first:case z.replace:l.x+=(l.data.x+u-l.x)*s,l.y+=(l.data.y+c-l.y)*s;break;case z.add:l.x+=u*s,l.y+=c*s}}};let ei=mn;ei.ENTRIES=3;ei.PREV_TIME=-3;ei.PREV_X=-2;ei.PREV_Y=-1;ei.X=1;ei.Y=2;let Gy=class Mi extends ei{constructor(t){super(t)}getPropertyId(){return(2<<24)+this.boneIndex}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.bones[this.boneIndex];if(!l.active)return;if(r<a[0]){switch(o){case z.setup:l.scaleX=l.data.scaleX,l.scaleY=l.data.scaleY;return;case z.first:l.scaleX+=(l.data.scaleX-l.scaleX)*s,l.scaleY+=(l.data.scaleY-l.scaleY)*s}return}let u=0,c=0;if(r>=a[a.length-Mi.ENTRIES])u=a[a.length+Mi.PREV_X]*l.data.scaleX,c=a[a.length+Mi.PREV_Y]*l.data.scaleY;else{const f=Tr.binarySearch(a,r,Mi.ENTRIES);u=a[f+Mi.PREV_X],c=a[f+Mi.PREV_Y];const p=a[f],g=this.getCurvePercent(f/Mi.ENTRIES-1,1-(r-p)/(a[f+Mi.PREV_TIME]-p));u=(u+(a[f+Mi.X]-u)*g)*l.data.scaleX,c=(c+(a[f+Mi.Y]-c)*g)*l.data.scaleY}if(s==1)o==z.add?(l.scaleX+=u-l.data.scaleX,l.scaleY+=c-l.data.scaleY):(l.scaleX=u,l.scaleY=c);else{let f=0,p=0;if(h==he.mixOut)switch(o){case z.setup:f=l.data.scaleX,p=l.data.scaleY,l.scaleX=f+(Math.abs(u)*q.signum(f)-f)*s,l.scaleY=p+(Math.abs(c)*q.signum(p)-p)*s;break;case z.first:case z.replace:f=l.scaleX,p=l.scaleY,l.scaleX=f+(Math.abs(u)*q.signum(f)-f)*s,l.scaleY=p+(Math.abs(c)*q.signum(p)-p)*s;break;case z.add:f=l.scaleX,p=l.scaleY,l.scaleX=f+(Math.abs(u)*q.signum(f)-l.data.scaleX)*s,l.scaleY=p+(Math.abs(c)*q.signum(p)-l.data.scaleY)*s}else switch(o){case z.setup:f=Math.abs(l.data.scaleX)*q.signum(u),p=Math.abs(l.data.scaleY)*q.signum(c),l.scaleX=f+(u-f)*s,l.scaleY=p+(c-p)*s;break;case z.first:case z.replace:f=Math.abs(l.scaleX)*q.signum(u),p=Math.abs(l.scaleY)*q.signum(c),l.scaleX=f+(u-f)*s,l.scaleY=p+(c-p)*s;break;case z.add:f=q.signum(u),p=q.signum(c),l.scaleX=Math.abs(l.scaleX)*f+(u-Math.abs(l.data.scaleX)*f)*s,l.scaleY=Math.abs(l.scaleY)*p+(c-Math.abs(l.data.scaleY)*p)*s}}}},Yy=class Pi extends ei{constructor(t){super(t)}getPropertyId(){return(3<<24)+this.boneIndex}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.bones[this.boneIndex];if(!l.active)return;if(r<a[0]){switch(o){case z.setup:l.shearX=l.data.shearX,l.shearY=l.data.shearY;return;case z.first:l.shearX+=(l.data.shearX-l.shearX)*s,l.shearY+=(l.data.shearY-l.shearY)*s}return}let u=0,c=0;if(r>=a[a.length-Pi.ENTRIES])u=a[a.length+Pi.PREV_X],c=a[a.length+Pi.PREV_Y];else{const f=Tr.binarySearch(a,r,Pi.ENTRIES);u=a[f+Pi.PREV_X],c=a[f+Pi.PREV_Y];const p=a[f],g=this.getCurvePercent(f/Pi.ENTRIES-1,1-(r-p)/(a[f+Pi.PREV_TIME]-p));u=u+(a[f+Pi.X]-u)*g,c=c+(a[f+Pi.Y]-c)*g}switch(o){case z.setup:l.shearX=l.data.shearX+u*s,l.shearY=l.data.shearY+c*s;break;case z.first:case z.replace:l.shearX+=(l.data.shearX+u-l.shearX)*s,l.shearY+=(l.data.shearY+c-l.shearY)*s;break;case z.add:l.shearX+=u*s,l.shearY+=c*s}}};const nr=class extends Xn{constructor(t){super(t),this.frames=et.newFloatArray(t*nr.ENTRIES)}getPropertyId(){return(5<<24)+this.slotIndex}setFrame(t,e,r,n,s,o){t*=nr.ENTRIES,this.frames[t]=e,this.frames[t+nr.R]=r,this.frames[t+nr.G]=n,this.frames[t+nr.B]=s,this.frames[t+nr.A]=o}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.color.setFromColor(a.data.color);return;case z.first:const g=a.color,v=a.data.color;g.add((v.r-g.r)*s,(v.g-g.g)*s,(v.b-g.b)*s,(v.a-g.a)*s)}return}let u=0,c=0,f=0,p=0;if(r>=l[l.length-nr.ENTRIES]){const g=l.length;u=l[g+nr.PREV_R],c=l[g+nr.PREV_G],f=l[g+nr.PREV_B],p=l[g+nr.PREV_A]}else{const g=Tr.binarySearch(l,r,nr.ENTRIES);u=l[g+nr.PREV_R],c=l[g+nr.PREV_G],f=l[g+nr.PREV_B],p=l[g+nr.PREV_A];const v=l[g],y=this.getCurvePercent(g/nr.ENTRIES-1,1-(r-v)/(l[g+nr.PREV_TIME]-v));u+=(l[g+nr.R]-u)*y,c+=(l[g+nr.G]-c)*y,f+=(l[g+nr.B]-f)*y,p+=(l[g+nr.A]-p)*y}if(s==1)a.color.set(u,c,f,p);else{const g=a.color;o==z.setup&&g.setFromColor(a.data.color),g.add((u-g.r)*s,(c-g.g)*s,(f-g.b)*s,(p-g.a)*s)}}};let En=nr;En.ENTRIES=5;En.PREV_TIME=-5;En.PREV_R=-4;En.PREV_G=-3;En.PREV_B=-2;En.PREV_A=-1;En.R=1;En.G=2;En.B=3;En.A=4;const _e=class extends Xn{constructor(t){super(t),this.frames=et.newFloatArray(t*_e.ENTRIES)}getPropertyId(){return(14<<24)+this.slotIndex}setFrame(t,e,r,n,s,o,h,a,l){t*=_e.ENTRIES,this.frames[t]=e,this.frames[t+_e.R]=r,this.frames[t+_e.G]=n,this.frames[t+_e.B]=s,this.frames[t+_e.A]=o,this.frames[t+_e.R2]=h,this.frames[t+_e.G2]=a,this.frames[t+_e.B2]=l}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.color.setFromColor(a.data.color),a.darkColor.setFromColor(a.data.darkColor);return;case z.first:const x=a.color,_=a.darkColor,b=a.data.color,E=a.data.darkColor;x.add((b.r-x.r)*s,(b.g-x.g)*s,(b.b-x.b)*s,(b.a-x.a)*s),_.add((E.r-_.r)*s,(E.g-_.g)*s,(E.b-_.b)*s,0)}return}let u=0,c=0,f=0,p=0,g=0,v=0,y=0;if(r>=l[l.length-_e.ENTRIES]){const x=l.length;u=l[x+_e.PREV_R],c=l[x+_e.PREV_G],f=l[x+_e.PREV_B],p=l[x+_e.PREV_A],g=l[x+_e.PREV_R2],v=l[x+_e.PREV_G2],y=l[x+_e.PREV_B2]}else{const x=Tr.binarySearch(l,r,_e.ENTRIES);u=l[x+_e.PREV_R],c=l[x+_e.PREV_G],f=l[x+_e.PREV_B],p=l[x+_e.PREV_A],g=l[x+_e.PREV_R2],v=l[x+_e.PREV_G2],y=l[x+_e.PREV_B2];const _=l[x],b=this.getCurvePercent(x/_e.ENTRIES-1,1-(r-_)/(l[x+_e.PREV_TIME]-_));u+=(l[x+_e.R]-u)*b,c+=(l[x+_e.G]-c)*b,f+=(l[x+_e.B]-f)*b,p+=(l[x+_e.A]-p)*b,g+=(l[x+_e.R2]-g)*b,v+=(l[x+_e.G2]-v)*b,y+=(l[x+_e.B2]-y)*b}if(s==1)a.color.set(u,c,f,p),a.darkColor.set(g,v,y,1);else{const x=a.color,_=a.darkColor;o==z.setup&&(x.setFromColor(a.data.color),_.setFromColor(a.data.darkColor)),x.add((u-x.r)*s,(c-x.g)*s,(f-x.b)*s,(p-x.a)*s),_.add((g-_.r)*s,(v-_.g)*s,(y-_.b)*s,0)}}};let Sr=_e;Sr.ENTRIES=8;Sr.PREV_TIME=-8;Sr.PREV_R=-7;Sr.PREV_G=-6;Sr.PREV_B=-5;Sr.PREV_A=-4;Sr.PREV_R2=-3;Sr.PREV_G2=-2;Sr.PREV_B2=-1;Sr.R=1;Sr.G=2;Sr.B=3;Sr.A=4;Sr.R2=5;Sr.G2=6;Sr.B2=7;let Ro=class{constructor(t){this.frames=et.newFloatArray(t),this.attachmentNames=new Array(t)}getPropertyId(){return(4<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(!a.bone.active)return;if(h==he.mixOut){o==z.setup&&this.setAttachment(t,a,a.data.attachmentName);return}const l=this.frames;if(r<l[0]){(o==z.setup||o==z.first)&&this.setAttachment(t,a,a.data.attachmentName);return}let u=0;r>=l[l.length-1]?u=l.length-1:u=Tr.binarySearch(l,r,1)-1;const c=this.attachmentNames[u];t.slots[this.slotIndex].setAttachment(c==null?null:t.getAttachment(this.slotIndex,c))}setAttachment(t,e,r){e.setAttachment(r==null?null:t.getAttachment(this.slotIndex,r))}},Hb=null,$y=class extends Xn{constructor(t){super(t),this.frames=et.newFloatArray(t),this.frameVertices=new Array(t),Hb==null&&(Hb=et.newFloatArray(64))}getPropertyId(){return(6<<27)+Number(this.attachment.id)+this.slotIndex}setFrame(t,e,r){this.frames[t]=e,this.frameVertices[t]=r}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const l=a.getAttachment();if(!(l instanceof $a)||l.deformAttachment!=this.attachment)return;const u=a.deform;u.length==0&&(o=z.setup);const c=this.frameVertices,f=c[0].length,p=this.frames;if(r<p[0]){const E=l;switch(o){case z.setup:u.length=0;return;case z.first:if(s==1){u.length=0;break}const T=et.setArraySize(u,f);if(E.bones==null){const S=E.vertices;for(let C=0;C<f;C++)T[C]+=(S[C]-T[C])*s}else{s=1-s;for(let S=0;S<f;S++)T[S]*=s}}return}const g=et.setArraySize(u,f);if(r>=p[p.length-1]){const E=c[p.length-1];if(s==1)if(o==z.add){const T=l;if(T.bones==null){const S=T.vertices;for(let C=0;C<f;C++)g[C]+=E[C]-S[C]}else for(let S=0;S<f;S++)g[S]+=E[S]}else et.arrayCopy(E,0,g,0,f);else switch(o){case z.setup:{const S=l;if(S.bones==null){const C=S.vertices;for(let M=0;M<f;M++){const P=C[M];g[M]=P+(E[M]-P)*s}}else for(let C=0;C<f;C++)g[C]=E[C]*s;break}case z.first:case z.replace:for(let S=0;S<f;S++)g[S]+=(E[S]-g[S])*s;break;case z.add:const T=l;if(T.bones==null){const S=T.vertices;for(let C=0;C<f;C++)g[C]+=(E[C]-S[C])*s}else for(let S=0;S<f;S++)g[S]+=E[S]*s}return}const v=Tr.binarySearch(p,r),y=c[v-1],x=c[v],_=p[v],b=this.getCurvePercent(v-1,1-(r-_)/(p[v-1]-_));if(s==1)if(o==z.add){const E=l;if(E.bones==null){const T=E.vertices;for(let S=0;S<f;S++){const C=y[S];g[S]+=C+(x[S]-C)*b-T[S]}}else for(let T=0;T<f;T++){const S=y[T];g[T]+=S+(x[T]-S)*b}}else for(let E=0;E<f;E++){const T=y[E];g[E]=T+(x[E]-T)*b}else switch(o){case z.setup:{const T=l;if(T.bones==null){const S=T.vertices;for(let C=0;C<f;C++){const M=y[C],P=S[C];g[C]=P+(M+(x[C]-M)*b-P)*s}}else for(let S=0;S<f;S++){const C=y[S];g[S]=(C+(x[S]-C)*b)*s}break}case z.first:case z.replace:for(let T=0;T<f;T++){const S=y[T];g[T]+=(S+(x[T]-S)*b-g[T])*s}break;case z.add:const E=l;if(E.bones==null){const T=E.vertices;for(let S=0;S<f;S++){const C=y[S];g[S]+=(C+(x[S]-C)*b-T[S])*s}}else for(let T=0;T<f;T++){const S=y[T];g[T]+=(S+(x[T]-S)*b)*s}}}},yf=class{constructor(t){this.frames=et.newFloatArray(t),this.events=new Array(t)}getPropertyId(){return 7<<24}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,r,n,s,o,h){if(n==null)return;const a=this.frames,l=this.frames.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,n,s,o,h),e=-1;else if(e>=a[l-1])return;if(r<a[0])return;let u=0;if(e<a[0])u=0;else{u=Tr.binarySearch(a,e);const c=a[u];for(;u>0&&a[u-1]==c;)u--}for(;u<l&&r>=a[u];u++)n.push(this.events[u])}},Ll=class{constructor(t){this.frames=et.newFloatArray(t),this.drawOrders=new Array(t)}getPropertyId(){return 8<<24}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.drawOrders[t]=r}apply(t,e,r,n,s,o,h){const a=t.drawOrder,l=t.slots;if(h==he.mixOut&&o==z.setup){et.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}const u=this.frames;if(r<u[0]){(o==z.setup||o==z.first)&&et.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let c=0;r>=u[u.length-1]?c=u.length-1:c=Tr.binarySearch(u,r)-1;const f=this.drawOrders[c];if(f==null)et.arrayCopy(l,0,a,0,l.length);else for(let p=0,g=f.length;p<g;p++)a[p]=l[f[p]]}};const Ce=class extends Xn{constructor(t){super(t),this.frames=et.newFloatArray(t*Ce.ENTRIES)}getPropertyId(){return(9<<24)+this.ikConstraintIndex}setFrame(t,e,r,n,s,o,h){t*=Ce.ENTRIES,this.frames[t]=e,this.frames[t+Ce.MIX]=r,this.frames[t+Ce.SOFTNESS]=n,this.frames[t+Ce.BEND_DIRECTION]=s,this.frames[t+Ce.COMPRESS]=o?1:0,this.frames[t+Ce.STRETCH]=h?1:0}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.ikConstraints[this.ikConstraintIndex];if(!l.active)return;if(r<a[0]){switch(o){case z.setup:l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch;return;case z.first:l.mix+=(l.data.mix-l.mix)*s,l.softness+=(l.data.softness-l.softness)*s,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}return}if(r>=a[a.length-Ce.ENTRIES]){o==z.setup?(l.mix=l.data.mix+(a[a.length+Ce.PREV_MIX]-l.data.mix)*s,l.softness=l.data.softness+(a[a.length+Ce.PREV_SOFTNESS]-l.data.softness)*s,h==he.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=a[a.length+Ce.PREV_BEND_DIRECTION],l.compress=a[a.length+Ce.PREV_COMPRESS]!=0,l.stretch=a[a.length+Ce.PREV_STRETCH]!=0)):(l.mix+=(a[a.length+Ce.PREV_MIX]-l.mix)*s,l.softness+=(a[a.length+Ce.PREV_SOFTNESS]-l.softness)*s,h==he.mixIn&&(l.bendDirection=a[a.length+Ce.PREV_BEND_DIRECTION],l.compress=a[a.length+Ce.PREV_COMPRESS]!=0,l.stretch=a[a.length+Ce.PREV_STRETCH]!=0));return}const u=Tr.binarySearch(a,r,Ce.ENTRIES),c=a[u+Ce.PREV_MIX],f=a[u+Ce.PREV_SOFTNESS],p=a[u],g=this.getCurvePercent(u/Ce.ENTRIES-1,1-(r-p)/(a[u+Ce.PREV_TIME]-p));o==z.setup?(l.mix=l.data.mix+(c+(a[u+Ce.MIX]-c)*g-l.data.mix)*s,l.softness=l.data.softness+(f+(a[u+Ce.SOFTNESS]-f)*g-l.data.softness)*s,h==he.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=a[u+Ce.PREV_BEND_DIRECTION],l.compress=a[u+Ce.PREV_COMPRESS]!=0,l.stretch=a[u+Ce.PREV_STRETCH]!=0)):(l.mix+=(c+(a[u+Ce.MIX]-c)*g-l.mix)*s,l.softness+=(f+(a[u+Ce.SOFTNESS]-f)*g-l.softness)*s,h==he.mixIn&&(l.bendDirection=a[u+Ce.PREV_BEND_DIRECTION],l.compress=a[u+Ce.PREV_COMPRESS]!=0,l.stretch=a[u+Ce.PREV_STRETCH]!=0))}};let sn=Ce;sn.ENTRIES=6;sn.PREV_TIME=-6;sn.PREV_MIX=-5;sn.PREV_SOFTNESS=-4;sn.PREV_BEND_DIRECTION=-3;sn.PREV_COMPRESS=-2;sn.PREV_STRETCH=-1;sn.MIX=1;sn.SOFTNESS=2;sn.BEND_DIRECTION=3;sn.COMPRESS=4;sn.STRETCH=5;const ir=class extends Xn{constructor(t){super(t),this.frames=et.newFloatArray(t*ir.ENTRIES)}getPropertyId(){return(10<<24)+this.transformConstraintIndex}setFrame(t,e,r,n,s,o){t*=ir.ENTRIES,this.frames[t]=e,this.frames[t+ir.ROTATE]=r,this.frames[t+ir.TRANSLATE]=n,this.frames[t+ir.SCALE]=s,this.frames[t+ir.SHEAR]=o}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.transformConstraints[this.transformConstraintIndex];if(!l.active)return;if(r<a[0]){const g=l.data;switch(o){case z.setup:l.rotateMix=g.rotateMix,l.translateMix=g.translateMix,l.scaleMix=g.scaleMix,l.shearMix=g.shearMix;return;case z.first:l.rotateMix+=(g.rotateMix-l.rotateMix)*s,l.translateMix+=(g.translateMix-l.translateMix)*s,l.scaleMix+=(g.scaleMix-l.scaleMix)*s,l.shearMix+=(g.shearMix-l.shearMix)*s}return}let u=0,c=0,f=0,p=0;if(r>=a[a.length-ir.ENTRIES]){const g=a.length;u=a[g+ir.PREV_ROTATE],c=a[g+ir.PREV_TRANSLATE],f=a[g+ir.PREV_SCALE],p=a[g+ir.PREV_SHEAR]}else{const g=Tr.binarySearch(a,r,ir.ENTRIES);u=a[g+ir.PREV_ROTATE],c=a[g+ir.PREV_TRANSLATE],f=a[g+ir.PREV_SCALE],p=a[g+ir.PREV_SHEAR];const v=a[g],y=this.getCurvePercent(g/ir.ENTRIES-1,1-(r-v)/(a[g+ir.PREV_TIME]-v));u+=(a[g+ir.ROTATE]-u)*y,c+=(a[g+ir.TRANSLATE]-c)*y,f+=(a[g+ir.SCALE]-f)*y,p+=(a[g+ir.SHEAR]-p)*y}if(o==z.setup){const g=l.data;l.rotateMix=g.rotateMix+(u-g.rotateMix)*s,l.translateMix=g.translateMix+(c-g.translateMix)*s,l.scaleMix=g.scaleMix+(f-g.scaleMix)*s,l.shearMix=g.shearMix+(p-g.shearMix)*s}else l.rotateMix+=(u-l.rotateMix)*s,l.translateMix+=(c-l.translateMix)*s,l.scaleMix+=(f-l.scaleMix)*s,l.shearMix+=(p-l.shearMix)*s}};let Tn=ir;Tn.ENTRIES=5;Tn.PREV_TIME=-5;Tn.PREV_ROTATE=-4;Tn.PREV_TRANSLATE=-3;Tn.PREV_SCALE=-2;Tn.PREV_SHEAR=-1;Tn.ROTATE=1;Tn.TRANSLATE=2;Tn.SCALE=3;Tn.SHEAR=4;const ki=class extends Xn{constructor(t){super(t),this.frames=et.newFloatArray(t*ki.ENTRIES)}getPropertyId(){return(11<<24)+this.pathConstraintIndex}setFrame(t,e,r){t*=ki.ENTRIES,this.frames[t]=e,this.frames[t+ki.VALUE]=r}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(!l.active)return;if(r<a[0]){switch(o){case z.setup:l.position=l.data.position;return;case z.first:l.position+=(l.data.position-l.position)*s}return}let u=0;if(r>=a[a.length-ki.ENTRIES])u=a[a.length+ki.PREV_VALUE];else{const c=Tr.binarySearch(a,r,ki.ENTRIES);u=a[c+ki.PREV_VALUE];const f=a[c],p=this.getCurvePercent(c/ki.ENTRIES-1,1-(r-f)/(a[c+ki.PREV_TIME]-f));u+=(a[c+ki.VALUE]-u)*p}o==z.setup?l.position=l.data.position+(u-l.data.position)*s:l.position+=(u-l.position)*s}};let ys=ki;ys.ENTRIES=2;ys.PREV_TIME=-2;ys.PREV_VALUE=-1;ys.VALUE=1;let Wy=class Sa extends ys{constructor(t){super(t)}getPropertyId(){return(12<<24)+this.pathConstraintIndex}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(!l.active)return;if(r<a[0]){switch(o){case z.setup:l.spacing=l.data.spacing;return;case z.first:l.spacing+=(l.data.spacing-l.spacing)*s}return}let u=0;if(r>=a[a.length-Sa.ENTRIES])u=a[a.length+Sa.PREV_VALUE];else{const c=Tr.binarySearch(a,r,Sa.ENTRIES);u=a[c+Sa.PREV_VALUE];const f=a[c],p=this.getCurvePercent(c/Sa.ENTRIES-1,1-(r-f)/(a[c+Sa.PREV_TIME]-f));u+=(a[c+Sa.VALUE]-u)*p}o==z.setup?l.spacing=l.data.spacing+(u-l.data.spacing)*s:l.spacing+=(u-l.spacing)*s}};const gn=class extends Xn{constructor(t){super(t),this.frames=et.newFloatArray(t*gn.ENTRIES)}getPropertyId(){return(13<<24)+this.pathConstraintIndex}setFrame(t,e,r,n){t*=gn.ENTRIES,this.frames[t]=e,this.frames[t+gn.ROTATE]=r,this.frames[t+gn.TRANSLATE]=n}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(!l.active)return;if(r<a[0]){switch(o){case z.setup:l.rotateMix=l.data.rotateMix,l.translateMix=l.data.translateMix;return;case z.first:l.rotateMix+=(l.data.rotateMix-l.rotateMix)*s,l.translateMix+=(l.data.translateMix-l.translateMix)*s}return}let u=0,c=0;if(r>=a[a.length-gn.ENTRIES])u=a[a.length+gn.PREV_ROTATE],c=a[a.length+gn.PREV_TRANSLATE];else{const f=Tr.binarySearch(a,r,gn.ENTRIES);u=a[f+gn.PREV_ROTATE],c=a[f+gn.PREV_TRANSLATE];const p=a[f],g=this.getCurvePercent(f/gn.ENTRIES-1,1-(r-p)/(a[f+gn.PREV_TIME]-p));u+=(a[f+gn.ROTATE]-u)*g,c+=(a[f+gn.TRANSLATE]-c)*g}o==z.setup?(l.rotateMix=l.data.rotateMix+(u-l.data.rotateMix)*s,l.translateMix=l.data.translateMix+(c-l.data.translateMix)*s):(l.rotateMix+=(u-l.rotateMix)*s,l.translateMix+=(c-l.translateMix)*s)}};let Wi=gn;Wi.ENTRIES=3;Wi.PREV_TIME=-3;Wi.PREV_ROTATE=-2;Wi.PREV_TRANSLATE=-1;Wi.ROTATE=1;Wi.TRANSLATE=2;const sr=class{constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Hy(this),this.propertyIDs=new $S,this.animationsChanged=!1,this.trackEntryPool=new gf(()=>new xf),this.data=t}update(t){t*=this.timeScale;const e=this.tracks;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s==null)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let o=t*s.timeScale;if(s.delay>0){if(s.delay-=o,s.delay>0)continue;o=-s.delay,s.delay=0}let h=s.next;if(h!=null){const a=s.trackLast-h.delay;if(a>=0){for(h.delay=0,h.trackTime+=s.timeScale==0?0:(a/s.timeScale+t)*h.timeScale,s.trackTime+=o,this.setCurrent(r,h,!0);h.mixingFrom!=null;)h.mixTime+=t,h=h.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&s.mixingFrom==null){e[r]=null,this.queue.end(s),this.disposeNext(s);continue}if(s.mixingFrom!=null&&this.updateMixingFrom(s,t)){let a=s.mixingFrom;for(s.mixingFrom=null,a!=null&&(a.mixingTo=null);a!=null;)this.queue.end(a),a=a.mixingFrom}s.trackTime+=o}this.queue.drain()}updateMixingFrom(t,e){const r=t.mixingFrom;if(r==null)return!0;const n=this.updateMixingFrom(r,e);return r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((r.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=r.mixingFrom,r.mixingFrom!=null&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),n):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1)}apply(t){if(t==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();const e=this.events,r=this.tracks;let n=!1;for(let h=0,a=r.length;h<a;h++){const l=r[h];if(l==null||l.delay>0)continue;n=!0;const u=h==0?z.first:l.mixBlend;let c=l.alpha;l.mixingFrom!=null?c*=this.applyMixingFrom(l,t,u):l.trackTime>=l.trackEnd&&l.next==null&&(c=0);const f=l.animationLast,p=l.getAnimationTime(),g=l.animation.timelines.length,v=l.animation.timelines;if(h==0&&c==1||u==z.add)for(let y=0;y<g;y++){const x=v[y];x instanceof Ro?this.applyAttachmentTimeline(x,t,p,u,!0):x.apply(t,f,p,e,c,u,he.mixIn)}else{const y=l.timelineMode,x=l.timelinesRotation.length==0;x&&et.setArraySize(l.timelinesRotation,g<<1,null);const _=l.timelinesRotation;for(let b=0;b<g;b++){const E=v[b],T=y[b]==sr.SUBSEQUENT?u:z.setup;E instanceof tn?this.applyRotateTimeline(E,t,p,c,T,_,b<<1,x):E instanceof Ro?this.applyAttachmentTimeline(E,t,p,u,!0):E.apply(t,f,p,e,c,T,he.mixIn)}}this.queueEvents(l,p),e.length=0,l.nextAnimationLast=p,l.nextTrackLast=l.trackTime}const s=this.unkeyedState+sr.SETUP,o=t.slots;for(let h=0,a=t.slots.length;h<a;h++){const l=o[h];if(l.attachmentState==s){const u=l.data.attachmentName;l.setAttachment(u==null?null:t.getAttachment(l.data.index,u))}}return this.unkeyedState+=2,this.queue.drain(),n}applyMixingFrom(t,e,r){const n=t.mixingFrom;n.mixingFrom!=null&&this.applyMixingFrom(n,e,r);let s=0;t.mixDuration==0?(s=1,r==z.first&&(r=z.setup)):(s=t.mixTime/t.mixDuration,s>1&&(s=1),r!=z.first&&(r=n.mixBlend));const o=s<n.eventThreshold?this.events:null,h=s<n.attachmentThreshold,a=s<n.drawOrderThreshold,l=n.animationLast,u=n.getAnimationTime(),c=n.animation.timelines.length,f=n.animation.timelines,p=n.alpha*t.interruptAlpha,g=p*(1-s);if(r==z.add)for(let v=0;v<c;v++)f[v].apply(e,l,u,o,g,r,he.mixOut);else{const v=n.timelineMode,y=n.timelineHoldMix,x=n.timelinesRotation.length==0;x&&et.setArraySize(n.timelinesRotation,c<<1,null);const _=n.timelinesRotation;n.totalAlpha=0;for(let b=0;b<c;b++){const E=f[b];let T=he.mixOut,S,C=0;switch(v[b]){case sr.SUBSEQUENT:if(!a&&E instanceof Ll)continue;S=r,C=g;break;case sr.FIRST:S=z.setup,C=g;break;case sr.HOLD_SUBSEQUENT:S=r,C=p;break;case sr.HOLD_FIRST:S=z.setup,C=p;break;default:S=z.setup;const M=y[b];C=p*Math.max(0,1-M.mixTime/M.mixDuration);break}n.totalAlpha+=C,E instanceof tn?this.applyRotateTimeline(E,e,u,C,S,_,b<<1,x):E instanceof Ro?this.applyAttachmentTimeline(E,e,u,S,h):(a&&E instanceof Ll&&S==z.setup&&(T=he.mixIn),E.apply(e,l,u,o,C,S,T))}}return t.mixDuration>0&&this.queueEvents(n,u),this.events.length=0,n.nextAnimationLast=u,n.nextTrackLast=n.trackTime,s}applyAttachmentTimeline(t,e,r,n,s){const o=e.slots[t.slotIndex];if(!o.bone.active)return;const h=t.frames;if(r<h[0])(n==z.setup||n==z.first)&&this.setAttachment(e,o,o.data.attachmentName,s);else{let a;r>=h[h.length-1]?a=h.length-1:a=Tr.binarySearch(h,r)-1,this.setAttachment(e,o,t.attachmentNames[a],s)}o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+sr.SETUP)}setAttachment(t,e,r,n){e.setAttachment(r==null?null:t.getAttachment(e.data.index,r)),n&&(e.attachmentState=this.unkeyedState+sr.CURRENT)}applyRotateTimeline(t,e,r,n,s,o,h,a){if(a&&(o[h]=0),n==1){t.apply(e,0,r,null,1,s,he.mixIn);return}const l=t,u=l.frames,c=e.bones[l.boneIndex];if(!c.active)return;let f=0,p=0;if(r<u[0])switch(s){case z.setup:c.rotation=c.data.rotation;default:return;case z.first:f=c.rotation,p=c.data.rotation}else if(f=s==z.setup?c.data.rotation:c.rotation,r>=u[u.length-tn.ENTRIES])p=c.data.rotation+u[u.length+tn.PREV_ROTATION];else{const y=Tr.binarySearch(u,r,tn.ENTRIES),x=u[y+tn.PREV_ROTATION],_=u[y],b=l.getCurvePercent((y>>1)-1,1-(r-_)/(u[y+tn.PREV_TIME]-_));p=u[y+tn.ROTATION]-x,p-=(16384-(16384.499999999996-p/360|0))*360,p=x+p*b+c.data.rotation,p-=(16384-(16384.499999999996-p/360|0))*360}let g=0,v=p-f;if(v-=(16384-(16384.499999999996-v/360|0))*360,v==0)g=o[h];else{let y=0,x=0;a?(y=0,x=v):(y=o[h],x=o[h+1]);const _=v>0;let b=y>=0;q.signum(x)!=q.signum(v)&&Math.abs(x)<=90&&(Math.abs(y)>180&&(y+=360*q.signum(y)),b=_),g=v+y-y%360,b!=_&&(g+=360*q.signum(y)),o[h]=g}o[h+1]=v,f+=g*n,c.rotation=f-(16384-(16384.499999999996-f/360|0))*360}queueEvents(t,e){const r=t.animationStart,n=t.animationEnd,s=n-r,o=t.trackLast%s,h=this.events;let a=0;const l=h.length;for(;a<l;a++){const c=h[a];if(c.time<o)break;c.time>n||this.queue.event(t,c)}let u=!1;for(t.loop?u=s==0||o>t.trackTime%s:u=e>=n&&t.animationLast<n,u&&this.queue.complete(t);a<l;a++)h[a].time<r||this.queue.event(t,h[a])}clearTracks(){const t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,r=this.tracks.length;e<r;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;const e=this.tracks[t];if(e==null)return;this.queue.end(e),this.disposeNext(e);let r=e;for(;;){const n=r.mixingFrom;if(n==null)break;this.queue.end(n),r.mixingFrom=null,r.mixingTo=null,r=n}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,r){const n=this.expandToIndex(t);this.tracks[t]=e,n!=null&&(r&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,n.mixingFrom!=null&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,r){const n=this.data.skeletonData.findAnimation(e);if(n==null)throw new Error(`Animation not found: ${e}`);return this.setAnimationWith(t,n,r)}setAnimationWith(t,e,r){if(e==null)throw new Error("animation cannot be null.");let n=!0,s=this.expandToIndex(t);s!=null&&(s.nextTrackLast==-1?(this.tracks[t]=s.mixingFrom,this.queue.interrupt(s),this.queue.end(s),this.disposeNext(s),s=s.mixingFrom,n=!1):this.disposeNext(s));const o=this.trackEntry(t,e,r,s);return this.setCurrent(t,o,n),this.queue.drain(),o}addAnimation(t,e,r,n){const s=this.data.skeletonData.findAnimation(e);if(s==null)throw new Error(`Animation not found: ${e}`);return this.addAnimationWith(t,s,r,n)}addAnimationWith(t,e,r,n){if(e==null)throw new Error("animation cannot be null.");let s=this.expandToIndex(t);if(s!=null)for(;s.next!=null;)s=s.next;const o=this.trackEntry(t,e,r,s);if(s==null)this.setCurrent(t,o,!0),this.queue.drain();else if(s.next=o,n<=0){const h=s.animationEnd-s.animationStart;h!=0?(s.loop?n+=h*(1+(s.trackTime/h|0)):n+=Math.max(h,s.trackTime),n-=this.data.getMix(s.animation,e)):n=s.trackTime}return o.delay=n,o}setEmptyAnimation(t,e){const r=this.setAnimationWith(t,sr.emptyAnimation,!1);return r.mixDuration=e,r.trackEnd=e,r}addEmptyAnimation(t,e,r){r<=0&&(r-=e);const n=this.addAnimationWith(t,sr.emptyAnimation,!1,r);return n.mixDuration=e,n.trackEnd=e,n}setEmptyAnimations(t){const e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let r=0,n=this.tracks.length;r<n;r++){const s=this.tracks[r];s!=null&&this.setEmptyAnimation(s.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(et.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,r,n){const s=this.trackEntryPool.obtain();return s.trackIndex=t,s.animation=e,s.loop=r,s.holdPrevious=!1,s.eventThreshold=0,s.attachmentThreshold=0,s.drawOrderThreshold=0,s.animationStart=0,s.animationEnd=e.duration,s.animationLast=-1,s.nextAnimationLast=-1,s.delay=0,s.trackTime=0,s.trackLast=-1,s.nextTrackLast=-1,s.trackEnd=Number.MAX_VALUE,s.timeScale=1,s.alpha=1,s.interruptAlpha=1,s.mixTime=0,s.mixDuration=n==null?0:this.data.getMix(n.animation,e),s.mixBlend=z.replace,s}disposeNext(t){let e=t.next;for(;e!=null;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();for(let t=0,e=this.tracks.length;t<e;t++){let r=this.tracks[t];if(r!=null){for(;r.mixingFrom!=null;)r=r.mixingFrom;do(r.mixingFrom==null||r.mixBlend!=z.add)&&this.computeHold(r),r=r.mixingTo;while(r!=null)}}}computeHold(t){const e=t.mixingTo,r=t.animation.timelines,n=t.animation.timelines.length,s=et.setArraySize(t.timelineMode,n);t.timelineHoldMix.length=0;const o=et.setArraySize(t.timelineHoldMix,n),h=this.propertyIDs;if(e!=null&&e.holdPrevious){for(let a=0;a<n;a++)s[a]=h.add(r[a].getPropertyId())?sr.HOLD_FIRST:sr.HOLD_SUBSEQUENT;return}t:for(let a=0;a<n;a++){const l=r[a],u=l.getPropertyId();if(!h.add(u))s[a]=sr.SUBSEQUENT;else if(e==null||l instanceof Ro||l instanceof Ll||l instanceof yf||!e.animation.hasTimeline(u))s[a]=sr.FIRST;else{for(let c=e.mixingTo;c!=null;c=c.mixingTo)if(!c.animation.hasTimeline(u)){if(t.mixDuration>0){s[a]=sr.HOLD_MIX,o[a]=c;continue t}break}s[a]=sr.HOLD_FIRST}}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(t==null)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}setAnimationByName(t,e,r){sr.deprecatedWarning1||(sr.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,r)}addAnimationByName(t,e,r,n){sr.deprecatedWarning2||(sr.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,r,n)}hasAnimation(t){return this.data.skeletonData.findAnimation(t)!==null}hasAnimationByName(t){return sr.deprecatedWarning3||(sr.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)}};let ai=sr;ai.emptyAnimation=new Tr("<empty>",[],0);ai.SUBSEQUENT=0;ai.FIRST=1;ai.HOLD_SUBSEQUENT=2;ai.HOLD_FIRST=3;ai.HOLD_MIX=4;ai.SETUP=1;ai.CURRENT=2;ai.deprecatedWarning1=!1;ai.deprecatedWarning2=!1;ai.deprecatedWarning3=!1;const Ds=class{constructor(){this.mixBlend=z.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}get time(){return Ds.deprecatedWarning1||(Ds.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(t){Ds.deprecatedWarning1||(Ds.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t}get endTime(){return Ds.deprecatedWarning2||(Ds.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(t){Ds.deprecatedWarning2||(Ds.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}};let xf=Ds;xf.deprecatedWarning1=!1;xf.deprecatedWarning2=!1;const ey=class{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(Bn.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(Bn.interrupt),this.objects.push(t)}end(t){this.objects.push(Bn.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(Bn.dispose),this.objects.push(t)}complete(t){this.objects.push(Bn.complete),this.objects.push(t)}event(t,e){this.objects.push(Bn.event),this.objects.push(t),this.objects.push(e)}deprecateStuff(){return ey.deprecatedWarning1||(ey.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const t=this.objects,e=this.animState.listeners;for(let r=0;r<t.length;r+=2){const n=t[r],s=t[r+1];switch(n){case Bn.start:s.listener!=null&&s.listener.start&&s.listener.start(s);for(let a=0;a<e.length;a++)e[a].start&&e[a].start(s);s.onStart&&this.deprecateStuff()&&s.onStart(s.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(s.trackIndex);break;case Bn.interrupt:s.listener!=null&&s.listener.interrupt&&s.listener.interrupt(s);for(let a=0;a<e.length;a++)e[a].interrupt&&e[a].interrupt(s);break;case Bn.end:s.listener!=null&&s.listener.end&&s.listener.end(s);for(let a=0;a<e.length;a++)e[a].end&&e[a].end(s);s.onEnd&&this.deprecateStuff()&&s.onEnd(s.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(s.trackIndex);case Bn.dispose:s.listener!=null&&s.listener.dispose&&s.listener.dispose(s);for(let a=0;a<e.length;a++)e[a].dispose&&e[a].dispose(s);this.animState.trackEntryPool.free(s);break;case Bn.complete:s.listener!=null&&s.listener.complete&&s.listener.complete(s);for(let a=0;a<e.length;a++)e[a].complete&&e[a].complete(s);const o=q.toInt(s.loopsCount());s.onComplete&&this.deprecateStuff()&&s.onComplete(s.trackIndex,o),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(s.trackIndex,o);break;case Bn.event:const h=t[r+++2];s.listener!=null&&s.listener.event&&s.listener.event(s,h);for(let a=0;a<e.length;a++)e[a].event&&e[a].event(s,h);s.onEvent&&this.deprecateStuff()&&s.onEvent(s.trackIndex,h),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(s.trackIndex,h);break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}};let Hy=ey;Hy.deprecatedWarning1=!1;var Bn=(i=>(i[i.start=0]="start",i[i.interrupt=1]="interrupt",i[i.end=2]="end",i[i.dispose=3]="dispose",i[i.complete=4]="complete",i[i.event=5]="event",i))(Bn||{});let FB=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}};const ry=class{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,t==null)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,r){const n=this.skeletonData.findAnimation(t);if(n==null)throw new Error(`Animation not found: ${t}`);const s=this.skeletonData.findAnimation(e);if(s==null)throw new Error(`Animation not found: ${e}`);this.setMixWith(n,s,r)}setMixByName(t,e,r){ry.deprecatedWarning1||(ry.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,e,r)}setMixWith(t,e,r){if(t==null)throw new Error("from cannot be null.");if(e==null)throw new Error("to cannot be null.");const n=`${t.name}.${e.name}`;this.animationToMixTime[n]=r}getMix(t,e){const r=`${t.name}.${e.name}`,n=this.animationToMixTime[r];return n===void 0?this.defaultMix:n}};let zy=ry;zy.deprecatedWarning1=!1;let jy=class{constructor(t){this.atlas=t}newRegionAttachment(t,e,r){const n=this.atlas.findRegion(r);if(n==null)throw new Error(`Region not found in atlas: ${r} (region attachment: ${e})`);const s=new ae(e);return s.region=n,s}newMeshAttachment(t,e,r){const n=this.atlas.findRegion(r);if(n==null)throw new Error(`Region not found in atlas: ${r} (mesh attachment: ${e})`);const s=new vf(e);return s.region=n,s}newBoundingBoxAttachment(t,e){return new KS(e)}newPathAttachment(t,e){return new hu(e)}newPointAttachment(t,e){return new eA(e)}newClippingAttachment(t,e){return new QS(e)}},ny=class{constructor(t,e,r){if(this.matrix=new Ze,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}isActive(){return this.active}update(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,r,n,s,o,h){this.ax=t,this.ay=e,this.arotation=r,this.ascaleX=n,this.ascaleY=s,this.ashearX=o,this.ashearY=h,this.appliedValid=!0;const a=this.parent,l=this.matrix,u=this.skeleton.scaleX,c=-this.skeleton.scaleY;if(a==null){const y=this.skeleton,x=r+90+h;l.a=q.cosDeg(r+o)*n*u,l.c=q.cosDeg(x)*s*u,l.b=q.sinDeg(r+o)*n*c,l.d=q.sinDeg(x)*s*c,l.tx=t*u+y.x,l.ty=e*c+y.y;return}let f=a.matrix.a,p=a.matrix.c,g=a.matrix.b,v=a.matrix.d;switch(l.tx=f*t+p*e+a.matrix.tx,l.ty=g*t+v*e+a.matrix.ty,this.data.transformMode){case ne.Normal:{const y=r+90+h,x=q.cosDeg(r+o)*n,_=q.cosDeg(y)*s,b=q.sinDeg(r+o)*n,E=q.sinDeg(y)*s;l.a=f*x+p*b,l.c=f*_+p*E,l.b=g*x+v*b,l.d=g*_+v*E;return}case ne.OnlyTranslation:{const y=r+90+h;l.a=q.cosDeg(r+o)*n,l.c=q.cosDeg(y)*s,l.b=q.sinDeg(r+o)*n,l.d=q.sinDeg(y)*s;break}case ne.NoRotationOrReflection:{let y=f*f+g*g,x=0;y>1e-4?(y=Math.abs(f*v-p*g)/y,f/=this.skeleton.scaleX,g/=this.skeleton.scaleY,p=g*y,v=f*y,x=Math.atan2(g,f)*q.radDeg):(f=0,g=0,x=90-Math.atan2(v,p)*q.radDeg);const _=r+o-x,b=r+h-x+90,E=q.cosDeg(_)*n,T=q.cosDeg(b)*s,S=q.sinDeg(_)*n,C=q.sinDeg(b)*s;l.a=f*E-p*S,l.c=f*T-p*C,l.b=g*E+v*S,l.d=g*T+v*C;break}case ne.NoScale:case ne.NoScaleOrReflection:{const y=q.cosDeg(r),x=q.sinDeg(r);let _=(f*y+p*x)/u,b=(g*y+v*x)/c,E=Math.sqrt(_*_+b*b);E>1e-5&&(E=1/E),_*=E,b*=E,E=Math.sqrt(_*_+b*b),this.data.transformMode==ne.NoScale&&f*v-p*g<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY>0)&&(E=-E);const T=Math.PI/2+Math.atan2(b,_),S=Math.cos(T)*E,C=Math.sin(T)*E,M=q.cosDeg(o)*n,P=q.cosDeg(90+h)*s,F=q.sinDeg(o)*n,V=q.sinDeg(90+h)*s;l.a=_*M+S*F,l.c=_*P+S*V,l.b=b*M+C*F,l.d=b*P+C*V;break}}l.a*=u,l.c*=u,l.b*=c,l.d*=c}setToSetupPose(){const t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*q.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*q.radDeg}getWorldScaleX(){const t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)}getWorldScaleY(){const t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)}updateAppliedTransform(){this.appliedValid=!0;const t=this.parent,e=this.matrix;if(t==null){this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*q.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*q.radDeg;return}const r=t.matrix,n=1/(r.a*r.d-r.b*r.c),s=e.tx-r.tx,o=e.ty-r.ty;this.ax=s*r.d*n-o*r.c*n,this.ay=o*r.a*n-s*r.b*n;const h=n*r.d,a=n*r.a,l=n*r.c,u=n*r.b,c=h*e.a-l*e.b,f=h*e.c-l*e.d,p=a*e.b-u*e.a,g=a*e.d-u*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+p*p),this.ascaleX>1e-4){const v=c*g-f*p;this.ascaleY=v/this.ascaleX,this.ashearY=Math.atan2(c*f+p*g,v)*q.radDeg,this.arotation=Math.atan2(p,c)*q.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(f*f+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,f)*q.radDeg}worldToLocal(t){const e=this.matrix,r=e.a,n=e.c,s=e.b,o=e.d,h=1/(r*o-n*s),a=t.x-e.tx,l=t.y-e.ty;return t.x=a*o*h-l*n*h,t.y=l*r*h-a*s*h,t}localToWorld(t){const e=this.matrix,r=t.x,n=t.y;return t.x=r*e.a+n*e.c+e.tx,t.y=r*e.b+n*e.d+e.ty,t}worldToLocalRotation(t){const e=q.sinDeg(t),r=q.cosDeg(t),n=this.matrix;return Math.atan2(n.a*e-n.b*r,n.d*r-n.c*e)*q.radDeg}localToWorldRotation(t){const e=q.sinDeg(t),r=q.cosDeg(t),n=this.matrix;return Math.atan2(r*n.b+e*n.d,r*n.a+e*n.c)*q.radDeg}rotateWorld(t){const e=this.matrix,r=e.a,n=e.c,s=e.b,o=e.d,h=q.cosDeg(t),a=q.sinDeg(t);e.a=h*r-a*s,e.c=h*n-a*o,e.b=a*r+h*s,e.d=a*n+h*o,this.appliedValid=!1}},qy=class{constructor(t,e,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=ne.Normal,this.skinRequired=!1,this.color=new bt,t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r}},wf=class{constructor(t,e,r){this.name=t,this.order=e,this.skinRequired=r}},Ky=class{constructor(t,e){if(e==null)throw new Error("data cannot be null.");this.time=t,this.data=e}},Zy=class{constructor(t){this.name=t}},aA=class{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}apply(){this.update()}update(){const t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}}apply1(t,e,r,n,s,o,h){t.appliedValid||t.updateAppliedTransform();const a=t.parent.matrix,l=a.a;let u=a.c;const c=a.b;let f=a.d,p=-t.ashearX-t.arotation,g=0,v=0;switch(t.data.transformMode){case ne.OnlyTranslation:g=e-t.worldX,v=r-t.worldY;break;case ne.NoRotationOrReflection:const _=Math.abs(l*f-u*c)/(l*l+c*c),b=l/t.skeleton.scaleX,E=c/t.skeleton.scaleY;u=-E*_*t.skeleton.scaleX,f=b*_*t.skeleton.scaleY,p+=Math.atan2(E,b)*q.radDeg;default:const T=e-a.tx,S=r-a.ty,C=l*f-u*c;g=(T*f-S*u)/C-t.ax,v=(S*l-T*c)/C-t.ay}p+=Math.atan2(v,g)*q.radDeg,t.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);let y=t.ascaleX,x=t.ascaleY;if(n||s){switch(t.data.transformMode){case ne.NoScale:case ne.NoScaleOrReflection:g=e-t.worldX,v=r-t.worldY}const _=t.data.length*y,b=Math.sqrt(g*g+v*v);if(n&&b<_||s&&b>_&&_>1e-4){const E=(b/_-1)*h+1;y*=E,o&&(x*=E)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+p*h,y,x,t.ashearX,t.ashearY)}apply2(t,e,r,n,s,o,h,a){if(a==0){e.updateWorldTransform();return}t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();const l=t.ax,u=t.ay;let c=t.ascaleX,f=c,p=t.ascaleY,g=e.ascaleX;const v=t.matrix;let y=0,x=0,_=0;c<0?(c=-c,y=180,_=-1):(y=0,_=1),p<0&&(p=-p,_=-_),g<0?(g=-g,x=180):x=0;const b=e.ax;let E=0,T=0,S=0,C=v.a,M=v.c,P=v.b,F=v.d;const V=Math.abs(c-p)<=1e-4;V?(E=e.ay,T=C*b+M*E+v.tx,S=P*b+F*E+v.ty):(E=0,T=C*b+v.tx,S=P*b+v.ty);const O=t.parent.matrix;C=O.a,M=O.c,P=O.b,F=O.d;const U=1/(C*F-M*P);let H=T-O.tx,W=S-O.ty;const B=(H*F-W*M)*U-l,L=(W*C-H*P)*U-u,N=Math.sqrt(B*B+L*L);let Y=e.data.length*g,D,k;if(N<1e-4){this.apply1(t,r,n,!1,o,!1,a),e.updateWorldTransformWith(b,E,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}H=r-O.tx,W=n-O.ty;let X=(H*F-W*M)*U-l,$=(W*C-H*P)*U-u,j=X*X+$*$;if(h!=0){h*=c*(g+1)/2;const ct=Math.sqrt(j),ft=ct-N-Y*c+h;if(ft>0){let mt=Math.min(1,ft/(h*2))-1;mt=(ft-h*(1-mt*mt))/ct,X-=mt*X,$-=mt*$,j=X*X+$*$}}t:if(V){Y*=c;let ct=(j-N*N-Y*Y)/(2*N*Y);ct<-1?ct=-1:ct>1&&(ct=1,o&&(f*=(Math.sqrt(j)/(N+Y)-1)*a+1)),k=Math.acos(ct)*s,C=N+Y*ct,M=Y*Math.sin(k),D=Math.atan2($*C-X*M,X*C+$*M)}else{C=c*Y,M=p*Y;const ct=C*C,ft=M*M,mt=Math.atan2($,X);P=ft*N*N+ct*j-ct*ft;const lt=-2*ft*N,gt=ft-ct;if(F=lt*lt-4*gt*P,F>=0){let Wt=Math.sqrt(F);lt<0&&(Wt=-Wt),Wt=-(lt+Wt)/2;const Qt=Wt/gt,ee=P/Wt,se=Math.abs(Qt)<Math.abs(ee)?Qt:ee;if(se*se<=j){W=Math.sqrt(j-se*se)*s,D=mt-Math.atan2(W,se),k=Math.atan2(W/p,(se-N)/c);break t}}let yt=q.PI,St=N-C,Rt=St*St,it=0,ut=0,Ct=N+C,zt=Ct*Ct,jt=0;P=-C*N/(ct-ft),P>=-1&&P<=1&&(P=Math.acos(P),H=C*Math.cos(P)+N,W=M*Math.sin(P),F=H*H+W*W,F<Rt&&(yt=P,Rt=F,St=H,it=W),F>zt&&(ut=P,zt=F,Ct=H,jt=W)),j<=(Rt+zt)/2?(D=mt-Math.atan2(it*s,St),k=yt*s):(D=mt-Math.atan2(jt*s,Ct),k=ut*s)}const K=Math.atan2(E,b)*_;let tt=t.arotation;D=(D-K)*q.radDeg+y-tt,D>180?D-=360:D<-180&&(D+=360),t.updateWorldTransformWith(l,u,tt+D*a,f,t.ascaleY,0,0),tt=e.arotation,k=((k+K)*q.radDeg-e.ashearX)*_+x-tt,k>180?k-=360:k<-180&&(k+=360),e.updateWorldTransformWith(b,E,tt+k*a,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},Qy=class extends wf{constructor(t){super(t,0,!1),this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}},Jy=class extends wf{constructor(t){super(t,0,!1),this.bones=new Array}};var Hr=(i=>(i[i.Length=0]="Length",i[i.Fixed=1]="Fixed",i[i.Percent=2]="Percent",i))(Hr||{});const wo=class{constructor(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let r=0,n=t.bones.length;r<n;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}isActive(){return this.active}apply(){this.update()}update(){const t=this.target.getAttachment();if(!(t instanceof hu))return;const e=this.rotateMix,r=this.translateMix,n=r>0,s=e>0;if(!n&&!s)return;const o=this.data,h=o.spacingMode,a=h==Hr.Length,l=o.rotateMode,u=l==br.Tangent,c=l==br.ChainScale,f=this.bones.length,p=u?f:f+1,g=this.bones,v=et.setArraySize(this.spaces,p);let y=null;const x=this.spacing;if(c||a){c&&(y=et.setArraySize(this.lengths,f));for(let C=0,M=p-1;C<M;){const P=g[C],F=P.data.length;if(F<wo.epsilon)c&&(y[C]=0),v[++C]=0;else{const V=F*P.matrix.a,O=F*P.matrix.b,U=Math.sqrt(V*V+O*O);c&&(y[C]=U),v[++C]=(a?F+x:x)*U/F}}}else for(let C=1;C<p;C++)v[C]=x;const _=this.computeWorldPositions(t,p,u,o.positionMode==ur.Percent,h==Hr.Percent);let b=_[0],E=_[1],T=o.offsetRotation,S=!1;if(T==0)S=l==br.Chain;else{S=!1;const C=this.target.bone.matrix;T*=C.a*C.d-C.b*C.c>0?q.degRad:-q.degRad}for(let C=0,M=3;C<f;C++,M+=3){const P=g[C],F=P.matrix;F.tx+=(b-F.tx)*r,F.ty+=(E-F.ty)*r;const V=_[M],O=_[M+1],U=V-b,H=O-E;if(c){const W=y[C];if(W!=0){const B=(Math.sqrt(U*U+H*H)/W-1)*e+1;F.a*=B,F.b*=B}}if(b=V,E=O,s){const W=F.a,B=F.c,L=F.b,N=F.d;let Y=0,D=0,k=0;if(u&&(u?Y=_[M-1]:v[C+1]==0?Y=_[M+2]:Y=Math.atan2(H,U)),Y-=Math.atan2(L,W),S){D=Math.cos(Y),k=Math.sin(Y);const X=P.data.length;b+=(X*(D*W-k*L)-U)*e,E+=(X*(k*W+D*L)-H)*e}else Y+=T;Y>q.PI?Y-=q.PI2:Y<-q.PI&&(Y+=q.PI2),Y*=e,D=Math.cos(Y),k=Math.sin(Y),F.a=D*W-k*L,F.c=D*B-k*N,F.b=k*W+D*L,F.d=k*B+D*N}P.appliedValid=!1}}computeWorldPositions(t,e,r,n,s){const o=this.target;let h=this.position;const a=this.spaces,l=et.setArraySize(this.positions,e*3+2);let u=null;const c=t.closed;let f=t.worldVerticesLength,p=f/6,g=wo.NONE;if(!t.constantSpeed){const Y=t.lengths;p-=c?1:2;const D=Y[p];if(n&&(h*=D),s)for(let k=0;k<e;k++)a[k]*=D;u=et.setArraySize(this.world,8);for(let k=0,X=0,$=0;k<e;k++,X+=3){const j=a[k];h+=j;let K=h;if(c)K%=D,K<0&&(K+=D),$=0;else if(K<0){g!=wo.BEFORE&&(g=wo.BEFORE,t.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(K,u,0,l,X);continue}else if(K>D){g!=wo.AFTER&&(g=wo.AFTER,t.computeWorldVertices(o,f-6,4,u,0,2)),this.addAfterPosition(K-D,u,0,l,X);continue}for(;;$++){const tt=Y[$];if(!(K>tt)){if($==0)K/=tt;else{const ct=Y[$-1];K=(K-ct)/(tt-ct)}break}}$!=g&&(g=$,c&&$==p?(t.computeWorldVertices(o,f-4,4,u,0,2),t.computeWorldVertices(o,0,4,u,4,2)):t.computeWorldVertices(o,$*6+2,8,u,0,2)),this.addCurvePosition(K,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,X,r||k>0&&j==0)}return l}c?(f+=2,u=et.setArraySize(this.world,f),t.computeWorldVertices(o,2,f-4,u,0,2),t.computeWorldVertices(o,0,2,u,f-4,2),u[f-2]=u[0],u[f-1]=u[1]):(p--,f-=4,u=et.setArraySize(this.world,f),t.computeWorldVertices(o,2,f,u,0,2));const v=et.setArraySize(this.curves,p);let y=0,x=u[0],_=u[1],b=0,E=0,T=0,S=0,C=0,M=0,P=0,F=0,V=0,O=0,U=0,H=0,W=0,B=0;for(let Y=0,D=2;Y<p;Y++,D+=6)b=u[D],E=u[D+1],T=u[D+2],S=u[D+3],C=u[D+4],M=u[D+5],P=(x-b*2+T)*.1875,F=(_-E*2+S)*.1875,V=((b-T)*3-x+C)*.09375,O=((E-S)*3-_+M)*.09375,U=P*2+V,H=F*2+O,W=(b-x)*.75+P+V*.16666667,B=(E-_)*.75+F+O*.16666667,y+=Math.sqrt(W*W+B*B),W+=U,B+=H,U+=V,H+=O,y+=Math.sqrt(W*W+B*B),W+=U,B+=H,y+=Math.sqrt(W*W+B*B),W+=U+V,B+=H+O,y+=Math.sqrt(W*W+B*B),v[Y]=y,x=C,_=M;if(n&&(h*=y),s)for(let Y=0;Y<e;Y++)a[Y]*=y;const L=this.segments;let N=0;for(let Y=0,D=0,k=0,X=0;Y<e;Y++,D+=3){const $=a[Y];h+=$;let j=h;if(c)j%=y,j<0&&(j+=y),k=0;else if(j<0){this.addBeforePosition(j,u,0,l,D);continue}else if(j>y){this.addAfterPosition(j-y,u,f-4,l,D);continue}for(;;k++){const K=v[k];if(!(j>K)){if(k==0)j/=K;else{const tt=v[k-1];j=(j-tt)/(K-tt)}break}}if(k!=g){g=k;let K=k*6;for(x=u[K],_=u[K+1],b=u[K+2],E=u[K+3],T=u[K+4],S=u[K+5],C=u[K+6],M=u[K+7],P=(x-b*2+T)*.03,F=(_-E*2+S)*.03,V=((b-T)*3-x+C)*.006,O=((E-S)*3-_+M)*.006,U=P*2+V,H=F*2+O,W=(b-x)*.3+P+V*.16666667,B=(E-_)*.3+F+O*.16666667,N=Math.sqrt(W*W+B*B),L[0]=N,K=1;K<8;K++)W+=U,B+=H,U+=V,H+=O,N+=Math.sqrt(W*W+B*B),L[K]=N;W+=U,B+=H,N+=Math.sqrt(W*W+B*B),L[8]=N,W+=U+V,B+=H+O,N+=Math.sqrt(W*W+B*B),L[9]=N,X=0}for(j*=N;;X++){const K=L[X];if(!(j>K)){if(X==0)j/=K;else{const tt=L[X-1];j=X+(j-tt)/(K-tt)}break}}this.addCurvePosition(j*.1,x,_,b,E,T,S,C,M,l,D,r||Y>0&&$==0)}return l}addBeforePosition(t,e,r,n,s){const o=e[r],h=e[r+1],a=e[r+2]-o,l=e[r+3]-h,u=Math.atan2(l,a);n[s]=o+t*Math.cos(u),n[s+1]=h+t*Math.sin(u),n[s+2]=u}addAfterPosition(t,e,r,n,s){const o=e[r+2],h=e[r+3],a=o-e[r],l=h-e[r+1],u=Math.atan2(l,a);n[s]=o+t*Math.cos(u),n[s+1]=h+t*Math.sin(u),n[s+2]=u}addCurvePosition(t,e,r,n,s,o,h,a,l,u,c,f){(t==0||isNaN(t))&&(t=1e-4);const p=t*t,g=p*t,v=1-t,y=v*v,x=y*v,_=v*t,b=_*3,E=v*b,T=b*t,S=e*x+n*E+o*T+a*g,C=r*x+s*E+h*T+l*g;u[c]=S,u[c+1]=C,f&&(u[c+2]=Math.atan2(C-(r*y+s*_*2+h*p),S-(e*y+n*_*2+o*p)))}};let Wl=wo;Wl.NONE=-1;Wl.BEFORE=-2;Wl.AFTER=-3;Wl.epsilon=1e-5;let oA=class{constructor(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new lu,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(let r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}apply(){this.update()}update(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()}applyAbsoluteWorld(){const t=this.rotateMix,e=this.translateMix,r=this.scaleMix,n=this.shearMix,s=this.target,o=s.matrix,h=o.a,a=o.c,l=o.b,u=o.d,c=h*u-a*l>0?q.degRad:-q.degRad,f=this.data.offsetRotation*c,p=this.data.offsetShearY*c,g=this.bones;for(let v=0,y=g.length;v<y;v++){const x=g[v];let _=!1;const b=x.matrix;if(t!=0){const E=b.a,T=b.c,S=b.b,C=b.d;let M=Math.atan2(l,h)-Math.atan2(S,E)+f;M>q.PI?M-=q.PI2:M<-q.PI&&(M+=q.PI2),M*=t;const P=Math.cos(M),F=Math.sin(M);b.a=P*E-F*S,b.c=P*T-F*C,b.b=F*E+P*S,b.d=F*T+P*C,_=!0}if(e!=0){const E=this.temp;s.localToWorld(E.set(this.data.offsetX,this.data.offsetY)),b.tx+=(E.x-b.tx)*e,b.ty+=(E.y-b.ty)*e,_=!0}if(r>0){let E=Math.sqrt(b.a*b.a+b.b*b.b),T=Math.sqrt(h*h+l*l);E>1e-5&&(E=(E+(T-E+this.data.offsetScaleX)*r)/E),b.a*=E,b.b*=E,E=Math.sqrt(b.c*b.c+b.d*b.d),T=Math.sqrt(a*a+u*u),E>1e-5&&(E=(E+(T-E+this.data.offsetScaleY)*r)/E),b.c*=E,b.d*=E,_=!0}if(n>0){const E=b.c,T=b.d,S=Math.atan2(T,E);let C=Math.atan2(u,a)-Math.atan2(l,h)-(S-Math.atan2(b.b,b.a));C>q.PI?C-=q.PI2:C<-q.PI&&(C+=q.PI2),C=S+(C+p)*n;const M=Math.sqrt(E*E+T*T);b.c=Math.cos(C)*M,b.d=Math.sin(C)*M,_=!0}_&&(x.appliedValid=!1)}}applyRelativeWorld(){const t=this.rotateMix,e=this.translateMix,r=this.scaleMix,n=this.shearMix,s=this.target,o=s.matrix,h=o.a,a=o.c,l=o.b,u=o.d,c=h*u-a*l>0?q.degRad:-q.degRad,f=this.data.offsetRotation*c,p=this.data.offsetShearY*c,g=this.bones;for(let v=0,y=g.length;v<y;v++){const x=g[v];let _=!1;const b=x.matrix;if(t!=0){const E=b.a,T=b.c,S=b.b,C=b.d;let M=Math.atan2(l,h)+f;M>q.PI?M-=q.PI2:M<-q.PI&&(M+=q.PI2),M*=t;const P=Math.cos(M),F=Math.sin(M);b.a=P*E-F*S,b.c=P*T-F*C,b.b=F*E+P*S,b.d=F*T+P*C,_=!0}if(e!=0){const E=this.temp;s.localToWorld(E.set(this.data.offsetX,this.data.offsetY)),b.tx+=E.x*e,b.ty+=E.y*e,_=!0}if(r>0){let E=(Math.sqrt(h*h+l*l)-1+this.data.offsetScaleX)*r+1;b.a*=E,b.b*=E,E=(Math.sqrt(a*a+u*u)-1+this.data.offsetScaleY)*r+1,b.c*=E,b.d*=E,_=!0}if(n>0){let E=Math.atan2(u,a)-Math.atan2(l,h);E>q.PI?E-=q.PI2:E<-q.PI&&(E+=q.PI2);const T=b.c,S=b.d;E=Math.atan2(S,T)+(E-q.PI/2+p)*n;const C=Math.sqrt(T*T+S*S);b.c=Math.cos(E)*C,b.d=Math.sin(E)*C,_=!0}_&&(x.appliedValid=!1)}}applyAbsoluteLocal(){const t=this.rotateMix,e=this.translateMix,r=this.scaleMix,n=this.shearMix,s=this.target;s.appliedValid||s.updateAppliedTransform();const o=this.bones;for(let h=0,a=o.length;h<a;h++){const l=o[h];l.appliedValid||l.updateAppliedTransform();let u=l.arotation;if(t!=0){let y=s.arotation-u+this.data.offsetRotation;y-=(16384-(16384.499999999996-y/360|0))*360,u+=y*t}let c=l.ax,f=l.ay;e!=0&&(c+=(s.ax-c+this.data.offsetX)*e,f+=(s.ay-f+this.data.offsetY)*e);let p=l.ascaleX,g=l.ascaleY;r>0&&(p>1e-5&&(p=(p+(s.ascaleX-p+this.data.offsetScaleX)*r)/p),g>1e-5&&(g=(g+(s.ascaleY-g+this.data.offsetScaleY)*r)/g));const v=l.ashearY;if(n>0){let y=s.ashearY-v+this.data.offsetShearY;y-=(16384-(16384.499999999996-y/360|0))*360,l.shearY+=y*n}l.updateWorldTransformWith(c,f,u,p,g,l.ashearX,v)}}applyRelativeLocal(){const t=this.rotateMix,e=this.translateMix,r=this.scaleMix,n=this.shearMix,s=this.target;s.appliedValid||s.updateAppliedTransform();const o=this.bones;for(let h=0,a=o.length;h<a;h++){const l=o[h];l.appliedValid||l.updateAppliedTransform();let u=l.arotation;t!=0&&(u+=(s.arotation+this.data.offsetRotation)*t);let c=l.ax,f=l.ay;e!=0&&(c+=(s.ax+this.data.offsetX)*e,f+=(s.ay+this.data.offsetY)*e);let p=l.ascaleX,g=l.ascaleY;r>0&&(p>1e-5&&(p*=(s.ascaleX-1+this.data.offsetScaleX)*r+1),g>1e-5&&(g*=(s.ascaleY-1+this.data.offsetScaleY)*r+1));let v=l.ashearY;n>0&&(v+=(s.ashearY+this.data.offsetShearY)*n),l.updateWorldTransformWith(c,f,u,p,g,l.ashearX,v)}}};const Jh=class{constructor(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,t==null)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){const r=t.bones[e];let n;if(r.parent==null)n=new ny(r,this,null);else{const s=this.bones[r.parent.index];n=new ny(r,this,s),s.children.push(n)}this.bones.push(n)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){const r=t.slots[e],n=this.bones[r.boneData.index],s=new Xy(r,n);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){const r=t.ikConstraints[e];this.ikConstraints.push(new aA(r,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){const r=t.transformConstraints[e];this.transformConstraints.push(new oA(r,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){const r=t.pathConstraints[e];this.pathConstraints.push(new Wl(r,this))}this.color=new bt(1,1,1,1),this.updateCache()}updateCache(){const t=this._updateCache;t.length=0,this.updateCacheReset.length=0;const e=this.bones;for(let u=0,c=e.length;u<c;u++){const f=e[u];f.sorted=f.data.skinRequired,f.active=!f.sorted}if(this.skin!=null){const u=this.skin.bones;for(let c=0,f=this.skin.bones.length;c<f;c++){let p=this.bones[u[c].index];do p.sorted=!1,p.active=!0,p=p.parent;while(p!=null)}}const r=this.ikConstraints,n=this.transformConstraints,s=this.pathConstraints,o=r.length,h=n.length,a=s.length,l=o+h+a;t:for(let u=0;u<l;u++){for(let c=0;c<o;c++){const f=r[c];if(f.data.order==u){this.sortIkConstraint(f);continue t}}for(let c=0;c<h;c++){const f=n[c];if(f.data.order==u){this.sortTransformConstraint(f);continue t}}for(let c=0;c<a;c++){const f=s[c];if(f.data.order==u){this.sortPathConstraint(f);continue t}}}for(let u=0,c=e.length;u<c;u++)this.sortBone(e[u])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin!=null&&et.contains(this.skin.constraints,t.data,!0)),!t.active)return;const e=t.target;this.sortBone(e);const r=t.bones,n=r[0];if(this.sortBone(n),r.length>1){const s=r[r.length-1];this._updateCache.indexOf(s)>-1||this.updateCacheReset.push(s)}this._updateCache.push(t),this.sortReset(n.children),r[r.length-1].sorted=!0}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin!=null&&et.contains(this.skin.constraints,t.data,!0)),!t.active)return;const e=t.target,r=e.data.index,n=e.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,r,n),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,n);for(let a=0,l=this.data.skins.length;a<l;a++)this.sortPathConstraintAttachment(this.data.skins[a],r,n);const s=e.getAttachment();s instanceof hu&&this.sortPathConstraintAttachmentWith(s,n);const o=t.bones,h=o.length;for(let a=0;a<h;a++)this.sortBone(o[a]);this._updateCache.push(t);for(let a=0;a<h;a++)this.sortReset(o[a].children);for(let a=0;a<h;a++)o[a].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin!=null&&et.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);const e=t.bones,r=e.length;if(t.data.local)for(let n=0;n<r;n++){const s=e[n];this.sortBone(s.parent),this._updateCache.indexOf(s)>-1||this.updateCacheReset.push(s)}else for(let n=0;n<r;n++)this.sortBone(e[n]);this._updateCache.push(t);for(let n=0;n<r;n++)this.sortReset(e[n].children);for(let n=0;n<r;n++)e[n].sorted=!0}sortPathConstraintAttachment(t,e,r){const n=t.attachments[e];if(n)for(const s in n)this.sortPathConstraintAttachmentWith(n[s],r)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof hu))return;const r=t.bones;if(r==null)this.sortBone(e);else{const n=this.bones;let s=0;for(;s<r.length;){const o=r[s++];for(let h=s+o;s<h;s++){const a=r[s];this.sortBone(n[a])}}}}sortBone(t){if(t.sorted)return;const e=t.parent;e!=null&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,r=t.length;e<r;e++){const n=t[e];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}}updateWorldTransform(){const t=this.updateCacheReset;for(let r=0,n=t.length;r<n;r++){const s=t[r];s.ax=s.x,s.ay=s.y,s.arotation=s.rotation,s.ascaleX=s.scaleX,s.ascaleY=s.scaleY,s.ashearX=s.shearX,s.ashearY=s.shearY,s.appliedValid=!0}const e=this._updateCache;for(let r=0,n=e.length;r<n;r++)e[r].update()}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const t=this.bones;for(let s=0,o=t.length;s<o;s++)t[s].setToSetupPose();const e=this.ikConstraints;for(let s=0,o=e.length;s<o;s++){const h=e[s];h.mix=h.data.mix,h.softness=h.data.softness,h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch}const r=this.transformConstraints;for(let s=0,o=r.length;s<o;s++){const h=r[s],a=h.data;h.rotateMix=a.rotateMix,h.translateMix=a.translateMix,h.scaleMix=a.scaleMix,h.shearMix=a.shearMix}const n=this.pathConstraints;for(let s=0,o=n.length;s<o;s++){const h=n[s],a=h.data;h.position=a.position,h.spacing=a.spacing,h.rotateMix=a.rotateMix,h.translateMix=a.translateMix}}setSlotsToSetupPose(){const t=this.slots;et.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,r=t.length;e<r;e++)t[e].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findBoneIndex(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return-1}findSlot(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findSlotIndex(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return-1}setSkinByName(t){const e=this.data.findSkin(t);if(e==null)throw new Error(`Skin not found: ${t}`);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t!=null)if(this.skin!=null)t.attachAll(this,this.skin);else{const e=this.slots;for(let r=0,n=e.length;r<n;r++){const s=e[r],o=s.data.attachmentName;if(o!=null){const h=t.getAttachment(r,o);h!=null&&s.setAttachment(h)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)}getAttachment(t,e){if(e==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){const r=this.skin.getAttachment(t,e);if(r!=null)return r}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(t==null)throw new Error("slotName cannot be null.");const r=this.slots;for(let n=0,s=r.length;n<s;n++){const o=r[n];if(o.data.name==t){let h=null;if(e!=null&&(h=this.getAttachment(n,e),h==null))throw new Error(`Attachment not found: ${e}, for slot: ${t}`);o.setAttachment(h);return}}throw new Error(`Slot not found: ${t}`)}findIkConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findTransformConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findPathConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}getBounds(t,e,r=new Array(2)){if(t==null)throw new Error("offset cannot be null.");if(e==null)throw new Error("size cannot be null.");const n=this.drawOrder;let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let l=0,u=n.length;l<u;l++){const c=n[l];if(!c.bone.active)continue;let f=0,p=null;const g=c.getAttachment();if(g instanceof ae)f=8,p=et.setArraySize(r,f,0),g.computeWorldVertices(c.bone,p,0,2);else if(g instanceof vf){const v=g;f=v.worldVerticesLength,p=et.setArraySize(r,f,0),v.computeWorldVertices(c,0,f,p,0,2)}if(p!=null)for(let v=0,y=p.length;v<y;v+=2){const x=p[v],_=p[v+1];s=Math.min(s,x),o=Math.min(o,_),h=Math.max(h,x),a=Math.max(a,_)}}t.set(s,o),e.set(h-s,a-o)}update(t){this.time+=t}get flipX(){return this.scaleX==-1}set flipX(t){Jh.deprecatedWarning1||(Jh.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1}get flipY(){return this.scaleY==-1}set flipY(t){Jh.deprecatedWarning1||(Jh.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1}};let t0=Jh;t0.deprecatedWarning1=!1;let e0=class{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findBoneIndex(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSlot(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findSlotIndex(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSkin(t){if(t==null)throw new Error("skinName cannot be null.");const e=this.skins;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findEvent(t){if(t==null)throw new Error("eventDataName cannot be null.");const e=this.events;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findAnimation(t){if(t==null)throw new Error("animationName cannot be null.");const e=this.animations;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findIkConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findTransformConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findPathConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findPathConstraintIndex(t){if(t==null)throw new Error("pathConstraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}},r0=class{constructor(t,e,r){if(this.color=new bt(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");if(r==null)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=r}},n0=class extends wf{constructor(t){super(t,0,!1),this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}},iy=class{constructor(t,e,r){this.slotIndex=t,this.name=e,this.attachment=r}},Wd=class{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,t==null)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,r){if(r==null)throw new Error("attachment cannot be null.");const n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=r}addSkin(t){for(let r=0;r<t.bones.length;r++){const n=t.bones[r];let s=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==n){s=!0;break}s||this.bones.push(n)}for(let r=0;r<t.constraints.length;r++){const n=t.constraints[r];let s=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){s=!0;break}s||this.constraints.push(n)}const e=t.getAttachments();for(let r=0;r<e.length;r++){const n=e[r];this.setAttachment(n.slotIndex,n.name,n.attachment)}}copySkin(t){for(let r=0;r<t.bones.length;r++){const n=t.bones[r];let s=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==n){s=!0;break}s||this.bones.push(n)}for(let r=0;r<t.constraints.length;r++){const n=t.constraints[r];let s=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){s=!0;break}s||this.constraints.push(n)}const e=t.getAttachments();for(let r=0;r<e.length;r++){const n=e[r];n.attachment!=null&&(n.attachment instanceof vf?(n.attachment=n.attachment.newLinkedMesh(),this.setAttachment(n.slotIndex,n.name,n.attachment)):(n.attachment=n.attachment.copy(),this.setAttachment(n.slotIndex,n.name,n.attachment)))}}getAttachment(t,e){const r=this.attachments[t];return r?r[e]:null}removeAttachment(t,e){const r=this.attachments[t];r&&(r[e]=null)}getAttachments(){const t=new Array;for(let e=0;e<this.attachments.length;e++){const r=this.attachments[e];if(r)for(const n in r){const s=r[n];s&&t.push(new iy(e,n,s))}}return t}getAttachmentsForSlot(t,e){const r=this.attachments[t];if(r)for(const n in r){const s=r[n];s&&e.push(new iy(t,n,s))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let r=0;for(let n=0;n<t.slots.length;n++){const s=t.slots[n],o=s.getAttachment();if(o&&r<e.attachments.length){const h=e.attachments[r];for(const a in h){const l=h[a];if(o==l){const u=this.getAttachment(r,a);u!=null&&s.setAttachment(u);break}}}r++}}};const fr=class{constructor(i){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=i}readSkeletonData(i){const t=this.scale,e=new e0;e.name="";const r=new Yd(i);e.hash=r.readString(),e.version=r.readString(),e.version==="3.8.75"&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),e.x=r.readFloat(),e.y=r.readFloat(),e.width=r.readFloat(),e.height=r.readFloat();const n=r.readBoolean();n&&(e.fps=r.readFloat(),e.imagesPath=r.readString(),e.audioPath=r.readString());let s=0;s=r.readInt(!0);for(let h=0;h<s;h++)r.strings.push(r.readString());s=r.readInt(!0);for(let h=0;h<s;h++){const a=r.readString(),l=h==0?null:e.bones[r.readInt(!0)],u=new qy(h,a,l);u.rotation=r.readFloat(),u.x=r.readFloat()*t,u.y=r.readFloat()*t,u.scaleX=r.readFloat(),u.scaleY=r.readFloat(),u.shearX=r.readFloat(),u.shearY=r.readFloat(),u.length=r.readFloat()*t,u.transformMode=fr.TransformModeValues[r.readInt(!0)],u.skinRequired=r.readBoolean(),n&&bt.rgba8888ToColor(u.color,r.readInt32()),e.bones.push(u)}s=r.readInt(!0);for(let h=0;h<s;h++){const a=r.readString(),l=e.bones[r.readInt(!0)],u=new r0(h,a,l);bt.rgba8888ToColor(u.color,r.readInt32());const c=r.readInt32();c!=-1&&bt.rgb888ToColor(u.darkColor=new bt,c),u.attachmentName=r.readStringRef(),u.blendMode=fr.BlendModeValues[r.readInt(!0)],e.slots.push(u)}s=r.readInt(!0);for(let h=0,a;h<s;h++){const l=new Qy(r.readString());l.order=r.readInt(!0),l.skinRequired=r.readBoolean(),a=r.readInt(!0);for(let u=0;u<a;u++)l.bones.push(e.bones[r.readInt(!0)]);l.target=e.bones[r.readInt(!0)],l.mix=r.readFloat(),l.softness=r.readFloat()*t,l.bendDirection=r.readByte(),l.compress=r.readBoolean(),l.stretch=r.readBoolean(),l.uniform=r.readBoolean(),e.ikConstraints.push(l)}s=r.readInt(!0);for(let h=0,a;h<s;h++){const l=new n0(r.readString());l.order=r.readInt(!0),l.skinRequired=r.readBoolean(),a=r.readInt(!0);for(let u=0;u<a;u++)l.bones.push(e.bones[r.readInt(!0)]);l.target=e.bones[r.readInt(!0)],l.local=r.readBoolean(),l.relative=r.readBoolean(),l.offsetRotation=r.readFloat(),l.offsetX=r.readFloat()*t,l.offsetY=r.readFloat()*t,l.offsetScaleX=r.readFloat(),l.offsetScaleY=r.readFloat(),l.offsetShearY=r.readFloat(),l.rotateMix=r.readFloat(),l.translateMix=r.readFloat(),l.scaleMix=r.readFloat(),l.shearMix=r.readFloat(),e.transformConstraints.push(l)}s=r.readInt(!0);for(let h=0,a;h<s;h++){const l=new Jy(r.readString());l.order=r.readInt(!0),l.skinRequired=r.readBoolean(),a=r.readInt(!0);for(let u=0;u<a;u++)l.bones.push(e.bones[r.readInt(!0)]);l.target=e.slots[r.readInt(!0)],l.positionMode=fr.PositionModeValues[r.readInt(!0)],l.spacingMode=fr.SpacingModeValues[r.readInt(!0)],l.rotateMode=fr.RotateModeValues[r.readInt(!0)],l.offsetRotation=r.readFloat(),l.position=r.readFloat(),l.positionMode==ur.Fixed&&(l.position*=t),l.spacing=r.readFloat(),(l.spacingMode==Hr.Length||l.spacingMode==Hr.Fixed)&&(l.spacing*=t),l.rotateMix=r.readFloat(),l.translateMix=r.readFloat(),e.pathConstraints.push(l)}const o=this.readSkin(r,e,!0,n);o!=null&&(e.defaultSkin=o,e.skins.push(o));{let h=e.skins.length;for(et.setArraySize(e.skins,s=h+r.readInt(!0));h<s;h++)e.skins[h]=this.readSkin(r,e,!1,n)}s=this.linkedMeshes.length;for(let h=0;h<s;h++){const a=this.linkedMeshes[h],l=a.skin==null?e.defaultSkin:e.findSkin(a.skin);if(l==null)throw new Error(`Skin not found: ${a.skin}`);const u=l.getAttachment(a.slotIndex,a.parent);if(u==null)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.deformAttachment=a.inheritDeform?u:a.mesh,a.mesh.setParentMesh(u)}this.linkedMeshes.length=0,s=r.readInt(!0);for(let h=0;h<s;h++){const a=new Zy(r.readStringRef());a.intValue=r.readInt(!1),a.floatValue=r.readFloat(),a.stringValue=r.readString(),a.audioPath=r.readString(),a.audioPath!=null&&(a.volume=r.readFloat(),a.balance=r.readFloat()),e.events.push(a)}s=r.readInt(!0);for(let h=0;h<s;h++)e.animations.push(this.readAnimation(r,r.readString(),e));return e}readSkin(i,t,e,r){let n=null,s=0;if(e){if(s=i.readInt(!0),s==0)return null;n=new Wd("default")}else{n=new Wd(i.readStringRef()),n.bones.length=i.readInt(!0);for(let o=0,h=n.bones.length;o<h;o++)n.bones[o]=t.bones[i.readInt(!0)];for(let o=0,h=i.readInt(!0);o<h;o++)n.constraints.push(t.ikConstraints[i.readInt(!0)]);for(let o=0,h=i.readInt(!0);o<h;o++)n.constraints.push(t.transformConstraints[i.readInt(!0)]);for(let o=0,h=i.readInt(!0);o<h;o++)n.constraints.push(t.pathConstraints[i.readInt(!0)]);s=i.readInt(!0)}for(let o=0;o<s;o++){const h=i.readInt(!0);for(let a=0,l=i.readInt(!0);a<l;a++){const u=i.readStringRef(),c=this.readAttachment(i,t,n,h,u,r);c!=null&&n.setAttachment(h,u,c)}}return n}readAttachment(i,t,e,r,n,s){const o=this.scale;let h=i.readStringRef();h==null&&(h=n);const a=i.readByte();switch(fr.AttachmentTypeValues[a]){case ue.Region:{let u=i.readStringRef();const c=i.readFloat(),f=i.readFloat(),p=i.readFloat(),g=i.readFloat(),v=i.readFloat(),y=i.readFloat(),x=i.readFloat(),_=i.readInt32();u==null&&(u=h);const b=this.attachmentLoader.newRegionAttachment(e,h,u);return b==null?null:(b.path=u,b.x=f*o,b.y=p*o,b.scaleX=g,b.scaleY=v,b.rotation=c,b.width=y*o,b.height=x*o,bt.rgba8888ToColor(b.color,_),b)}case ue.BoundingBox:{const u=i.readInt(!0),c=this.readVertices(i,u),f=s?i.readInt32():0,p=this.attachmentLoader.newBoundingBoxAttachment(e,h);return p==null?null:(p.worldVerticesLength=u<<1,p.vertices=c.vertices,p.bones=c.bones,s&&bt.rgba8888ToColor(p.color,f),p)}case ue.Mesh:{let u=i.readStringRef();const c=i.readInt32(),f=i.readInt(!0),p=this.readFloatArray(i,f<<1,1),g=this.readShortArray(i),v=this.readVertices(i,f),y=i.readInt(!0);let x=null,_=0,b=0;s&&(x=this.readShortArray(i),_=i.readFloat(),b=i.readFloat()),u==null&&(u=h);const E=this.attachmentLoader.newMeshAttachment(e,h,u);return E==null?null:(E.path=u,bt.rgba8888ToColor(E.color,c),E.bones=v.bones,E.vertices=v.vertices,E.worldVerticesLength=f<<1,E.triangles=g,E.regionUVs=new Float32Array(p),E.hullLength=y<<1,s&&(E.edges=x,E.width=_*o,E.height=b*o),E)}case ue.LinkedMesh:{let u=i.readStringRef();const c=i.readInt32(),f=i.readStringRef(),p=i.readStringRef(),g=i.readBoolean();let v=0,y=0;s&&(v=i.readFloat(),y=i.readFloat()),u==null&&(u=h);const x=this.attachmentLoader.newMeshAttachment(e,h,u);return x==null?null:(x.path=u,bt.rgba8888ToColor(x.color,c),s&&(x.width=v*o,x.height=y*o),this.linkedMeshes.push(new BB(x,f,r,p,g)),x)}case ue.Path:{const u=i.readBoolean(),c=i.readBoolean(),f=i.readInt(!0),p=this.readVertices(i,f),g=et.newArray(f/3,0);for(let x=0,_=g.length;x<_;x++)g[x]=i.readFloat()*o;const v=s?i.readInt32():0,y=this.attachmentLoader.newPathAttachment(e,h);return y==null?null:(y.closed=u,y.constantSpeed=c,y.worldVerticesLength=f<<1,y.vertices=p.vertices,y.bones=p.bones,y.lengths=g,s&&bt.rgba8888ToColor(y.color,v),y)}case ue.Point:{const u=i.readFloat(),c=i.readFloat(),f=i.readFloat(),p=s?i.readInt32():0,g=this.attachmentLoader.newPointAttachment(e,h);return g==null?null:(g.x=c*o,g.y=f*o,g.rotation=u,s&&bt.rgba8888ToColor(g.color,p),g)}case ue.Clipping:{const u=i.readInt(!0),c=i.readInt(!0),f=this.readVertices(i,c),p=s?i.readInt32():0,g=this.attachmentLoader.newClippingAttachment(e,h);return g==null?null:(g.endSlot=t.slots[u],g.worldVerticesLength=c<<1,g.vertices=f.vertices,g.bones=f.bones,s&&bt.rgba8888ToColor(g.color,p),g)}}return null}readVertices(i,t){const e=t<<1,r=new NB,n=this.scale;if(!i.readBoolean())return r.vertices=this.readFloatArray(i,e,n),r;const s=new Array,o=new Array;for(let h=0;h<t;h++){const a=i.readInt(!0);o.push(a);for(let l=0;l<a;l++)o.push(i.readInt(!0)),s.push(i.readFloat()*n),s.push(i.readFloat()*n),s.push(i.readFloat())}return r.vertices=et.toFloatArray(s),r.bones=o,r}readFloatArray(i,t,e){const r=new Array(t);if(e==1)for(let n=0;n<t;n++)r[n]=i.readFloat();else for(let n=0;n<t;n++)r[n]=i.readFloat()*e;return r}readShortArray(i){const t=i.readInt(!0),e=new Array(t);for(let r=0;r<t;r++)e[r]=i.readShort();return e}readAnimation(i,t,e){const r=new Array,n=this.scale;let s=0;const o=new bt,h=new bt;for(let u=0,c=i.readInt(!0);u<c;u++){const f=i.readInt(!0);for(let p=0,g=i.readInt(!0);p<g;p++){const v=i.readByte(),y=i.readInt(!0);switch(v){case fr.SLOT_ATTACHMENT:{const x=new Ro(y);x.slotIndex=f;for(let _=0;_<y;_++)x.setFrame(_,i.readFloat(),i.readStringRef());r.push(x),s=Math.max(s,x.frames[y-1]);break}case fr.SLOT_COLOR:{const x=new En(y);x.slotIndex=f;for(let _=0;_<y;_++){const b=i.readFloat();bt.rgba8888ToColor(o,i.readInt32()),x.setFrame(_,b,o.r,o.g,o.b,o.a),_<y-1&&this.readCurve(i,_,x)}r.push(x),s=Math.max(s,x.frames[(y-1)*En.ENTRIES]);break}case fr.SLOT_TWO_COLOR:{const x=new Sr(y);x.slotIndex=f;for(let _=0;_<y;_++){const b=i.readFloat();bt.rgba8888ToColor(o,i.readInt32()),bt.rgb888ToColor(h,i.readInt32()),x.setFrame(_,b,o.r,o.g,o.b,o.a,h.r,h.g,h.b),_<y-1&&this.readCurve(i,_,x)}r.push(x),s=Math.max(s,x.frames[(y-1)*Sr.ENTRIES]);break}}}}for(let u=0,c=i.readInt(!0);u<c;u++){const f=i.readInt(!0);for(let p=0,g=i.readInt(!0);p<g;p++){const v=i.readByte(),y=i.readInt(!0);switch(v){case fr.BONE_ROTATE:{const x=new tn(y);x.boneIndex=f;for(let _=0;_<y;_++)x.setFrame(_,i.readFloat(),i.readFloat()),_<y-1&&this.readCurve(i,_,x);r.push(x),s=Math.max(s,x.frames[(y-1)*tn.ENTRIES]);break}case fr.BONE_TRANSLATE:case fr.BONE_SCALE:case fr.BONE_SHEAR:{let x,_=1;v==fr.BONE_SCALE?x=new Gy(y):v==fr.BONE_SHEAR?x=new Yy(y):(x=new ei(y),_=n),x.boneIndex=f;for(let b=0;b<y;b++)x.setFrame(b,i.readFloat(),i.readFloat()*_,i.readFloat()*_),b<y-1&&this.readCurve(i,b,x);r.push(x),s=Math.max(s,x.frames[(y-1)*ei.ENTRIES]);break}}}}for(let u=0,c=i.readInt(!0);u<c;u++){const f=i.readInt(!0),p=i.readInt(!0),g=new sn(p);g.ikConstraintIndex=f;for(let v=0;v<p;v++)g.setFrame(v,i.readFloat(),i.readFloat(),i.readFloat()*n,i.readByte(),i.readBoolean(),i.readBoolean()),v<p-1&&this.readCurve(i,v,g);r.push(g),s=Math.max(s,g.frames[(p-1)*sn.ENTRIES])}for(let u=0,c=i.readInt(!0);u<c;u++){const f=i.readInt(!0),p=i.readInt(!0),g=new Tn(p);g.transformConstraintIndex=f;for(let v=0;v<p;v++)g.setFrame(v,i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat()),v<p-1&&this.readCurve(i,v,g);r.push(g),s=Math.max(s,g.frames[(p-1)*Tn.ENTRIES])}for(let u=0,c=i.readInt(!0);u<c;u++){const f=i.readInt(!0),p=e.pathConstraints[f];for(let g=0,v=i.readInt(!0);g<v;g++){const y=i.readByte(),x=i.readInt(!0);switch(y){case fr.PATH_POSITION:case fr.PATH_SPACING:{let _,b=1;y==fr.PATH_SPACING?(_=new Wy(x),(p.spacingMode==Hr.Length||p.spacingMode==Hr.Fixed)&&(b=n)):(_=new ys(x),p.positionMode==ur.Fixed&&(b=n)),_.pathConstraintIndex=f;for(let E=0;E<x;E++)_.setFrame(E,i.readFloat(),i.readFloat()*b),E<x-1&&this.readCurve(i,E,_);r.push(_),s=Math.max(s,_.frames[(x-1)*ys.ENTRIES]);break}case fr.PATH_MIX:{const _=new Wi(x);_.pathConstraintIndex=f;for(let b=0;b<x;b++)_.setFrame(b,i.readFloat(),i.readFloat(),i.readFloat()),b<x-1&&this.readCurve(i,b,_);r.push(_),s=Math.max(s,_.frames[(x-1)*Wi.ENTRIES]);break}}}}for(let u=0,c=i.readInt(!0);u<c;u++){const f=e.skins[i.readInt(!0)];for(let p=0,g=i.readInt(!0);p<g;p++){const v=i.readInt(!0);for(let y=0,x=i.readInt(!0);y<x;y++){const _=f.getAttachment(v,i.readStringRef()),b=_.bones!=null,E=_.vertices,T=b?E.length/3*2:E.length,S=i.readInt(!0),C=new $y(S);C.slotIndex=v,C.attachment=_;for(let M=0;M<S;M++){const P=i.readFloat();let F,V=i.readInt(!0);if(V==0)F=b?et.newFloatArray(T):E;else{F=et.newFloatArray(T);const O=i.readInt(!0);if(V+=O,n==1)for(let U=O;U<V;U++)F[U]=i.readFloat();else for(let U=O;U<V;U++)F[U]=i.readFloat()*n;if(!b)for(let U=0,H=F.length;U<H;U++)F[U]+=E[U]}C.setFrame(M,P,F),M<S-1&&this.readCurve(i,M,C)}r.push(C),s=Math.max(s,C.frames[S-1])}}}const a=i.readInt(!0);if(a>0){const u=new Ll(a),c=e.slots.length;for(let f=0;f<a;f++){const p=i.readFloat(),g=i.readInt(!0),v=et.newArray(c,0);for(let b=c-1;b>=0;b--)v[b]=-1;const y=et.newArray(c-g,0);let x=0,_=0;for(let b=0;b<g;b++){const E=i.readInt(!0);for(;x!=E;)y[_++]=x++;v[x+i.readInt(!0)]=x++}for(;x<c;)y[_++]=x++;for(let b=c-1;b>=0;b--)v[b]==-1&&(v[b]=y[--_]);u.setFrame(f,p,v)}r.push(u),s=Math.max(s,u.frames[a-1])}const l=i.readInt(!0);if(l>0){const u=new yf(l);for(let c=0;c<l;c++){const f=i.readFloat(),p=e.events[i.readInt(!0)],g=new Ky(f,p);g.intValue=i.readInt(!1),g.floatValue=i.readFloat(),g.stringValue=i.readBoolean()?i.readString():p.stringValue,g.data.audioPath!=null&&(g.volume=i.readFloat(),g.balance=i.readFloat()),u.setFrame(c,g)}r.push(u),s=Math.max(s,u.frames[l-1])}return new Tr(t,r,s)}readCurve(i,t,e){switch(i.readByte()){case fr.CURVE_STEPPED:e.setStepped(t);break;case fr.CURVE_BEZIER:this.setCurve(e,t,i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat());break}}setCurve(i,t,e,r,n,s){i.setCurve(t,e,r,n,s)}};let Cr=fr;Cr.AttachmentTypeValues=[0,1,2,3,4,5,6];Cr.TransformModeValues=[ne.Normal,ne.OnlyTranslation,ne.NoRotationOrReflection,ne.NoScale,ne.NoScaleOrReflection];Cr.PositionModeValues=[ur.Fixed,ur.Percent];Cr.SpacingModeValues=[Hr.Length,Hr.Fixed,Hr.Percent];Cr.RotateModeValues=[br.Tangent,br.Chain,br.ChainScale];Cr.BlendModeValues=[Gt.NORMAL,Gt.ADD,Gt.MULTIPLY,Gt.SCREEN];Cr.BONE_ROTATE=0;Cr.BONE_TRANSLATE=1;Cr.BONE_SCALE=2;Cr.BONE_SHEAR=3;Cr.SLOT_ATTACHMENT=0;Cr.SLOT_COLOR=1;Cr.SLOT_TWO_COLOR=2;Cr.PATH_POSITION=0;Cr.PATH_SPACING=1;Cr.PATH_MIX=2;Cr.CURVE_LINEAR=0;Cr.CURVE_STEPPED=1;Cr.CURVE_BEZIER=2;let BB=class{constructor(t,e,r,n,s){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritDeform=s}},NB=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}},OB=class extends Uy{},lA=class Il{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,r=new e0,n=typeof t=="string"?JSON.parse(t):t,s=n.skeleton;if(s!=null){if(r.hash=s.hash,r.version=s.spine,r.version.substr(0,3)!=="3.8"){const o=`Spine 3.8 loader cant load version ${s.spine}. Please configure your pixi-spine bundle`;console.error(o)}r.version==="3.8.75"&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),r.x=s.x,r.y=s.y,r.width=s.width,r.height=s.height,r.fps=s.fps,r.imagesPath=s.images}if(n.bones)for(let o=0;o<n.bones.length;o++){const h=n.bones[o];let a=null;const l=this.getValue(h,"parent",null);if(l!=null&&(a=r.findBone(l),a==null))throw new Error(`Parent bone not found: ${l}`);const u=new qy(r.bones.length,h.name,a);u.length=this.getValue(h,"length",0)*e,u.x=this.getValue(h,"x",0)*e,u.y=this.getValue(h,"y",0)*e,u.rotation=this.getValue(h,"rotation",0),u.scaleX=this.getValue(h,"scaleX",1),u.scaleY=this.getValue(h,"scaleY",1),u.shearX=this.getValue(h,"shearX",0),u.shearY=this.getValue(h,"shearY",0),u.transformMode=Il.transformModeFromString(this.getValue(h,"transform","normal")),u.skinRequired=this.getValue(h,"skin",!1),r.bones.push(u)}if(n.slots)for(let o=0;o<n.slots.length;o++){const h=n.slots[o],a=h.name,l=h.bone,u=r.findBone(l);if(u==null)throw new Error(`Slot bone not found: ${l}`);const c=new r0(r.slots.length,a,u),f=this.getValue(h,"color",null);f!=null&&c.color.setFromString(f);const p=this.getValue(h,"dark",null);p!=null&&(c.darkColor=new bt(1,1,1,1),c.darkColor.setFromString(p)),c.attachmentName=this.getValue(h,"attachment",null),c.blendMode=Il.blendModeFromString(this.getValue(h,"blend","normal")),r.slots.push(c)}if(n.ik)for(let o=0;o<n.ik.length;o++){const h=n.ik[o],a=new Qy(h.name);a.order=this.getValue(h,"order",0),a.skinRequired=this.getValue(h,"skin",!1);for(let u=0;u<h.bones.length;u++){const c=h.bones[u],f=r.findBone(c);if(f==null)throw new Error(`IK bone not found: ${c}`);a.bones.push(f)}const l=h.target;if(a.target=r.findBone(l),a.target==null)throw new Error(`IK target bone not found: ${l}`);a.mix=this.getValue(h,"mix",1),a.softness=this.getValue(h,"softness",0)*e,a.bendDirection=this.getValue(h,"bendPositive",!0)?1:-1,a.compress=this.getValue(h,"compress",!1),a.stretch=this.getValue(h,"stretch",!1),a.uniform=this.getValue(h,"uniform",!1),r.ikConstraints.push(a)}if(n.transform)for(let o=0;o<n.transform.length;o++){const h=n.transform[o],a=new n0(h.name);a.order=this.getValue(h,"order",0),a.skinRequired=this.getValue(h,"skin",!1);for(let u=0;u<h.bones.length;u++){const c=h.bones[u],f=r.findBone(c);if(f==null)throw new Error(`Transform constraint bone not found: ${c}`);a.bones.push(f)}const l=h.target;if(a.target=r.findBone(l),a.target==null)throw new Error(`Transform constraint target bone not found: ${l}`);a.local=this.getValue(h,"local",!1),a.relative=this.getValue(h,"relative",!1),a.offsetRotation=this.getValue(h,"rotation",0),a.offsetX=this.getValue(h,"x",0)*e,a.offsetY=this.getValue(h,"y",0)*e,a.offsetScaleX=this.getValue(h,"scaleX",0),a.offsetScaleY=this.getValue(h,"scaleY",0),a.offsetShearY=this.getValue(h,"shearY",0),a.rotateMix=this.getValue(h,"rotateMix",1),a.translateMix=this.getValue(h,"translateMix",1),a.scaleMix=this.getValue(h,"scaleMix",1),a.shearMix=this.getValue(h,"shearMix",1),r.transformConstraints.push(a)}if(n.path)for(let o=0;o<n.path.length;o++){const h=n.path[o],a=new Jy(h.name);a.order=this.getValue(h,"order",0),a.skinRequired=this.getValue(h,"skin",!1);for(let u=0;u<h.bones.length;u++){const c=h.bones[u],f=r.findBone(c);if(f==null)throw new Error(`Transform constraint bone not found: ${c}`);a.bones.push(f)}const l=h.target;if(a.target=r.findSlot(l),a.target==null)throw new Error(`Path target slot not found: ${l}`);a.positionMode=Il.positionModeFromString(this.getValue(h,"positionMode","percent")),a.spacingMode=Il.spacingModeFromString(this.getValue(h,"spacingMode","length")),a.rotateMode=Il.rotateModeFromString(this.getValue(h,"rotateMode","tangent")),a.offsetRotation=this.getValue(h,"rotation",0),a.position=this.getValue(h,"position",0),a.positionMode==ur.Fixed&&(a.position*=e),a.spacing=this.getValue(h,"spacing",0),(a.spacingMode==Hr.Length||a.spacingMode==Hr.Fixed)&&(a.spacing*=e),a.rotateMix=this.getValue(h,"rotateMix",1),a.translateMix=this.getValue(h,"translateMix",1),r.pathConstraints.push(a)}if(n.skins)for(let o=0;o<n.skins.length;o++){const h=n.skins[o],a=new Wd(h.name);if(h.bones)for(let l=0;l<h.bones.length;l++){const u=r.findBone(h.bones[l]);if(u==null)throw new Error(`Skin bone not found: ${h.bones[o]}`);a.bones.push(u)}if(h.ik)for(let l=0;l<h.ik.length;l++){const u=r.findIkConstraint(h.ik[l]);if(u==null)throw new Error(`Skin IK constraint not found: ${h.ik[o]}`);a.constraints.push(u)}if(h.transform)for(let l=0;l<h.transform.length;l++){const u=r.findTransformConstraint(h.transform[l]);if(u==null)throw new Error(`Skin transform constraint not found: ${h.transform[o]}`);a.constraints.push(u)}if(h.path)for(let l=0;l<h.path.length;l++){const u=r.findPathConstraint(h.path[l]);if(u==null)throw new Error(`Skin path constraint not found: ${h.path[o]}`);a.constraints.push(u)}for(const l in h.attachments){const u=r.findSlot(l);if(u==null)throw new Error(`Slot not found: ${l}`);const c=h.attachments[l];for(const f in c){const p=this.readAttachment(c[f],a,u.index,f,r);p!=null&&a.setAttachment(u.index,f,p)}}r.skins.push(a),a.name=="default"&&(r.defaultSkin=a)}for(let o=0,h=this.linkedMeshes.length;o<h;o++){const a=this.linkedMeshes[o],l=a.skin==null?r.defaultSkin:r.findSkin(a.skin);if(l==null)throw new Error(`Skin not found: ${a.skin}`);const u=l.getAttachment(a.slotIndex,a.parent);if(u==null)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.deformAttachment=a.inheritDeform?u:a.mesh,a.mesh.setParentMesh(u)}if(this.linkedMeshes.length=0,n.events)for(const o in n.events){const h=n.events[o],a=new Zy(o);a.intValue=this.getValue(h,"int",0),a.floatValue=this.getValue(h,"float",0),a.stringValue=this.getValue(h,"string",""),a.audioPath=this.getValue(h,"audio",null),a.audioPath!=null&&(a.volume=this.getValue(h,"volume",1),a.balance=this.getValue(h,"balance",0)),r.events.push(a)}if(n.animations)for(const o in n.animations){const h=n.animations[o];this.readAnimation(h,o,r)}return r}readAttachment(t,e,r,n,s){const o=this.scale;switch(n=this.getValue(t,"name",n),this.getValue(t,"type","region")){case"region":{const a=this.getValue(t,"path",n),l=this.attachmentLoader.newRegionAttachment(e,n,a);if(l==null)return null;l.path=a,l.x=this.getValue(t,"x",0)*o,l.y=this.getValue(t,"y",0)*o,l.scaleX=this.getValue(t,"scaleX",1),l.scaleY=this.getValue(t,"scaleY",1),l.rotation=this.getValue(t,"rotation",0),l.width=t.width*o,l.height=t.height*o;const u=this.getValue(t,"color",null);return u!=null&&l.color.setFromString(u),l}case"boundingbox":{const a=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(a==null)return null;this.readVertices(t,a,t.vertexCount<<1);const l=this.getValue(t,"color",null);return l!=null&&a.color.setFromString(l),a}case"mesh":case"linkedmesh":{const a=this.getValue(t,"path",n),l=this.attachmentLoader.newMeshAttachment(e,n,a);if(l==null)return null;l.path=a;const u=this.getValue(t,"color",null);u!=null&&l.color.setFromString(u),l.width=this.getValue(t,"width",0)*o,l.height=this.getValue(t,"height",0)*o;const c=this.getValue(t,"parent",null);if(c!=null)return this.linkedMeshes.push(new DB(l,this.getValue(t,"skin",null),r,c,this.getValue(t,"deform",!0))),l;const f=t.uvs;return this.readVertices(t,l,f.length),l.triangles=t.triangles,l.regionUVs=new Float32Array(f),l.edges=this.getValue(t,"edges",null),l.hullLength=this.getValue(t,"hull",0)*2,l}case"path":{const a=this.attachmentLoader.newPathAttachment(e,n);if(a==null)return null;a.closed=this.getValue(t,"closed",!1),a.constantSpeed=this.getValue(t,"constantSpeed",!0);const l=t.vertexCount;this.readVertices(t,a,l<<1);const u=et.newArray(l/3,0);for(let f=0;f<t.lengths.length;f++)u[f]=t.lengths[f]*o;a.lengths=u;const c=this.getValue(t,"color",null);return c!=null&&a.color.setFromString(c),a}case"point":{const a=this.attachmentLoader.newPointAttachment(e,n);if(a==null)return null;a.x=this.getValue(t,"x",0)*o,a.y=this.getValue(t,"y",0)*o,a.rotation=this.getValue(t,"rotation",0);const l=this.getValue(t,"color",null);return l!=null&&a.color.setFromString(l),a}case"clipping":{const a=this.attachmentLoader.newClippingAttachment(e,n);if(a==null)return null;const l=this.getValue(t,"end",null);if(l!=null){const f=s.findSlot(l);if(f==null)throw new Error(`Clipping end slot not found: ${l}`);a.endSlot=f}const u=t.vertexCount;this.readVertices(t,a,u<<1);const c=this.getValue(t,"color",null);return c!=null&&a.color.setFromString(c),a}}return null}readVertices(t,e,r){const n=this.scale;e.worldVerticesLength=r;const s=t.vertices;if(r==s.length){const a=et.toFloatArray(s);if(n!=1)for(let l=0,u=s.length;l<u;l++)a[l]*=n;e.vertices=a;return}const o=new Array,h=new Array;for(let a=0,l=s.length;a<l;){const u=s[a++];h.push(u);for(let c=a+u*4;a<c;a+=4)h.push(s[a]),o.push(s[a+1]*n),o.push(s[a+2]*n),o.push(s[a+3])}e.bones=h,e.vertices=et.toFloatArray(o)}readAnimation(t,e,r){const n=this.scale,s=new Array;let o=0;if(t.slots)for(const a in t.slots){const l=t.slots[a],u=r.findSlotIndex(a);if(u==-1)throw new Error(`Slot not found: ${a}`);for(const c in l){const f=l[c];if(c=="attachment"){const p=new Ro(f.length);p.slotIndex=u;let g=0;for(let v=0;v<f.length;v++){const y=f[v];p.setFrame(g++,this.getValue(y,"time",0),y.name)}s.push(p),o=Math.max(o,p.frames[p.getFrameCount()-1])}else if(c=="color"){const p=new En(f.length);p.slotIndex=u;let g=0;for(let v=0;v<f.length;v++){const y=f[v],x=new bt;x.setFromString(y.color||"ffffffff"),p.setFrame(g,this.getValue(y,"time",0),x.r,x.g,x.b,x.a),this.readCurve(y,p,g),g++}s.push(p),o=Math.max(o,p.frames[(p.getFrameCount()-1)*En.ENTRIES])}else if(c=="twoColor"){const p=new Sr(f.length);p.slotIndex=u;let g=0;for(let v=0;v<f.length;v++){const y=f[v],x=new bt,_=new bt;x.setFromString(y.light),_.setFromString(y.dark),p.setFrame(g,this.getValue(y,"time",0),x.r,x.g,x.b,x.a,_.r,_.g,_.b),this.readCurve(y,p,g),g++}s.push(p),o=Math.max(o,p.frames[(p.getFrameCount()-1)*Sr.ENTRIES])}else throw new Error(`Invalid timeline type for a slot: ${c} (${a})`)}}if(t.bones)for(const a in t.bones){const l=t.bones[a],u=r.findBoneIndex(a);if(u==-1)throw new Error(`Bone not found: ${a}`);for(const c in l){const f=l[c];if(c==="rotate"){const p=new tn(f.length);p.boneIndex=u;let g=0;for(let v=0;v<f.length;v++){const y=f[v];p.setFrame(g,this.getValue(y,"time",0),this.getValue(y,"angle",0)),this.readCurve(y,p,g),g++}s.push(p),o=Math.max(o,p.frames[(p.getFrameCount()-1)*tn.ENTRIES])}else if(c==="translate"||c==="scale"||c==="shear"){let p=null,g=1,v=0;c==="scale"?(p=new Gy(f.length),v=1):c==="shear"?p=new Yy(f.length):(p=new ei(f.length),g=n),p.boneIndex=u;let y=0;for(let x=0;x<f.length;x++){const _=f[x],b=this.getValue(_,"x",v),E=this.getValue(_,"y",v);p.setFrame(y,this.getValue(_,"time",0),b*g,E*g),this.readCurve(_,p,y),y++}s.push(p),o=Math.max(o,p.frames[(p.getFrameCount()-1)*ei.ENTRIES])}else throw new Error(`Invalid timeline type for a bone: ${c} (${a})`)}}if(t.ik)for(const a in t.ik){const l=t.ik[a],u=r.findIkConstraint(a),c=new sn(l.length);c.ikConstraintIndex=r.ikConstraints.indexOf(u);let f=0;for(let p=0;p<l.length;p++){const g=l[p];c.setFrame(f,this.getValue(g,"time",0),this.getValue(g,"mix",1),this.getValue(g,"softness",0)*n,this.getValue(g,"bendPositive",!0)?1:-1,this.getValue(g,"compress",!1),this.getValue(g,"stretch",!1)),this.readCurve(g,c,f),f++}s.push(c),o=Math.max(o,c.frames[(c.getFrameCount()-1)*sn.ENTRIES])}if(t.transform)for(const a in t.transform){const l=t.transform[a],u=r.findTransformConstraint(a),c=new Tn(l.length);c.transformConstraintIndex=r.transformConstraints.indexOf(u);let f=0;for(let p=0;p<l.length;p++){const g=l[p];c.setFrame(f,this.getValue(g,"time",0),this.getValue(g,"rotateMix",1),this.getValue(g,"translateMix",1),this.getValue(g,"scaleMix",1),this.getValue(g,"shearMix",1)),this.readCurve(g,c,f),f++}s.push(c),o=Math.max(o,c.frames[(c.getFrameCount()-1)*Tn.ENTRIES])}if(t.path)for(const a in t.path){const l=t.path[a],u=r.findPathConstraintIndex(a);if(u==-1)throw new Error(`Path constraint not found: ${a}`);const c=r.pathConstraints[u];for(const f in l){const p=l[f];if(f==="position"||f==="spacing"){let g=null,v=1;f==="spacing"?(g=new Wy(p.length),(c.spacingMode==Hr.Length||c.spacingMode==Hr.Fixed)&&(v=n)):(g=new ys(p.length),c.positionMode==ur.Fixed&&(v=n)),g.pathConstraintIndex=u;let y=0;for(let x=0;x<p.length;x++){const _=p[x];g.setFrame(y,this.getValue(_,"time",0),this.getValue(_,f,0)*v),this.readCurve(_,g,y),y++}s.push(g),o=Math.max(o,g.frames[(g.getFrameCount()-1)*ys.ENTRIES])}else if(f==="mix"){const g=new Wi(p.length);g.pathConstraintIndex=u;let v=0;for(let y=0;y<p.length;y++){const x=p[y];g.setFrame(v,this.getValue(x,"time",0),this.getValue(x,"rotateMix",1),this.getValue(x,"translateMix",1)),this.readCurve(x,g,v),v++}s.push(g),o=Math.max(o,g.frames[(g.getFrameCount()-1)*Wi.ENTRIES])}}}if(t.deform)for(const a in t.deform){const l=t.deform[a],u=r.findSkin(a);if(u!=null)for(const c in l){const f=l[c],p=r.findSlotIndex(c);if(p==-1)throw new Error(`Slot not found: ${f.name}`);for(const g in f){const v=f[g],y=u.getAttachment(p,g);if(y==null)throw new Error(`Deform attachment not found: ${v.name}`);const x=y.bones!=null,_=y.vertices,b=x?_.length/3*2:_.length,E=new $y(v.length);E.slotIndex=p,E.attachment=y;let T=0;for(let S=0;S<v.length;S++){const C=v[S];let M;const P=this.getValue(C,"vertices",null);if(P==null)M=x?et.newFloatArray(b):_;else{M=et.newFloatArray(b);const F=this.getValue(C,"offset",0);if(et.arrayCopy(P,0,M,F,P.length),n!=1)for(let V=F,O=V+P.length;V<O;V++)M[V]*=n;if(!x)for(let V=0;V<b;V++)M[V]+=_[V]}E.setFrame(T,this.getValue(C,"time",0),M),this.readCurve(C,E,T),T++}s.push(E),o=Math.max(o,E.frames[E.getFrameCount()-1])}}}let h=t.drawOrder;if(h==null&&(h=t.draworder),h!=null){const a=new Ll(h.length),l=r.slots.length;let u=0;for(let c=0;c<h.length;c++){const f=h[c];let p=null;const g=this.getValue(f,"offsets",null);if(g!=null){p=et.newArray(l,-1);const v=et.newArray(l-g.length,0);let y=0,x=0;for(let _=0;_<g.length;_++){const b=g[_],E=r.findSlotIndex(b.slot);if(E==-1)throw new Error(`Slot not found: ${b.slot}`);for(;y!=E;)v[x++]=y++;p[y+b.offset]=y++}for(;y<l;)v[x++]=y++;for(let _=l-1;_>=0;_--)p[_]==-1&&(p[_]=v[--x])}a.setFrame(u++,this.getValue(f,"time",0),p)}s.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(t.events){const a=new yf(t.events.length);let l=0;for(let u=0;u<t.events.length;u++){const c=t.events[u],f=r.findEvent(c.name);if(f==null)throw new Error(`Event not found: ${c.name}`);const p=new Ky(et.toSinglePrecision(this.getValue(c,"time",0)),f);p.intValue=this.getValue(c,"int",f.intValue),p.floatValue=this.getValue(c,"float",f.floatValue),p.stringValue=this.getValue(c,"string",f.stringValue),p.data.audioPath!=null&&(p.volume=this.getValue(c,"volume",1),p.balance=this.getValue(c,"balance",0)),a.setFrame(l++,p)}s.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new Tr(e,s,o))}readCurve(t,e,r){if(t.hasOwnProperty("curve"))if(t.curve==="stepped")e.setStepped(r);else{const n=t.curve;e.setCurve(r,n,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}}getValue(t,e,r){return t[e]!==void 0?t[e]:r}static blendModeFromString(t){if(t=t.toLowerCase(),t=="normal")return Gt.NORMAL;if(t=="additive")return Gt.ADD;if(t=="multiply")return Gt.MULTIPLY;if(t=="screen")return Gt.SCREEN;throw new Error(`Unknown blend mode: ${t}`)}static positionModeFromString(t){if(t=t.toLowerCase(),t=="fixed")return ur.Fixed;if(t=="percent")return ur.Percent;throw new Error(`Unknown position mode: ${t}`)}static spacingModeFromString(t){if(t=t.toLowerCase(),t=="length")return Hr.Length;if(t=="fixed")return Hr.Fixed;if(t=="percent")return Hr.Percent;throw new Error(`Unknown position mode: ${t}`)}static rotateModeFromString(t){if(t=t.toLowerCase(),t=="tangent")return br.Tangent;if(t=="chain")return br.Chain;if(t=="chainscale")return br.ChainScale;throw new Error(`Unknown rotate mode: ${t}`)}static transformModeFromString(t){if(t=t.toLowerCase(),t=="normal")return ne.Normal;if(t=="onlytranslation")return ne.OnlyTranslation;if(t=="norotationorreflection")return ne.NoRotationOrReflection;if(t=="noscale")return ne.NoScale;if(t=="noscaleorreflection")return ne.NoScaleOrReflection;throw new Error(`Unknown transform mode: ${t}`)}},DB=class{constructor(t,e,r,n,s){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritDeform=s}},LB=class extends $l{createSkeleton(t){this.skeleton=new t0(t),this.skeleton.updateWorldTransform(),this.stateData=new zy(t),this.state=new ai(this.stateData)}};const UB=Object.freeze(Object.defineProperty({__proto__:null,Animation:Tr,AnimationState:ai,AnimationStateAdapter:FB,AnimationStateData:zy,AtlasAttachmentLoader:jy,Attachment:Vy,AttachmentTimeline:Ro,Bone:ny,BoneData:qy,BoundingBoxAttachment:KS,ClippingAttachment:QS,ColorTimeline:En,ConstraintData:wf,CurveTimeline:Xn,DeformTimeline:$y,DrawOrderTimeline:Ll,Event:Ky,EventData:Zy,EventQueue:Hy,EventTimeline:yf,EventType:Bn,IkConstraint:aA,IkConstraintData:Qy,IkConstraintTimeline:sn,JitterEffect:kB,MeshAttachment:vf,PathAttachment:hu,PathConstraint:Wl,PathConstraintData:Jy,PathConstraintMixTimeline:Wi,PathConstraintPositionTimeline:ys,PathConstraintSpacingTimeline:Wy,PointAttachment:eA,RegionAttachment:ae,RotateTimeline:tn,ScaleTimeline:Gy,ShearTimeline:Yy,Skeleton:t0,SkeletonBinary:Cr,SkeletonBounds:OB,SkeletonData:e0,SkeletonJson:lA,Skin:Wd,SkinEntry:iy,Slot:Xy,SlotData:r0,SpacingMode:Hr,Spine:LB,SwirlEffect:iA,TimelineType:sA,TrackEntry:xf,TransformConstraint:oA,TransformConstraintData:n0,TransformConstraintTimeline:Tn,TranslateTimeline:ei,TwoColorTimeline:Sr,VertexAttachment:$a},Symbol.toStringTag,{value:"Module"}));let i0=class{constructor(t){if(t==null)throw new Error("name cannot be null.");this.name=t}};const hA=class extends i0{constructor(t){super(t),this.id=(hA.nextID++&65535)<<11,this.worldVerticesLength=0}computeWorldVerticesOld(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)}computeWorldVertices(t,e,r,n,s,o){r=s+(r>>1)*o;const h=t.bone.skeleton,a=t.attachmentVertices;let l=this.vertices;const u=this.bones;if(u==null){a.length>0&&(l=a);const g=t.bone.matrix,v=g.tx,y=g.ty,x=g.a,_=g.c,b=g.b,E=g.d;for(let T=e,S=s;S<r;T+=2,S+=o){const C=l[T],M=l[T+1];n[S]=C*x+M*_+v,n[S+1]=C*b+M*E+y}return}let c=0,f=0;for(let g=0;g<e;g+=2){const v=u[c];c+=v+1,f+=v}const p=h.bones;if(a.length==0)for(let g=s,v=f*3;g<r;g+=o){let y=0,x=0,_=u[c++];for(_+=c;c<_;c++,v+=3){const b=p[u[c]].matrix,E=l[v],T=l[v+1],S=l[v+2];y+=(E*b.a+T*b.c+b.tx)*S,x+=(E*b.b+T*b.d+b.ty)*S}n[g]=y,n[g+1]=x}else{const g=a;for(let v=s,y=f*3,x=f<<1;v<r;v+=o){let _=0,b=0,E=u[c++];for(E+=c;c<E;c++,y+=3,x+=2){const T=p[u[c]].matrix,S=l[y]+g[x],C=l[y+1]+g[x+1],M=l[y+2];_+=(S*T.a+C*T.c+T.tx)*M,b+=(S*T.b+C*T.d+T.ty)*M}n[v]=_,n[v+1]=b}}}applyDeform(t){return this==t}};let Wa=hA;Wa.nextID=0;let uA=class extends Wa{constructor(t){super(t),this.type=ue.BoundingBox,this.color=new bt(1,1,1,1)}},cA=class extends Wa{constructor(t){super(t),this.type=ue.Clipping,this.color=new bt(.2275,.2275,.8078,1)}},s0=class extends Wa{constructor(t){super(t),this.type=ue.Mesh,this.color=new bt(1,1,1,1),this.inheritDeform=!1,this.tempColor=new bt(0,0,0,0)}applyDeform(t){return this==t||this.inheritDeform&&this.parentMesh==t}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t!=null&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}},uu=class extends Wa{constructor(t){super(t),this.type=ue.Path,this.closed=!1,this.constantSpeed=!1,this.color=new bt(1,1,1,1)}},dA=class extends Wa{constructor(t){super(t),this.type=ue.Point,this.color=new bt(.38,.94,0,1)}computeWorldPosition(t,e){const r=t.matrix;return e.x=this.x*r.a+this.y*r.c+t.worldX,e.y=this.x*r.b+this.y*r.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix,r=q.cosDeg(this.rotation),n=q.sinDeg(this.rotation),s=r*e.a+n*e.c,o=r*e.b+n*e.d;return Math.atan2(o,s)*q.radDeg}},a0=class{constructor(t,e){if(this.attachmentVertices=new Array,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new bt,this.darkColor=t.darkColor==null?null:new bt,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}};const Qr=class extends i0{constructor(t){super(t),this.type=ue.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new bt(1,1,1,1),this.offset=et.newFloatArray(8),this.uvs=et.newFloatArray(8),this.tempColor=new bt(1,1,1,1)}updateOffset(){const t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,s=r+this.region.width*t,o=n+this.region.height*e,h=this.rotation*Math.PI/180,a=Math.cos(h),l=Math.sin(h),u=r*a+this.x,c=r*l,f=n*a+this.y,p=n*l,g=s*a+this.x,v=s*l,y=o*a+this.y,x=o*l,_=this.offset;_[Qr.OX1]=u-p,_[Qr.OY1]=f+c,_[Qr.OX2]=u-x,_[Qr.OY2]=y+c,_[Qr.OX3]=g-x,_[Qr.OY3]=y+v,_[Qr.OX4]=g-p,_[Qr.OY4]=f+v}setRegion(t){this.region=t;const e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,r,n){const s=this.offset,o=t instanceof a0?t.bone.matrix:t.matrix,h=o.tx,a=o.ty,l=o.a,u=o.c,c=o.b,f=o.d;let p=0,g=0;p=s[Qr.OX1],g=s[Qr.OY1],e[r]=p*l+g*u+h,e[r+1]=p*c+g*f+a,r+=n,p=s[Qr.OX2],g=s[Qr.OY2],e[r]=p*l+g*u+h,e[r+1]=p*c+g*f+a,r+=n,p=s[Qr.OX3],g=s[Qr.OY3],e[r]=p*l+g*u+h,e[r+1]=p*c+g*f+a,r+=n,p=s[Qr.OX4],g=s[Qr.OY4],e[r]=p*l+g*u+h,e[r+1]=p*c+g*f+a}};let oe=Qr;oe.OX1=0;oe.OY1=1;oe.OX2=2;oe.OY2=3;oe.OX3=4;oe.OY3=5;oe.OX4=6;oe.OY4=7;oe.X1=0;oe.Y1=1;oe.C1R=2;oe.C1G=3;oe.C1B=4;oe.C1A=5;oe.U1=6;oe.V1=7;oe.X2=8;oe.Y2=9;oe.C2R=10;oe.C2G=11;oe.C2B=12;oe.C2A=13;oe.U2=14;oe.V2=15;oe.X3=16;oe.Y3=17;oe.C3R=18;oe.C3G=19;oe.C3B=20;oe.C3A=21;oe.U3=22;oe.V3=23;oe.X4=24;oe.Y4=25;oe.C4R=26;oe.C4G=27;oe.C4B=28;oe.C4A=29;oe.U4=30;oe.V4=31;class VB{constructor(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}begin(t){}transform(t,e,r,n){t.x+=q.randomTriangular(-this.jitterX,this.jitterY),t.y+=q.randomTriangular(-this.jitterX,this.jitterY)}end(){}}const fA=class{constructor(i){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=i}begin(i){this.worldX=i.x+this.centerX,this.worldY=i.y+this.centerY}transform(i,t,e,r){const n=this.angle*q.degreesToRadians,s=i.x-this.worldX,o=i.y-this.worldY,h=Math.sqrt(s*s+o*o);if(h<this.radius){const a=fA.interpolation.apply(0,n,(this.radius-h)/this.radius),l=Math.cos(a),u=Math.sin(a);i.x=l*s-u*o+this.worldX,i.y=u*s+l*o+this.worldY}}end(){}};let pA=fA;pA.interpolation=new HS(2);let Ur=class{constructor(t,e,r){if(t==null)throw new Error("name cannot be null.");if(e==null)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=r}apply(t,e,r,n,s,o,h,a){if(t==null)throw new Error("skeleton cannot be null.");n&&this.duration!=0&&(r%=this.duration,e>0&&(e%=this.duration));const l=this.timelines;for(let u=0,c=l.length;u<c;u++)l[u].apply(t,e,r,s,o,h,a)}static binarySearch(t,e,r=1){let n=0,s=t.length/r-2;if(s==0)return r;let o=s>>>1;for(;;){if(t[(o+1)*r]<=e?n=o+1:s=o,n==s)return(n+1)*r;o=n+s>>>1}}static linearSearch(t,e,r){for(let n=0,s=t.length-r;n<=s;n+=r)if(t[n]>e)return n;return-1}};var mA=(i=>(i[i.rotate=0]="rotate",i[i.translate=1]="translate",i[i.scale=2]="scale",i[i.shear=3]="shear",i[i.attachment=4]="attachment",i[i.color=5]="color",i[i.deform=6]="deform",i[i.event=7]="event",i[i.drawOrder=8]="drawOrder",i[i.ikConstraint=9]="ikConstraint",i[i.transformConstraint=10]="transformConstraint",i[i.pathConstraintPosition=11]="pathConstraintPosition",i[i.pathConstraintSpacing=12]="pathConstraintSpacing",i[i.pathConstraintMix=13]="pathConstraintMix",i[i.twoColor=14]="twoColor",i))(mA||{});const xr=class{constructor(i){if(i<=0)throw new Error(`frameCount must be > 0: ${i}`);this.curves=et.newFloatArray((i-1)*xr.BEZIER_SIZE)}getFrameCount(){return this.curves.length/xr.BEZIER_SIZE+1}setLinear(i){this.curves[i*xr.BEZIER_SIZE]=xr.LINEAR}setStepped(i){this.curves[i*xr.BEZIER_SIZE]=xr.STEPPED}getCurveType(i){const t=i*xr.BEZIER_SIZE;if(t==this.curves.length)return xr.LINEAR;const e=this.curves[t];return e==xr.LINEAR?xr.LINEAR:e==xr.STEPPED?xr.STEPPED:xr.BEZIER}setCurve(i,t,e,r,n){const s=(-t*2+r)*.03,o=(-e*2+n)*.03,h=((t-r)*3+1)*.006,a=((e-n)*3+1)*.006;let l=s*2+h,u=o*2+a,c=t*.3+s+h*.16666667,f=e*.3+o+a*.16666667,p=i*xr.BEZIER_SIZE;const g=this.curves;g[p++]=xr.BEZIER;let v=c,y=f;for(let x=p+xr.BEZIER_SIZE-1;p<x;p+=2)g[p]=v,g[p+1]=y,c+=l,f+=u,l+=h,u+=a,v+=c,y+=f}getCurvePercent(i,t){t=q.clamp(t,0,1);const e=this.curves;let r=i*xr.BEZIER_SIZE;const n=e[r];if(n==xr.LINEAR)return t;if(n==xr.STEPPED)return 0;r++;let s=0;for(let h=r,a=r+xr.BEZIER_SIZE-1;r<a;r+=2)if(s=e[r],s>=t){let l,u;return r==h?(l=0,u=0):(l=e[r-2],u=e[r-1]),u+(e[r+1]-u)*(t-l)/(s-l)}const o=e[r-1];return o+(1-o)*(t-s)/(1-s)}};let Gn=xr;Gn.LINEAR=0;Gn.STEPPED=1;Gn.BEZIER=2;Gn.BEZIER_SIZE=10*2-1;const Aa=class extends Gn{constructor(i){super(i),this.frames=et.newFloatArray(i<<1)}getPropertyId(){return 0+this.boneIndex}setFrame(i,t,e){i<<=1,this.frames[i]=t,this.frames[i+Aa.ROTATION]=e}apply(i,t,e,r,n,s,o){const h=this.frames,a=i.bones[this.boneIndex];if(e<h[0]){switch(s){case z.setup:a.rotation=a.data.rotation;return;case z.first:const g=a.data.rotation-a.rotation;a.rotation+=(g-(16384-(16384.499999999996-g/360|0))*360)*n}return}if(e>=h[h.length-Aa.ENTRIES]){let g=h[h.length+Aa.PREV_ROTATION];switch(s){case z.setup:a.rotation=a.data.rotation+g*n;break;case z.first:case z.replace:g+=a.data.rotation-a.rotation,g-=(16384-(16384.499999999996-g/360|0))*360;case z.add:a.rotation+=g*n}return}const l=Ur.binarySearch(h,e,Aa.ENTRIES),u=h[l+Aa.PREV_ROTATION],c=h[l],f=this.getCurvePercent((l>>1)-1,1-(e-c)/(h[l+Aa.PREV_TIME]-c));let p=h[l+Aa.ROTATION]-u;switch(p=u+(p-(16384-(16384.499999999996-p/360|0))*360)*f,s){case z.setup:a.rotation=a.data.rotation+(p-(16384-(16384.499999999996-p/360|0))*360)*n;break;case z.first:case z.replace:p+=a.data.rotation-a.rotation;case z.add:a.rotation+=(p-(16384-(16384.499999999996-p/360|0))*360)*n}}};let xn=Aa;xn.ENTRIES=2;xn.PREV_TIME=-2;xn.PREV_ROTATION=-1;xn.ROTATION=1;const vn=class extends Gn{constructor(i){super(i),this.frames=et.newFloatArray(i*vn.ENTRIES)}getPropertyId(){return(1<<24)+this.boneIndex}setFrame(i,t,e,r){i*=vn.ENTRIES,this.frames[i]=t,this.frames[i+vn.X]=e,this.frames[i+vn.Y]=r}apply(i,t,e,r,n,s,o){const h=this.frames,a=i.bones[this.boneIndex];if(e<h[0]){switch(s){case z.setup:a.x=a.data.x,a.y=a.data.y;return;case z.first:a.x+=(a.data.x-a.x)*n,a.y+=(a.data.y-a.y)*n}return}let l=0,u=0;if(e>=h[h.length-vn.ENTRIES])l=h[h.length+vn.PREV_X],u=h[h.length+vn.PREV_Y];else{const c=Ur.binarySearch(h,e,vn.ENTRIES);l=h[c+vn.PREV_X],u=h[c+vn.PREV_Y];const f=h[c],p=this.getCurvePercent(c/vn.ENTRIES-1,1-(e-f)/(h[c+vn.PREV_TIME]-f));l+=(h[c+vn.X]-l)*p,u+=(h[c+vn.Y]-u)*p}switch(s){case z.setup:a.x=a.data.x+l*n,a.y=a.data.y+u*n;break;case z.first:case z.replace:a.x+=(a.data.x+l-a.x)*n,a.y+=(a.data.y+u-a.y)*n;break;case z.add:a.x+=l*n,a.y+=u*n}}};let Hi=vn;Hi.ENTRIES=3;Hi.PREV_TIME=-3;Hi.PREV_X=-2;Hi.PREV_Y=-1;Hi.X=1;Hi.Y=2;let gA=class Fi extends Hi{constructor(t){super(t)}getPropertyId(){return(2<<24)+this.boneIndex}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.bones[this.boneIndex];if(r<a[0]){switch(o){case z.setup:l.scaleX=l.data.scaleX,l.scaleY=l.data.scaleY;return;case z.first:l.scaleX+=(l.data.scaleX-l.scaleX)*s,l.scaleY+=(l.data.scaleY-l.scaleY)*s}return}let u=0,c=0;if(r>=a[a.length-Fi.ENTRIES])u=a[a.length+Fi.PREV_X]*l.data.scaleX,c=a[a.length+Fi.PREV_Y]*l.data.scaleY;else{const f=Ur.binarySearch(a,r,Fi.ENTRIES);u=a[f+Fi.PREV_X],c=a[f+Fi.PREV_Y];const p=a[f],g=this.getCurvePercent(f/Fi.ENTRIES-1,1-(r-p)/(a[f+Fi.PREV_TIME]-p));u=(u+(a[f+Fi.X]-u)*g)*l.data.scaleX,c=(c+(a[f+Fi.Y]-c)*g)*l.data.scaleY}if(s==1)o==z.add?(l.scaleX+=u-l.data.scaleX,l.scaleY+=c-l.data.scaleY):(l.scaleX=u,l.scaleY=c);else{let f=0,p=0;if(h==he.mixOut)switch(o){case z.setup:f=l.data.scaleX,p=l.data.scaleY,l.scaleX=f+(Math.abs(u)*q.signum(f)-f)*s,l.scaleY=p+(Math.abs(c)*q.signum(p)-p)*s;break;case z.first:case z.replace:f=l.scaleX,p=l.scaleY,l.scaleX=f+(Math.abs(u)*q.signum(f)-f)*s,l.scaleY=p+(Math.abs(c)*q.signum(p)-p)*s;break;case z.add:f=l.scaleX,p=l.scaleY,l.scaleX=f+(Math.abs(u)*q.signum(f)-l.data.scaleX)*s,l.scaleY=p+(Math.abs(c)*q.signum(p)-l.data.scaleY)*s}else switch(o){case z.setup:f=Math.abs(l.data.scaleX)*q.signum(u),p=Math.abs(l.data.scaleY)*q.signum(c),l.scaleX=f+(u-f)*s,l.scaleY=p+(c-p)*s;break;case z.first:case z.replace:f=Math.abs(l.scaleX)*q.signum(u),p=Math.abs(l.scaleY)*q.signum(c),l.scaleX=f+(u-f)*s,l.scaleY=p+(c-p)*s;break;case z.add:f=q.signum(u),p=q.signum(c),l.scaleX=Math.abs(l.scaleX)*f+(u-Math.abs(l.data.scaleX)*f)*s,l.scaleY=Math.abs(l.scaleY)*p+(c-Math.abs(l.data.scaleY)*p)*s}}}},vA=class Bi extends Hi{constructor(t){super(t)}getPropertyId(){return(3<<24)+this.boneIndex}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.bones[this.boneIndex];if(r<a[0]){switch(o){case z.setup:l.shearX=l.data.shearX,l.shearY=l.data.shearY;return;case z.first:l.shearX+=(l.data.shearX-l.shearX)*s,l.shearY+=(l.data.shearY-l.shearY)*s}return}let u=0,c=0;if(r>=a[a.length-Bi.ENTRIES])u=a[a.length+Bi.PREV_X],c=a[a.length+Bi.PREV_Y];else{const f=Ur.binarySearch(a,r,Bi.ENTRIES);u=a[f+Bi.PREV_X],c=a[f+Bi.PREV_Y];const p=a[f],g=this.getCurvePercent(f/Bi.ENTRIES-1,1-(r-p)/(a[f+Bi.PREV_TIME]-p));u=u+(a[f+Bi.X]-u)*g,c=c+(a[f+Bi.Y]-c)*g}switch(o){case z.setup:l.shearX=l.data.shearX+u*s,l.shearY=l.data.shearY+c*s;break;case z.first:case z.replace:l.shearX+=(l.data.shearX+u-l.shearX)*s,l.shearY+=(l.data.shearY+c-l.shearY)*s;break;case z.add:l.shearX+=u*s,l.shearY+=c*s}}};const ar=class extends Gn{constructor(i){super(i),this.frames=et.newFloatArray(i*ar.ENTRIES)}getPropertyId(){return(5<<24)+this.slotIndex}setFrame(i,t,e,r,n,s){i*=ar.ENTRIES,this.frames[i]=t,this.frames[i+ar.R]=e,this.frames[i+ar.G]=r,this.frames[i+ar.B]=n,this.frames[i+ar.A]=s}apply(i,t,e,r,n,s,o){const h=i.slots[this.slotIndex],a=this.frames;if(e<a[0]){switch(s){case z.setup:h.color.setFromColor(h.data.color);return;case z.first:const p=h.color,g=h.data.color;p.add((g.r-p.r)*n,(g.g-p.g)*n,(g.b-p.b)*n,(g.a-p.a)*n)}return}let l=0,u=0,c=0,f=0;if(e>=a[a.length-ar.ENTRIES]){const p=a.length;l=a[p+ar.PREV_R],u=a[p+ar.PREV_G],c=a[p+ar.PREV_B],f=a[p+ar.PREV_A]}else{const p=Ur.binarySearch(a,e,ar.ENTRIES);l=a[p+ar.PREV_R],u=a[p+ar.PREV_G],c=a[p+ar.PREV_B],f=a[p+ar.PREV_A];const g=a[p],v=this.getCurvePercent(p/ar.ENTRIES-1,1-(e-g)/(a[p+ar.PREV_TIME]-g));l+=(a[p+ar.R]-l)*v,u+=(a[p+ar.G]-u)*v,c+=(a[p+ar.B]-c)*v,f+=(a[p+ar.A]-f)*v}if(n==1)h.color.set(l,u,c,f);else{const p=h.color;s==z.setup&&p.setFromColor(h.data.color),p.add((l-p.r)*n,(u-p.g)*n,(c-p.b)*n,(f-p.a)*n)}}};let ri=ar;ri.ENTRIES=5;ri.PREV_TIME=-5;ri.PREV_R=-4;ri.PREV_G=-3;ri.PREV_B=-2;ri.PREV_A=-1;ri.R=1;ri.G=2;ri.B=3;ri.A=4;const be=class extends Gn{constructor(i){super(i),this.frames=et.newFloatArray(i*be.ENTRIES)}getPropertyId(){return(14<<24)+this.slotIndex}setFrame(i,t,e,r,n,s,o,h,a){i*=be.ENTRIES,this.frames[i]=t,this.frames[i+be.R]=e,this.frames[i+be.G]=r,this.frames[i+be.B]=n,this.frames[i+be.A]=s,this.frames[i+be.R2]=o,this.frames[i+be.G2]=h,this.frames[i+be.B2]=a}apply(i,t,e,r,n,s,o){const h=i.slots[this.slotIndex],a=this.frames;if(e<a[0]){switch(s){case z.setup:h.color.setFromColor(h.data.color),h.darkColor.setFromColor(h.data.darkColor);return;case z.first:const y=h.color,x=h.darkColor,_=h.data.color,b=h.data.darkColor;y.add((_.r-y.r)*n,(_.g-y.g)*n,(_.b-y.b)*n,(_.a-y.a)*n),x.add((b.r-x.r)*n,(b.g-x.g)*n,(b.b-x.b)*n,0)}return}let l=0,u=0,c=0,f=0,p=0,g=0,v=0;if(e>=a[a.length-be.ENTRIES]){const y=a.length;l=a[y+be.PREV_R],u=a[y+be.PREV_G],c=a[y+be.PREV_B],f=a[y+be.PREV_A],p=a[y+be.PREV_R2],g=a[y+be.PREV_G2],v=a[y+be.PREV_B2]}else{const y=Ur.binarySearch(a,e,be.ENTRIES);l=a[y+be.PREV_R],u=a[y+be.PREV_G],c=a[y+be.PREV_B],f=a[y+be.PREV_A],p=a[y+be.PREV_R2],g=a[y+be.PREV_G2],v=a[y+be.PREV_B2];const x=a[y],_=this.getCurvePercent(y/be.ENTRIES-1,1-(e-x)/(a[y+be.PREV_TIME]-x));l+=(a[y+be.R]-l)*_,u+=(a[y+be.G]-u)*_,c+=(a[y+be.B]-c)*_,f+=(a[y+be.A]-f)*_,p+=(a[y+be.R2]-p)*_,g+=(a[y+be.G2]-g)*_,v+=(a[y+be.B2]-v)*_}if(n==1)h.color.set(l,u,c,f),h.darkColor.set(p,g,v,1);else{const y=h.color,x=h.darkColor;s==z.setup&&(y.setFromColor(h.data.color),x.setFromColor(h.data.darkColor)),y.add((l-y.r)*n,(u-y.g)*n,(c-y.b)*n,(f-y.a)*n),x.add((p-x.r)*n,(g-x.g)*n,(v-x.b)*n,0)}}};let Lr=be;Lr.ENTRIES=8;Lr.PREV_TIME=-8;Lr.PREV_R=-7;Lr.PREV_G=-6;Lr.PREV_B=-5;Lr.PREV_A=-4;Lr.PREV_R2=-3;Lr.PREV_G2=-2;Lr.PREV_B2=-1;Lr.R=1;Lr.G=2;Lr.B=3;Lr.A=4;Lr.R2=5;Lr.G2=6;Lr.B2=7;let Hd=class{constructor(t){this.frames=et.newFloatArray(t),this.attachmentNames=new Array(t)}getPropertyId(){return(4<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(h==he.mixOut&&o==z.setup){const f=a.data.attachmentName;a.setAttachment(f==null?null:t.getAttachment(this.slotIndex,f));return}const l=this.frames;if(r<l[0]){if(o==z.setup||o==z.first){const f=a.data.attachmentName;a.setAttachment(f==null?null:t.getAttachment(this.slotIndex,f))}return}let u=0;r>=l[l.length-1]?u=l.length-1:u=Ur.binarySearch(l,r,1)-1;const c=this.attachmentNames[u];t.slots[this.slotIndex].setAttachment(c==null?null:t.getAttachment(this.slotIndex,c))}},zb=null,yA=class extends Gn{constructor(t){super(t),this.frames=et.newFloatArray(t),this.frameVertices=new Array(t),zb==null&&(zb=et.newFloatArray(64))}getPropertyId(){return(6<<27)+Number(this.attachment.id)+this.slotIndex}setFrame(t,e,r){this.frames[t]=e,this.frameVertices[t]=r}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex],l=a.getAttachment();if(!(l instanceof Wa)||!l.applyDeform(this.attachment))return;const u=a.attachmentVertices;u.length==0&&(o=z.setup);const c=this.frameVertices,f=c[0].length,p=this.frames;if(r<p[0]){const E=l;switch(o){case z.setup:u.length=0;return;case z.first:if(s==1){u.length=0;break}const T=et.setArraySize(u,f);if(E.bones==null){const S=E.vertices;for(let C=0;C<f;C++)T[C]+=(S[C]-T[C])*s}else{s=1-s;for(let S=0;S<f;S++)T[S]*=s}}return}const g=et.setArraySize(u,f);if(r>=p[p.length-1]){const E=c[p.length-1];if(s==1)if(o==z.add){const T=l;if(T.bones==null){const S=T.vertices;for(let C=0;C<f;C++)g[C]+=E[C]-S[C]}else for(let S=0;S<f;S++)g[S]+=E[S]}else et.arrayCopy(E,0,g,0,f);else switch(o){case z.setup:{const S=l;if(S.bones==null){const C=S.vertices;for(let M=0;M<f;M++){const P=C[M];g[M]=P+(E[M]-P)*s}}else for(let C=0;C<f;C++)g[C]=E[C]*s;break}case z.first:case z.replace:for(let S=0;S<f;S++)g[S]+=(E[S]-g[S])*s;case z.add:const T=l;if(T.bones==null){const S=T.vertices;for(let C=0;C<f;C++)g[C]+=(E[C]-S[C])*s}else for(let S=0;S<f;S++)g[S]+=E[S]*s}return}const v=Ur.binarySearch(p,r),y=c[v-1],x=c[v],_=p[v],b=this.getCurvePercent(v-1,1-(r-_)/(p[v-1]-_));if(s==1)if(o==z.add){const E=l;if(E.bones==null){const T=E.vertices;for(let S=0;S<f;S++){const C=y[S];g[S]+=C+(x[S]-C)*b-T[S]}}else for(let T=0;T<f;T++){const S=y[T];g[T]+=S+(x[T]-S)*b}}else for(let E=0;E<f;E++){const T=y[E];g[E]=T+(x[E]-T)*b}else switch(o){case z.setup:{const T=l;if(T.bones==null){const S=T.vertices;for(let C=0;C<f;C++){const M=y[C],P=S[C];g[C]=P+(M+(x[C]-M)*b-P)*s}}else for(let S=0;S<f;S++){const C=y[S];g[S]=(C+(x[S]-C)*b)*s}break}case z.first:case z.replace:for(let T=0;T<f;T++){const S=y[T];g[T]+=(S+(x[T]-S)*b-g[T])*s}break;case z.add:const E=l;if(E.bones==null){const T=E.vertices;for(let S=0;S<f;S++){const C=y[S];g[S]+=(C+(x[S]-C)*b-T[S])*s}}else for(let T=0;T<f;T++){const S=y[T];g[T]+=(S+(x[T]-S)*b)*s}}}},xA=class{constructor(t){this.frames=et.newFloatArray(t),this.events=new Array(t)}getPropertyId(){return 7<<24}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,r,n,s,o,h){if(n==null)return;const a=this.frames,l=this.frames.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,n,s,o,h),e=-1;else if(e>=a[l-1])return;if(r<a[0])return;let u=0;if(e<a[0])u=0;else{u=Ur.binarySearch(a,e);const c=a[u];for(;u>0&&a[u-1]==c;)u--}for(;u<l&&r>=a[u];u++)n.push(this.events[u])}},zd=class{constructor(t){this.frames=et.newFloatArray(t),this.drawOrders=new Array(t)}getPropertyId(){return 8<<24}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.drawOrders[t]=r}apply(t,e,r,n,s,o,h){const a=t.drawOrder,l=t.slots;if(h==he.mixOut&&o==z.setup){et.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}const u=this.frames;if(r<u[0]){(o==z.setup||o==z.first)&&et.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let c=0;r>=u[u.length-1]?c=u.length-1:c=Ur.binarySearch(u,r)-1;const f=this.drawOrders[c];if(f==null)et.arrayCopy(l,0,a,0,l.length);else for(let p=0,g=f.length;p<g;p++)a[p]=l[f[p]]}};const Le=class extends Gn{constructor(i){super(i),this.frames=et.newFloatArray(i*Le.ENTRIES)}getPropertyId(){return(9<<24)+this.ikConstraintIndex}setFrame(i,t,e,r,n,s){i*=Le.ENTRIES,this.frames[i]=t,this.frames[i+Le.MIX]=e,this.frames[i+Le.BEND_DIRECTION]=r,this.frames[i+Le.COMPRESS]=n?1:0,this.frames[i+Le.STRETCH]=s?1:0}apply(i,t,e,r,n,s,o){const h=this.frames,a=i.ikConstraints[this.ikConstraintIndex];if(e<h[0]){switch(s){case z.setup:a.mix=a.data.mix,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;return;case z.first:a.mix+=(a.data.mix-a.mix)*n,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}return}if(e>=h[h.length-Le.ENTRIES]){s==z.setup?(a.mix=a.data.mix+(h[h.length+Le.PREV_MIX]-a.data.mix)*n,o==he.mixOut?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=h[h.length+Le.PREV_BEND_DIRECTION],a.compress=h[h.length+Le.PREV_COMPRESS]!=0,a.stretch=h[h.length+Le.PREV_STRETCH]!=0)):(a.mix+=(h[h.length+Le.PREV_MIX]-a.mix)*n,o==he.mixIn&&(a.bendDirection=h[h.length+Le.PREV_BEND_DIRECTION],a.compress=h[h.length+Le.PREV_COMPRESS]!=0,a.stretch=h[h.length+Le.PREV_STRETCH]!=0));return}const l=Ur.binarySearch(h,e,Le.ENTRIES),u=h[l+Le.PREV_MIX],c=h[l],f=this.getCurvePercent(l/Le.ENTRIES-1,1-(e-c)/(h[l+Le.PREV_TIME]-c));s==z.setup?(a.mix=a.data.mix+(u+(h[l+Le.MIX]-u)*f-a.data.mix)*n,o==he.mixOut?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=h[l+Le.PREV_BEND_DIRECTION],a.compress=h[l+Le.PREV_COMPRESS]!=0,a.stretch=h[l+Le.PREV_STRETCH]!=0)):(a.mix+=(u+(h[l+Le.MIX]-u)*f-a.mix)*n,o==he.mixIn&&(a.bendDirection=h[l+Le.PREV_BEND_DIRECTION],a.compress=h[l+Le.PREV_COMPRESS]!=0,a.stretch=h[l+Le.PREV_STRETCH]!=0))}};let ni=Le;ni.ENTRIES=5;ni.PREV_TIME=-5;ni.PREV_MIX=-4;ni.PREV_BEND_DIRECTION=-3;ni.PREV_COMPRESS=-2;ni.PREV_STRETCH=-1;ni.MIX=1;ni.BEND_DIRECTION=2;ni.COMPRESS=3;ni.STRETCH=4;const or=class extends Gn{constructor(i){super(i),this.frames=et.newFloatArray(i*or.ENTRIES)}getPropertyId(){return(10<<24)+this.transformConstraintIndex}setFrame(i,t,e,r,n,s){i*=or.ENTRIES,this.frames[i]=t,this.frames[i+or.ROTATE]=e,this.frames[i+or.TRANSLATE]=r,this.frames[i+or.SCALE]=n,this.frames[i+or.SHEAR]=s}apply(i,t,e,r,n,s,o){const h=this.frames,a=i.transformConstraints[this.transformConstraintIndex];if(e<h[0]){const p=a.data;switch(s){case z.setup:a.rotateMix=p.rotateMix,a.translateMix=p.translateMix,a.scaleMix=p.scaleMix,a.shearMix=p.shearMix;return;case z.first:a.rotateMix+=(p.rotateMix-a.rotateMix)*n,a.translateMix+=(p.translateMix-a.translateMix)*n,a.scaleMix+=(p.scaleMix-a.scaleMix)*n,a.shearMix+=(p.shearMix-a.shearMix)*n}return}let l=0,u=0,c=0,f=0;if(e>=h[h.length-or.ENTRIES]){const p=h.length;l=h[p+or.PREV_ROTATE],u=h[p+or.PREV_TRANSLATE],c=h[p+or.PREV_SCALE],f=h[p+or.PREV_SHEAR]}else{const p=Ur.binarySearch(h,e,or.ENTRIES);l=h[p+or.PREV_ROTATE],u=h[p+or.PREV_TRANSLATE],c=h[p+or.PREV_SCALE],f=h[p+or.PREV_SHEAR];const g=h[p],v=this.getCurvePercent(p/or.ENTRIES-1,1-(e-g)/(h[p+or.PREV_TIME]-g));l+=(h[p+or.ROTATE]-l)*v,u+=(h[p+or.TRANSLATE]-u)*v,c+=(h[p+or.SCALE]-c)*v,f+=(h[p+or.SHEAR]-f)*v}if(s==z.setup){const p=a.data;a.rotateMix=p.rotateMix+(l-p.rotateMix)*n,a.translateMix=p.translateMix+(u-p.translateMix)*n,a.scaleMix=p.scaleMix+(c-p.scaleMix)*n,a.shearMix=p.shearMix+(f-p.shearMix)*n}else a.rotateMix+=(l-a.rotateMix)*n,a.translateMix+=(u-a.translateMix)*n,a.scaleMix+=(c-a.scaleMix)*n,a.shearMix+=(f-a.shearMix)*n}};let ii=or;ii.ENTRIES=5;ii.PREV_TIME=-5;ii.PREV_ROTATE=-4;ii.PREV_TRANSLATE=-3;ii.PREV_SCALE=-2;ii.PREV_SHEAR=-1;ii.ROTATE=1;ii.TRANSLATE=2;ii.SCALE=3;ii.SHEAR=4;const Ni=class extends Gn{constructor(i){super(i),this.frames=et.newFloatArray(i*Ni.ENTRIES)}getPropertyId(){return(11<<24)+this.pathConstraintIndex}setFrame(i,t,e){i*=Ni.ENTRIES,this.frames[i]=t,this.frames[i+Ni.VALUE]=e}apply(i,t,e,r,n,s,o){const h=this.frames,a=i.pathConstraints[this.pathConstraintIndex];if(e<h[0]){switch(s){case z.setup:a.position=a.data.position;return;case z.first:a.position+=(a.data.position-a.position)*n}return}let l=0;if(e>=h[h.length-Ni.ENTRIES])l=h[h.length+Ni.PREV_VALUE];else{const u=Ur.binarySearch(h,e,Ni.ENTRIES);l=h[u+Ni.PREV_VALUE];const c=h[u],f=this.getCurvePercent(u/Ni.ENTRIES-1,1-(e-c)/(h[u+Ni.PREV_TIME]-c));l+=(h[u+Ni.VALUE]-l)*f}s==z.setup?a.position=a.data.position+(l-a.data.position)*n:a.position+=(l-a.position)*n}};let Ua=Ni;Ua.ENTRIES=2;Ua.PREV_TIME=-2;Ua.PREV_VALUE=-1;Ua.VALUE=1;let wA=class Ca extends Ua{constructor(t){super(t)}getPropertyId(){return(12<<24)+this.pathConstraintIndex}apply(t,e,r,n,s,o,h){const a=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(r<a[0]){switch(o){case z.setup:l.spacing=l.data.spacing;return;case z.first:l.spacing+=(l.data.spacing-l.spacing)*s}return}let u=0;if(r>=a[a.length-Ca.ENTRIES])u=a[a.length+Ca.PREV_VALUE];else{const c=Ur.binarySearch(a,r,Ca.ENTRIES);u=a[c+Ca.PREV_VALUE];const f=a[c],p=this.getCurvePercent(c/Ca.ENTRIES-1,1-(r-f)/(a[c+Ca.PREV_TIME]-f));u+=(a[c+Ca.VALUE]-u)*p}o==z.setup?l.spacing=l.data.spacing+(u-l.data.spacing)*s:l.spacing+=(u-l.spacing)*s}};const yn=class extends Gn{constructor(i){super(i),this.frames=et.newFloatArray(i*yn.ENTRIES)}getPropertyId(){return(13<<24)+this.pathConstraintIndex}setFrame(i,t,e,r){i*=yn.ENTRIES,this.frames[i]=t,this.frames[i+yn.ROTATE]=e,this.frames[i+yn.TRANSLATE]=r}apply(i,t,e,r,n,s,o){const h=this.frames,a=i.pathConstraints[this.pathConstraintIndex];if(e<h[0]){switch(s){case z.setup:a.rotateMix=a.data.rotateMix,a.translateMix=a.data.translateMix;return;case z.first:a.rotateMix+=(a.data.rotateMix-a.rotateMix)*n,a.translateMix+=(a.data.translateMix-a.translateMix)*n}return}let l=0,u=0;if(e>=h[h.length-yn.ENTRIES])l=h[h.length+yn.PREV_ROTATE],u=h[h.length+yn.PREV_TRANSLATE];else{const c=Ur.binarySearch(h,e,yn.ENTRIES);l=h[c+yn.PREV_ROTATE],u=h[c+yn.PREV_TRANSLATE];const f=h[c],p=this.getCurvePercent(c/yn.ENTRIES-1,1-(e-f)/(h[c+yn.PREV_TIME]-f));l+=(h[c+yn.ROTATE]-l)*p,u+=(h[c+yn.TRANSLATE]-u)*p}s==z.setup?(a.rotateMix=a.data.rotateMix+(l-a.data.rotateMix)*n,a.translateMix=a.data.translateMix+(u-a.data.translateMix)*n):(a.rotateMix+=(l-a.rotateMix)*n,a.translateMix+=(u-a.translateMix)*n)}};let qs=yn;qs.ENTRIES=3;qs.PREV_TIME=-3;qs.PREV_ROTATE=-2;qs.PREV_TRANSLATE=-1;qs.ROTATE=1;qs.TRANSLATE=2;const $r=class{constructor(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new o0(this),this.propertyIDs=new $S,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new gf(()=>new _f),this.data=t}update(t){t*=this.timeScale;const e=this.tracks;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s==null)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let o=t*s.timeScale;if(s.delay>0){if(s.delay-=o,s.delay>0)continue;o=-s.delay,s.delay=0}let h=s.next;if(h!=null){const a=s.trackLast-h.delay;if(a>=0){for(h.delay=0,h.trackTime=s.timeScale==0?0:(a/s.timeScale+t)*h.timeScale,s.trackTime+=o,this.setCurrent(r,h,!0);h.mixingFrom!=null;)h.mixTime+=t,h=h.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&s.mixingFrom==null){e[r]=null,this.queue.end(s),this.disposeNext(s);continue}if(s.mixingFrom!=null&&this.updateMixingFrom(s,t)){let a=s.mixingFrom;for(s.mixingFrom=null,a!=null&&(a.mixingTo=null);a!=null;)this.queue.end(a),a=a.mixingFrom}s.trackTime+=o}this.queue.drain()}updateMixingFrom(t,e){const r=t.mixingFrom;if(r==null)return!0;const n=this.updateMixingFrom(r,e);return r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((r.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=r.mixingFrom,r.mixingFrom!=null&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),n):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1)}apply(t){if(t==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();const e=this.events,r=this.tracks;let n=!1;for(let s=0,o=r.length;s<o;s++){const h=r[s];if(h==null||h.delay>0)continue;n=!0;const a=s==0?z.first:h.mixBlend;let l=h.alpha;h.mixingFrom!=null?l*=this.applyMixingFrom(h,t,a):h.trackTime>=h.trackEnd&&h.next==null&&(l=0);const u=h.animationLast,c=h.getAnimationTime(),f=h.animation.timelines.length,p=h.animation.timelines;if(s==0&&l==1||a==z.add)for(let g=0;g<f;g++)p[g].apply(t,u,c,e,l,a,he.mixIn);else{const g=h.timelineMode,v=h.timelinesRotation.length==0;v&&et.setArraySize(h.timelinesRotation,f<<1,null);const y=h.timelinesRotation;for(let x=0;x<f;x++){const _=p[x],b=g[x]==$r.SUBSEQUENT?a:z.setup;_ instanceof xn?this.applyRotateTimeline(_,t,c,l,b,y,x<<1,v):_.apply(t,u,c,e,l,b,he.mixIn)}}this.queueEvents(h,c),e.length=0,h.nextAnimationLast=c,h.nextTrackLast=h.trackTime}return this.queue.drain(),n}applyMixingFrom(t,e,r){const n=t.mixingFrom;n.mixingFrom!=null&&this.applyMixingFrom(n,e,r);let s=0;t.mixDuration==0?(s=1,r==z.first&&(r=z.setup)):(s=t.mixTime/t.mixDuration,s>1&&(s=1),r!=z.first&&(r=n.mixBlend));const o=s<n.eventThreshold?this.events:null,h=s<n.attachmentThreshold,a=s<n.drawOrderThreshold,l=n.animationLast,u=n.getAnimationTime(),c=n.animation.timelines.length,f=n.animation.timelines,p=n.alpha*t.interruptAlpha,g=p*(1-s);if(r==z.add)for(let v=0;v<c;v++)f[v].apply(e,l,u,o,g,r,he.mixOut);else{const v=n.timelineMode,y=n.timelineHoldMix,x=n.timelinesRotation.length==0;x&&et.setArraySize(n.timelinesRotation,c<<1,null);const _=n.timelinesRotation;n.totalAlpha=0;for(let b=0;b<c;b++){const E=f[b];let T=he.mixOut,S,C=0;switch(v[b]){case $r.SUBSEQUENT:if(!h&&E instanceof Hd||!a&&E instanceof zd)continue;S=r,C=g;break;case $r.FIRST:S=z.setup,C=g;break;case $r.HOLD:S=z.setup,C=p;break;default:S=z.setup;const M=y[b];C=p*Math.max(0,1-M.mixTime/M.mixDuration);break}n.totalAlpha+=C,E instanceof xn?this.applyRotateTimeline(E,e,u,C,S,_,b<<1,x):(S==z.setup&&(E instanceof Hd?h&&(T=he.mixOut):E instanceof zd&&a&&(T=he.mixOut)),E.apply(e,l,u,o,C,S,T))}}return t.mixDuration>0&&this.queueEvents(n,u),this.events.length=0,n.nextAnimationLast=u,n.nextTrackLast=n.trackTime,s}applyRotateTimeline(t,e,r,n,s,o,h,a){if(a&&(o[h]=0),n==1){t.apply(e,0,r,null,1,s,he.mixIn);return}const l=t,u=l.frames,c=e.bones[l.boneIndex];let f=0,p=0;if(r<u[0])switch(s){case z.setup:c.rotation=c.data.rotation;default:return;case z.first:f=c.rotation,p=c.data.rotation}else if(f=s==z.setup?c.data.rotation:c.rotation,r>=u[u.length-xn.ENTRIES])p=c.data.rotation+u[u.length+xn.PREV_ROTATION];else{const y=Ur.binarySearch(u,r,xn.ENTRIES),x=u[y+xn.PREV_ROTATION],_=u[y],b=l.getCurvePercent((y>>1)-1,1-(r-_)/(u[y+xn.PREV_TIME]-_));p=u[y+xn.ROTATION]-x,p-=(16384-(16384.499999999996-p/360|0))*360,p=x+p*b+c.data.rotation,p-=(16384-(16384.499999999996-p/360|0))*360}let g=0,v=p-f;if(v-=(16384-(16384.499999999996-v/360|0))*360,v==0)g=o[h];else{let y=0,x=0;a?(y=0,x=v):(y=o[h],x=o[h+1]);const _=v>0;let b=y>=0;q.signum(x)!=q.signum(v)&&Math.abs(x)<=90&&(Math.abs(y)>180&&(y+=360*q.signum(y)),b=_),g=v+y-y%360,b!=_&&(g+=360*q.signum(y)),o[h]=g}o[h+1]=v,f+=g*n,c.rotation=f-(16384-(16384.499999999996-f/360|0))*360}queueEvents(t,e){const r=t.animationStart,n=t.animationEnd,s=n-r,o=t.trackLast%s,h=this.events;let a=0;const l=h.length;for(;a<l;a++){const c=h[a];if(c.time<o)break;c.time>n||this.queue.event(t,c)}let u=!1;for(t.loop?u=s==0||o>t.trackTime%s:u=e>=n&&t.animationLast<n,u&&this.queue.complete(t);a<l;a++)h[a].time<r||this.queue.event(t,h[a])}clearTracks(){const t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,r=this.tracks.length;e<r;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;const e=this.tracks[t];if(e==null)return;this.queue.end(e),this.disposeNext(e);let r=e;for(;;){const n=r.mixingFrom;if(n==null)break;this.queue.end(n),r.mixingFrom=null,r.mixingTo=null,r=n}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,r){const n=this.expandToIndex(t);this.tracks[t]=e,n!=null&&(r&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,n.mixingFrom!=null&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,r){const n=this.data.skeletonData.findAnimation(e);if(n==null)throw new Error(`Animation not found: ${e}`);return this.setAnimationWith(t,n,r)}setAnimationWith(t,e,r){if(e==null)throw new Error("animation cannot be null.");let n=!0,s=this.expandToIndex(t);s!=null&&(s.nextTrackLast==-1?(this.tracks[t]=s.mixingFrom,this.queue.interrupt(s),this.queue.end(s),this.disposeNext(s),s=s.mixingFrom,n=!1):this.disposeNext(s));const o=this.trackEntry(t,e,r,s);return this.setCurrent(t,o,n),this.queue.drain(),o}addAnimation(t,e,r,n){const s=this.data.skeletonData.findAnimation(e);if(s==null)throw new Error(`Animation not found: ${e}`);return this.addAnimationWith(t,s,r,n)}addAnimationWith(t,e,r,n){if(e==null)throw new Error("animation cannot be null.");let s=this.expandToIndex(t);if(s!=null)for(;s.next!=null;)s=s.next;const o=this.trackEntry(t,e,r,s);if(s==null)this.setCurrent(t,o,!0),this.queue.drain();else if(s.next=o,n<=0){const h=s.animationEnd-s.animationStart;h!=0?(s.loop?n+=h*(1+(s.trackTime/h|0)):n+=Math.max(h,s.trackTime),n-=this.data.getMix(s.animation,e)):n=s.trackTime}return o.delay=n,o}setEmptyAnimation(t,e){const r=this.setAnimationWith(t,$r.emptyAnimation,!1);return r.mixDuration=e,r.trackEnd=e,r}addEmptyAnimation(t,e,r){r<=0&&(r-=e);const n=this.addAnimationWith(t,$r.emptyAnimation,!1,r);return n.mixDuration=e,n.trackEnd=e,n}setEmptyAnimations(t){const e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let r=0,n=this.tracks.length;r<n;r++){const s=this.tracks[r];s!=null&&this.setEmptyAnimation(s.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(et.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,r,n){const s=this.trackEntryPool.obtain();return s.trackIndex=t,s.animation=e,s.loop=r,s.holdPrevious=!1,s.eventThreshold=0,s.attachmentThreshold=0,s.drawOrderThreshold=0,s.animationStart=0,s.animationEnd=e.duration,s.animationLast=-1,s.nextAnimationLast=-1,s.delay=0,s.trackTime=0,s.trackLast=-1,s.nextTrackLast=-1,s.trackEnd=Number.MAX_VALUE,s.timeScale=1,s.alpha=1,s.interruptAlpha=1,s.mixTime=0,s.mixDuration=n==null?0:this.data.getMix(n.animation,e),s}disposeNext(t){let e=t.next;for(;e!=null;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();for(let t=0,e=this.tracks.length;t<e;t++){let r=this.tracks[t];if(r!=null){for(;r.mixingFrom!=null;)r=r.mixingFrom;do(r.mixingFrom==null||r.mixBlend!=z.add)&&this.setTimelineModes(r),r=r.mixingTo;while(r!=null)}}}setTimelineModes(t){const e=t.mixingTo,r=t.animation.timelines,n=t.animation.timelines.length,s=et.setArraySize(t.timelineMode,n);t.timelineHoldMix.length=0;const o=et.setArraySize(t.timelineHoldMix,n),h=this.propertyIDs;if(e!=null&&e.holdPrevious){for(let a=0;a<n;a++)h.add(r[a].getPropertyId()),s[a]=$r.HOLD;return}t:for(let a=0;a<n;a++){const l=r[a].getPropertyId();if(!h.add(l))s[a]=$r.SUBSEQUENT;else if(e==null||!this.hasTimeline(e,l))s[a]=$r.FIRST;else{for(let u=e.mixingTo;u!=null;u=u.mixingTo)if(!this.hasTimeline(u,l)){if(t.mixDuration>0){s[a]=$r.HOLD_MIX,o[a]=u;continue t}break}s[a]=$r.HOLD}}}hasTimeline(t,e){const r=t.animation.timelines;for(let n=0,s=r.length;n<s;n++)if(r[n].getPropertyId()==e)return!0;return!1}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(t==null)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}setAnimationByName(t,e,r){$r.deprecatedWarning1||($r.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,r)}addAnimationByName(t,e,r,n){$r.deprecatedWarning2||($r.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,r,n)}hasAnimation(t){return this.data.skeletonData.findAnimation(t)!==null}hasAnimationByName(t){return $r.deprecatedWarning3||($r.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)}};let xs=$r;xs.emptyAnimation=new Ur("<empty>",[],0);xs.SUBSEQUENT=0;xs.FIRST=1;xs.HOLD=2;xs.HOLD_MIX=3;xs.deprecatedWarning1=!1;xs.deprecatedWarning2=!1;xs.deprecatedWarning3=!1;const Ls=class{constructor(){this.mixBlend=z.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}get time(){return Ls.deprecatedWarning1||(Ls.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(t){Ls.deprecatedWarning1||(Ls.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t}get endTime(){return Ls.deprecatedWarning2||(Ls.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(t){Ls.deprecatedWarning2||(Ls.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}};let _f=Ls;_f.deprecatedWarning1=!1;_f.deprecatedWarning2=!1;const sy=class{constructor(i){this.objects=[],this.drainDisabled=!1,this.animState=i}start(i){this.objects.push(Nn.start),this.objects.push(i),this.animState.animationsChanged=!0}interrupt(i){this.objects.push(Nn.interrupt),this.objects.push(i)}end(i){this.objects.push(Nn.end),this.objects.push(i),this.animState.animationsChanged=!0}dispose(i){this.objects.push(Nn.dispose),this.objects.push(i)}complete(i){this.objects.push(Nn.complete),this.objects.push(i)}event(i,t){this.objects.push(Nn.event),this.objects.push(i),this.objects.push(t)}deprecateStuff(){return sy.deprecatedWarning1||(sy.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const i=this.objects,t=this.animState.listeners;for(let e=0;e<i.length;e+=2){const r=i[e],n=i[e+1];switch(r){case Nn.start:n.listener!=null&&n.listener.start&&n.listener.start(n);for(let h=0;h<t.length;h++)t[h].start&&t[h].start(n);n.onStart&&this.deprecateStuff()&&n.onStart(n.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(n.trackIndex);break;case Nn.interrupt:n.listener!=null&&n.listener.interrupt&&n.listener.interrupt(n);for(let h=0;h<t.length;h++)t[h].interrupt&&t[h].interrupt(n);break;case Nn.end:n.listener!=null&&n.listener.end&&n.listener.end(n);for(let h=0;h<t.length;h++)t[h].end&&t[h].end(n);n.onEnd&&this.deprecateStuff()&&n.onEnd(n.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(n.trackIndex);case Nn.dispose:n.listener!=null&&n.listener.dispose&&n.listener.dispose(n);for(let h=0;h<t.length;h++)t[h].dispose&&t[h].dispose(n);this.animState.trackEntryPool.free(n);break;case Nn.complete:n.listener!=null&&n.listener.complete&&n.listener.complete(n);for(let h=0;h<t.length;h++)t[h].complete&&t[h].complete(n);const s=q.toInt(n.loopsCount());n.onComplete&&this.deprecateStuff()&&n.onComplete(n.trackIndex,s),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(n.trackIndex,s);break;case Nn.event:const o=i[e+++2];n.listener!=null&&n.listener.event&&n.listener.event(n,o);for(let h=0;h<t.length;h++)t[h].event&&t[h].event(n,o);n.onEvent&&this.deprecateStuff()&&n.onEvent(n.trackIndex,o),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(n.trackIndex,o);break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}};let o0=sy;o0.deprecatedWarning1=!1;var Nn=(i=>(i[i.start=0]="start",i[i.interrupt=1]="interrupt",i[i.end=2]="end",i[i.dispose=3]="dispose",i[i.complete=4]="complete",i[i.event=5]="event",i))(Nn||{});class XB{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}}const ay=class{constructor(i){if(this.animationToMixTime={},this.defaultMix=0,i==null)throw new Error("skeletonData cannot be null.");this.skeletonData=i}setMix(i,t,e){const r=this.skeletonData.findAnimation(i);if(r==null)throw new Error(`Animation not found: ${i}`);const n=this.skeletonData.findAnimation(t);if(n==null)throw new Error(`Animation not found: ${t}`);this.setMixWith(r,n,e)}setMixByName(i,t,e){ay.deprecatedWarning1||(ay.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(i,t,e)}setMixWith(i,t,e){if(i==null)throw new Error("from cannot be null.");if(t==null)throw new Error("to cannot be null.");const r=`${i.name}.${t.name}`;this.animationToMixTime[r]=e}getMix(i,t){const e=`${i.name}.${t.name}`,r=this.animationToMixTime[e];return r===void 0?this.defaultMix:r}};let l0=ay;l0.deprecatedWarning1=!1;let _A=class{constructor(t){this.atlas=t}newRegionAttachment(t,e,r){const n=this.atlas.findRegion(r);if(n==null)throw new Error(`Region not found in atlas: ${r} (region attachment: ${e})`);const s=new oe(e);return s.region=n,s}newMeshAttachment(t,e,r){const n=this.atlas.findRegion(r);if(n==null)throw new Error(`Region not found in atlas: ${r} (mesh attachment: ${e})`);const s=new s0(e);return s.region=n,s}newBoundingBoxAttachment(t,e){return new uA(e)}newPathAttachment(t,e){return new uu(e)}newPointAttachment(t,e){return new dA(e)}newClippingAttachment(t,e){return new cA(e)}},oy=class{constructor(t,e,r){if(this.matrix=new Ze,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!0,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}update(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,r,n,s,o,h){this.ax=t,this.ay=e,this.arotation=r,this.ascaleX=n,this.ascaleY=s,this.ashearX=o,this.ashearY=h,this.appliedValid=!0;const a=this.parent,l=this.matrix,u=this.skeleton.scaleX,c=-this.skeleton.scaleY;if(a==null){const y=this.skeleton,x=r+90+h;l.a=q.cosDeg(r+o)*n*u,l.c=q.cosDeg(x)*s*u,l.b=q.sinDeg(r+o)*n*c,l.d=q.sinDeg(x)*s*c,l.tx=t*u+y.x,l.ty=e*c+y.y;return}let f=a.matrix.a,p=a.matrix.c,g=a.matrix.b,v=a.matrix.d;switch(l.tx=f*t+p*e+a.matrix.tx,l.ty=g*t+v*e+a.matrix.ty,this.data.transformMode){case ne.Normal:{const y=r+90+h,x=q.cosDeg(r+o)*n,_=q.cosDeg(y)*s,b=q.sinDeg(r+o)*n,E=q.sinDeg(y)*s;l.a=f*x+p*b,l.c=f*_+p*E,l.b=g*x+v*b,l.d=g*_+v*E;return}case ne.OnlyTranslation:{const y=r+90+h;l.a=q.cosDeg(r+o)*n,l.c=q.cosDeg(y)*s,l.b=q.sinDeg(r+o)*n,l.d=q.sinDeg(y)*s;break}case ne.NoRotationOrReflection:{let y=f*f+g*g,x=0;y>1e-4?(y=Math.abs(f*v-p*g)/y,p=g*y,v=f*y,x=Math.atan2(g,f)*q.radDeg):(f=0,g=0,x=90-Math.atan2(v,p)*q.radDeg);const _=r+o-x,b=r+h-x+90,E=q.cosDeg(_)*n,T=q.cosDeg(b)*s,S=q.sinDeg(_)*n,C=q.sinDeg(b)*s;l.a=f*E-p*S,l.c=f*T-p*C,l.b=g*E+v*S,l.d=g*T+v*C;break}case ne.NoScale:case ne.NoScaleOrReflection:{const y=q.cosDeg(r),x=q.sinDeg(r);let _=(f*y+p*x)/u,b=(g*y+v*x)/c,E=Math.sqrt(_*_+b*b);E>1e-5&&(E=1/E),_*=E,b*=E,E=Math.sqrt(_*_+b*b),this.data.transformMode==ne.NoScale&&f*v-p*g<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY>0)&&(E=-E);const T=Math.PI/2+Math.atan2(b,_),S=Math.cos(T)*E,C=Math.sin(T)*E,M=q.cosDeg(o)*n,P=q.cosDeg(90+h)*s,F=q.sinDeg(o)*n,V=q.sinDeg(90+h)*s;l.a=_*M+S*F,l.c=_*P+S*V,l.b=b*M+C*F,l.d=b*P+C*V;break}}l.a*=u,l.c*=u,l.b*=c,l.d*=c}setToSetupPose(){const t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*q.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*q.radDeg}getWorldScaleX(){const t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)}getWorldScaleY(){const t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)}updateAppliedTransform(){this.appliedValid=!0;const t=this.parent,e=this.matrix;if(t==null){this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*q.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*q.radDeg;return}const r=t.matrix,n=1/(r.a*r.d-r.b*r.c),s=e.tx-r.tx,o=e.ty-r.ty;this.ax=s*r.d*n-o*r.c*n,this.ay=o*r.a*n-s*r.b*n;const h=n*r.d,a=n*r.a,l=n*r.c,u=n*r.b,c=h*e.a-l*e.b,f=h*e.c-l*e.d,p=a*e.b-u*e.a,g=a*e.d-u*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+p*p),this.ascaleX>1e-4){const v=c*g-f*p;this.ascaleY=v/this.ascaleX,this.ashearY=Math.atan2(c*f+p*g,v)*q.radDeg,this.arotation=Math.atan2(p,c)*q.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(f*f+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,f)*q.radDeg}worldToLocal(t){const e=this.matrix,r=e.a,n=e.c,s=e.b,o=e.d,h=1/(r*o-n*s),a=t.x-e.tx,l=t.y-e.ty;return t.x=a*o*h-l*n*h,t.y=l*r*h-a*s*h,t}localToWorld(t){const e=this.matrix,r=t.x,n=t.y;return t.x=r*e.a+n*e.c+e.tx,t.y=r*e.b+n*e.d+e.ty,t}worldToLocalRotation(t){const e=q.sinDeg(t),r=q.cosDeg(t),n=this.matrix;return Math.atan2(n.a*e-n.b*r,n.d*r-n.c*e)*q.radDeg}localToWorldRotation(t){const e=q.sinDeg(t),r=q.cosDeg(t),n=this.matrix;return Math.atan2(r*n.b+e*n.d,r*n.a+e*n.c)*q.radDeg}rotateWorld(t){const e=this.matrix,r=e.a,n=e.c,s=e.b,o=e.d,h=q.cosDeg(t),a=q.sinDeg(t);e.a=h*r-a*s,e.c=h*n-a*o,e.b=a*r+h*s,e.d=a*n+h*o,this.appliedValid=!1}},bA=class{constructor(t,e,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=ne.Normal,t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r}},EA=class{constructor(t,e){if(e==null)throw new Error("data cannot be null.");this.time=t,this.data=e}},TA=class{constructor(t){this.name=t}},SA=class{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}getOrder(){return this.data.order}apply(){this.update()}update(){const t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.mix);break}}apply1(t,e,r,n,s,o,h){t.appliedValid||t.updateAppliedTransform();const a=t.parent.matrix,l=1/(a.a*a.d-a.b*a.c),u=e-a.tx,c=r-a.ty,f=(u*a.d-c*a.c)*l-t.ax,p=(c*a.a-u*a.b)*l-t.ay;let g=Math.atan2(p,f)*q.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(g+=180),g>180?g-=360:g<-180&&(g+=360);let v=t.ascaleX,y=t.ascaleY;if(n||s){const x=t.data.length*v,_=Math.sqrt(f*f+p*p);if(n&&_<x||s&&_>x&&x>1e-4){const b=(_/x-1)*h+1;v*=b,o&&(y*=b)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+g*h,v,y,t.ashearX,t.ashearY)}apply2(t,e,r,n,s,o,h){if(h==0){e.updateWorldTransform();return}t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();const a=t.ax,l=t.ay;let u=t.ascaleX,c=u,f=t.ascaleY,p=e.ascaleX;const g=t.matrix;let v=0,y=0,x=0;u<0?(u=-u,v=180,x=-1):(v=0,x=1),f<0&&(f=-f,x=-x),p<0?(p=-p,y=180):y=0;const _=e.ax;let b=0,E=0,T=0,S=g.a,C=g.c,M=g.b,P=g.d;const F=Math.abs(u-f)<=1e-4;F?(b=e.ay,E=S*_+C*b+g.tx,T=M*_+P*b+g.ty):(b=0,E=S*_+g.tx,T=M*_+g.ty);const V=t.parent.matrix;S=V.a,C=V.c,M=V.b,P=V.d;const O=1/(S*P-C*M);let U=r-V.tx,H=n-V.ty;const W=(U*P-H*C)*O-a,B=(H*S-U*M)*O-l,L=W*W+B*B;U=E-V.tx,H=T-V.ty;const N=(U*P-H*C)*O-a,Y=(H*S-U*M)*O-l,D=Math.sqrt(N*N+Y*Y);let k=e.data.length*p,X=0,$=0;t:if(F){k*=u;let tt=(L-D*D-k*k)/(2*D*k);tt<-1?tt=-1:tt>1&&(tt=1,o&&D+k>1e-4&&(c*=(Math.sqrt(L)/(D+k)-1)*h+1)),$=Math.acos(tt)*s,S=D+k*tt,C=k*Math.sin($),X=Math.atan2(B*S-W*C,W*S+B*C)}else{S=u*k,C=f*k;const tt=S*S,ct=C*C,ft=Math.atan2(B,W);M=ct*D*D+tt*L-tt*ct;const mt=-2*ct*D,lt=ct-tt;if(P=mt*mt-4*lt*M,P>=0){let jt=Math.sqrt(P);mt<0&&(jt=-jt),jt=-(mt+jt)/2;const Wt=jt/lt,Qt=M/jt,ee=Math.abs(Wt)<Math.abs(Qt)?Wt:Qt;if(ee*ee<=L){H=Math.sqrt(L-ee*ee)*s,X=ft-Math.atan2(H,ee),$=Math.atan2(H/f,(ee-D)/u);break t}}let gt=q.PI,yt=D-S,St=yt*yt,Rt=0,it=0,ut=D+S,Ct=ut*ut,zt=0;M=-S*D/(tt-ct),M>=-1&&M<=1&&(M=Math.acos(M),U=S*Math.cos(M)+D,H=C*Math.sin(M),P=U*U+H*H,P<St&&(gt=M,St=P,yt=U,Rt=H),P>Ct&&(it=M,Ct=P,ut=U,zt=H)),L<=(St+Ct)/2?(X=ft-Math.atan2(Rt*s,yt),$=gt*s):(X=ft-Math.atan2(zt*s,ut),$=it*s)}const j=Math.atan2(b,_)*x;let K=t.arotation;X=(X-j)*q.radDeg+v-K,X>180?X-=360:X<-180&&(X+=360),t.updateWorldTransformWith(a,l,K+X*h,c,t.ascaleY,0,0),K=e.arotation,$=(($+j)*q.radDeg-e.ashearX)*x+y-K,$>180?$-=360:$<-180&&($+=360),e.updateWorldTransformWith(_,b,K+$*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},AA=class{constructor(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=t}},CA=class{constructor(t){this.order=0,this.bones=new Array,this.name=t}};var Vi=(i=>(i[i.Length=0]="Length",i[i.Fixed=1]="Fixed",i[i.Percent=2]="Percent",i))(Vi||{});const _o=class{constructor(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let r=0,n=t.bones.length;r<n;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}apply(){this.update()}update(){const t=this.target.getAttachment();if(!(t instanceof uu))return;const e=this.rotateMix,r=this.translateMix,n=r>0,s=e>0;if(!n&&!s)return;const o=this.data,h=o.spacingMode,a=h==Vi.Length,l=o.rotateMode,u=l==br.Tangent,c=l==br.ChainScale,f=this.bones.length,p=u?f:f+1,g=this.bones,v=et.setArraySize(this.spaces,p);let y=null;const x=this.spacing;if(c||a){c&&(y=et.setArraySize(this.lengths,f));for(let C=0,M=p-1;C<M;){const P=g[C],F=P.data.length;if(F<_o.epsilon)c&&(y[C]=0),v[++C]=0;else{const V=F*P.matrix.a,O=F*P.matrix.b,U=Math.sqrt(V*V+O*O);c&&(y[C]=U),v[++C]=(a?F+x:x)*U/F}}}else for(let C=1;C<p;C++)v[C]=x;const _=this.computeWorldPositions(t,p,u,o.positionMode==ur.Percent,h==Vi.Percent);let b=_[0],E=_[1],T=o.offsetRotation,S=!1;if(T==0)S=l==br.Chain;else{S=!1;const C=this.target.bone.matrix;T*=C.a*C.d-C.b*C.c>0?q.degRad:-q.degRad}for(let C=0,M=3;C<f;C++,M+=3){const P=g[C],F=P.matrix;F.tx+=(b-F.tx)*r,F.ty+=(E-F.ty)*r;const V=_[M],O=_[M+1],U=V-b,H=O-E;if(c){const W=y[C];if(W!=0){const B=(Math.sqrt(U*U+H*H)/W-1)*e+1;F.a*=B,F.b*=B}}if(b=V,E=O,s){const W=F.a,B=F.c,L=F.b,N=F.d;let Y=0,D=0,k=0;if(u&&(u?Y=_[M-1]:v[C+1]==0?Y=_[M+2]:Y=Math.atan2(H,U)),Y-=Math.atan2(L,W),S){D=Math.cos(Y),k=Math.sin(Y);const X=P.data.length;b+=(X*(D*W-k*L)-U)*e,E+=(X*(k*W+D*L)-H)*e}else Y+=T;Y>q.PI?Y-=q.PI2:Y<-q.PI&&(Y+=q.PI2),Y*=e,D=Math.cos(Y),k=Math.sin(Y),F.a=D*W-k*L,F.c=D*B-k*N,F.b=k*W+D*L,F.d=k*B+D*N}P.appliedValid=!1}}computeWorldPositions(t,e,r,n,s){const o=this.target;let h=this.position;const a=this.spaces,l=et.setArraySize(this.positions,e*3+2);let u=null;const c=t.closed;let f=t.worldVerticesLength,p=f/6,g=_o.NONE;if(!t.constantSpeed){const Y=t.lengths;p-=c?1:2;const D=Y[p];if(n&&(h*=D),s)for(let k=0;k<e;k++)a[k]*=D;u=et.setArraySize(this.world,8);for(let k=0,X=0,$=0;k<e;k++,X+=3){const j=a[k];h+=j;let K=h;if(c)K%=D,K<0&&(K+=D),$=0;else if(K<0){g!=_o.BEFORE&&(g=_o.BEFORE,t.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(K,u,0,l,X);continue}else if(K>D){g!=_o.AFTER&&(g=_o.AFTER,t.computeWorldVertices(o,f-6,4,u,0,2)),this.addAfterPosition(K-D,u,0,l,X);continue}for(;;$++){const tt=Y[$];if(!(K>tt)){if($==0)K/=tt;else{const ct=Y[$-1];K=(K-ct)/(tt-ct)}break}}$!=g&&(g=$,c&&$==p?(t.computeWorldVertices(o,f-4,4,u,0,2),t.computeWorldVertices(o,0,4,u,4,2)):t.computeWorldVertices(o,$*6+2,8,u,0,2)),this.addCurvePosition(K,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,X,r||k>0&&j==0)}return l}c?(f+=2,u=et.setArraySize(this.world,f),t.computeWorldVertices(o,2,f-4,u,0,2),t.computeWorldVertices(o,0,2,u,f-4,2),u[f-2]=u[0],u[f-1]=u[1]):(p--,f-=4,u=et.setArraySize(this.world,f),t.computeWorldVertices(o,2,f,u,0,2));const v=et.setArraySize(this.curves,p);let y=0,x=u[0],_=u[1],b=0,E=0,T=0,S=0,C=0,M=0,P=0,F=0,V=0,O=0,U=0,H=0,W=0,B=0;for(let Y=0,D=2;Y<p;Y++,D+=6)b=u[D],E=u[D+1],T=u[D+2],S=u[D+3],C=u[D+4],M=u[D+5],P=(x-b*2+T)*.1875,F=(_-E*2+S)*.1875,V=((b-T)*3-x+C)*.09375,O=((E-S)*3-_+M)*.09375,U=P*2+V,H=F*2+O,W=(b-x)*.75+P+V*.16666667,B=(E-_)*.75+F+O*.16666667,y+=Math.sqrt(W*W+B*B),W+=U,B+=H,U+=V,H+=O,y+=Math.sqrt(W*W+B*B),W+=U,B+=H,y+=Math.sqrt(W*W+B*B),W+=U+V,B+=H+O,y+=Math.sqrt(W*W+B*B),v[Y]=y,x=C,_=M;if(n&&(h*=y),s)for(let Y=0;Y<e;Y++)a[Y]*=y;const L=this.segments;let N=0;for(let Y=0,D=0,k=0,X=0;Y<e;Y++,D+=3){const $=a[Y];h+=$;let j=h;if(c)j%=y,j<0&&(j+=y),k=0;else if(j<0){this.addBeforePosition(j,u,0,l,D);continue}else if(j>y){this.addAfterPosition(j-y,u,f-4,l,D);continue}for(;;k++){const K=v[k];if(!(j>K)){if(k==0)j/=K;else{const tt=v[k-1];j=(j-tt)/(K-tt)}break}}if(k!=g){g=k;let K=k*6;for(x=u[K],_=u[K+1],b=u[K+2],E=u[K+3],T=u[K+4],S=u[K+5],C=u[K+6],M=u[K+7],P=(x-b*2+T)*.03,F=(_-E*2+S)*.03,V=((b-T)*3-x+C)*.006,O=((E-S)*3-_+M)*.006,U=P*2+V,H=F*2+O,W=(b-x)*.3+P+V*.16666667,B=(E-_)*.3+F+O*.16666667,N=Math.sqrt(W*W+B*B),L[0]=N,K=1;K<8;K++)W+=U,B+=H,U+=V,H+=O,N+=Math.sqrt(W*W+B*B),L[K]=N;W+=U,B+=H,N+=Math.sqrt(W*W+B*B),L[8]=N,W+=U+V,B+=H+O,N+=Math.sqrt(W*W+B*B),L[9]=N,X=0}for(j*=N;;X++){const K=L[X];if(!(j>K)){if(X==0)j/=K;else{const tt=L[X-1];j=X+(j-tt)/(K-tt)}break}}this.addCurvePosition(j*.1,x,_,b,E,T,S,C,M,l,D,r||Y>0&&$==0)}return l}addBeforePosition(t,e,r,n,s){const o=e[r],h=e[r+1],a=e[r+2]-o,l=e[r+3]-h,u=Math.atan2(l,a);n[s]=o+t*Math.cos(u),n[s+1]=h+t*Math.sin(u),n[s+2]=u}addAfterPosition(t,e,r,n,s){const o=e[r+2],h=e[r+3],a=o-e[r],l=h-e[r+1],u=Math.atan2(l,a);n[s]=o+t*Math.cos(u),n[s+1]=h+t*Math.sin(u),n[s+2]=u}addCurvePosition(t,e,r,n,s,o,h,a,l,u,c,f){(t==0||isNaN(t))&&(t=1e-4);const p=t*t,g=p*t,v=1-t,y=v*v,x=y*v,_=v*t,b=_*3,E=v*b,T=b*t,S=e*x+n*E+o*T+a*g,C=r*x+s*E+h*T+l*g;u[c]=S,u[c+1]=C,f&&(u[c+2]=Math.atan2(C-(r*y+s*_*2+h*p),S-(e*y+n*_*2+o*p)))}getOrder(){return this.data.order}};let Hl=_o;Hl.NONE=-1;Hl.BEFORE=-2;Hl.AFTER=-3;Hl.epsilon=1e-5;let IA=class{constructor(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new lu,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(let r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}apply(){this.update()}update(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()}applyAbsoluteWorld(){const t=this.rotateMix,e=this.translateMix,r=this.scaleMix,n=this.shearMix,s=this.target,o=s.matrix,h=o.a,a=o.c,l=o.b,u=o.d,c=h*u-a*l>0?q.degRad:-q.degRad,f=this.data.offsetRotation*c,p=this.data.offsetShearY*c,g=this.bones;for(let v=0,y=g.length;v<y;v++){const x=g[v];let _=!1;const b=x.matrix;if(t!=0){const E=b.a,T=b.c,S=b.b,C=b.d;let M=Math.atan2(l,h)-Math.atan2(S,E)+f;M>q.PI?M-=q.PI2:M<-q.PI&&(M+=q.PI2),M*=t;const P=Math.cos(M),F=Math.sin(M);b.a=P*E-F*S,b.c=P*T-F*C,b.b=F*E+P*S,b.d=F*T+P*C,_=!0}if(e!=0){const E=this.temp;s.localToWorld(E.set(this.data.offsetX,this.data.offsetY)),b.tx+=(E.x-b.tx)*e,b.ty+=(E.y-b.ty)*e,_=!0}if(r>0){let E=Math.sqrt(b.a*b.a+b.b*b.b),T=Math.sqrt(h*h+l*l);E>1e-5&&(E=(E+(T-E+this.data.offsetScaleX)*r)/E),b.a*=E,b.b*=E,E=Math.sqrt(b.c*b.c+b.d*b.d),T=Math.sqrt(a*a+u*u),E>1e-5&&(E=(E+(T-E+this.data.offsetScaleY)*r)/E),b.c*=E,b.d*=E,_=!0}if(n>0){const E=b.c,T=b.d,S=Math.atan2(T,E);let C=Math.atan2(u,a)-Math.atan2(l,h)-(S-Math.atan2(b.b,b.a));C>q.PI?C-=q.PI2:C<-q.PI&&(C+=q.PI2),C=S+(C+p)*n;const M=Math.sqrt(E*E+T*T);b.c=Math.cos(C)*M,b.d=Math.sin(C)*M,_=!0}_&&(x.appliedValid=!1)}}applyRelativeWorld(){const t=this.rotateMix,e=this.translateMix,r=this.scaleMix,n=this.shearMix,s=this.target,o=s.matrix,h=o.a,a=o.c,l=o.b,u=o.d,c=h*u-a*l>0?q.degRad:-q.degRad,f=this.data.offsetRotation*c,p=this.data.offsetShearY*c,g=this.bones;for(let v=0,y=g.length;v<y;v++){const x=g[v];let _=!1;const b=x.matrix;if(t!=0){const E=b.a,T=b.c,S=b.b,C=b.d;let M=Math.atan2(l,h)+f;M>q.PI?M-=q.PI2:M<-q.PI&&(M+=q.PI2),M*=t;const P=Math.cos(M),F=Math.sin(M);b.a=P*E-F*S,b.c=P*T-F*C,b.b=F*E+P*S,b.d=F*T+P*C,_=!0}if(e!=0){const E=this.temp;s.localToWorld(E.set(this.data.offsetX,this.data.offsetY)),b.tx+=E.x*e,b.ty+=E.y*e,_=!0}if(r>0){let E=(Math.sqrt(h*h+l*l)-1+this.data.offsetScaleX)*r+1;b.a*=E,b.b*=E,E=(Math.sqrt(a*a+u*u)-1+this.data.offsetScaleY)*r+1,b.c*=E,b.d*=E,_=!0}if(n>0){let E=Math.atan2(u,a)-Math.atan2(l,h);E>q.PI?E-=q.PI2:E<-q.PI&&(E+=q.PI2);const T=b.c,S=b.d;E=Math.atan2(S,T)+(E-q.PI/2+p)*n;const C=Math.sqrt(T*T+S*S);b.c=Math.cos(E)*C,b.d=Math.sin(E)*C,_=!0}_&&(x.appliedValid=!1)}}applyAbsoluteLocal(){const t=this.rotateMix,e=this.translateMix,r=this.scaleMix,n=this.shearMix,s=this.target;s.appliedValid||s.updateAppliedTransform();const o=this.bones;for(let h=0,a=o.length;h<a;h++){const l=o[h];l.appliedValid||l.updateAppliedTransform();let u=l.arotation;if(t!=0){let y=s.arotation-u+this.data.offsetRotation;y-=(16384-(16384.499999999996-y/360|0))*360,u+=y*t}let c=l.ax,f=l.ay;e!=0&&(c+=(s.ax-c+this.data.offsetX)*e,f+=(s.ay-f+this.data.offsetY)*e);let p=l.ascaleX,g=l.ascaleY;r>0&&(p>1e-5&&(p=(p+(s.ascaleX-p+this.data.offsetScaleX)*r)/p),g>1e-5&&(g=(g+(s.ascaleY-g+this.data.offsetScaleY)*r)/g));const v=l.ashearY;if(n>0){let y=s.ashearY-v+this.data.offsetShearY;y-=(16384-(16384.499999999996-y/360|0))*360,l.shearY+=y*n}l.updateWorldTransformWith(c,f,u,p,g,l.ashearX,v)}}applyRelativeLocal(){const t=this.rotateMix,e=this.translateMix,r=this.scaleMix,n=this.shearMix,s=this.target;s.appliedValid||s.updateAppliedTransform();const o=this.bones;for(let h=0,a=o.length;h<a;h++){const l=o[h];l.appliedValid||l.updateAppliedTransform();let u=l.arotation;t!=0&&(u+=(s.arotation+this.data.offsetRotation)*t);let c=l.ax,f=l.ay;e!=0&&(c+=(s.ax+this.data.offsetX)*e,f+=(s.ay+this.data.offsetY)*e);let p=l.ascaleX,g=l.ascaleY;r>0&&(p>1e-5&&(p*=(s.ascaleX-1+this.data.offsetScaleX)*r+1),g>1e-5&&(g*=(s.ascaleY-1+this.data.offsetScaleY)*r+1));let v=l.ashearY;n>0&&(v+=(s.ashearY+this.data.offsetShearY)*n),l.updateWorldTransformWith(c,f,u,p,g,l.ashearX,v)}}getOrder(){return this.data.order}};const tu=class{constructor(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,t==null)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){const r=t.bones[e];let n;if(r.parent==null)n=new oy(r,this,null);else{const s=this.bones[r.parent.index];n=new oy(r,this,s),s.children.push(n)}this.bones.push(n)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){const r=t.slots[e],n=this.bones[r.boneData.index],s=new a0(r,n);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){const r=t.ikConstraints[e];this.ikConstraints.push(new SA(r,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){const r=t.transformConstraints[e];this.transformConstraints.push(new IA(r,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){const r=t.pathConstraints[e];this.pathConstraints.push(new Hl(r,this))}this.color=new bt(1,1,1,1),this.updateCache()}updateCache(){const t=this._updateCache;t.length=0,this.updateCacheReset.length=0;const e=this.bones;for(let u=0,c=e.length;u<c;u++)e[u].sorted=!1;const r=this.ikConstraints,n=this.transformConstraints,s=this.pathConstraints,o=r.length,h=n.length,a=s.length,l=o+h+a;t:for(let u=0;u<l;u++){for(let c=0;c<o;c++){const f=r[c];if(f.data.order==u){this.sortIkConstraint(f);continue t}}for(let c=0;c<h;c++){const f=n[c];if(f.data.order==u){this.sortTransformConstraint(f);continue t}}for(let c=0;c<a;c++){const f=s[c];if(f.data.order==u){this.sortPathConstraint(f);continue t}}}for(let u=0,c=e.length;u<c;u++)this.sortBone(e[u])}sortIkConstraint(t){const e=t.target;this.sortBone(e);const r=t.bones,n=r[0];if(this.sortBone(n),r.length>1){const s=r[r.length-1];this._updateCache.indexOf(s)>-1||this.updateCacheReset.push(s)}this._updateCache.push(t),this.sortReset(n.children),r[r.length-1].sorted=!0}sortPathConstraint(t){const e=t.target,r=e.data.index,n=e.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,r,n),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,n);for(let a=0,l=this.data.skins.length;a<l;a++)this.sortPathConstraintAttachment(this.data.skins[a],r,n);const s=e.getAttachment();s instanceof uu&&this.sortPathConstraintAttachmentWith(s,n);const o=t.bones,h=o.length;for(let a=0;a<h;a++)this.sortBone(o[a]);this._updateCache.push(t);for(let a=0;a<h;a++)this.sortReset(o[a].children);for(let a=0;a<h;a++)o[a].sorted=!0}sortTransformConstraint(t){this.sortBone(t.target);const e=t.bones,r=e.length;if(t.data.local)for(let n=0;n<r;n++){const s=e[n];this.sortBone(s.parent),this._updateCache.indexOf(s)>-1||this.updateCacheReset.push(s)}else for(let n=0;n<r;n++)this.sortBone(e[n]);this._updateCache.push(t);for(let n=0;n<r;n++)this.sortReset(e[n].children);for(let n=0;n<r;n++)e[n].sorted=!0}sortPathConstraintAttachment(t,e,r){const n=t.attachments[e];if(n)for(const s in n)this.sortPathConstraintAttachmentWith(n[s],r)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof uu))return;const r=t.bones;if(r==null)this.sortBone(e);else{const n=this.bones;let s=0;for(;s<r.length;){const o=r[s++];for(let h=s+o;s<h;s++){const a=r[s];this.sortBone(n[a])}}}}sortBone(t){if(t.sorted)return;const e=t.parent;e!=null&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,r=t.length;e<r;e++){const n=t[e];n.sorted&&this.sortReset(n.children),n.sorted=!1}}updateWorldTransform(){const t=this.updateCacheReset;for(let r=0,n=t.length;r<n;r++){const s=t[r];s.ax=s.x,s.ay=s.y,s.arotation=s.rotation,s.ascaleX=s.scaleX,s.ascaleY=s.scaleY,s.ashearX=s.shearX,s.ashearY=s.shearY,s.appliedValid=!0}const e=this._updateCache;for(let r=0,n=e.length;r<n;r++)e[r].update()}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const t=this.bones;for(let s=0,o=t.length;s<o;s++)t[s].setToSetupPose();const e=this.ikConstraints;for(let s=0,o=e.length;s<o;s++){const h=e[s];h.bendDirection=h.data.bendDirection,h.mix=h.data.mix}const r=this.transformConstraints;for(let s=0,o=r.length;s<o;s++){const h=r[s],a=h.data;h.rotateMix=a.rotateMix,h.translateMix=a.translateMix,h.scaleMix=a.scaleMix,h.shearMix=a.shearMix}const n=this.pathConstraints;for(let s=0,o=n.length;s<o;s++){const h=n[s],a=h.data;h.position=a.position,h.spacing=a.spacing,h.rotateMix=a.rotateMix,h.translateMix=a.translateMix}}setSlotsToSetupPose(){const t=this.slots;et.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,r=t.length;e<r;e++)t[e].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findBoneIndex(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return-1}findSlot(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findSlotIndex(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return-1}setSkinByName(t){const e=this.data.findSkin(t);if(e==null)throw new Error(`Skin not found: ${t}`);this.setSkin(e)}setSkin(t){if(t!=null)if(this.skin!=null)t.attachAll(this,this.skin);else{const e=this.slots;for(let r=0,n=e.length;r<n;r++){const s=e[r],o=s.data.attachmentName;if(o!=null){const h=t.getAttachment(r,o);h!=null&&s.setAttachment(h)}}}this.skin=t}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)}getAttachment(t,e){if(e==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){const r=this.skin.getAttachment(t,e);if(r!=null)return r}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(t==null)throw new Error("slotName cannot be null.");const r=this.slots;for(let n=0,s=r.length;n<s;n++){const o=r[n];if(o.data.name==t){let h=null;if(e!=null&&(h=this.getAttachment(n,e),h==null))throw new Error(`Attachment not found: ${e}, for slot: ${t}`);o.setAttachment(h);return}}throw new Error(`Slot not found: ${t}`)}findIkConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findTransformConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findPathConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}getBounds(t,e,r){if(t==null)throw new Error("offset cannot be null.");if(e==null)throw new Error("size cannot be null.");const n=this.drawOrder;let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let l=0,u=n.length;l<u;l++){const c=n[l];let f=0,p=null;const g=c.getAttachment();if(g instanceof oe)f=8,p=et.setArraySize(r,f,0),g.computeWorldVertices(c.bone,p,0,2);else if(g instanceof s0){const v=g;f=v.worldVerticesLength,p=et.setArraySize(r,f,0),v.computeWorldVertices(c,0,f,p,0,2)}if(p!=null)for(let v=0,y=p.length;v<y;v+=2){const x=p[v],_=p[v+1];s=Math.min(s,x),o=Math.min(o,_),h=Math.max(h,x),a=Math.max(a,_)}}t.set(s,o),e.set(h-s,a-o)}update(t){this.time+=t}get flipX(){return this.scaleX==-1}set flipX(t){tu.deprecatedWarning1||(tu.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1}get flipY(){return this.scaleY==-1}set flipY(t){tu.deprecatedWarning1||(tu.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1}};let h0=tu;h0.deprecatedWarning1=!1;let GB=class extends Uy{},RA=class{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findBoneIndex(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSlot(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findSlotIndex(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSkin(t){if(t==null)throw new Error("skinName cannot be null.");const e=this.skins;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findEvent(t){if(t==null)throw new Error("eventDataName cannot be null.");const e=this.events;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findAnimation(t){if(t==null)throw new Error("animationName cannot be null.");const e=this.animations;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findIkConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findTransformConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findPathConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findPathConstraintIndex(t){if(t==null)throw new Error("pathConstraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}},MA=class{constructor(t,e,r){if(this.color=new bt(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");if(r==null)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=r}},PA=class{constructor(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,t==null)throw new Error("name cannot be null.");this.name=t}},kA=class{constructor(t){if(this.attachments=new Array,t==null)throw new Error("name cannot be null.");this.name=t}addAttachment(t,e,r){if(r==null)throw new Error("attachment cannot be null.");const n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=r}getAttachment(t,e){const r=this.attachments[t];return r?r[e]:null}attachAll(t,e){let r=0;for(let n=0;n<t.slots.length;n++){const s=t.slots[n],o=s.getAttachment();if(o&&r<e.attachments.length){const h=e.attachments[r];for(const a in h){const l=h[a];if(o==l){const u=this.getAttachment(r,a);u!=null&&s.setAttachment(u);break}}}r++}}},FA=class Rl{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,r=new RA,n=typeof t=="string"?JSON.parse(t):t,s=n.skeleton;if(s!=null&&(r.hash=s.hash,r.version=s.spine,r.width=s.width,r.height=s.height,r.fps=s.fps,r.imagesPath=s.images),n.bones)for(let o=0;o<n.bones.length;o++){const h=n.bones[o];let a=null;const l=this.getValue(h,"parent",null);if(l!=null&&(a=r.findBone(l),a==null))throw new Error(`Parent bone not found: ${l}`);const u=new bA(r.bones.length,h.name,a);u.length=this.getValue(h,"length",0)*e,u.x=this.getValue(h,"x",0)*e,u.y=this.getValue(h,"y",0)*e,u.rotation=this.getValue(h,"rotation",0),u.scaleX=this.getValue(h,"scaleX",1),u.scaleY=this.getValue(h,"scaleY",1),u.shearX=this.getValue(h,"shearX",0),u.shearY=this.getValue(h,"shearY",0),u.transformMode=Rl.transformModeFromString(this.getValue(h,"transform","normal")),r.bones.push(u)}if(n.slots)for(let o=0;o<n.slots.length;o++){const h=n.slots[o],a=h.name,l=h.bone,u=r.findBone(l);if(u==null)throw new Error(`Slot bone not found: ${l}`);const c=new MA(r.slots.length,a,u),f=this.getValue(h,"color",null);f!=null&&c.color.setFromString(f);const p=this.getValue(h,"dark",null);p!=null&&(c.darkColor=new bt(1,1,1,1),c.darkColor.setFromString(p)),c.attachmentName=this.getValue(h,"attachment",null),c.blendMode=Rl.blendModeFromString(this.getValue(h,"blend","normal")),r.slots.push(c)}if(n.ik)for(let o=0;o<n.ik.length;o++){const h=n.ik[o],a=new AA(h.name);a.order=this.getValue(h,"order",0);for(let u=0;u<h.bones.length;u++){const c=h.bones[u],f=r.findBone(c);if(f==null)throw new Error(`IK bone not found: ${c}`);a.bones.push(f)}const l=h.target;if(a.target=r.findBone(l),a.target==null)throw new Error(`IK target bone not found: ${l}`);a.bendDirection=this.getValue(h,"bendPositive",!0)?1:-1,a.mix=this.getValue(h,"mix",1),r.ikConstraints.push(a)}if(n.transform)for(let o=0;o<n.transform.length;o++){const h=n.transform[o],a=new PA(h.name);a.order=this.getValue(h,"order",0);for(let u=0;u<h.bones.length;u++){const c=h.bones[u],f=r.findBone(c);if(f==null)throw new Error(`Transform constraint bone not found: ${c}`);a.bones.push(f)}const l=h.target;if(a.target=r.findBone(l),a.target==null)throw new Error(`Transform constraint target bone not found: ${l}`);a.local=this.getValue(h,"local",!1),a.relative=this.getValue(h,"relative",!1),a.offsetRotation=this.getValue(h,"rotation",0),a.offsetX=this.getValue(h,"x",0)*e,a.offsetY=this.getValue(h,"y",0)*e,a.offsetScaleX=this.getValue(h,"scaleX",0),a.offsetScaleY=this.getValue(h,"scaleY",0),a.offsetShearY=this.getValue(h,"shearY",0),a.rotateMix=this.getValue(h,"rotateMix",1),a.translateMix=this.getValue(h,"translateMix",1),a.scaleMix=this.getValue(h,"scaleMix",1),a.shearMix=this.getValue(h,"shearMix",1),r.transformConstraints.push(a)}if(n.path)for(let o=0;o<n.path.length;o++){const h=n.path[o],a=new CA(h.name);a.order=this.getValue(h,"order",0);for(let u=0;u<h.bones.length;u++){const c=h.bones[u],f=r.findBone(c);if(f==null)throw new Error(`Transform constraint bone not found: ${c}`);a.bones.push(f)}const l=h.target;if(a.target=r.findSlot(l),a.target==null)throw new Error(`Path target slot not found: ${l}`);a.positionMode=Rl.positionModeFromString(this.getValue(h,"positionMode","percent")),a.spacingMode=Rl.spacingModeFromString(this.getValue(h,"spacingMode","length")),a.rotateMode=Rl.rotateModeFromString(this.getValue(h,"rotateMode","tangent")),a.offsetRotation=this.getValue(h,"rotation",0),a.position=this.getValue(h,"position",0),a.positionMode==ur.Fixed&&(a.position*=e),a.spacing=this.getValue(h,"spacing",0),(a.spacingMode==Vi.Length||a.spacingMode==Vi.Fixed)&&(a.spacing*=e),a.rotateMix=this.getValue(h,"rotateMix",1),a.translateMix=this.getValue(h,"translateMix",1),r.pathConstraints.push(a)}if(n.skins)for(const o in n.skins){const h=n.skins[o],a=new kA(o);for(const l in h){const u=r.findSlotIndex(l);if(u==-1)throw new Error(`Slot not found: ${l}`);const c=h[l];for(const f in c){const p=this.readAttachment(c[f],a,u,f,r);p!=null&&a.addAttachment(u,f,p)}}r.skins.push(a),a.name=="default"&&(r.defaultSkin=a)}for(let o=0,h=this.linkedMeshes.length;o<h;o++){const a=this.linkedMeshes[o],l=a.skin==null?r.defaultSkin:r.findSkin(a.skin);if(l==null)throw new Error(`Skin not found: ${a.skin}`);const u=l.getAttachment(a.slotIndex,a.parent);if(u==null)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.setParentMesh(u)}if(this.linkedMeshes.length=0,n.events)for(const o in n.events){const h=n.events[o],a=new TA(o);a.intValue=this.getValue(h,"int",0),a.floatValue=this.getValue(h,"float",0),a.stringValue=this.getValue(h,"string",""),a.audioPath=this.getValue(h,"audio",null),a.audioPath!=null&&(a.volume=this.getValue(h,"volume",1),a.balance=this.getValue(h,"balance",0)),r.events.push(a)}if(n.animations)for(const o in n.animations){const h=n.animations[o];this.readAnimation(h,o,r)}return r}readAttachment(t,e,r,n,s){const o=this.scale;switch(n=this.getValue(t,"name",n),this.getValue(t,"type","region")){case"region":{const a=this.getValue(t,"path",n),l=this.attachmentLoader.newRegionAttachment(e,n,a);if(l==null)return null;l.path=a,l.x=this.getValue(t,"x",0)*o,l.y=this.getValue(t,"y",0)*o,l.scaleX=this.getValue(t,"scaleX",1),l.scaleY=this.getValue(t,"scaleY",1),l.rotation=this.getValue(t,"rotation",0),l.width=t.width*o,l.height=t.height*o;const u=this.getValue(t,"color",null);return u!=null&&l.color.setFromString(u),l}case"boundingbox":{const a=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(a==null)return null;this.readVertices(t,a,t.vertexCount<<1);const l=this.getValue(t,"color",null);return l!=null&&a.color.setFromString(l),a}case"mesh":case"linkedmesh":{const a=this.getValue(t,"path",n),l=this.attachmentLoader.newMeshAttachment(e,n,a);if(l==null)return null;l.path=a;const u=this.getValue(t,"color",null);u!=null&&l.color.setFromString(u);const c=this.getValue(t,"parent",null);if(c!=null)return l.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new YB(l,this.getValue(t,"skin",null),r,c)),l;const f=t.uvs;return this.readVertices(t,l,f.length),l.triangles=t.triangles,l.regionUVs=new Float32Array(f),l.hullLength=this.getValue(t,"hull",0)*2,l}case"path":{const a=this.attachmentLoader.newPathAttachment(e,n);if(a==null)return null;a.closed=this.getValue(t,"closed",!1),a.constantSpeed=this.getValue(t,"constantSpeed",!0);const l=t.vertexCount;this.readVertices(t,a,l<<1);const u=et.newArray(l/3,0);for(let f=0;f<t.lengths.length;f++)u[f]=t.lengths[f]*o;a.lengths=u;const c=this.getValue(t,"color",null);return c!=null&&a.color.setFromString(c),a}case"point":{const a=this.attachmentLoader.newPointAttachment(e,n);if(a==null)return null;a.x=this.getValue(t,"x",0)*o,a.y=this.getValue(t,"y",0)*o,a.rotation=this.getValue(t,"rotation",0);const l=this.getValue(t,"color",null);return l!=null&&a.color.setFromString(l),a}case"clipping":{const a=this.attachmentLoader.newClippingAttachment(e,n);if(a==null)return null;const l=this.getValue(t,"end",null);if(l!=null){const f=s.findSlot(l);if(f==null)throw new Error(`Clipping end slot not found: ${l}`);a.endSlot=f}const u=t.vertexCount;this.readVertices(t,a,u<<1);const c=this.getValue(t,"color",null);return c!=null&&a.color.setFromString(c),a}}return null}readVertices(t,e,r){const n=this.scale;e.worldVerticesLength=r;const s=t.vertices;if(r==s.length){const a=et.toFloatArray(s);if(n!=1)for(let l=0,u=s.length;l<u;l++)a[l]*=n;e.vertices=a;return}const o=new Array,h=new Array;for(let a=0,l=s.length;a<l;){const u=s[a++];h.push(u);for(let c=a+u*4;a<c;a+=4)h.push(s[a]),o.push(s[a+1]*n),o.push(s[a+2]*n),o.push(s[a+3])}e.bones=h,e.vertices=et.toFloatArray(o)}readAnimation(t,e,r){const n=this.scale,s=new Array;let o=0;if(t.slots)for(const a in t.slots){const l=t.slots[a],u=r.findSlotIndex(a);if(u==-1)throw new Error(`Slot not found: ${a}`);for(const c in l){const f=l[c];if(c=="attachment"){const p=new Hd(f.length);p.slotIndex=u;let g=0;for(let v=0;v<f.length;v++){const y=f[v];p.setFrame(g++,y.time,y.name)}s.push(p),o=Math.max(o,p.frames[p.getFrameCount()-1])}else if(c=="color"){const p=new ri(f.length);p.slotIndex=u;let g=0;for(let v=0;v<f.length;v++){const y=f[v],x=new bt;x.setFromString(y.color||"ffffffff"),p.setFrame(g,y.time,x.r,x.g,x.b,x.a),this.readCurve(y,p,g),g++}s.push(p),o=Math.max(o,p.frames[(p.getFrameCount()-1)*ri.ENTRIES])}else if(c=="twoColor"){const p=new Lr(f.length);p.slotIndex=u;let g=0;for(let v=0;v<f.length;v++){const y=f[v],x=new bt,_=new bt;x.setFromString(y.light),_.setFromString(y.dark),p.setFrame(g,y.time,x.r,x.g,x.b,x.a,_.r,_.g,_.b),this.readCurve(y,p,g),g++}s.push(p),o=Math.max(o,p.frames[(p.getFrameCount()-1)*Lr.ENTRIES])}else throw new Error(`Invalid timeline type for a slot: ${c} (${a})`)}}if(t.bones)for(const a in t.bones){const l=t.bones[a],u=r.findBoneIndex(a);if(u==-1)throw new Error(`Bone not found: ${a}`);for(const c in l){const f=l[c];if(c==="rotate"){const p=new xn(f.length);p.boneIndex=u;let g=0;for(let v=0;v<f.length;v++){const y=f[v];p.setFrame(g,y.time,y.angle),this.readCurve(y,p,g),g++}s.push(p),o=Math.max(o,p.frames[(p.getFrameCount()-1)*xn.ENTRIES])}else if(c==="translate"||c==="scale"||c==="shear"){let p=null,g=1;c==="scale"?p=new gA(f.length):c==="shear"?p=new vA(f.length):(p=new Hi(f.length),g=n),p.boneIndex=u;let v=0;for(let y=0;y<f.length;y++){const x=f[y],_=this.getValue(x,"x",0),b=this.getValue(x,"y",0);p.setFrame(v,x.time,_*g,b*g),this.readCurve(x,p,v),v++}s.push(p),o=Math.max(o,p.frames[(p.getFrameCount()-1)*Hi.ENTRIES])}else throw new Error(`Invalid timeline type for a bone: ${c} (${a})`)}}if(t.ik)for(const a in t.ik){const l=t.ik[a],u=r.findIkConstraint(a),c=new ni(l.length);c.ikConstraintIndex=r.ikConstraints.indexOf(u);let f=0;for(let p=0;p<l.length;p++){const g=l[p];c.setFrame(f,g.time,this.getValue(g,"mix",1),this.getValue(g,"bendPositive",!0)?1:-1,this.getValue(g,"compress",!1),this.getValue(g,"stretch",!1)),this.readCurve(g,c,f),f++}s.push(c),o=Math.max(o,c.frames[(c.getFrameCount()-1)*ni.ENTRIES])}if(t.transform)for(const a in t.transform){const l=t.transform[a],u=r.findTransformConstraint(a),c=new ii(l.length);c.transformConstraintIndex=r.transformConstraints.indexOf(u);let f=0;for(let p=0;p<l.length;p++){const g=l[p];c.setFrame(f,g.time,this.getValue(g,"rotateMix",1),this.getValue(g,"translateMix",1),this.getValue(g,"scaleMix",1),this.getValue(g,"shearMix",1)),this.readCurve(g,c,f),f++}s.push(c),o=Math.max(o,c.frames[(c.getFrameCount()-1)*ii.ENTRIES])}if(t.paths)for(const a in t.paths){const l=t.paths[a],u=r.findPathConstraintIndex(a);if(u==-1)throw new Error(`Path constraint not found: ${a}`);const c=r.pathConstraints[u];for(const f in l){const p=l[f];if(f==="position"||f==="spacing"){let g=null,v=1;f==="spacing"?(g=new wA(p.length),(c.spacingMode==Vi.Length||c.spacingMode==Vi.Fixed)&&(v=n)):(g=new Ua(p.length),c.positionMode==ur.Fixed&&(v=n)),g.pathConstraintIndex=u;let y=0;for(let x=0;x<p.length;x++){const _=p[x];g.setFrame(y,_.time,this.getValue(_,f,0)*v),this.readCurve(_,g,y),y++}s.push(g),o=Math.max(o,g.frames[(g.getFrameCount()-1)*Ua.ENTRIES])}else if(f==="mix"){const g=new qs(p.length);g.pathConstraintIndex=u;let v=0;for(let y=0;y<p.length;y++){const x=p[y];g.setFrame(v,x.time,this.getValue(x,"rotateMix",1),this.getValue(x,"translateMix",1)),this.readCurve(x,g,v),v++}s.push(g),o=Math.max(o,g.frames[(g.getFrameCount()-1)*qs.ENTRIES])}}}if(t.deform)for(const a in t.deform){const l=t.deform[a],u=r.findSkin(a);if(u!=null)for(const c in l){const f=l[c],p=r.findSlotIndex(c);if(p==-1)throw new Error(`Slot not found: ${f.name}`);for(const g in f){const v=f[g],y=u.getAttachment(p,g);if(y==null)throw new Error(`Deform attachment not found: ${v.name}`);const x=y.bones!=null,_=y.vertices,b=x?_.length/3*2:_.length,E=new yA(v.length);E.slotIndex=p,E.attachment=y;let T=0;for(let S=0;S<v.length;S++){const C=v[S];let M;const P=this.getValue(C,"vertices",null);if(P==null)M=x?et.newFloatArray(b):_;else{M=et.newFloatArray(b);const F=this.getValue(C,"offset",0);if(et.arrayCopy(P,0,M,F,P.length),n!=1)for(let V=F,O=V+P.length;V<O;V++)M[V]*=n;if(!x)for(let V=0;V<b;V++)M[V]+=_[V]}E.setFrame(T,C.time,M),this.readCurve(C,E,T),T++}s.push(E),o=Math.max(o,E.frames[E.getFrameCount()-1])}}}let h=t.drawOrder;if(h==null&&(h=t.draworder),h!=null){const a=new zd(h.length),l=r.slots.length;let u=0;for(let c=0;c<h.length;c++){const f=h[c];let p=null;const g=this.getValue(f,"offsets",null);if(g!=null){p=et.newArray(l,-1);const v=et.newArray(l-g.length,0);let y=0,x=0;for(let _=0;_<g.length;_++){const b=g[_],E=r.findSlotIndex(b.slot);if(E==-1)throw new Error(`Slot not found: ${b.slot}`);for(;y!=E;)v[x++]=y++;p[y+b.offset]=y++}for(;y<l;)v[x++]=y++;for(let _=l-1;_>=0;_--)p[_]==-1&&(p[_]=v[--x])}a.setFrame(u++,f.time,p)}s.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(t.events){const a=new xA(t.events.length);let l=0;for(let u=0;u<t.events.length;u++){const c=t.events[u],f=r.findEvent(c.name);if(f==null)throw new Error(`Event not found: ${c.name}`);const p=new EA(et.toSinglePrecision(c.time),f);p.intValue=this.getValue(c,"int",f.intValue),p.floatValue=this.getValue(c,"float",f.floatValue),p.stringValue=this.getValue(c,"string",f.stringValue),p.data.audioPath!=null&&(p.volume=this.getValue(c,"volume",1),p.balance=this.getValue(c,"balance",0)),a.setFrame(l++,p)}s.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new Ur(e,s,o))}readCurve(t,e,r){if(t.curve){if(t.curve==="stepped")e.setStepped(r);else if(Object.prototype.toString.call(t.curve)==="[object Array]"){const n=t.curve;e.setCurve(r,n[0],n[1],n[2],n[3])}}}getValue(t,e,r){return t[e]!==void 0?t[e]:r}static blendModeFromString(t){if(t=t.toLowerCase(),t=="normal")return Gt.NORMAL;if(t=="additive")return Gt.ADD;if(t=="multiply")return Gt.MULTIPLY;if(t=="screen")return Gt.SCREEN;throw new Error(`Unknown blend mode: ${t}`)}static positionModeFromString(t){if(t=t.toLowerCase(),t=="fixed")return ur.Fixed;if(t=="percent")return ur.Percent;throw new Error(`Unknown position mode: ${t}`)}static spacingModeFromString(t){if(t=t.toLowerCase(),t=="length")return Vi.Length;if(t=="fixed")return Vi.Fixed;if(t=="percent")return Vi.Percent;throw new Error(`Unknown position mode: ${t}`)}static rotateModeFromString(t){if(t=t.toLowerCase(),t=="tangent")return br.Tangent;if(t=="chain")return br.Chain;if(t=="chainscale")return br.ChainScale;throw new Error(`Unknown rotate mode: ${t}`)}static transformModeFromString(t){if(t=t.toLowerCase(),t=="normal")return ne.Normal;if(t=="onlytranslation")return ne.OnlyTranslation;if(t=="norotationorreflection")return ne.NoRotationOrReflection;if(t=="noscale")return ne.NoScale;if(t=="noscaleorreflection")return ne.NoScaleOrReflection;throw new Error(`Unknown transform mode: ${t}`)}},YB=class{constructor(t,e,r,n){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n}},$B=class extends $l{createSkeleton(t){this.skeleton=new h0(t),this.skeleton.updateWorldTransform(),this.stateData=new l0(t),this.state=new xs(this.stateData)}};const WB=Object.freeze(Object.defineProperty({__proto__:null,Animation:Ur,AnimationState:xs,AnimationStateAdapter2:XB,AnimationStateData:l0,AtlasAttachmentLoader:_A,Attachment:i0,AttachmentTimeline:Hd,Bone:oy,BoneData:bA,BoundingBoxAttachment:uA,ClippingAttachment:cA,ColorTimeline:ri,CurveTimeline:Gn,DeformTimeline:yA,DrawOrderTimeline:zd,Event:EA,EventData:TA,EventQueue:o0,EventTimeline:xA,EventType:Nn,IkConstraint:SA,IkConstraintData:AA,IkConstraintTimeline:ni,JitterEffect:VB,MeshAttachment:s0,PathAttachment:uu,PathConstraint:Hl,PathConstraintData:CA,PathConstraintMixTimeline:qs,PathConstraintPositionTimeline:Ua,PathConstraintSpacingTimeline:wA,PointAttachment:dA,RegionAttachment:oe,RotateTimeline:xn,ScaleTimeline:gA,ShearTimeline:vA,Skeleton:h0,SkeletonBounds:GB,SkeletonData:RA,SkeletonJson:FA,Skin:kA,Slot:a0,SlotData:MA,SpacingMode:Vi,Spine:$B,SwirlEffect:pA,TimelineType:mA,TrackEntry:_f,TransformConstraint:IA,TransformConstraintData:PA,TransformConstraintTimeline:ii,TranslateTimeline:Hi,TwoColorTimeline:Lr,VertexAttachment:Wa},Symbol.toStringTag,{value:"Module"}));let u0=class{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}};const BA=class extends u0{constructor(i){super(i),this.id=BA.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVerticesOld(i,t){this.computeWorldVertices(i,0,this.worldVerticesLength,t,0,2)}computeWorldVertices(i,t,e,r,n,s){e=n+(e>>1)*s;const o=i.bone.skeleton,h=i.deform;let a=this.vertices;const l=this.bones;if(!l){h.length>0&&(a=h);const p=i.bone.matrix,g=p.tx,v=p.ty,y=p.a,x=p.c,_=p.b,b=p.d;for(let E=t,T=n;T<e;E+=2,T+=s){const S=a[E],C=a[E+1];r[T]=S*y+C*x+g,r[T+1]=S*_+C*b+v}return}let u=0,c=0;for(let p=0;p<t;p+=2){const g=l[u];u+=g+1,c+=g}const f=o.bones;if(h.length==0)for(let p=n,g=c*3;p<e;p+=s){let v=0,y=0,x=l[u++];for(x+=u;u<x;u++,g+=3){const _=f[l[u]].matrix,b=a[g],E=a[g+1],T=a[g+2];v+=(b*_.a+E*_.c+_.tx)*T,y+=(b*_.b+E*_.d+_.ty)*T}r[p]=v,r[p+1]=y}else{const p=h;for(let g=n,v=c*3,y=c<<1;g<e;g+=s){let x=0,_=0,b=l[u++];for(b+=u;u<b;u++,v+=3,y+=2){const E=f[l[u]].matrix,T=a[v]+p[y],S=a[v+1]+p[y+1],C=a[v+2];x+=(T*E.a+S*E.c+E.tx)*C,_+=(T*E.b+S*E.d+E.ty)*C}r[g]=x,r[g+1]=_}}}copyTo(i){this.bones?(i.bones=new Array(this.bones.length),et.arrayCopy(this.bones,0,i.bones,0,this.bones.length)):i.bones=null,this.vertices&&(i.vertices=et.newFloatArray(this.vertices.length),et.arrayCopy(this.vertices,0,i.vertices,0,this.vertices.length)),i.worldVerticesLength=this.worldVerticesLength,i.timelineAttachment=this.timelineAttachment}};let zi=BA;zi.nextID=0;let NA=class OA extends zi{constructor(t){super(t),this.type=ue.BoundingBox,this.color=new bt(1,1,1,1)}copy(){const t=new OA(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},DA=class LA extends zi{constructor(t){super(t),this.type=ue.Clipping,this.endSlot=null,this.color=new bt(.2275,.2275,.8078,1)}copy(){const t=new LA(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},bf=class ly extends zi{constructor(t,e){super(t),this.type=ue.Mesh,this.region=null,this.triangles=[],this.color=new bt(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new bt(0,0,0,0),this.path=e}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();const t=new ly(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),et.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),et.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),et.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,r,n,s,o){this.sequence!=null&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,r,n,s,o)}newLinkedMesh(){const t=new ly(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t}},cu=class UA extends zi{constructor(t){super(t),this.type=ue.Path,this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new bt(1,1,1,1)}copy(){const t=new UA(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),et.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},VA=class XA extends zi{constructor(t){super(t),this.type=ue.Point,this.x=0,this.y=0,this.rotation=0,this.color=new bt(.38,.94,0,1)}computeWorldPosition(t,e){const r=t.matrix;return e.x=this.x*r.a+this.y*r.c+t.worldX,e.y=this.x*r.b+this.y*r.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix,r=q.cosDeg(this.rotation),n=q.sinDeg(this.rotation),s=r*e.a+n*e.c,o=r*e.b+n*e.d;return Math.atan2(o,s)*q.radDeg}copy(){const t=new XA(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}};const GA=class extends u0{constructor(i,t){super(i),this.type=ue.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new bt(1,1,1,1),this.rendererObject=null,this.region=null,this.sequence=null,this.offset=et.newFloatArray(8),this.uvs=et.newFloatArray(8),this.tempColor=new bt(1,1,1,1),this.path=t}updateRegion(){if(!this.region)throw new Error("Region not set.");const i=this.region,t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,s=r+this.region.width*t,o=n+this.region.height*e,h=this.rotation*Math.PI/180,a=Math.cos(h),l=Math.sin(h),u=this.x,c=this.y,f=r*a+u,p=r*l,g=n*a+c,v=n*l,y=s*a+u,x=s*l,_=o*a+c,b=o*l,E=this.offset;E[0]=f-v,E[1]=g+p,E[2]=f-b,E[3]=_+p,E[4]=y-b,E[5]=_+x,E[6]=y-v,E[7]=g+x;const T=this.uvs;i.degrees==90?(T[2]=i.u,T[3]=i.v2,T[4]=i.u,T[5]=i.v,T[6]=i.u2,T[7]=i.v,T[0]=i.u2,T[1]=i.v2):(T[0]=i.u,T[1]=i.v2,T[2]=i.u,T[3]=i.v,T[4]=i.u2,T[5]=i.v,T[6]=i.u2,T[7]=i.v2)}computeWorldVertices(i,t,e,r){this.sequence!=null&&this.sequence.apply(i,this);const n=i.bone,s=this.offset,o=n.matrix,h=o.tx,a=o.ty,l=o.a,u=o.c,c=o.b,f=o.d;let p=0,g=0;p=s[0],g=s[1],t[e]=p*l+g*u+h,t[e+1]=p*c+g*f+a,e+=r,p=s[2],g=s[3],t[e]=p*l+g*u+h,t[e+1]=p*c+g*f+a,e+=r,p=s[4],g=s[5],t[e]=p*l+g*u+h,t[e+1]=p*c+g*f+a,e+=r,p=s[6],g=s[7],t[e]=p*l+g*u+h,t[e+1]=p*c+g*f+a}copy(){const i=new GA(this.name,this.path);return i.region=this.region,i.rendererObject=this.rendererObject,i.x=this.x,i.y=this.y,i.scaleX=this.scaleX,i.scaleY=this.scaleY,i.rotation=this.rotation,i.width=this.width,i.height=this.height,et.arrayCopy(this.uvs,0,i.uvs,0,8),et.arrayCopy(this.offset,0,i.offset,0,8),i.color.setFromColor(this.color),i.sequence=this.sequence!=null?this.sequence.copy():null,i}};let Ae=GA;Ae.X1=0;Ae.Y1=1;Ae.C1R=2;Ae.C1G=3;Ae.C1B=4;Ae.C1A=5;Ae.U1=6;Ae.V1=7;Ae.X2=8;Ae.Y2=9;Ae.C2R=10;Ae.C2G=11;Ae.C2B=12;Ae.C2A=13;Ae.U2=14;Ae.V2=15;Ae.X3=16;Ae.Y3=17;Ae.C3R=18;Ae.C3G=19;Ae.C3B=20;Ae.C3A=21;Ae.U3=22;Ae.V3=23;Ae.X4=24;Ae.Y4=25;Ae.C4R=26;Ae.C4G=27;Ae.C4B=28;Ae.C4A=29;Ae.U4=30;Ae.V4=31;const Id=class{constructor(i){this.id=Id.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(i)}copy(){const i=new Id(this.regions.length);return et.arrayCopy(this.regions,0,i.regions,0,this.regions.length),i.start=this.start,i.digits=this.digits,i.setupIndex=this.setupIndex,i}apply(i,t){let e=i.sequenceIndex;e==-1&&(e=this.setupIndex),e>=this.regions.length&&(e=this.regions.length-1);const r=this.regions[e];t.region!=r&&(t.region=r)}getPath(i,t){let e=i;const r=(this.start+t).toString();for(let n=this.digits-r.length;n>0;n--)e+="0";return e+=r,e}static nextID(){return Id._nextID++}};let Ef=Id;Ef._nextID=0;var ds=(i=>(i[i.hold=0]="hold",i[i.once=1]="once",i[i.loop=2]="loop",i[i.pingpong=3]="pingpong",i[i.onceReverse=4]="onceReverse",i[i.loopReverse=5]="loopReverse",i[i.pingpongReverse=6]="pingpongReverse",i))(ds||{});const c0=[0,1,2,3,4,5,6];let Tf=class{constructor(t,e,r){if(this.timelines=[],this.timelineIds=new WS,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=r}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(let e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,r,n,s,o,h,a){if(!t)throw new Error("skeleton cannot be null.");n&&this.duration!=0&&(r%=this.duration,e>0&&(e%=this.duration));const l=this.timelines;for(let u=0,c=l.length;u<c;u++)l[u].apply(t,e,r,s,o,h,a)}};const ke={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18,sequence:19};let mr=class{constructor(t,e){this.propertyIds=e,this.frames=et.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){const r=t.length;for(let n=1;n<r;n++)if(t[n]>e)return n-1;return r-1}static search(t,e,r){const n=t.length;for(let s=r;s<n;s+=r)if(t[s]>e)return s-r;return n-r}},qi=class extends mr{constructor(t,e,r){super(t,r),this.curves=et.newFloatArray(t+e*18),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){const e=this.getFrameCount()+t*18;if(this.curves.length>e){const r=et.newFloatArray(e);et.arrayCopy(this.curves,0,r,0,e),this.curves=r}}setBezier(t,e,r,n,s,o,h,a,l,u,c){const f=this.curves;let p=this.getFrameCount()+t*18;r==0&&(f[e]=2+p);const g=(n-o*2+a)*.03,v=(s-h*2+l)*.03,y=((o-a)*3-n+u)*.006,x=((h-l)*3-s+c)*.006;let _=g*2+y,b=v*2+x,E=(o-n)*.3+g+y*.16666667,T=(h-s)*.3+v+x*.16666667,S=n+E,C=s+T;for(let M=p+18;p<M;p+=2)f[p]=S,f[p+1]=C,E+=_,T+=b,_+=y,b+=x,S+=E,C+=T}getBezierValue(t,e,r,n){const s=this.curves;if(s[n]>t){const l=this.frames[e],u=this.frames[e+r];return u+(t-l)/(s[n]-l)*(s[n+1]-u)}const o=n+18;for(n+=2;n<o;n+=2)if(s[n]>=t){const l=s[n-2],u=s[n-1];return u+(t-l)/(s[n]-l)*(s[n+1]-u)}e+=this.getFrameEntries();const h=s[o-2],a=s[o-1];return a+(t-h)/(this.frames[e]-h)*(this.frames[e+r]-a)}},Ki=class extends qi{constructor(t,e,r){super(t,e,[r])}getFrameEntries(){return 2}setFrame(t,e,r){t<<=1,this.frames[t]=e,this.frames[t+1]=r}getCurveValue(t){const e=this.frames;let r=e.length-2;for(let s=2;s<=r;s+=2)if(e[s]>t){r=s-2;break}const n=this.curves[r>>1];switch(n){case 0:const s=e[r],o=e[r+1];return o+(t-s)/(e[r+2]-s)*(e[r+2+1]-o);case 1:return e[r+1]}return this.getBezierValue(t,r,1,n-2)}},Sf=class extends qi{constructor(t,e,r,n){super(t,e,[r,n])}getFrameEntries(){return 3}setFrame(t,e,r,n){t*=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n}},du=class extends Ki{constructor(t,e,r){super(t,e,`${ke.rotate}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,s,o,h){const a=t.bones[this.boneIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.rotation=a.data.rotation;return;case z.first:a.rotation+=(a.data.rotation-a.rotation)*s}return}let u=this.getCurveValue(r);switch(o){case z.setup:a.rotation=a.data.rotation+u*s;break;case z.first:case z.replace:u+=a.data.rotation-a.rotation;case z.add:a.rotation+=u*s}}},d0=class extends Sf{constructor(t,e,r){super(t,e,`${ke.x}|${r}`,`${ke.y}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,s,o,h){const a=t.bones[this.boneIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.x=a.data.x,a.y=a.data.y;return;case z.first:a.x+=(a.data.x-a.x)*s,a.y+=(a.data.y-a.y)*s}return}let u=0,c=0;const f=mr.search(l,r,3),p=this.curves[f/3];switch(p){case 0:const g=l[f];u=l[f+1],c=l[f+2];const v=(r-g)/(l[f+3]-g);u+=(l[f+3+1]-u)*v,c+=(l[f+3+2]-c)*v;break;case 1:u=l[f+1],c=l[f+2];break;default:u=this.getBezierValue(r,f,1,p-2),c=this.getBezierValue(r,f,2,p+18-2)}switch(o){case z.setup:a.x=a.data.x+u*s,a.y=a.data.y+c*s;break;case z.first:case z.replace:a.x+=(a.data.x+u-a.x)*s,a.y+=(a.data.y+c-a.y)*s;break;case z.add:a.x+=u*s,a.y+=c*s}}},f0=class extends Ki{constructor(t,e,r){super(t,e,`${ke.x}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,s,o,h){const a=t.bones[this.boneIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.x=a.data.x;return;case z.first:a.x+=(a.data.x-a.x)*s}return}const u=this.getCurveValue(r);switch(o){case z.setup:a.x=a.data.x+u*s;break;case z.first:case z.replace:a.x+=(a.data.x+u-a.x)*s;break;case z.add:a.x+=u*s}}},p0=class extends Ki{constructor(t,e,r){super(t,e,`${ke.y}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,s,o,h){const a=t.bones[this.boneIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.y=a.data.y;return;case z.first:a.y+=(a.data.y-a.y)*s}return}const u=this.getCurveValue(r);switch(o){case z.setup:a.y=a.data.y+u*s;break;case z.first:case z.replace:a.y+=(a.data.y+u-a.y)*s;break;case z.add:a.y+=u*s}}},m0=class extends Sf{constructor(t,e,r){super(t,e,`${ke.scaleX}|${r}`,`${ke.scaleY}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,s,o,h){const a=t.bones[this.boneIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.scaleX=a.data.scaleX,a.scaleY=a.data.scaleY;return;case z.first:a.scaleX+=(a.data.scaleX-a.scaleX)*s,a.scaleY+=(a.data.scaleY-a.scaleY)*s}return}let u,c;const f=mr.search(l,r,3),p=this.curves[f/3];switch(p){case 0:const g=l[f];u=l[f+1],c=l[f+2];const v=(r-g)/(l[f+3]-g);u+=(l[f+3+1]-u)*v,c+=(l[f+3+2]-c)*v;break;case 1:u=l[f+1],c=l[f+2];break;default:u=this.getBezierValue(r,f,1,p-2),c=this.getBezierValue(r,f,2,p+18-2)}if(u*=a.data.scaleX,c*=a.data.scaleY,s==1)o==z.add?(a.scaleX+=u-a.data.scaleX,a.scaleY+=c-a.data.scaleY):(a.scaleX=u,a.scaleY=c);else{let g=0,v=0;if(h==he.mixOut)switch(o){case z.setup:g=a.data.scaleX,v=a.data.scaleY,a.scaleX=g+(Math.abs(u)*q.signum(g)-g)*s,a.scaleY=v+(Math.abs(c)*q.signum(v)-v)*s;break;case z.first:case z.replace:g=a.scaleX,v=a.scaleY,a.scaleX=g+(Math.abs(u)*q.signum(g)-g)*s,a.scaleY=v+(Math.abs(c)*q.signum(v)-v)*s;break;case z.add:a.scaleX+=(u-a.data.scaleX)*s,a.scaleY+=(c-a.data.scaleY)*s}else switch(o){case z.setup:g=Math.abs(a.data.scaleX)*q.signum(u),v=Math.abs(a.data.scaleY)*q.signum(c),a.scaleX=g+(u-g)*s,a.scaleY=v+(c-v)*s;break;case z.first:case z.replace:g=Math.abs(a.scaleX)*q.signum(u),v=Math.abs(a.scaleY)*q.signum(c),a.scaleX=g+(u-g)*s,a.scaleY=v+(c-v)*s;break;case z.add:a.scaleX+=(u-a.data.scaleX)*s,a.scaleY+=(c-a.data.scaleY)*s}}}},g0=class extends Ki{constructor(t,e,r){super(t,e,`${ke.scaleX}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,s,o,h){const a=t.bones[this.boneIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.scaleX=a.data.scaleX;return;case z.first:a.scaleX+=(a.data.scaleX-a.scaleX)*s}return}const u=this.getCurveValue(r)*a.data.scaleX;if(s==1)o==z.add?a.scaleX+=u-a.data.scaleX:a.scaleX=u;else{let c=0;if(h==he.mixOut)switch(o){case z.setup:c=a.data.scaleX,a.scaleX=c+(Math.abs(u)*q.signum(c)-c)*s;break;case z.first:case z.replace:c=a.scaleX,a.scaleX=c+(Math.abs(u)*q.signum(c)-c)*s;break;case z.add:a.scaleX+=(u-a.data.scaleX)*s}else switch(o){case z.setup:c=Math.abs(a.data.scaleX)*q.signum(u),a.scaleX=c+(u-c)*s;break;case z.first:case z.replace:c=Math.abs(a.scaleX)*q.signum(u),a.scaleX=c+(u-c)*s;break;case z.add:a.scaleX+=(u-a.data.scaleX)*s}}}},v0=class extends Ki{constructor(t,e,r){super(t,e,`${ke.scaleY}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,s,o,h){const a=t.bones[this.boneIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.scaleY=a.data.scaleY;return;case z.first:a.scaleY+=(a.data.scaleY-a.scaleY)*s}return}const u=this.getCurveValue(r)*a.data.scaleY;if(s==1)o==z.add?a.scaleY+=u-a.data.scaleY:a.scaleY=u;else{let c=0;if(h==he.mixOut)switch(o){case z.setup:c=a.data.scaleY,a.scaleY=c+(Math.abs(u)*q.signum(c)-c)*s;break;case z.first:case z.replace:c=a.scaleY,a.scaleY=c+(Math.abs(u)*q.signum(c)-c)*s;break;case z.add:a.scaleY+=(u-a.data.scaleY)*s}else switch(o){case z.setup:c=Math.abs(a.data.scaleY)*q.signum(u),a.scaleY=c+(u-c)*s;break;case z.first:case z.replace:c=Math.abs(a.scaleY)*q.signum(u),a.scaleY=c+(u-c)*s;break;case z.add:a.scaleY+=(u-a.data.scaleY)*s}}}},y0=class extends Sf{constructor(t,e,r){super(t,e,`${ke.shearX}|${r}`,`${ke.shearY}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,s,o,h){const a=t.bones[this.boneIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.shearX=a.data.shearX,a.shearY=a.data.shearY;return;case z.first:a.shearX+=(a.data.shearX-a.shearX)*s,a.shearY+=(a.data.shearY-a.shearY)*s}return}let u=0,c=0;const f=mr.search(l,r,3),p=this.curves[f/3];switch(p){case 0:const g=l[f];u=l[f+1],c=l[f+2];const v=(r-g)/(l[f+3]-g);u+=(l[f+3+1]-u)*v,c+=(l[f+3+2]-c)*v;break;case 1:u=l[f+1],c=l[f+2];break;default:u=this.getBezierValue(r,f,1,p-2),c=this.getBezierValue(r,f,2,p+18-2)}switch(o){case z.setup:a.shearX=a.data.shearX+u*s,a.shearY=a.data.shearY+c*s;break;case z.first:case z.replace:a.shearX+=(a.data.shearX+u-a.shearX)*s,a.shearY+=(a.data.shearY+c-a.shearY)*s;break;case z.add:a.shearX+=u*s,a.shearY+=c*s}}},x0=class extends Ki{constructor(t,e,r){super(t,e,`${ke.shearX}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,s,o,h){const a=t.bones[this.boneIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.shearX=a.data.shearX;return;case z.first:a.shearX+=(a.data.shearX-a.shearX)*s}return}const u=this.getCurveValue(r);switch(o){case z.setup:a.shearX=a.data.shearX+u*s;break;case z.first:case z.replace:a.shearX+=(a.data.shearX+u-a.shearX)*s;break;case z.add:a.shearX+=u*s}}},w0=class extends Ki{constructor(t,e,r){super(t,e,`${ke.shearY}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,s,o,h){const a=t.bones[this.boneIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.shearY=a.data.shearY;return;case z.first:a.shearY+=(a.data.shearY-a.shearY)*s}return}const u=this.getCurveValue(r);switch(o){case z.setup:a.shearY=a.data.shearY+u*s;break;case z.first:case z.replace:a.shearY+=(a.data.shearY+u-a.shearY)*s;break;case z.add:a.shearY+=u*s}}},_0=class extends qi{constructor(t,e,r){super(t,e,[`${ke.rgb}|${r}`,`${ke.alpha}|${r}`]),this.slotIndex=0,this.slotIndex=r}getFrameEntries(){return 5}setFrame(t,e,r,n,s,o){t*=5,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=s,this.frames[t+4]=o}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const l=this.frames,u=a.color;if(r<l[0]){const x=a.data.color;switch(o){case z.setup:u.setFromColor(x);return;case z.first:u.add((x.r-u.r)*s,(x.g-u.g)*s,(x.b-u.b)*s,(x.a-u.a)*s)}return}let c=0,f=0,p=0,g=0;const v=mr.search(l,r,5),y=this.curves[v/5];switch(y){case 0:const x=l[v];c=l[v+1],f=l[v+2],p=l[v+3],g=l[v+4];const _=(r-x)/(l[v+5]-x);c+=(l[v+5+1]-c)*_,f+=(l[v+5+2]-f)*_,p+=(l[v+5+3]-p)*_,g+=(l[v+5+4]-g)*_;break;case 1:c=l[v+1],f=l[v+2],p=l[v+3],g=l[v+4];break;default:c=this.getBezierValue(r,v,1,y-2),f=this.getBezierValue(r,v,2,y+18-2),p=this.getBezierValue(r,v,3,y+18*2-2),g=this.getBezierValue(r,v,4,y+18*3-2)}s==1?u.set(c,f,p,g):(o==z.setup&&u.setFromColor(a.data.color),u.add((c-u.r)*s,(f-u.g)*s,(p-u.b)*s,(g-u.a)*s))}},b0=class extends qi{constructor(t,e,r){super(t,e,[`${ke.rgb}|${r}`]),this.slotIndex=0,this.slotIndex=r}getFrameEntries(){return 4}setFrame(t,e,r,n,s){t<<=2,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=s}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const l=this.frames,u=a.color;if(r<l[0]){const y=a.data.color;switch(o){case z.setup:u.r=y.r,u.g=y.g,u.b=y.b;return;case z.first:u.r+=(y.r-u.r)*s,u.g+=(y.g-u.g)*s,u.b+=(y.b-u.b)*s}return}let c=0,f=0,p=0;const g=mr.search(l,r,4),v=this.curves[g>>2];switch(v){case 0:const y=l[g];c=l[g+1],f=l[g+2],p=l[g+3];const x=(r-y)/(l[g+4]-y);c+=(l[g+4+1]-c)*x,f+=(l[g+4+2]-f)*x,p+=(l[g+4+3]-p)*x;break;case 1:c=l[g+1],f=l[g+2],p=l[g+3];break;default:c=this.getBezierValue(r,g,1,v-2),f=this.getBezierValue(r,g,2,v+18-2),p=this.getBezierValue(r,g,3,v+18*2-2)}if(s==1)u.r=c,u.g=f,u.b=p;else{if(o==z.setup){const y=a.data.color;u.r=y.r,u.g=y.g,u.b=y.b}u.r+=(c-u.r)*s,u.g+=(f-u.g)*s,u.b+=(p-u.b)*s}}},E0=class extends Ki{constructor(t,e,r){super(t,e,`${ke.alpha}|${r}`),this.slotIndex=0,this.slotIndex=r}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const l=a.color;if(r<this.frames[0]){const c=a.data.color;switch(o){case z.setup:l.a=c.a;return;case z.first:l.a+=(c.a-l.a)*s}return}const u=this.getCurveValue(r);s==1?l.a=u:(o==z.setup&&(l.a=a.data.color.a),l.a+=(u-l.a)*s)}},T0=class extends qi{constructor(t,e,r){super(t,e,[`${ke.rgb}|${r}`,`${ke.alpha}|${r}`,`${ke.rgb2}|${r}`]),this.slotIndex=0,this.slotIndex=r}getFrameEntries(){return 8}setFrame(t,e,r,n,s,o,h,a,l){t<<=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=s,this.frames[t+4]=o,this.frames[t+5]=h,this.frames[t+6]=a,this.frames[t+7]=l}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const l=this.frames,u=a.color,c=a.darkColor;if(r<l[0]){const T=a.data.color,S=a.data.darkColor;switch(o){case z.setup:u.setFromColor(T),c.r=S.r,c.g=S.g,c.b=S.b;return;case z.first:u.add((T.r-u.r)*s,(T.g-u.g)*s,(T.b-u.b)*s,(T.a-u.a)*s),c.r+=(S.r-c.r)*s,c.g+=(S.g-c.g)*s,c.b+=(S.b-c.b)*s}return}let f=0,p=0,g=0,v=0,y=0,x=0,_=0;const b=mr.search(l,r,8),E=this.curves[b>>3];switch(E){case 0:const T=l[b];f=l[b+1],p=l[b+2],g=l[b+3],v=l[b+4],y=l[b+5],x=l[b+6],_=l[b+7];const S=(r-T)/(l[b+8]-T);f+=(l[b+8+1]-f)*S,p+=(l[b+8+2]-p)*S,g+=(l[b+8+3]-g)*S,v+=(l[b+8+4]-v)*S,y+=(l[b+8+5]-y)*S,x+=(l[b+8+6]-x)*S,_+=(l[b+8+7]-_)*S;break;case 1:f=l[b+1],p=l[b+2],g=l[b+3],v=l[b+4],y=l[b+5],x=l[b+6],_=l[b+7];break;default:f=this.getBezierValue(r,b,1,E-2),p=this.getBezierValue(r,b,2,E+18-2),g=this.getBezierValue(r,b,3,E+18*2-2),v=this.getBezierValue(r,b,4,E+18*3-2),y=this.getBezierValue(r,b,5,E+18*4-2),x=this.getBezierValue(r,b,6,E+18*5-2),_=this.getBezierValue(r,b,7,E+18*6-2)}if(s==1)u.set(f,p,g,v),c.r=y,c.g=x,c.b=_;else{if(o==z.setup){u.setFromColor(a.data.color);const T=a.data.darkColor;c.r=T.r,c.g=T.g,c.b=T.b}u.add((f-u.r)*s,(p-u.g)*s,(g-u.b)*s,(v-u.a)*s),c.r+=(y-c.r)*s,c.g+=(x-c.g)*s,c.b+=(_-c.b)*s}}},S0=class extends qi{constructor(t,e,r){super(t,e,[`${ke.rgb}|${r}`,`${ke.rgb2}|${r}`]),this.slotIndex=0,this.slotIndex=r}getFrameEntries(){return 7}setFrame(t,e,r,n,s,o,h,a){t*=7,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=s,this.frames[t+4]=o,this.frames[t+5]=h,this.frames[t+6]=a}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const l=this.frames,u=a.color,c=a.darkColor;if(r<l[0]){const E=a.data.color,T=a.data.darkColor;switch(o){case z.setup:u.r=E.r,u.g=E.g,u.b=E.b,c.r=T.r,c.g=T.g,c.b=T.b;return;case z.first:u.r+=(E.r-u.r)*s,u.g+=(E.g-u.g)*s,u.b+=(E.b-u.b)*s,c.r+=(T.r-c.r)*s,c.g+=(T.g-c.g)*s,c.b+=(T.b-c.b)*s}return}let f=0,p=0,g=0,v=0,y=0,x=0;const _=mr.search(l,r,7),b=this.curves[_/7];switch(b){case 0:const E=l[_];f=l[_+1],p=l[_+2],g=l[_+3],v=l[_+4],y=l[_+5],x=l[_+6];const T=(r-E)/(l[_+7]-E);f+=(l[_+7+1]-f)*T,p+=(l[_+7+2]-p)*T,g+=(l[_+7+3]-g)*T,v+=(l[_+7+4]-v)*T,y+=(l[_+7+5]-y)*T,x+=(l[_+7+6]-x)*T;break;case 1:f=l[_+1],p=l[_+2],g=l[_+3],v=l[_+4],y=l[_+5],x=l[_+6];break;default:f=this.getBezierValue(r,_,1,b-2),p=this.getBezierValue(r,_,2,b+18-2),g=this.getBezierValue(r,_,3,b+18*2-2),v=this.getBezierValue(r,_,4,b+18*3-2),y=this.getBezierValue(r,_,5,b+18*4-2),x=this.getBezierValue(r,_,6,b+18*5-2)}if(s==1)u.r=f,u.g=p,u.b=g,c.r=v,c.g=y,c.b=x;else{if(o==z.setup){const E=a.data.color,T=a.data.darkColor;u.r=E.r,u.g=E.g,u.b=E.b,c.r=T.r,c.g=T.g,c.b=T.b}u.r+=(f-u.r)*s,u.g+=(p-u.g)*s,u.b+=(g-u.b)*s,c.r+=(v-c.r)*s,c.g+=(y-c.g)*s,c.b+=(x-c.b)*s}}},Mo=class extends mr{constructor(t,e){super(t,[`${ke.attachment}|${e}`]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(a.bone.active){if(h==he.mixOut){o==z.setup&&this.setAttachment(t,a,a.data.attachmentName);return}if(r<this.frames[0]){(o==z.setup||o==z.first)&&this.setAttachment(t,a,a.data.attachmentName);return}this.setAttachment(t,a,this.attachmentNames[mr.search1(this.frames,r)])}}setAttachment(t,e,r){e.setAttachment(r?t.getAttachment(this.slotIndex,r):null)}},A0=class extends qi{constructor(t,e,r,n){super(t,e,[`${ke.deform}|${r}|${n.id}`]),this.slotIndex=0,this.slotIndex=r,this.attachment=n,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.vertices[t]=r}setBezier(t,e,r,n,s,o,h,a,l,u,c){const f=this.curves;let p=this.getFrameCount()+t*18;r==0&&(f[e]=2+p);const g=(n-o*2+a)*.03,v=l*.03-h*.06,y=((o-a)*3-n+u)*.006,x=(h-l+.33333333)*.018;let _=g*2+y,b=v*2+x,E=(o-n)*.3+g+y*.16666667,T=h*.3+v+x*.16666667,S=n+E,C=T;for(let M=p+18;p<M;p+=2)f[p]=S,f[p+1]=C,E+=_,T+=b,_+=y,b+=x,S+=E,C+=T}getCurvePercent(t,e){const r=this.curves;let n=r[e];switch(n){case 0:const a=this.frames[e];return(t-a)/(this.frames[e+this.getFrameEntries()]-a);case 1:return 0}if(n-=2,r[n]>t){const a=this.frames[e];return r[n+1]*(t-a)/(r[n]-a)}const s=n+18;for(n+=2;n<s;n+=2)if(r[n]>=t){const a=r[n-2],l=r[n-1];return l+(t-a)/(r[n]-a)*(r[n+1]-l)}const o=r[s-2],h=r[s-1];return h+(1-h)*(t-o)/(this.frames[e+this.getFrameEntries()]-o)}apply(t,e,r,n,s,o,h){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const l=a.getAttachment();if(!l||!(l instanceof zi)||l.timelineAttachment!=this.attachment)return;const u=a.deform;u.length==0&&(o=z.setup);const c=this.vertices,f=c[0].length,p=this.frames;if(r<p[0]){switch(o){case z.setup:u.length=0;return;case z.first:if(s==1){u.length=0;return}u.length=f;const _=l;if(_.bones){s=1-s;for(let b=0;b<f;b++)u[b]*=s}else{const b=_.vertices;for(let E=0;E<f;E++)u[E]+=(b[E]-u[E])*s}}return}if(u.length=f,r>=p[p.length-1]){const _=c[p.length-1];if(s==1)if(o==z.add){const b=l;if(b.bones)for(let E=0;E<f;E++)u[E]+=_[E];else{const E=b.vertices;for(let T=0;T<f;T++)u[T]+=_[T]-E[T]}}else et.arrayCopy(_,0,u,0,f);else switch(o){case z.setup:{const E=l;if(E.bones)for(let T=0;T<f;T++)u[T]=_[T]*s;else{const T=E.vertices;for(let S=0;S<f;S++){const C=T[S];u[S]=C+(_[S]-C)*s}}break}case z.first:case z.replace:for(let E=0;E<f;E++)u[E]+=(_[E]-u[E])*s;break;case z.add:const b=l;if(b.bones)for(let E=0;E<f;E++)u[E]+=_[E]*s;else{const E=b.vertices;for(let T=0;T<f;T++)u[T]+=(_[T]-E[T])*s}}return}const g=mr.search1(p,r),v=this.getCurvePercent(r,g),y=c[g],x=c[g+1];if(s==1)if(o==z.add){const _=l;if(_.bones)for(let b=0;b<f;b++){const E=y[b];u[b]+=E+(x[b]-E)*v}else{const b=_.vertices;for(let E=0;E<f;E++){const T=y[E];u[E]+=T+(x[E]-T)*v-b[E]}}}else for(let _=0;_<f;_++){const b=y[_];u[_]=b+(x[_]-b)*v}else switch(o){case z.setup:{const b=l;if(b.bones)for(let E=0;E<f;E++){const T=y[E];u[E]=(T+(x[E]-T)*v)*s}else{const E=b.vertices;for(let T=0;T<f;T++){const S=y[T],C=E[T];u[T]=C+(S+(x[T]-S)*v-C)*s}}break}case z.first:case z.replace:for(let b=0;b<f;b++){const E=y[b];u[b]+=(E+(x[b]-E)*v-u[b])*s}break;case z.add:const _=l;if(_.bones)for(let b=0;b<f;b++){const E=y[b];u[b]+=(E+(x[b]-E)*v)*s}else{const b=_.vertices;for(let E=0;E<f;E++){const T=y[E];u[E]+=(T+(x[E]-T)*v-b[E])*s}}}}};const YA=class extends mr{constructor(i){super(i,YA.propertyIds),this.events=new Array(i)}getFrameCount(){return this.frames.length}setFrame(i,t){this.frames[i]=t.time,this.events[i]=t}apply(i,t,e,r,n,s,o){if(!r)return;const h=this.frames,a=this.frames.length;if(t>e)this.apply(i,t,Number.MAX_VALUE,r,n,s,o),t=-1;else if(t>=h[a-1])return;if(e<h[0])return;let l=0;if(t<h[0])l=0;else{l=mr.search1(h,t)+1;const u=h[l];for(;l>0&&h[l-1]==u;)l--}for(;l<a&&e>=h[l];l++)r.push(this.events[l])}};let Su=YA;Su.propertyIds=[`${ke.event}`];const $A=class extends mr{constructor(i){super(i,$A.propertyIds),this.drawOrders=new Array(i)}getFrameCount(){return this.frames.length}setFrame(i,t,e){this.frames[i]=t,this.drawOrders[i]=e}apply(i,t,e,r,n,s,o){if(o==he.mixOut){s==z.setup&&et.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length);return}if(e<this.frames[0]){(s==z.setup||s==z.first)&&et.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length);return}const h=mr.search1(this.frames,e),a=this.drawOrders[h];if(!a)et.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length);else{const l=i.drawOrder,u=i.slots;for(let c=0,f=a.length;c<f;c++)l[c]=u[a[c]]}}};let Bo=$A;Bo.propertyIds=[`${ke.drawOrder}`];let C0=class extends qi{constructor(t,e,r){super(t,e,[`${ke.ikConstraint}|${r}`]),this.ikConstraintIndex=0,this.ikConstraintIndex=r}getFrameEntries(){return 6}setFrame(t,e,r,n,s,o,h){t*=6,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=s,this.frames[t+4]=o?1:0,this.frames[t+5]=h?1:0}apply(t,e,r,n,s,o,h){const a=t.ikConstraints[this.ikConstraintIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;return;case z.first:a.mix+=(a.data.mix-a.mix)*s,a.softness+=(a.data.softness-a.softness)*s,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}return}let u=0,c=0;const f=mr.search(l,r,6),p=this.curves[f/6];switch(p){case 0:const g=l[f];u=l[f+1],c=l[f+2];const v=(r-g)/(l[f+6]-g);u+=(l[f+6+1]-u)*v,c+=(l[f+6+2]-c)*v;break;case 1:u=l[f+1],c=l[f+2];break;default:u=this.getBezierValue(r,f,1,p-2),c=this.getBezierValue(r,f,2,p+18-2)}o==z.setup?(a.mix=a.data.mix+(u-a.data.mix)*s,a.softness=a.data.softness+(c-a.data.softness)*s,h==he.mixOut?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=l[f+3],a.compress=l[f+4]!=0,a.stretch=l[f+5]!=0)):(a.mix+=(u-a.mix)*s,a.softness+=(c-a.softness)*s,h==he.mixIn&&(a.bendDirection=l[f+3],a.compress=l[f+4]!=0,a.stretch=l[f+5]!=0))}},I0=class extends qi{constructor(t,e,r){super(t,e,[`${ke.transformConstraint}|${r}`]),this.transformConstraintIndex=0,this.transformConstraintIndex=r}getFrameEntries(){return 7}setFrame(t,e,r,n,s,o,h,a){const l=this.frames;t*=7,l[t]=e,l[t+1]=r,l[t+2]=n,l[t+3]=s,l[t+4]=o,l[t+5]=h,l[t+6]=a}apply(t,e,r,n,s,o,h){const a=t.transformConstraints[this.transformConstraintIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){const _=a.data;switch(o){case z.setup:a.mixRotate=_.mixRotate,a.mixX=_.mixX,a.mixY=_.mixY,a.mixScaleX=_.mixScaleX,a.mixScaleY=_.mixScaleY,a.mixShearY=_.mixShearY;return;case z.first:a.mixRotate+=(_.mixRotate-a.mixRotate)*s,a.mixX+=(_.mixX-a.mixX)*s,a.mixY+=(_.mixY-a.mixY)*s,a.mixScaleX+=(_.mixScaleX-a.mixScaleX)*s,a.mixScaleY+=(_.mixScaleY-a.mixScaleY)*s,a.mixShearY+=(_.mixShearY-a.mixShearY)*s}return}let u,c,f,p,g,v;const y=mr.search(l,r,7),x=this.curves[y/7];switch(x){case 0:const _=l[y];u=l[y+1],c=l[y+2],f=l[y+3],p=l[y+4],g=l[y+5],v=l[y+6];const b=(r-_)/(l[y+7]-_);u+=(l[y+7+1]-u)*b,c+=(l[y+7+2]-c)*b,f+=(l[y+7+3]-f)*b,p+=(l[y+7+4]-p)*b,g+=(l[y+7+5]-g)*b,v+=(l[y+7+6]-v)*b;break;case 1:u=l[y+1],c=l[y+2],f=l[y+3],p=l[y+4],g=l[y+5],v=l[y+6];break;default:u=this.getBezierValue(r,y,1,x-2),c=this.getBezierValue(r,y,2,x+18-2),f=this.getBezierValue(r,y,3,x+18*2-2),p=this.getBezierValue(r,y,4,x+18*3-2),g=this.getBezierValue(r,y,5,x+18*4-2),v=this.getBezierValue(r,y,6,x+18*5-2)}if(o==z.setup){const _=a.data;a.mixRotate=_.mixRotate+(u-_.mixRotate)*s,a.mixX=_.mixX+(c-_.mixX)*s,a.mixY=_.mixY+(f-_.mixY)*s,a.mixScaleX=_.mixScaleX+(p-_.mixScaleX)*s,a.mixScaleY=_.mixScaleY+(g-_.mixScaleY)*s,a.mixShearY=_.mixShearY+(v-_.mixShearY)*s}else a.mixRotate+=(u-a.mixRotate)*s,a.mixX+=(c-a.mixX)*s,a.mixY+=(f-a.mixY)*s,a.mixScaleX+=(p-a.mixScaleX)*s,a.mixScaleY+=(g-a.mixScaleY)*s,a.mixShearY+=(v-a.mixShearY)*s}},R0=class extends Ki{constructor(t,e,r){super(t,e,`${ke.pathConstraintPosition}|${r}`),this.pathConstraintIndex=0,this.pathConstraintIndex=r}apply(t,e,r,n,s,o,h){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.position=a.data.position;return;case z.first:a.position+=(a.data.position-a.position)*s}return}const u=this.getCurveValue(r);o==z.setup?a.position=a.data.position+(u-a.data.position)*s:a.position+=(u-a.position)*s}},M0=class extends Ki{constructor(t,e,r){super(t,e,`${ke.pathConstraintSpacing}|${r}`),this.pathConstraintIndex=0,this.pathConstraintIndex=r}apply(t,e,r,n,s,o,h){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.spacing=a.data.spacing;return;case z.first:a.spacing+=(a.data.spacing-a.spacing)*s}return}const u=this.getCurveValue(r);o==z.setup?a.spacing=a.data.spacing+(u-a.data.spacing)*s:a.spacing+=(u-a.spacing)*s}},P0=class extends qi{constructor(t,e,r){super(t,e,[`${ke.pathConstraintMix}|${r}`]),this.pathConstraintIndex=0,this.pathConstraintIndex=r}getFrameEntries(){return 4}setFrame(t,e,r,n,s){const o=this.frames;t<<=2,o[t]=e,o[t+1]=r,o[t+2]=n,o[t+3]=s}apply(t,e,r,n,s,o,h){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;const l=this.frames;if(r<l[0]){switch(o){case z.setup:a.mixRotate=a.data.mixRotate,a.mixX=a.data.mixX,a.mixY=a.data.mixY;return;case z.first:a.mixRotate+=(a.data.mixRotate-a.mixRotate)*s,a.mixX+=(a.data.mixX-a.mixX)*s,a.mixY+=(a.data.mixY-a.mixY)*s}return}let u,c,f;const p=mr.search(l,r,4),g=this.curves[p>>2];switch(g){case 0:const v=l[p];u=l[p+1],c=l[p+2],f=l[p+3];const y=(r-v)/(l[p+4]-v);u+=(l[p+4+1]-u)*y,c+=(l[p+4+2]-c)*y,f+=(l[p+4+3]-f)*y;break;case 1:u=l[p+1],c=l[p+2],f=l[p+3];break;default:u=this.getBezierValue(r,p,1,g-2),c=this.getBezierValue(r,p,2,g+18-2),f=this.getBezierValue(r,p,3,g+18*2-2)}if(o==z.setup){const v=a.data;a.mixRotate=v.mixRotate+(u-v.mixRotate)*s,a.mixX=v.mixX+(c-v.mixX)*s,a.mixY=v.mixY+(f-v.mixY)*s}else a.mixRotate+=(u-a.mixRotate)*s,a.mixX+=(c-a.mixX)*s,a.mixY+=(f-a.mixY)*s}};const Ia=class extends mr{constructor(i,t,e){super(i,[`${ke.sequence}|${t}|${e.sequence.id}`]),this.slotIndex=t,this.attachment=e}getFrameEntries(){return Ia.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(i,t,e,r,n){const s=this.frames;i*=Ia.ENTRIES,s[i]=t,s[i+Ia.MODE]=e|r<<4,s[i+Ia.DELAY]=n}apply(i,t,e,r,n,s,o){const h=i.slots[this.slotIndex];if(!h.bone.active)return;const a=h.attachment,l=this.attachment;if(a!=l&&(!(a instanceof zi)||a.timelineAttachment!=l))return;const u=this.frames;if(e<u[0]){(s==z.setup||s==z.first)&&(h.sequenceIndex=-1);return}const c=mr.search(u,e,Ia.ENTRIES),f=u[c],p=u[c+Ia.MODE],g=u[c+Ia.DELAY];if(!this.attachment.sequence)return;let v=p>>4;const y=this.attachment.sequence.regions.length,x=c0[p&15];if(x!=ds.hold)switch(v+=(e-f)/g+1e-5|0,x){case ds.once:v=Math.min(y-1,v);break;case ds.loop:v%=y;break;case ds.pingpong:{const _=(y<<1)-2;v=_==0?0:v%_,v>=y&&(v=_-v);break}case ds.onceReverse:v=Math.max(y-1-v,0);break;case ds.loopReverse:v=y-1-v%y;break;case ds.pingpongReverse:{const _=(y<<1)-2;v=_==0?0:(v+y-1)%_,v>=y&&(v=_-v)}}h.sequenceIndex=v}};let zl=Ia;zl.ENTRIES=3;zl.MODE=1;zl.DELAY=2;const cs=class{constructor(i){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new WA(this),this.propertyIDs=new WS,this.animationsChanged=!1,this.trackEntryPool=new gf(()=>new Af),this.data=i}static emptyAnimation(){return cs._emptyAnimation}update(i){i*=this.timeScale;const t=this.tracks;for(let e=0,r=t.length;e<r;e++){const n=t[e];if(!n)continue;n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;let s=i*n.timeScale;if(n.delay>0){if(n.delay-=s,n.delay>0)continue;s=-n.delay,n.delay=0}let o=n.next;if(o){const h=n.trackLast-o.delay;if(h>=0){for(o.delay=0,o.trackTime+=n.timeScale==0?0:(h/n.timeScale+i)*o.timeScale,n.trackTime+=s,this.setCurrent(e,o,!0);o.mixingFrom;)o.mixTime+=i,o=o.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&!n.mixingFrom){t[e]=null,this.queue.end(n),this.clearNext(n);continue}if(n.mixingFrom&&this.updateMixingFrom(n,i)){let h=n.mixingFrom;for(n.mixingFrom=null,h&&(h.mixingTo=null);h;)this.queue.end(h),h=h.mixingFrom}n.trackTime+=s}this.queue.drain()}updateMixingFrom(i,t){const e=i.mixingFrom;if(!e)return!0;const r=this.updateMixingFrom(e,t);return e.animationLast=e.nextAnimationLast,e.trackLast=e.nextTrackLast,i.mixTime>0&&i.mixTime>=i.mixDuration?((e.totalAlpha==0||i.mixDuration==0)&&(i.mixingFrom=e.mixingFrom,e.mixingFrom&&(e.mixingFrom.mixingTo=i),i.interruptAlpha=e.interruptAlpha,this.queue.end(e)),r):(e.trackTime+=t*e.timeScale,i.mixTime+=t,!1)}apply(i){if(!i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();const t=this.events,e=this.tracks;let r=!1;for(let o=0,h=e.length;o<h;o++){const a=e[o];if(!a||a.delay>0)continue;r=!0;const l=o==0?z.first:a.mixBlend;let u=a.alpha;a.mixingFrom?u*=this.applyMixingFrom(a,i,l):a.trackTime>=a.trackEnd&&!a.next&&(u=0);const c=a.animationLast,f=a.getAnimationTime();let p=f,g=t;a.reverse&&(p=a.animation.duration-p,g=null);const v=a.animation.timelines,y=v.length;if(o==0&&u==1||l==z.add)for(let x=0;x<y;x++){const _=v[x];_ instanceof Mo?this.applyAttachmentTimeline(_,i,p,l,!0):_.apply(i,c,p,g,u,l,he.mixIn)}else{const x=a.timelineMode,_=a.shortestRotation,b=!_&&a.timelinesRotation.length!=y<<1;b&&(a.timelinesRotation.length=y<<1);for(let E=0;E<y;E++){const T=v[E],S=x[E]==Lg?l:z.setup;!_&&T instanceof du?this.applyRotateTimeline(T,i,p,u,S,a.timelinesRotation,E<<1,b):T instanceof Mo?this.applyAttachmentTimeline(T,i,p,l,!0):T.apply(i,c,p,g,u,S,he.mixIn)}}this.queueEvents(a,f),t.length=0,a.nextAnimationLast=f,a.nextTrackLast=a.trackTime}const n=this.unkeyedState+Kb,s=i.slots;for(let o=0,h=i.slots.length;o<h;o++){const a=s[o];if(a.attachmentState==n){const l=a.data.attachmentName;a.setAttachment(l?i.getAttachment(a.data.index,l):null)}}return this.unkeyedState+=2,this.queue.drain(),r}applyMixingFrom(i,t,e){const r=i.mixingFrom;r.mixingFrom&&this.applyMixingFrom(r,t,e);let n=0;i.mixDuration==0?(n=1,e==z.first&&(e=z.setup)):(n=i.mixTime/i.mixDuration,n>1&&(n=1),e!=z.first&&(e=r.mixBlend));const s=n<r.attachmentThreshold,o=n<r.drawOrderThreshold,h=r.animation.timelines,a=h.length,l=r.alpha*i.interruptAlpha,u=l*(1-n),c=r.animationLast,f=r.getAnimationTime();let p=f,g=null;if(r.reverse?p=r.animation.duration-p:n<r.eventThreshold&&(g=this.events),e==z.add)for(let v=0;v<a;v++)h[v].apply(t,c,p,g,u,e,he.mixOut);else{const v=r.timelineMode,y=r.timelineHoldMix,x=r.shortestRotation,_=!x&&r.timelinesRotation.length!=a<<1;_&&(r.timelinesRotation.length=a<<1),r.totalAlpha=0;for(let b=0;b<a;b++){const E=h[b];let T=he.mixOut,S,C=0;switch(v[b]){case Lg:if(!o&&E instanceof Bo)continue;S=e,C=u;break;case jb:S=z.setup,C=u;break;case qb:S=e,C=l;break;case Ug:S=z.setup,C=l;break;default:S=z.setup;const M=y[b];C=l*Math.max(0,1-M.mixTime/M.mixDuration);break}r.totalAlpha+=C,!x&&E instanceof du?this.applyRotateTimeline(E,t,p,C,S,r.timelinesRotation,b<<1,_):E instanceof Mo?this.applyAttachmentTimeline(E,t,p,S,s):(o&&E instanceof Bo&&S==z.setup&&(T=he.mixIn),E.apply(t,c,p,g,C,S,T))}}return i.mixDuration>0&&this.queueEvents(r,f),this.events.length=0,r.nextAnimationLast=f,r.nextTrackLast=r.trackTime,n}applyAttachmentTimeline(i,t,e,r,n){const s=t.slots[i.slotIndex];s.bone.active&&(e<i.frames[0]?(r==z.setup||r==z.first)&&this.setAttachment(t,s,s.data.attachmentName,n):this.setAttachment(t,s,i.attachmentNames[mr.search1(i.frames,e)],n),s.attachmentState<=this.unkeyedState&&(s.attachmentState=this.unkeyedState+Kb))}setAttachment(i,t,e,r){t.setAttachment(e?i.getAttachment(t.data.index,e):null),r&&(t.attachmentState=this.unkeyedState+jB)}applyRotateTimeline(i,t,e,r,n,s,o,h){if(h&&(s[o]=0),r==1){i.apply(t,0,e,null,1,n,he.mixIn);return}const a=t.bones[i.boneIndex];if(!a.active)return;const l=i.frames;let u=0,c=0;if(e<l[0])switch(n){case z.setup:a.rotation=a.data.rotation;default:return;case z.first:u=a.rotation,c=a.data.rotation}else u=n==z.setup?a.data.rotation:a.rotation,c=a.data.rotation+i.getCurveValue(e);let f=0,p=c-u;if(p-=(16384-(16384.499999999996-p/360|0))*360,p==0)f=s[o];else{let g=0,v=0;h?(g=0,v=p):(g=s[o],v=s[o+1]);const y=p>0;let x=g>=0;q.signum(v)!=q.signum(p)&&Math.abs(v)<=90&&(Math.abs(g)>180&&(g+=360*q.signum(g)),x=y),f=p+g-g%360,x!=y&&(f+=360*q.signum(g)),s[o]=f}s[o+1]=p,a.rotation=u+f*r}queueEvents(i,t){const e=i.animationStart,r=i.animationEnd,n=r-e,s=i.trackLast%n,o=this.events;let h=0;const a=o.length;for(;h<a;h++){const u=o[h];if(u.time<s)break;u.time>r||this.queue.event(i,u)}let l=!1;for(i.loop?l=n==0||s>i.trackTime%n:l=t>=r&&i.animationLast<r,l&&this.queue.complete(i);h<a;h++){const u=o[h];u.time<e||this.queue.event(i,u)}}clearTracks(){const i=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=i,this.queue.drain()}clearTrack(i){if(i>=this.tracks.length)return;const t=this.tracks[i];if(!t)return;this.queue.end(t),this.clearNext(t);let e=t;for(;;){const r=e.mixingFrom;if(!r)break;this.queue.end(r),e.mixingFrom=null,e.mixingTo=null,e=r}this.tracks[t.trackIndex]=null,this.queue.drain()}setCurrent(i,t,e){const r=this.expandToIndex(i);this.tracks[i]=t,t.previous=null,r&&(e&&this.queue.interrupt(r),t.mixingFrom=r,r.mixingTo=t,t.mixTime=0,r.mixingFrom&&r.mixDuration>0&&(t.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(t)}setAnimation(i,t,e=!1){const r=this.data.skeletonData.findAnimation(t);if(!r)throw new Error(`Animation not found: ${t}`);return this.setAnimationWith(i,r,e)}setAnimationWith(i,t,e=!1){if(!t)throw new Error("animation cannot be null.");let r=!0,n=this.expandToIndex(i);n&&(n.nextTrackLast==-1?(this.tracks[i]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.clearNext(n),n=n.mixingFrom,r=!1):this.clearNext(n));const s=this.trackEntry(i,t,e,n);return this.setCurrent(i,s,r),this.queue.drain(),s}addAnimation(i,t,e=!1,r=0){const n=this.data.skeletonData.findAnimation(t);if(!n)throw new Error(`Animation not found: ${t}`);return this.addAnimationWith(i,n,e,r)}addAnimationWith(i,t,e=!1,r=0){if(!t)throw new Error("animation cannot be null.");let n=this.expandToIndex(i);if(n)for(;n.next;)n=n.next;const s=this.trackEntry(i,t,e,n);return n?(n.next=s,s.previous=n,r<=0&&(r+=n.getTrackComplete()-s.mixDuration)):(this.setCurrent(i,s,!0),this.queue.drain()),s.delay=r,s}setEmptyAnimation(i,t=0){const e=this.setAnimationWith(i,cs.emptyAnimation(),!1);return e.mixDuration=t,e.trackEnd=t,e}addEmptyAnimation(i,t=0,e=0){const r=this.addAnimationWith(i,cs.emptyAnimation(),!1,e);return e<=0&&(r.delay+=r.mixDuration-t),r.mixDuration=t,r.trackEnd=t,r}setEmptyAnimations(i=0){const t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,r=this.tracks.length;e<r;e++){const n=this.tracks[e];n&&this.setEmptyAnimation(n.trackIndex,i)}this.queue.drainDisabled=t,this.queue.drain()}expandToIndex(i){return i<this.tracks.length?this.tracks[i]:(et.ensureArrayCapacity(this.tracks,i+1,null),this.tracks.length=i+1,null)}trackEntry(i,t,e,r){const n=this.trackEntryPool.obtain();return n.reset(),n.trackIndex=i,n.animation=t,n.loop=e,n.holdPrevious=!1,n.reverse=!1,n.shortestRotation=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=t.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.mixTime=0,n.mixDuration=r?this.data.getMix(r.animation,t):0,n.interruptAlpha=1,n.totalAlpha=0,n.mixBlend=z.replace,n}clearNext(i){let t=i.next;for(;t;)this.queue.dispose(t),t=t.next;i.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();const i=this.tracks;for(let t=0,e=i.length;t<e;t++){let r=i[t];if(r){for(;r.mixingFrom;)r=r.mixingFrom;do(!r.mixingTo||r.mixBlend!=z.add)&&this.computeHold(r),r=r.mixingTo;while(r)}}}computeHold(i){const t=i.mixingTo,e=i.animation.timelines,r=i.animation.timelines.length,n=i.timelineMode;n.length=r;const s=i.timelineHoldMix;s.length=0;const o=this.propertyIDs;if(t&&t.holdPrevious){for(let h=0;h<r;h++)n[h]=o.addAll(e[h].getPropertyIds())?Ug:qb;return}t:for(let h=0;h<r;h++){const a=e[h],l=a.getPropertyIds();if(!o.addAll(l))n[h]=Lg;else if(!t||a instanceof Mo||a instanceof Bo||a instanceof Su||!t.animation.hasTimeline(l))n[h]=jb;else{for(let u=t.mixingTo;u;u=u.mixingTo)if(!u.animation.hasTimeline(l)){if(i.mixDuration>0){n[h]=zB,s[h]=u;continue t}break}n[h]=Ug}}}getCurrent(i){return i>=this.tracks.length?null:this.tracks[i]}addListener(i){if(!i)throw new Error("listener cannot be null.");this.listeners.push(i)}removeListener(i){const t=this.listeners.indexOf(i);t>=0&&this.listeners.splice(t,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}setAnimationByName(i,t,e){cs.deprecatedWarning1||(cs.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(i,t,e)}addAnimationByName(i,t,e,r){cs.deprecatedWarning2||(cs.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(i,t,e,r)}hasAnimation(i){return this.data.skeletonData.findAnimation(i)!==null}hasAnimationByName(i){return cs.deprecatedWarning3||(cs.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(i)}};let jl=cs;jl._emptyAnimation=new Tf("<empty>",[],0);jl.deprecatedWarning1=!1;jl.deprecatedWarning2=!1;jl.deprecatedWarning3=!1;const Us=class{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=z.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const i=this.animationEnd-this.animationStart;return i==0?this.animationStart:this.trackTime%i+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(i){this.animationLast=i,this.nextAnimationLast=i}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){const i=this.animationEnd-this.animationStart;if(i!=0){if(this.loop)return i*(1+(this.trackTime/i|0));if(this.trackTime<i)return i}return this.trackTime}get time(){return Us.deprecatedWarning1||(Us.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(i){Us.deprecatedWarning1||(Us.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=i}get endTime(){return Us.deprecatedWarning2||(Us.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(i){Us.deprecatedWarning2||(Us.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=i}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}};let Af=Us;Af.deprecatedWarning1=!1;Af.deprecatedWarning2=!1;let WA=class{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(On.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(On.interrupt),this.objects.push(t)}end(t){this.objects.push(On.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(On.dispose),this.objects.push(t)}complete(t){this.objects.push(On.complete),this.objects.push(t)}event(t,e){this.objects.push(On.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const t=this.objects,e=this.animState.listeners;for(let r=0;r<t.length;r+=2){const n=t[r],s=t[r+1];switch(n){case On.start:s.listener&&s.listener.start&&s.listener.start(s);for(let h=0;h<e.length;h++){const a=e[h];a.start&&a.start(s)}break;case On.interrupt:s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(let h=0;h<e.length;h++){const a=e[h];a.interrupt&&a.interrupt(s)}break;case On.end:s.listener&&s.listener.end&&s.listener.end(s);for(let h=0;h<e.length;h++){const a=e[h];a.end&&a.end(s)}case On.dispose:s.listener&&s.listener.dispose&&s.listener.dispose(s);for(let h=0;h<e.length;h++){const a=e[h];a.dispose&&a.dispose(s)}this.animState.trackEntryPool.free(s);break;case On.complete:s.listener&&s.listener.complete&&s.listener.complete(s);for(let h=0;h<e.length;h++){const a=e[h];a.complete&&a.complete(s)}break;case On.event:const o=t[r+++2];s.listener&&s.listener.event&&s.listener.event(s,o);for(let h=0;h<e.length;h++){const a=e[h];a.event&&a.event(s,o)}break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}};var On=(i=>(i[i.start=0]="start",i[i.interrupt=1]="interrupt",i[i.end=2]="end",i[i.dispose=3]="dispose",i[i.complete=4]="complete",i[i.event=5]="event",i))(On||{});class HB{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}}const Lg=0,jb=1,qb=2,Ug=3,zB=4,Kb=1,jB=2;let HA=class{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,r){const n=this.skeletonData.findAnimation(t);if(!n)throw new Error(`Animation not found: ${t}`);const s=this.skeletonData.findAnimation(e);if(!s)throw new Error(`Animation not found: ${e}`);this.setMixWith(n,s,r)}setMixWith(t,e,r){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");const n=`${t.name}.${e.name}`;this.animationToMixTime[n]=r}getMix(t,e){const r=`${t.name}.${e.name}`,n=this.animationToMixTime[r];return n===void 0?this.defaultMix:n}},k0=class{constructor(t){this.atlas=t}loadSequence(t,e,r){const n=r.regions;for(let s=0,o=n.length;s<o;s++){const h=r.getPath(e,s),a=this.atlas.findRegion(h);if(a==null)throw new Error(`Region not found in atlas: ${h} (sequence: ${t})`);n[s]=a,n[s].renderObject=n[s]}}newRegionAttachment(t,e,r,n){const s=new Ae(e,r);if(n!=null)this.loadSequence(e,r,n);else{const o=this.atlas.findRegion(r);if(!o)throw new Error(`Region not found in atlas: ${r} (region attachment: ${e})`);o.renderObject=o,s.region=o}return s}newMeshAttachment(t,e,r,n){const s=new bf(e,r);if(n!=null)this.loadSequence(e,r,n);else{const o=this.atlas.findRegion(r);if(!o)throw new Error(`Region not found in atlas: ${r} (mesh attachment: ${e})`);o.renderObject=o,s.region=o}return s}newBoundingBoxAttachment(t,e){return new NA(e)}newPathAttachment(t,e){return new cu(e)}newPointAttachment(t,e){return new VA(e)}newClippingAttachment(t,e){return new DA(e)}},hy=class{constructor(t,e,r){if(this.matrix=new Ze,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,r,n,s,o,h){this.ax=t,this.ay=e,this.arotation=r,this.ascaleX=n,this.ascaleY=s,this.ashearX=o,this.ashearY=h;const a=this.parent,l=this.matrix,u=this.skeleton.scaleX,c=-this.skeleton.scaleY;if(!a){const y=this.skeleton,x=r+90+h;l.a=q.cosDeg(r+o)*n*u,l.c=q.cosDeg(x)*s*u,l.b=q.sinDeg(r+o)*n*c,l.d=q.sinDeg(x)*s*c,l.tx=t*u+y.x,l.ty=e*c+y.y;return}let f=a.matrix.a,p=a.matrix.c,g=a.matrix.b,v=a.matrix.d;switch(l.tx=f*t+p*e+a.matrix.tx,l.ty=g*t+v*e+a.matrix.ty,this.data.transformMode){case ne.Normal:{const y=r+90+h,x=q.cosDeg(r+o)*n,_=q.cosDeg(y)*s,b=q.sinDeg(r+o)*n,E=q.sinDeg(y)*s;l.a=f*x+p*b,l.c=f*_+p*E,l.b=g*x+v*b,l.d=g*_+v*E;return}case ne.OnlyTranslation:{const y=r+90+h;l.a=q.cosDeg(r+o)*n,l.c=q.cosDeg(y)*s,l.b=q.sinDeg(r+o)*n,l.d=q.sinDeg(y)*s;break}case ne.NoRotationOrReflection:{let y=f*f+g*g,x=0;y>1e-4?(y=Math.abs(f*v-p*g)/y,f/=u,g/=c,p=g*y,v=f*y,x=Math.atan2(g,f)*q.radDeg):(f=0,g=0,x=90-Math.atan2(v,p)*q.radDeg);const _=r+o-x,b=r+h-x+90,E=q.cosDeg(_)*n,T=q.cosDeg(b)*s,S=q.sinDeg(_)*n,C=q.sinDeg(b)*s;l.a=f*E-p*S,l.c=f*T-p*C,l.b=g*E+v*S,l.d=g*T+v*C;break}case ne.NoScale:case ne.NoScaleOrReflection:{const y=q.cosDeg(r),x=q.sinDeg(r);let _=(f*y+p*x)/u,b=(g*y+v*x)/c,E=Math.sqrt(_*_+b*b);E>1e-5&&(E=1/E),_*=E,b*=E,E=Math.sqrt(_*_+b*b),this.data.transformMode==ne.NoScale&&f*v-p*g<0!=(u<0!=c<0)&&(E=-E);const T=Math.PI/2+Math.atan2(b,_),S=Math.cos(T)*E,C=Math.sin(T)*E,M=q.cosDeg(o)*n,P=q.cosDeg(90+h)*s,F=q.sinDeg(o)*n,V=q.sinDeg(90+h)*s;l.a=_*M+S*F,l.c=_*P+S*V,l.b=b*M+C*F,l.d=b*P+C*V;break}}l.a*=u,l.c*=u,l.b*=c,l.d*=c}setToSetupPose(){const t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*q.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*q.radDeg}getWorldScaleX(){const t=this.matrix;return Math.sqrt(t.a*t.a+t.b*t.b)}getWorldScaleY(){const t=this.matrix;return Math.sqrt(t.c*t.c+t.d*t.d)}updateAppliedTransform(){const t=this.parent,e=this.matrix;if(!t){this.ax=e.tx-this.skeleton.x,this.ay=e.ty-this.skeleton.y,this.arotation=Math.atan2(e.b,e.a)*q.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*q.radDeg;return}const r=t.matrix,n=1/(r.a*r.d-r.b*r.c),s=e.tx-r.tx,o=e.ty-r.ty;this.ax=s*r.d*n-o*r.c*n,this.ay=o*r.a*n-s*r.b*n;const h=n*r.d,a=n*r.a,l=n*r.c,u=n*r.b,c=h*e.a-l*e.b,f=h*e.c-l*e.d,p=a*e.b-u*e.a,g=a*e.d-u*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+p*p),this.ascaleX>1e-4){const v=c*g-f*p;this.ascaleY=v/this.ascaleX,this.ashearY=Math.atan2(c*f+p*g,v)*q.radDeg,this.arotation=Math.atan2(p,c)*q.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(f*f+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,f)*q.radDeg}worldToLocal(t){const e=this.matrix,r=e.a,n=e.c,s=e.b,o=e.d,h=1/(r*o-n*s),a=t.x-e.tx,l=t.y-e.ty;return t.x=a*o*h-l*n*h,t.y=l*r*h-a*s*h,t}localToWorld(t){const e=this.matrix,r=t.x,n=t.y;return t.x=r*e.a+n*e.c+e.tx,t.y=r*e.b+n*e.d+e.ty,t}worldToLocalRotation(t){const e=q.sinDeg(t),r=q.cosDeg(t),n=this.matrix;return Math.atan2(n.a*e-n.b*r,n.d*r-n.c*e)*q.radDeg}localToWorldRotation(t){t-=this.rotation-this.shearX;const e=q.sinDeg(t),r=q.cosDeg(t),n=this.matrix;return Math.atan2(r*n.b+e*n.d,r*n.a+e*n.c)*q.radDeg}rotateWorld(t){const e=this.matrix,r=e.a,n=e.c,s=e.b,o=e.d,h=q.cosDeg(t),a=q.sinDeg(t);e.a=h*r-a*s,e.c=h*n-a*o,e.b=a*r+h*s,e.d=a*n+h*o}},F0=class{constructor(t,e,r){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=ne.Normal,this.skinRequired=!1,this.color=new bt,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r}},Cf=class{constructor(t,e,r){this.name=t,this.order=e,this.skinRequired=r}},B0=class{constructor(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}},N0=class{constructor(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}},zA=class{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let n=0;n<t.bones.length;n++){const s=e.findBone(t.bones[n].name);if(!s)throw new Error(`Couldn't find bone ${t.bones[n].name}`);this.bones.push(s)}const r=e.findBone(t.target.name);if(!r)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=r}isActive(){return this.active}update(){if(this.mix==0)return;const t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(t,e,r,n,s,o,h){const a=t.parent.matrix;if(!a)throw new Error("IK bone must have parent.");const l=a.a;let u=a.c;const c=a.b;let f=a.d,p=-t.ashearX-t.arotation,g=0,v=0;const y=t.skeleton.scaleX,x=-t.skeleton.scaleY;switch(t.data.transformMode){case ne.OnlyTranslation:g=e-t.worldX,v=r-t.worldY,v=-v;break;case ne.NoRotationOrReflection:const E=Math.abs(l*f-u*c)/(l*l+c*c),T=l/y,S=c/x;u=-S*E*y,f=T*E*x,p+=Math.atan2(S,T)*q.radDeg;default:const C=e-a.tx,M=r-a.ty,P=l*f-u*c;g=(C*f-M*u)/P-t.ax,v=(M*l-C*c)/P-t.ay}p+=Math.atan2(v,g)*q.radDeg,t.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);let _=t.ascaleX,b=t.ascaleY;if(n||s){switch(t.data.transformMode){case ne.NoScale:case ne.NoScaleOrReflection:g=e-t.worldX,v=r-t.worldY}const E=t.data.length*_,T=Math.sqrt(g*g+v*v);if(n&&T<E||s&&T>E&&E>1e-4){const S=(T/E-1)*h+1;_*=S,o&&(b*=S)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+p*h,_,b,t.ashearX,t.ashearY)}apply2(t,e,r,n,s,o,h,a,l){const u=t.ax,c=t.ay;let f=t.ascaleX,p=t.ascaleY,g=f,v=p,y=e.ascaleX;const x=t.matrix;let _=0,b=0,E=0;f<0?(f=-f,_=180,E=-1):(_=0,E=1),p<0&&(p=-p,E=-E),y<0?(y=-y,b=180):b=0;const T=e.ax;let S=0,C=0,M=0,P=x.a,F=x.c,V=x.b,O=x.d;const U=Math.abs(f-p)<=1e-4;!U||o?(S=0,C=P*T+x.tx,M=V*T+x.ty):(S=e.ay,C=P*T+F*S+x.tx,M=V*T+O*S+x.ty);const H=t.parent.matrix;if(!H)throw new Error("IK parent must itself have a parent.");P=H.a,F=H.c,V=H.b,O=H.d;const W=1/(P*O-F*V);let B=C-H.tx,L=M-H.ty;const N=(B*O-L*F)*W-u,Y=(L*P-B*V)*W-c,D=Math.sqrt(N*N+Y*Y);let k=e.data.length*y,X,$;if(D<1e-4){this.apply1(t,r,n,!1,o,!1,l),e.updateWorldTransformWith(T,S,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}B=r-H.tx,L=n-H.ty;let j=(B*O-L*F)*W-u,K=(L*P-B*V)*W-c,tt=j*j+K*K;if(a!=0){a*=f*(y+1)*.5;const mt=Math.sqrt(tt),lt=mt-D-k*f+a;if(lt>0){let gt=Math.min(1,lt/(a*2))-1;gt=(lt-a*(1-gt*gt))/mt,j-=gt*j,K-=gt*K,tt=j*j+K*K}}t:if(U){k*=f;let mt=(tt-D*D-k*k)/(2*D*k);mt<-1?(mt=-1,$=Math.PI*s):mt>1?(mt=1,$=0,o&&(P=(Math.sqrt(tt)/(D+k)-1)*l+1,g*=P,h&&(v*=P))):$=Math.acos(mt)*s,P=D+k*mt,F=k*Math.sin($),X=Math.atan2(K*P-j*F,j*P+K*F)}else{P=f*k,F=p*k;const mt=P*P,lt=F*F,gt=Math.atan2(K,j);V=lt*D*D+mt*tt-mt*lt;const yt=-2*lt*D,St=lt-mt;if(O=yt*yt-4*St*V,O>=0){let ee=Math.sqrt(O);yt<0&&(ee=-ee),ee=-(yt+ee)*.5;const se=ee/St,Be=V/ee,Bt=Math.abs(se)<Math.abs(Be)?se:Be;if(Bt*Bt<=tt){L=Math.sqrt(tt-Bt*Bt)*s,X=gt-Math.atan2(L,Bt),$=Math.atan2(L/p,(Bt-D)/f);break t}}let Rt=q.PI,it=D-P,ut=it*it,Ct=0,zt=0,jt=D+P,Wt=jt*jt,Qt=0;V=-P*D/(mt-lt),V>=-1&&V<=1&&(V=Math.acos(V),B=P*Math.cos(V)+D,L=F*Math.sin(V),O=B*B+L*L,O<ut&&(Rt=V,ut=O,it=B,Ct=L),O>Wt&&(zt=V,Wt=O,jt=B,Qt=L)),tt<=(ut+Wt)*.5?(X=gt-Math.atan2(Ct*s,it),$=Rt*s):(X=gt-Math.atan2(Qt*s,jt),$=zt*s)}const ct=Math.atan2(S,T)*E;let ft=t.arotation;X=(X-ct)*q.radDeg+_-ft,X>180?X-=360:X<-180&&(X+=360),t.updateWorldTransformWith(u,c,ft+X*l,g,v,0,0),ft=e.arotation,$=(($+ct)*q.radDeg-e.ashearX)*E+b-ft,$>180?$-=360:$<-180&&($+=360),e.updateWorldTransformWith(T,S,ft+$*l,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},O0=class extends Cf{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},D0=class extends Cf{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.positionMode=ur.Fixed,this.spacingMode=Or.Fixed,this.rotateMode=br.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}};var Or=(i=>(i[i.Length=0]="Length",i[i.Fixed=1]="Fixed",i[i.Percent=2]="Percent",i[i.Proportional=3]="Proportional",i))(Or||{});const Vs=class{constructor(i,t){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!i)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=i,this.bones=new Array;for(let r=0,n=i.bones.length;r<n;r++){const s=t.findBone(i.bones[r].name);if(!s)throw new Error(`Couldn't find bone ${i.bones[r].name}.`);this.bones.push(s)}const e=t.findSlot(i.target.name);if(!e)throw new Error(`Couldn't find target bone ${i.target.name}`);this.target=e,this.position=i.position,this.spacing=i.spacing,this.mixRotate=i.mixRotate,this.mixX=i.mixX,this.mixY=i.mixY}isActive(){return this.active}update(){const i=this.target.getAttachment();if(!(i instanceof cu))return;const t=this.mixRotate,e=this.mixX,r=this.mixY;if(t==0&&e==0&&r==0)return;const n=this.data,s=n.rotateMode==br.Tangent,o=n.rotateMode==br.ChainScale,h=this.bones,a=h.length,l=s?a:a+1,u=et.setArraySize(this.spaces,l),c=o?this.lengths=et.setArraySize(this.lengths,a):[],f=this.spacing;switch(n.spacingMode){case Or.Percent:if(o)for(let E=0,T=l-1;E<T;E++){const S=h[E],C=S.data.length;if(C<Vs.epsilon)c[E]=0;else{const M=C*S.matrix.a,P=C*S.matrix.b;c[E]=Math.sqrt(M*M+P*P)}}et.arrayFill(u,1,l,f);break;case Or.Proportional:let _=0;for(let E=0,T=l-1;E<T;){const S=h[E],C=S.data.length;if(C<Vs.epsilon)o&&(c[E]=0),u[++E]=f;else{const M=C*S.matrix.a,P=C*S.matrix.b,F=Math.sqrt(M*M+P*P);o&&(c[E]=F),u[++E]=F,_+=F}}if(_>0){_=l/_*f;for(let E=1;E<l;E++)u[E]*=_}break;default:const b=n.spacingMode==Or.Length;for(let E=0,T=l-1;E<T;){const S=h[E],C=S.data.length;if(C<Vs.epsilon)o&&(c[E]=0),u[++E]=f;else{const M=C*S.matrix.a,P=C*S.matrix.b,F=Math.sqrt(M*M+P*P);o&&(c[E]=F),u[++E]=(b?C+f:f)*F/C}}}const p=this.computeWorldPositions(i,l,s);let g=p[0],v=p[1],y=n.offsetRotation,x=!1;if(y==0)x=n.rotateMode==br.Chain;else{x=!1;const _=this.target.bone.matrix;y*=_.a*_.d-_.b*_.c>0?q.degRad:-q.degRad}for(let _=0,b=3;_<a;_++,b+=3){const E=h[_],T=E.matrix;T.tx+=(g-T.tx)*e,T.ty+=(v-T.ty)*r;const S=p[b],C=p[b+1],M=S-g,P=C-v;if(o){const F=c[_];if(F!=0){const V=(Math.sqrt(M*M+P*P)/F-1)*t+1;T.a*=V,T.b*=V}}if(g=S,v=C,t>0){const F=T.a,V=T.c,O=T.b,U=T.d;let H=0,W=0,B=0;if(s?H=p[b-1]:u[_+1]==0?H=p[b+2]:H=Math.atan2(P,M),H-=Math.atan2(O,F),x){W=Math.cos(H),B=Math.sin(H);const L=E.data.length;g+=(L*(W*F-B*O)-M)*t,v+=(L*(B*F+W*O)-P)*t}else H+=y;H>q.PI?H-=q.PI2:H<-q.PI&&(H+=q.PI2),H*=t,W=Math.cos(H),B=Math.sin(H),T.a=W*F-B*O,T.c=W*V-B*U,T.b=B*F+W*O,T.d=B*V+W*U}E.updateAppliedTransform()}}computeWorldPositions(i,t,e){const r=this.target;let n=this.position;const s=this.spaces,o=et.setArraySize(this.positions,t*3+2);let h=this.world;const a=i.closed;let l=i.worldVerticesLength,u=l/6,c=Vs.NONE;if(!i.constantSpeed){const L=i.lengths;u-=a?1:2;const N=L[u];this.data.positionMode==ur.Percent&&(n*=N);let Y;switch(this.data.spacingMode){case Or.Percent:Y=N;break;case Or.Proportional:Y=N/t;break;default:Y=1}h=et.setArraySize(this.world,8);for(let D=0,k=0,X=0;D<t;D++,k+=3){const $=s[D]*Y;n+=$;let j=n;if(a)j%=N,j<0&&(j+=N),X=0;else if(j<0){c!=Vs.BEFORE&&(c=Vs.BEFORE,i.computeWorldVertices(r,2,4,h,0,2)),this.addBeforePosition(j,h,0,o,k);continue}else if(j>N){c!=Vs.AFTER&&(c=Vs.AFTER,i.computeWorldVertices(r,l-6,4,h,0,2)),this.addAfterPosition(j-N,h,0,o,k);continue}for(;;X++){const K=L[X];if(!(j>K)){if(X==0)j/=K;else{const tt=L[X-1];j=(j-tt)/(K-tt)}break}}X!=c&&(c=X,a&&X==u?(i.computeWorldVertices(r,l-4,4,h,0,2),i.computeWorldVertices(r,0,4,h,4,2)):i.computeWorldVertices(r,X*6+2,8,h,0,2)),this.addCurvePosition(j,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],o,k,e||D>0&&$==0)}return o}a?(l+=2,h=et.setArraySize(this.world,l),i.computeWorldVertices(r,2,l-4,h,0,2),i.computeWorldVertices(r,0,2,h,l-4,2),h[l-2]=h[0],h[l-1]=h[1]):(u--,l-=4,h=et.setArraySize(this.world,l),i.computeWorldVertices(r,2,l,h,0,2));const f=et.setArraySize(this.curves,u);let p=0,g=h[0],v=h[1],y=0,x=0,_=0,b=0,E=0,T=0,S=0,C=0,M=0,P=0,F=0,V=0,O=0,U=0;for(let L=0,N=2;L<u;L++,N+=6)y=h[N],x=h[N+1],_=h[N+2],b=h[N+3],E=h[N+4],T=h[N+5],S=(g-y*2+_)*.1875,C=(v-x*2+b)*.1875,M=((y-_)*3-g+E)*.09375,P=((x-b)*3-v+T)*.09375,F=S*2+M,V=C*2+P,O=(y-g)*.75+S+M*.16666667,U=(x-v)*.75+C+P*.16666667,p+=Math.sqrt(O*O+U*U),O+=F,U+=V,F+=M,V+=P,p+=Math.sqrt(O*O+U*U),O+=F,U+=V,p+=Math.sqrt(O*O+U*U),O+=F+M,U+=V+P,p+=Math.sqrt(O*O+U*U),f[L]=p,g=E,v=T;this.data.positionMode==ur.Percent&&(n*=p);let H;switch(this.data.spacingMode){case Or.Percent:H=p;break;case Or.Proportional:H=p/t;break;default:H=1}const W=this.segments;let B=0;for(let L=0,N=0,Y=0,D=0;L<t;L++,N+=3){const k=s[L]*H;n+=k;let X=n;if(a)X%=p,X<0&&(X+=p),Y=0;else if(X<0){this.addBeforePosition(X,h,0,o,N);continue}else if(X>p){this.addAfterPosition(X-p,h,l-4,o,N);continue}for(;;Y++){const $=f[Y];if(!(X>$)){if(Y==0)X/=$;else{const j=f[Y-1];X=(X-j)/($-j)}break}}if(Y!=c){c=Y;let $=Y*6;for(g=h[$],v=h[$+1],y=h[$+2],x=h[$+3],_=h[$+4],b=h[$+5],E=h[$+6],T=h[$+7],S=(g-y*2+_)*.03,C=(v-x*2+b)*.03,M=((y-_)*3-g+E)*.006,P=((x-b)*3-v+T)*.006,F=S*2+M,V=C*2+P,O=(y-g)*.3+S+M*.16666667,U=(x-v)*.3+C+P*.16666667,B=Math.sqrt(O*O+U*U),W[0]=B,$=1;$<8;$++)O+=F,U+=V,F+=M,V+=P,B+=Math.sqrt(O*O+U*U),W[$]=B;O+=F,U+=V,B+=Math.sqrt(O*O+U*U),W[8]=B,O+=F+M,U+=V+P,B+=Math.sqrt(O*O+U*U),W[9]=B,D=0}for(X*=B;;D++){const $=W[D];if(!(X>$)){if(D==0)X/=$;else{const j=W[D-1];X=D+(X-j)/($-j)}break}}this.addCurvePosition(X*.1,g,v,y,x,_,b,E,T,o,N,e||L>0&&k==0)}return o}addBeforePosition(i,t,e,r,n){const s=t[e],o=t[e+1],h=t[e+2]-s,a=t[e+3]-o,l=Math.atan2(a,h);r[n]=s+i*Math.cos(l),r[n+1]=o+i*Math.sin(l),r[n+2]=l}addAfterPosition(i,t,e,r,n){const s=t[e+2],o=t[e+3],h=s-t[e],a=o-t[e+1],l=Math.atan2(a,h);r[n]=s+i*Math.cos(l),r[n+1]=o+i*Math.sin(l),r[n+2]=l}addCurvePosition(i,t,e,r,n,s,o,h,a,l,u,c){if(i==0||isNaN(i)){l[u]=t,l[u+1]=e,l[u+2]=Math.atan2(n-e,r-t);return}const f=i*i,p=f*i,g=1-i,v=g*g,y=v*g,x=g*i,_=x*3,b=g*_,E=_*i,T=t*y+r*b+s*E+h*p,S=e*y+n*b+o*E+a*p;l[u]=T,l[u+1]=S,c&&(i<.001?l[u+2]=Math.atan2(n-e,r-t):l[u+2]=Math.atan2(S-(e*v+n*x*2+o*f),T-(t*v+r*x*2+s*f)))}};let ql=Vs;ql.NONE=-1;ql.BEFORE=-2;ql.AFTER=-3;ql.epsilon=1e-5;let jA=class{constructor(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new bt,this.darkColor=t.darkColor?new bt:null,this.setToSetupPose(),this.blendMode=this.data.blendMode}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&((!(t instanceof zi)||!(this.attachment instanceof zi)||t.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}},qA=class{constructor(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new lu,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let n=0;n<t.bones.length;n++){const s=e.findBone(t.bones[n].name);if(!s)throw new Error(`Couldn't find bone ${t.bones[n].name}.`);this.bones.push(s)}const r=e.findBone(t.target.name);if(!r)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=r}isActive(){return this.active}update(){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleX==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){const t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,h=e!=0||r!=0,a=this.target,l=a.matrix,u=l.a,c=l.c,f=l.b,p=l.d,g=u*p-c*f>0?q.degRad:-q.degRad,v=this.data.offsetRotation*g,y=this.data.offsetShearY*g,x=this.bones;for(let _=0,b=x.length;_<b;_++){const E=x[_],T=E.matrix;if(t!=0){const S=T.a,C=T.c,M=T.b,P=T.d;let F=Math.atan2(f,u)-Math.atan2(M,S)+v;F>q.PI?F-=q.PI2:F<-q.PI&&(F+=q.PI2),F*=t;const V=Math.cos(F),O=Math.sin(F);T.a=V*S-O*M,T.c=V*C-O*P,T.b=O*S+V*M,T.d=O*C+V*P}if(h){const S=this.temp;a.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),T.tx+=(S.x-T.tx)*e,T.ty+=(S.y-T.ty)*r}if(n!=0){let S=Math.sqrt(T.a*T.a+T.b*T.b);S!=0&&(S=(S+(Math.sqrt(u*u+f*f)-S+this.data.offsetScaleX)*n)/S),T.a*=S,T.b*=S}if(s!=0){let S=Math.sqrt(T.c*T.c+T.d*T.d);S!=0&&(S=(S+(Math.sqrt(c*c+p*p)-S+this.data.offsetScaleY)*s)/S),T.c*=S,T.d*=S}if(o>0){const S=T.c,C=T.d,M=Math.atan2(C,S);let P=Math.atan2(p,c)-Math.atan2(f,u)-(M-Math.atan2(T.b,T.a));P>q.PI?P-=q.PI2:P<-q.PI&&(P+=q.PI2),P=M+(P+y)*o;const F=Math.sqrt(S*S+C*C);T.c=Math.cos(P)*F,T.d=Math.sin(P)*F}E.updateAppliedTransform()}}applyRelativeWorld(){const t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,h=e!=0||r!=0,a=this.target,l=a.matrix,u=l.a,c=l.c,f=l.b,p=l.d,g=u*p-c*f>0?q.degRad:-q.degRad,v=this.data.offsetRotation*g,y=this.data.offsetShearY*g,x=this.bones;for(let _=0,b=x.length;_<b;_++){const E=x[_],T=E.matrix;if(t!=0){const S=T.a,C=T.c,M=T.b,P=T.d;let F=Math.atan2(f,u)+v;F>q.PI?F-=q.PI2:F<-q.PI&&(F+=q.PI2),F*=t;const V=Math.cos(F),O=Math.sin(F);T.a=V*S-O*M,T.c=V*C-O*P,T.b=O*S+V*M,T.d=O*C+V*P}if(h){const S=this.temp;a.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),T.tx+=S.x*e,T.ty+=S.y*r}if(n!=0){const S=(Math.sqrt(u*u+f*f)-1+this.data.offsetScaleX)*n+1;T.a*=S,T.b*=S}if(s!=0){const S=(Math.sqrt(c*c+p*p)-1+this.data.offsetScaleY)*s+1;T.c*=S,T.d*=S}if(o>0){let S=Math.atan2(p,c)-Math.atan2(f,u);S>q.PI?S-=q.PI2:S<-q.PI&&(S+=q.PI2);const C=T.c,M=T.d;S=Math.atan2(M,C)+(S-q.PI/2+y)*o;const P=Math.sqrt(C*C+M*M);T.c=Math.cos(S)*P,T.d=Math.sin(S)*P}E.updateAppliedTransform()}}applyAbsoluteLocal(){const t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,h=this.target,a=this.bones;for(let l=0,u=a.length;l<u;l++){const c=a[l];let f=c.arotation;if(t!=0){let _=h.arotation-f+this.data.offsetRotation;_-=(16384-(16384.499999999996-_/360|0))*360,f+=_*t}let p=c.ax,g=c.ay;p+=(h.ax-p+this.data.offsetX)*e,g+=(h.ay-g+this.data.offsetY)*r;let v=c.ascaleX,y=c.ascaleY;n!=0&&v!=0&&(v=(v+(h.ascaleX-v+this.data.offsetScaleX)*n)/v),s!=0&&y!=0&&(y=(y+(h.ascaleY-y+this.data.offsetScaleY)*s)/y);let x=c.ashearY;if(o!=0){let _=h.ashearY-x+this.data.offsetShearY;_-=(16384-(16384.499999999996-_/360|0))*360,x+=_*o}c.updateWorldTransformWith(p,g,f,v,y,c.ashearX,x)}}applyRelativeLocal(){const t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,h=this.target,a=this.bones;for(let l=0,u=a.length;l<u;l++){const c=a[l],f=c.arotation+(h.arotation+this.data.offsetRotation)*t,p=c.ax+(h.ax+this.data.offsetX)*e,g=c.ay+(h.ay+this.data.offsetY)*r,v=c.ascaleX*((h.ascaleX-1+this.data.offsetScaleX)*n+1),y=c.ascaleY*((h.ascaleY-1+this.data.offsetScaleY)*s+1),x=c.ashearY+(h.ashearY+this.data.offsetShearY)*o;c.updateWorldTransformWith(p,g,f,v,y,c.ashearX,x)}}};const eu=class{constructor(i){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!i)throw new Error("data cannot be null.");this.data=i,this.bones=new Array;for(let t=0;t<i.bones.length;t++){const e=i.bones[t];let r;if(!e.parent)r=new hy(e,this,null);else{const n=this.bones[e.parent.index];r=new hy(e,this,n),n.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(let t=0;t<i.slots.length;t++){const e=i.slots[t],r=this.bones[e.boneData.index],n=new jA(e,r);this.slots.push(n),this.drawOrder.push(n)}this.ikConstraints=new Array;for(let t=0;t<i.ikConstraints.length;t++){const e=i.ikConstraints[t];this.ikConstraints.push(new zA(e,this))}this.transformConstraints=new Array;for(let t=0;t<i.transformConstraints.length;t++){const e=i.transformConstraints[t];this.transformConstraints.push(new qA(e,this))}this.pathConstraints=new Array;for(let t=0;t<i.pathConstraints.length;t++){const e=i.pathConstraints[t];this.pathConstraints.push(new ql(e,this))}this.color=new bt(1,1,1,1),this.updateCache()}updateCache(){const i=this._updateCache;i.length=0;const t=this.bones;for(let l=0,u=t.length;l<u;l++){const c=t[l];c.sorted=c.data.skinRequired,c.active=!c.sorted}if(this.skin){const l=this.skin.bones;for(let u=0,c=this.skin.bones.length;u<c;u++){let f=this.bones[l[u].index];do f.sorted=!1,f.active=!0,f=f.parent;while(f)}}const e=this.ikConstraints,r=this.transformConstraints,n=this.pathConstraints,s=e.length,o=r.length,h=n.length,a=s+o+h;t:for(let l=0;l<a;l++){for(let u=0;u<s;u++){const c=e[u];if(c.data.order==l){this.sortIkConstraint(c);continue t}}for(let u=0;u<o;u++){const c=r[u];if(c.data.order==l){this.sortTransformConstraint(c);continue t}}for(let u=0;u<h;u++){const c=n[u];if(c.data.order==l){this.sortPathConstraint(c);continue t}}}for(let l=0,u=t.length;l<u;l++)this.sortBone(t[l])}sortIkConstraint(i){if(i.active=i.target.isActive()&&(!i.data.skinRequired||this.skin&&et.contains(this.skin.constraints,i.data,!0)),!i.active)return;const t=i.target;this.sortBone(t);const e=i.bones,r=e[0];if(this.sortBone(r),e.length==1)this._updateCache.push(i),this.sortReset(r.children);else{const n=e[e.length-1];this.sortBone(n),this._updateCache.push(i),this.sortReset(r.children),n.sorted=!0}}sortPathConstraint(i){if(i.active=i.target.bone.isActive()&&(!i.data.skinRequired||this.skin&&et.contains(this.skin.constraints,i.data,!0)),!i.active)return;const t=i.target,e=t.data.index,r=t.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,e,r),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,e,r);for(let h=0,a=this.data.skins.length;h<a;h++)this.sortPathConstraintAttachment(this.data.skins[h],e,r);const n=t.getAttachment();n instanceof cu&&this.sortPathConstraintAttachmentWith(n,r);const s=i.bones,o=s.length;for(let h=0;h<o;h++)this.sortBone(s[h]);this._updateCache.push(i);for(let h=0;h<o;h++)this.sortReset(s[h].children);for(let h=0;h<o;h++)s[h].sorted=!0}sortTransformConstraint(i){if(i.active=i.target.isActive()&&(!i.data.skinRequired||this.skin&&et.contains(this.skin.constraints,i.data,!0)),!i.active)return;this.sortBone(i.target);const t=i.bones,e=t.length;if(i.data.local)for(let r=0;r<e;r++){const n=t[r];this.sortBone(n.parent),this.sortBone(n)}else for(let r=0;r<e;r++)this.sortBone(t[r]);this._updateCache.push(i);for(let r=0;r<e;r++)this.sortReset(t[r].children);for(let r=0;r<e;r++)t[r].sorted=!0}sortPathConstraintAttachment(i,t,e){const r=i.attachments[t];if(r)for(const n in r)this.sortPathConstraintAttachmentWith(r[n],e)}sortPathConstraintAttachmentWith(i,t){if(!(i instanceof cu))return;const e=i.bones;if(!e)this.sortBone(t);else{const r=this.bones;for(let n=0,s=e.length;n<s;){let o=e[n++];for(o+=n;n<o;)this.sortBone(r[e[n++]])}}}sortBone(i){if(!i||i.sorted)return;const t=i.parent;t&&this.sortBone(t),i.sorted=!0,this._updateCache.push(i)}sortReset(i){for(let t=0,e=i.length;t<e;t++){const r=i[t];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}}updateWorldTransform(){const i=this.bones;for(let e=0,r=i.length;e<r;e++){const n=i[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY}const t=this._updateCache;for(let e=0,r=t.length;e<r;e++)t[e].update()}updateWorldTransformWith(i){const t=this.getRootBone(),e=i.matrix.a,r=i.matrix.c,n=i.matrix.b,s=i.matrix.d;t.matrix.tx=e*this.x+r*this.y+i.worldX,t.matrix.ty=n*this.x+s*this.y+i.worldY;const o=t.rotation+90+t.shearY,h=q.cosDeg(t.rotation+t.shearX)*t.scaleX,a=q.cosDeg(o)*t.scaleY,l=q.sinDeg(t.rotation+t.shearX)*t.scaleX,u=q.sinDeg(o)*t.scaleY,c=this.scaleX,f=-this.scaleY;t.matrix.a=(e*h+r*l)*c,t.matrix.c=(e*a+r*u)*c,t.matrix.b=(n*h+s*l)*f,t.matrix.d=(n*a+s*u)*f;const p=this._updateCache;for(let g=0,v=p.length;g<v;g++){const y=p[g];y!=t&&y.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const i=this.bones;for(let n=0,s=i.length;n<s;n++)i[n].setToSetupPose();const t=this.ikConstraints;for(let n=0,s=t.length;n<s;n++){const o=t[n];o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}const e=this.transformConstraints;for(let n=0,s=e.length;n<s;n++){const o=e[n],h=o.data;o.mixRotate=h.mixRotate,o.mixX=h.mixX,o.mixY=h.mixY,o.mixScaleX=h.mixScaleX,o.mixScaleY=h.mixScaleY,o.mixShearY=h.mixShearY}const r=this.pathConstraints;for(let n=0,s=r.length;n<s;n++){const o=r[n],h=o.data;o.position=h.position,o.spacing=h.spacing,o.mixRotate=h.mixRotate,o.mixX=h.mixX,o.mixY=h.mixY}}setSlotsToSetupPose(){const i=this.slots;et.arrayCopy(i,0,this.drawOrder,0,i.length);for(let t=0,e=i.length;t<e;t++)i[t].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(i){if(!i)throw new Error("boneName cannot be null.");const t=this.bones;for(let e=0,r=t.length;e<r;e++){const n=t[e];if(n.data.name==i)return n}return null}findBoneIndex(i){if(!i)throw new Error("boneName cannot be null.");const t=this.bones;for(let e=0,r=t.length;e<r;e++)if(t[e].data.name==i)return e;return-1}findSlot(i){if(!i)throw new Error("slotName cannot be null.");const t=this.slots;for(let e=0,r=t.length;e<r;e++){const n=t[e];if(n.data.name==i)return n}return null}findSlotIndex(i){if(!i)throw new Error("slotName cannot be null.");const t=this.slots;for(let e=0,r=t.length;e<r;e++)if(t[e].data.name==i)return e;return-1}setSkinByName(i){const t=this.data.findSkin(i);if(!t)throw new Error(`Skin not found: ${i}`);this.setSkin(t)}setSkin(i){if(i!=this.skin){if(i)if(this.skin)i.attachAll(this,this.skin);else{const t=this.slots;for(let e=0,r=t.length;e<r;e++){const n=t[e],s=n.data.attachmentName;if(s){const o=i.getAttachment(e,s);o&&n.setAttachment(o)}}}this.skin=i,this.updateCache()}}getAttachmentByName(i,t){const e=this.data.findSlot(i);if(!e)throw new Error(`Can't find slot with name ${i}`);return this.getAttachment(e.index,t)}getAttachment(i,t){if(!t)throw new Error("attachmentName cannot be null.");if(this.skin){const e=this.skin.getAttachment(i,t);if(e)return e}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(i,t):null}setAttachment(i,t){if(!i)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==i){let o=null;if(t&&(o=this.getAttachment(r,t),!o))throw new Error(`Attachment not found: ${t}, for slot: ${i}`);s.setAttachment(o);return}}throw new Error(`Slot not found: ${i}`)}findIkConstraint(i){if(!i)throw new Error("constraintName cannot be null.");const t=this.ikConstraints;for(let e=0,r=t.length;e<r;e++){const n=t[e];if(n.data.name==i)return n}return null}findTransformConstraint(i){if(!i)throw new Error("constraintName cannot be null.");const t=this.transformConstraints;for(let e=0,r=t.length;e<r;e++){const n=t[e];if(n.data.name==i)return n}return null}findPathConstraint(i){if(!i)throw new Error("constraintName cannot be null.");const t=this.pathConstraints;for(let e=0,r=t.length;e<r;e++){const n=t[e];if(n.data.name==i)return n}return null}getBoundsRect(){const i=new lu,t=new lu;return this.getBounds(i,t),{x:i.x,y:i.y,width:t.x,height:t.y}}getBounds(i,t,e=new Array(2)){if(!i)throw new Error("offset cannot be null.");if(!t)throw new Error("size cannot be null.");const r=this.drawOrder;let n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(let a=0,l=r.length;a<l;a++){const u=r[a];if(!u.bone.active)continue;let c=0,f=null;const p=u.getAttachment();if(p instanceof Ae)c=8,f=et.setArraySize(e,c,0),p.computeWorldVertices(u,f,0,2);else if(p instanceof bf){const g=p;c=g.worldVerticesLength,f=et.setArraySize(e,c,0),g.computeWorldVertices(u,0,c,f,0,2)}if(f)for(let g=0,v=f.length;g<v;g+=2){const y=f[g],x=f[g+1];n=Math.min(n,y),s=Math.min(s,x),o=Math.max(o,y),h=Math.max(h,x)}}i.set(n,s),t.set(o-n,h-s)}get flipX(){return this.scaleX==-1}set flipX(i){eu.deprecatedWarning1||(eu.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=i?1:-1}get flipY(){return this.scaleY==-1}set flipY(i){eu.deprecatedWarning1||(eu.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=i?1:-1}};let L0=eu;L0.deprecatedWarning1=!1;let U0=class{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(t){if(!t)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findBoneIndex(t){if(!t)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSlot(t){if(!t)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findSlotIndex(t){if(!t)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSkin(t){if(!t)throw new Error("skinName cannot be null.");const e=this.skins;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");const e=this.events;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");const e=this.animations;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.name==t)return s}return null}findPathConstraintIndex(t){if(t==null)throw new Error("pathConstraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}},V0=class{constructor(t,e,r){if(this.index=0,this.color=new bt(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=Gt.NORMAL,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!r)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=r}},X0=class extends Cf{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},uy=class{constructor(t,e,r){this.slotIndex=t,this.name=e,this.attachment=r}},jd=class{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,r){if(!r)throw new Error("attachment cannot be null.");const n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=r}addSkin(t){for(let r=0;r<t.bones.length;r++){const n=t.bones[r];let s=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==n){s=!0;break}s||this.bones.push(n)}for(let r=0;r<t.constraints.length;r++){const n=t.constraints[r];let s=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){s=!0;break}s||this.constraints.push(n)}const e=t.getAttachments();for(let r=0;r<e.length;r++){const n=e[r];this.setAttachment(n.slotIndex,n.name,n.attachment)}}copySkin(t){for(let r=0;r<t.bones.length;r++){const n=t.bones[r];let s=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==n){s=!0;break}s||this.bones.push(n)}for(let r=0;r<t.constraints.length;r++){const n=t.constraints[r];let s=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){s=!0;break}s||this.constraints.push(n)}const e=t.getAttachments();for(let r=0;r<e.length;r++){const n=e[r];n.attachment&&(n.attachment instanceof bf?(n.attachment=n.attachment.newLinkedMesh(),this.setAttachment(n.slotIndex,n.name,n.attachment)):(n.attachment=n.attachment.copy(),this.setAttachment(n.slotIndex,n.name,n.attachment)))}}getAttachment(t,e){const r=this.attachments[t];return r?r[e]:null}removeAttachment(t,e){const r=this.attachments[t];r&&delete r[e]}getAttachments(){const t=new Array;for(let e=0;e<this.attachments.length;e++){const r=this.attachments[e];if(r)for(const n in r){const s=r[n];s&&t.push(new uy(e,n,s))}}return t}getAttachmentsForSlot(t,e){const r=this.attachments[t];if(r)for(const n in r){const s=r[n];s&&e.push(new uy(t,n,s))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let r=0;for(let n=0;n<t.slots.length;n++){const s=t.slots[n],o=s.getAttachment();if(o&&r<e.attachments.length){const h=e.attachments[r];for(const a in h){const l=h[a];if(o==l){const u=this.getAttachment(r,a);u&&s.setAttachment(u);break}}}r++}}};class G0{constructor(t){this.ver40=!1,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,r=new U0;r.name="";const n=new Yd(t),s=n.readInt32(),o=n.readInt32();r.hash=o==0&&s==0?null:o.toString(16)+s.toString(16),r.version=n.readString();const h=r.version.substr(0,3);if(h!=="4.0"&&h!=="4.1"){const c=`Spine 4.1 loader cant load version ${r.version}. Please configure your pixi-spine bundle`;console.error(c)}this.ver40=h==="4.0",r.x=n.readFloat(),r.y=n.readFloat(),r.width=n.readFloat(),r.height=n.readFloat();const a=n.readBoolean();a&&(r.fps=n.readFloat(),r.imagesPath=n.readString(),r.audioPath=n.readString());let l=0;l=n.readInt(!0);for(let c=0;c<l;c++){const f=n.readString();if(!f)throw new Error("String in string table must not be null.");n.strings.push(f)}l=n.readInt(!0);for(let c=0;c<l;c++){const f=n.readString();if(!f)throw new Error("Bone name must not be null.");const p=c==0?null:r.bones[n.readInt(!0)],g=new F0(c,f,p);g.rotation=n.readFloat(),g.x=n.readFloat()*e,g.y=n.readFloat()*e,g.scaleX=n.readFloat(),g.scaleY=n.readFloat(),g.shearX=n.readFloat(),g.shearY=n.readFloat(),g.length=n.readFloat()*e,g.transformMode=n.readInt(!0),g.skinRequired=n.readBoolean(),a&&bt.rgba8888ToColor(g.color,n.readInt32()),r.bones.push(g)}l=n.readInt(!0);for(let c=0;c<l;c++){const f=n.readString();if(!f)throw new Error("Slot name must not be null.");const p=r.bones[n.readInt(!0)],g=new V0(c,f,p);bt.rgba8888ToColor(g.color,n.readInt32());const v=n.readInt32();v!=-1&&bt.rgb888ToColor(g.darkColor=new bt,v),g.attachmentName=n.readStringRef(),g.blendMode=n.readInt(!0),r.slots.push(g)}l=n.readInt(!0);for(let c=0,f;c<l;c++){const p=n.readString();if(!p)throw new Error("IK constraint data name must not be null.");const g=new O0(p);g.order=n.readInt(!0),g.skinRequired=n.readBoolean(),f=n.readInt(!0);for(let v=0;v<f;v++)g.bones.push(r.bones[n.readInt(!0)]);g.target=r.bones[n.readInt(!0)],g.mix=n.readFloat(),g.softness=n.readFloat()*e,g.bendDirection=n.readByte(),g.compress=n.readBoolean(),g.stretch=n.readBoolean(),g.uniform=n.readBoolean(),r.ikConstraints.push(g)}l=n.readInt(!0);for(let c=0,f;c<l;c++){const p=n.readString();if(!p)throw new Error("Transform constraint data name must not be null.");const g=new X0(p);g.order=n.readInt(!0),g.skinRequired=n.readBoolean(),f=n.readInt(!0);for(let v=0;v<f;v++)g.bones.push(r.bones[n.readInt(!0)]);g.target=r.bones[n.readInt(!0)],g.local=n.readBoolean(),g.relative=n.readBoolean(),g.offsetRotation=n.readFloat(),g.offsetX=n.readFloat()*e,g.offsetY=n.readFloat()*e,g.offsetScaleX=n.readFloat(),g.offsetScaleY=n.readFloat(),g.offsetShearY=n.readFloat(),g.mixRotate=n.readFloat(),g.mixX=n.readFloat(),g.mixY=n.readFloat(),g.mixScaleX=n.readFloat(),g.mixScaleY=n.readFloat(),g.mixShearY=n.readFloat(),r.transformConstraints.push(g)}l=n.readInt(!0);for(let c=0,f;c<l;c++){const p=n.readString();if(!p)throw new Error("Path constraint data name must not be null.");const g=new D0(p);g.order=n.readInt(!0),g.skinRequired=n.readBoolean(),f=n.readInt(!0);for(let v=0;v<f;v++)g.bones.push(r.bones[n.readInt(!0)]);g.target=r.slots[n.readInt(!0)],g.positionMode=n.readInt(!0),g.spacingMode=n.readInt(!0),g.rotateMode=n.readInt(!0),g.offsetRotation=n.readFloat(),g.position=n.readFloat(),g.positionMode==ur.Fixed&&(g.position*=e),g.spacing=n.readFloat(),(g.spacingMode==Or.Length||g.spacingMode==Or.Fixed)&&(g.spacing*=e),g.mixRotate=n.readFloat(),g.mixX=n.readFloat(),g.mixY=n.readFloat(),r.pathConstraints.push(g)}const u=this.readSkin(n,r,!0,a);u&&(r.defaultSkin=u,r.skins.push(u));{let c=r.skins.length;for(et.setArraySize(r.skins,l=c+n.readInt(!0));c<l;c++){const f=this.readSkin(n,r,!1,a);if(!f)throw new Error("readSkin() should not have returned null.");r.skins[c]=f}}l=this.linkedMeshes.length;for(let c=0;c<l;c++){const f=this.linkedMeshes[c],p=f.skin?r.findSkin(f.skin):r.defaultSkin;if(!p)throw new Error("Not skin found for linked mesh.");if(!f.parent)throw new Error("Linked mesh parent must not be null");const g=p.getAttachment(f.slotIndex,f.parent);if(!g)throw new Error(`Parent mesh not found: ${f.parent}`);f.mesh.timelineAttachment=f.inheritTimeline?g:f.mesh,f.mesh.setParentMesh(g)}this.linkedMeshes.length=0,l=n.readInt(!0);for(let c=0;c<l;c++){const f=n.readStringRef();if(!f)throw new Error;const p=new N0(f);p.intValue=n.readInt(!1),p.floatValue=n.readFloat(),p.stringValue=n.readString(),p.audioPath=n.readString(),p.audioPath&&(p.volume=n.readFloat(),p.balance=n.readFloat()),r.events.push(p)}l=n.readInt(!0);for(let c=0;c<l;c++){const f=n.readString();if(!f)throw new Error("Animatio name must not be null.");r.animations.push(this.readAnimation(n,f,r))}return r}readSkin(t,e,r,n){let s=null,o=0;if(r){if(o=t.readInt(!0),o==0)return null;s=new jd("default")}else{const h=t.readStringRef();if(!h)throw new Error("Skin name must not be null.");s=new jd(h),s.bones.length=t.readInt(!0);for(let a=0,l=s.bones.length;a<l;a++)s.bones[a]=e.bones[t.readInt(!0)];for(let a=0,l=t.readInt(!0);a<l;a++)s.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let a=0,l=t.readInt(!0);a<l;a++)s.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let a=0,l=t.readInt(!0);a<l;a++)s.constraints.push(e.pathConstraints[t.readInt(!0)]);o=t.readInt(!0)}for(let h=0;h<o;h++){const a=t.readInt(!0);for(let l=0,u=t.readInt(!0);l<u;l++){const c=t.readStringRef();if(!c)throw new Error("Attachment name must not be null");const f=this.readAttachment(t,e,s,a,c,n);f&&s.setAttachment(a,c,f)}}return s}readAttachment(t,e,r,n,s,o){const h=this.scale;let a=t.readStringRef();switch(a||(a=s),t.readByte()){case ue.Region:{let l=t.readStringRef();const u=t.readFloat(),c=t.readFloat(),f=t.readFloat(),p=t.readFloat(),g=t.readFloat(),v=t.readFloat(),y=t.readFloat(),x=t.readInt32(),_=this.readSequence(t);l||(l=a);const b=this.attachmentLoader.newRegionAttachment(r,a,l,_);return b?(b.path=l,b.x=c*h,b.y=f*h,b.scaleX=p,b.scaleY=g,b.rotation=u,b.width=v*h,b.height=y*h,bt.rgba8888ToColor(b.color,x),b.sequence=_,_==null&&b.updateRegion(),b):null}case ue.BoundingBox:{const l=t.readInt(!0),u=this.readVertices(t,l),c=o?t.readInt32():0,f=this.attachmentLoader.newBoundingBoxAttachment(r,a);return f?(f.worldVerticesLength=l<<1,f.vertices=u.vertices,f.bones=u.bones,o&&bt.rgba8888ToColor(f.color,c),f):null}case ue.Mesh:{let l=t.readStringRef();const u=t.readInt32(),c=t.readInt(!0),f=this.readFloatArray(t,c<<1,1),p=this.readShortArray(t),g=this.readVertices(t,c),v=t.readInt(!0),y=this.readSequence(t);let x=[],_=0,b=0;o&&(x=this.readShortArray(t),_=t.readFloat(),b=t.readFloat()),l||(l=a);const E=this.attachmentLoader.newMeshAttachment(r,a,l,y);return E?(E.path=l,bt.rgba8888ToColor(E.color,u),E.bones=g.bones,E.vertices=g.vertices,E.worldVerticesLength=c<<1,E.triangles=p,E.regionUVs=new Float32Array(f),E.hullLength=v<<1,E.sequence=y,o&&(E.edges=x,E.width=_*h,E.height=b*h),E):null}case ue.LinkedMesh:{let l=t.readStringRef();const u=t.readInt32(),c=t.readStringRef(),f=t.readStringRef(),p=t.readBoolean(),g=this.readSequence(t);let v=0,y=0;o&&(v=t.readFloat(),y=t.readFloat()),l||(l=a);const x=this.attachmentLoader.newMeshAttachment(r,a,l,g);return x?(x.path=l,bt.rgba8888ToColor(x.color,u),x.sequence=g,o&&(x.width=v*h,x.height=y*h),this.linkedMeshes.push(new qB(x,c,n,f,p)),x):null}case ue.Path:{const l=t.readBoolean(),u=t.readBoolean(),c=t.readInt(!0),f=this.readVertices(t,c),p=et.newArray(c/3,0);for(let y=0,x=p.length;y<x;y++)p[y]=t.readFloat()*h;const g=o?t.readInt32():0,v=this.attachmentLoader.newPathAttachment(r,a);return v?(v.closed=l,v.constantSpeed=u,v.worldVerticesLength=c<<1,v.vertices=f.vertices,v.bones=f.bones,v.lengths=p,o&&bt.rgba8888ToColor(v.color,g),v):null}case ue.Point:{const l=t.readFloat(),u=t.readFloat(),c=t.readFloat(),f=o?t.readInt32():0,p=this.attachmentLoader.newPointAttachment(r,a);return p?(p.x=u*h,p.y=c*h,p.rotation=l,o&&bt.rgba8888ToColor(p.color,f),p):null}case ue.Clipping:{const l=t.readInt(!0),u=t.readInt(!0),c=this.readVertices(t,u),f=o?t.readInt32():0,p=this.attachmentLoader.newClippingAttachment(r,a);return p?(p.endSlot=e.slots[l],p.worldVerticesLength=u<<1,p.vertices=c.vertices,p.bones=c.bones,o&&bt.rgba8888ToColor(p.color,f),p):null}}return null}readSequence(t){if(this.ver40||!t.readBoolean())return null;const e=new Ef(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readDeformTimelineType(t){return this.ver40?Zb:t.readByte()}readVertices(t,e){const r=this.scale,n=e<<1,s=new KB;if(!t.readBoolean())return s.vertices=this.readFloatArray(t,n,r),s;const o=new Array,h=new Array;for(let a=0;a<e;a++){const l=t.readInt(!0);h.push(l);for(let u=0;u<l;u++)h.push(t.readInt(!0)),o.push(t.readFloat()*r),o.push(t.readFloat()*r),o.push(t.readFloat())}return s.vertices=et.toFloatArray(o),s.bones=h,s}readFloatArray(t,e,r){const n=new Array(e);if(r==1)for(let s=0;s<e;s++)n[s]=t.readFloat();else for(let s=0;s<e;s++)n[s]=t.readFloat()*r;return n}readShortArray(t){const e=t.readInt(!0),r=new Array(e);for(let n=0;n<e;n++)r[n]=t.readShort();return r}readAnimation(t,e,r){t.readInt(!0);const n=new Array,s=this.scale;for(let l=0,u=t.readInt(!0);l<u;l++){const c=t.readInt(!0);for(let f=0,p=t.readInt(!0);f<p;f++){const g=t.readByte(),v=t.readInt(!0),y=v-1;switch(g){case oN:{const x=new Mo(v,c);for(let _=0;_<v;_++)x.setFrame(_,t.readFloat(),t.readStringRef());n.push(x);break}case lN:{const x=t.readInt(!0),_=new _0(v,x,c);let b=t.readFloat(),E=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255;for(let M=0,P=0;_.setFrame(M,b,E,T,S,C),M!=y;M++){const F=t.readFloat(),V=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255,U=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255;switch(t.readByte()){case Oi:_.setStepped(M);break;case Di:xe(t,_,P++,M,0,b,F,E,V,1),xe(t,_,P++,M,1,b,F,T,O,1),xe(t,_,P++,M,2,b,F,S,U,1),xe(t,_,P++,M,3,b,F,C,H,1)}b=F,E=V,T=O,S=U,C=H}n.push(_);break}case hN:{const x=t.readInt(!0),_=new b0(v,x,c);let b=t.readFloat(),E=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255;for(let C=0,M=0;_.setFrame(C,b,E,T,S),C!=y;C++){const P=t.readFloat(),F=t.readUnsignedByte()/255,V=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255;switch(t.readByte()){case Oi:_.setStepped(C);break;case Di:xe(t,_,M++,C,0,b,P,E,F,1),xe(t,_,M++,C,1,b,P,T,V,1),xe(t,_,M++,C,2,b,P,S,O,1)}b=P,E=F,T=V,S=O}n.push(_);break}case uN:{const x=t.readInt(!0),_=new T0(v,x,c);let b=t.readFloat(),E=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255;for(let V=0,O=0;_.setFrame(V,b,E,T,S,C,M,P,F),V!=y;V++){const U=t.readFloat(),H=t.readUnsignedByte()/255,W=t.readUnsignedByte()/255,B=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255,Y=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255;switch(t.readByte()){case Oi:_.setStepped(V);break;case Di:xe(t,_,O++,V,0,b,U,E,H,1),xe(t,_,O++,V,1,b,U,T,W,1),xe(t,_,O++,V,2,b,U,S,B,1),xe(t,_,O++,V,3,b,U,C,L,1),xe(t,_,O++,V,4,b,U,M,N,1),xe(t,_,O++,V,5,b,U,P,Y,1),xe(t,_,O++,V,6,b,U,F,D,1)}b=U,E=H,T=W,S=B,C=L,M=N,P=Y,F=D}n.push(_);break}case cN:{const x=t.readInt(!0),_=new S0(v,x,c);let b=t.readFloat(),E=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255;for(let F=0,V=0;_.setFrame(F,b,E,T,S,C,M,P),F!=y;F++){const O=t.readFloat(),U=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255,W=t.readUnsignedByte()/255,B=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255;switch(t.readByte()){case Oi:_.setStepped(F);break;case Di:xe(t,_,V++,F,0,b,O,E,U,1),xe(t,_,V++,F,1,b,O,T,H,1),xe(t,_,V++,F,2,b,O,S,W,1),xe(t,_,V++,F,3,b,O,C,B,1),xe(t,_,V++,F,4,b,O,M,L,1),xe(t,_,V++,F,5,b,O,P,N,1)}b=O,E=U,T=H,S=W,C=B,M=L,P=N}n.push(_);break}case dN:{const x=new E0(v,t.readInt(!0),c);let _=t.readFloat(),b=t.readUnsignedByte()/255;for(let E=0,T=0;x.setFrame(E,_,b),E!=y;E++){const S=t.readFloat(),C=t.readUnsignedByte()/255;switch(t.readByte()){case Oi:x.setStepped(E);break;case Di:xe(t,x,T++,E,0,_,S,b,C,1)}_=S,b=C}n.push(x)}}}}for(let l=0,u=t.readInt(!0);l<u;l++){const c=t.readInt(!0);for(let f=0,p=t.readInt(!0);f<p;f++){const g=t.readByte(),v=t.readInt(!0),y=t.readInt(!0);switch(g){case ZB:n.push(Bs(t,new du(v,y,c),1));break;case QB:n.push(Vg(t,new d0(v,y,c),s));break;case JB:n.push(Bs(t,new f0(v,y,c),s));break;case tN:n.push(Bs(t,new p0(v,y,c),s));break;case eN:n.push(Vg(t,new m0(v,y,c),1));break;case rN:n.push(Bs(t,new g0(v,y,c),1));break;case nN:n.push(Bs(t,new v0(v,y,c),1));break;case iN:n.push(Vg(t,new y0(v,y,c),1));break;case sN:n.push(Bs(t,new x0(v,y,c),1));break;case aN:n.push(Bs(t,new w0(v,y,c),1))}}}for(let l=0,u=t.readInt(!0);l<u;l++){const c=t.readInt(!0),f=t.readInt(!0),p=f-1,g=new C0(f,t.readInt(!0),c);let v=t.readFloat(),y=t.readFloat(),x=t.readFloat()*s;for(let _=0,b=0;g.setFrame(_,v,y,x,t.readByte(),t.readBoolean(),t.readBoolean()),_!=p;_++){const E=t.readFloat(),T=t.readFloat(),S=t.readFloat()*s;switch(t.readByte()){case Oi:g.setStepped(_);break;case Di:xe(t,g,b++,_,0,v,E,y,T,1),xe(t,g,b++,_,1,v,E,x,S,s)}v=E,y=T,x=S}n.push(g)}for(let l=0,u=t.readInt(!0);l<u;l++){const c=t.readInt(!0),f=t.readInt(!0),p=f-1,g=new I0(f,t.readInt(!0),c);let v=t.readFloat(),y=t.readFloat(),x=t.readFloat(),_=t.readFloat(),b=t.readFloat(),E=t.readFloat(),T=t.readFloat();for(let S=0,C=0;g.setFrame(S,v,y,x,_,b,E,T),S!=p;S++){const M=t.readFloat(),P=t.readFloat(),F=t.readFloat(),V=t.readFloat(),O=t.readFloat(),U=t.readFloat(),H=t.readFloat();switch(t.readByte()){case Oi:g.setStepped(S);break;case Di:xe(t,g,C++,S,0,v,M,y,P,1),xe(t,g,C++,S,1,v,M,x,F,1),xe(t,g,C++,S,2,v,M,_,V,1),xe(t,g,C++,S,3,v,M,b,O,1),xe(t,g,C++,S,4,v,M,E,U,1),xe(t,g,C++,S,5,v,M,T,H,1)}v=M,y=P,x=F,_=V,b=O,E=U,T=H}n.push(g)}for(let l=0,u=t.readInt(!0);l<u;l++){const c=t.readInt(!0),f=r.pathConstraints[c];for(let p=0,g=t.readInt(!0);p<g;p++)switch(t.readByte()){case pN:n.push(Bs(t,new R0(t.readInt(!0),t.readInt(!0),c),f.positionMode==ur.Fixed?s:1));break;case mN:n.push(Bs(t,new M0(t.readInt(!0),t.readInt(!0),c),f.spacingMode==Or.Length||f.spacingMode==Or.Fixed?s:1));break;case gN:const v=new P0(t.readInt(!0),t.readInt(!0),c);let y=t.readFloat(),x=t.readFloat(),_=t.readFloat(),b=t.readFloat();for(let E=0,T=0,S=v.getFrameCount()-1;v.setFrame(E,y,x,_,b),E!=S;E++){const C=t.readFloat(),M=t.readFloat(),P=t.readFloat(),F=t.readFloat();switch(t.readByte()){case Oi:v.setStepped(E);break;case Di:xe(t,v,T++,E,0,y,C,x,M,1),xe(t,v,T++,E,1,y,C,_,P,1),xe(t,v,T++,E,2,y,C,b,F,1)}y=C,x=M,_=P,b=F}n.push(v)}}for(let l=0,u=t.readInt(!0);l<u;l++){const c=r.skins[t.readInt(!0)];for(let f=0,p=t.readInt(!0);f<p;f++){const g=t.readInt(!0);for(let v=0,y=t.readInt(!0);v<y;v++){const x=t.readStringRef();if(!x)throw new Error("attachmentName must not be null.");const _=c.getAttachment(g,x),b=this.readDeformTimelineType(t),E=t.readInt(!0),T=E-1;switch(b){case Zb:{const S=_,C=S.bones,M=S.vertices,P=C?M.length/3*2:M.length,F=t.readInt(!0),V=new A0(E,F,g,S);let O=t.readFloat();for(let U=0,H=0;;U++){let W,B=t.readInt(!0);if(B==0)W=C?et.newFloatArray(P):M;else{W=et.newFloatArray(P);const N=t.readInt(!0);if(B+=N,s==1)for(let Y=N;Y<B;Y++)W[Y]=t.readFloat();else for(let Y=N;Y<B;Y++)W[Y]=t.readFloat()*s;if(!C)for(let Y=0,D=W.length;Y<D;Y++)W[Y]+=M[Y]}if(V.setFrame(U,O,W),U==T)break;const L=t.readFloat();switch(t.readByte()){case Oi:V.setStepped(U);break;case Di:xe(t,V,H++,U,0,O,L,0,1,1)}O=L}n.push(V);break}case fN:{const S=new zl(E,g,_);for(let C=0;C<E;C++){const M=t.readFloat(),P=t.readInt32();S.setFrame(C,M,c0[P&15],P>>4,t.readFloat())}n.push(S);break}}}}}const o=t.readInt(!0);if(o>0){const l=new Bo(o),u=r.slots.length;for(let c=0;c<o;c++){const f=t.readFloat(),p=t.readInt(!0),g=et.newArray(u,0);for(let _=u-1;_>=0;_--)g[_]=-1;const v=et.newArray(u-p,0);let y=0,x=0;for(let _=0;_<p;_++){const b=t.readInt(!0);for(;y!=b;)v[x++]=y++;g[y+t.readInt(!0)]=y++}for(;y<u;)v[x++]=y++;for(let _=u-1;_>=0;_--)g[_]==-1&&(g[_]=v[--x]);l.setFrame(c,f,g)}n.push(l)}const h=t.readInt(!0);if(h>0){const l=new Su(h);for(let u=0;u<h;u++){const c=t.readFloat(),f=r.events[t.readInt(!0)],p=new B0(c,f);p.intValue=t.readInt(!1),p.floatValue=t.readFloat(),p.stringValue=t.readBoolean()?t.readString():f.stringValue,p.data.audioPath&&(p.volume=t.readFloat(),p.balance=t.readFloat()),l.setFrame(u,p)}n.push(l)}let a=0;for(let l=0,u=n.length;l<u;l++)a=Math.max(a,n[l].getDuration());return new Tf(e,n,a)}}G0.BlendModeValues=[Gt.NORMAL,Gt.ADD,Gt.MULTIPLY,Gt.SCREEN];let qB=class{constructor(t,e,r,n,s){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritTimeline=s}},KB=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}};function Bs(i,t,e){let r=i.readFloat(),n=i.readFloat()*e;for(let s=0,o=0,h=t.getFrameCount()-1;t.setFrame(s,r,n),s!=h;s++){const a=i.readFloat(),l=i.readFloat()*e;switch(i.readByte()){case Oi:t.setStepped(s);break;case Di:xe(i,t,o++,s,0,r,a,n,l,e)}r=a,n=l}return t}function Vg(i,t,e){let r=i.readFloat(),n=i.readFloat()*e,s=i.readFloat()*e;for(let o=0,h=0,a=t.getFrameCount()-1;t.setFrame(o,r,n,s),o!=a;o++){const l=i.readFloat(),u=i.readFloat()*e,c=i.readFloat()*e;switch(i.readByte()){case Oi:t.setStepped(o);break;case Di:xe(i,t,h++,o,0,r,l,n,u,e),xe(i,t,h++,o,1,r,l,s,c,e)}r=l,n=u,s=c}return t}function xe(i,t,e,r,n,s,o,h,a,l){t.setBezier(e,r,n,s,h,i.readFloat(),i.readFloat()*l,i.readFloat(),i.readFloat()*l,o,a)}const ZB=0,QB=1,JB=2,tN=3,eN=4,rN=5,nN=6,iN=7,sN=8,aN=9,oN=0,lN=1,hN=2,uN=3,cN=4,dN=5,Zb=0,fN=1,pN=0,mN=1,gN=2,Oi=1,Di=2;class vN extends Uy{}let KA=class ZA{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,r=new U0,n=typeof t=="string"?JSON.parse(t):t,s=n.skeleton;if(s){r.hash=s.hash,r.version=s.spine;const o=r.version.substr(0,3);if(o!=="4.0"&&o!=="4.1"){const h=`Spine 4.1 loader cant load version ${s.spine}. Please configure your pixi-spine bundle`;console.error(h)}r.x=s.x,r.y=s.y,r.width=s.width,r.height=s.height,r.fps=s.fps,r.imagesPath=s.images}if(n.bones)for(let o=0;o<n.bones.length;o++){const h=n.bones[o];let a=null;const l=st(h,"parent",null);if(l!=null&&(a=r.findBone(l),a==null))throw new Error(`Parent bone not found: ${l}`);const u=new F0(r.bones.length,h.name,a);u.length=st(h,"length",0)*e,u.x=st(h,"x",0)*e,u.y=st(h,"y",0)*e,u.rotation=st(h,"rotation",0),u.scaleX=st(h,"scaleX",1),u.scaleY=st(h,"scaleY",1),u.shearX=st(h,"shearX",0),u.shearY=st(h,"shearY",0),u.transformMode=et.enumValue(ne,st(h,"transform","Normal")),u.skinRequired=st(h,"skin",!1);const c=st(h,"color",null);c&&u.color.setFromString(c),r.bones.push(u)}if(n.slots)for(let o=0;o<n.slots.length;o++){const h=n.slots[o],a=r.findBone(h.bone);if(!a)throw new Error(`Couldn't find bone ${h.bone} for slot ${h.name}`);const l=new V0(r.slots.length,h.name,a),u=st(h,"color",null);u&&l.color.setFromString(u);const c=st(h,"dark",null);c&&(l.darkColor=bt.fromString(c)),l.attachmentName=st(h,"attachment",null),l.blendMode=ZA.blendModeFromString(st(h,"blend","normal")),r.slots.push(l)}if(n.ik)for(let o=0;o<n.ik.length;o++){const h=n.ik[o],a=new O0(h.name);a.order=st(h,"order",0),a.skinRequired=st(h,"skin",!1);for(let l=0;l<h.bones.length;l++){const u=h.bones[l],c=r.findBone(u);if(c==null)throw new Error(`IK bone not found: ${u}`);a.bones.push(c)}a.target=r.findBone(h.target),a.mix=st(h,"mix",1),a.softness=st(h,"softness",0)*e,a.bendDirection=st(h,"bendPositive",!0)?1:-1,a.compress=st(h,"compress",!1),a.stretch=st(h,"stretch",!1),a.uniform=st(h,"uniform",!1),r.ikConstraints.push(a)}if(n.transform)for(let o=0;o<n.transform.length;o++){const h=n.transform[o],a=new X0(h.name);a.order=st(h,"order",0),a.skinRequired=st(h,"skin",!1);for(let c=0;c<h.bones.length;c++){const f=h.bones[c],p=r.findBone(f);if(!p)throw new Error(`Couldn't find bone ${f} for transform constraint ${h.name}.`);a.bones.push(p)}const l=h.target,u=r.findBone(l);if(!u)throw new Error(`Couldn't find target bone ${l} for transform constraint ${h.name}.`);a.target=u,a.local=st(h,"local",!1),a.relative=st(h,"relative",!1),a.offsetRotation=st(h,"rotation",0),a.offsetX=st(h,"x",0)*e,a.offsetY=st(h,"y",0)*e,a.offsetScaleX=st(h,"scaleX",0),a.offsetScaleY=st(h,"scaleY",0),a.offsetShearY=st(h,"shearY",0),a.mixRotate=st(h,"mixRotate",1),a.mixX=st(h,"mixX",1),a.mixY=st(h,"mixY",a.mixX),a.mixScaleX=st(h,"mixScaleX",1),a.mixScaleY=st(h,"mixScaleY",a.mixScaleX),a.mixShearY=st(h,"mixShearY",1),r.transformConstraints.push(a)}if(n.path)for(let o=0;o<n.path.length;o++){const h=n.path[o],a=new D0(h.name);a.order=st(h,"order",0),a.skinRequired=st(h,"skin",!1);for(let c=0;c<h.bones.length;c++){const f=h.bones[c],p=r.findBone(f);if(!p)throw new Error(`Couldn't find bone ${f} for path constraint ${h.name}.`);a.bones.push(p)}const l=h.target,u=r.findSlot(l);if(!u)throw new Error(`Couldn't find target slot ${l} for path constraint ${h.name}.`);a.target=u,a.positionMode=et.enumValue(ur,st(h,"positionMode","Percent")),a.spacingMode=et.enumValue(Or,st(h,"spacingMode","Length")),a.rotateMode=et.enumValue(br,st(h,"rotateMode","Tangent")),a.offsetRotation=st(h,"rotation",0),a.position=st(h,"position",0),a.positionMode==ur.Fixed&&(a.position*=e),a.spacing=st(h,"spacing",0),(a.spacingMode==Or.Length||a.spacingMode==Or.Fixed)&&(a.spacing*=e),a.mixRotate=st(h,"mixRotate",1),a.mixX=st(h,"mixX",1),a.mixY=st(h,"mixY",a.mixX),r.pathConstraints.push(a)}if(n.skins)for(let o=0;o<n.skins.length;o++){const h=n.skins[o],a=new jd(h.name);if(h.bones)for(let l=0;l<h.bones.length;l++){const u=h.bones[l],c=r.findBone(u);if(!c)throw new Error(`Couldn't find bone ${u} for skin ${h.name}.`);a.bones.push(c)}if(h.ik)for(let l=0;l<h.ik.length;l++){const u=h.ik[l],c=r.findIkConstraint(u);if(!c)throw new Error(`Couldn't find IK constraint ${u} for skin ${h.name}.`);a.constraints.push(c)}if(h.transform)for(let l=0;l<h.transform.length;l++){const u=h.transform[l],c=r.findTransformConstraint(u);if(!c)throw new Error(`Couldn't find transform constraint ${u} for skin ${h.name}.`);a.constraints.push(c)}if(h.path)for(let l=0;l<h.path.length;l++){const u=h.path[l],c=r.findPathConstraint(u);if(!c)throw new Error(`Couldn't find path constraint ${u} for skin ${h.name}.`);a.constraints.push(c)}for(const l in h.attachments){const u=r.findSlot(l);if(!u)throw new Error(`Couldn't find slot ${l} for skin ${h.name}.`);const c=h.attachments[l];for(const f in c){const p=this.readAttachment(c[f],a,u.index,f,r);p&&a.setAttachment(u.index,f,p)}}r.skins.push(a),a.name=="default"&&(r.defaultSkin=a)}for(let o=0,h=this.linkedMeshes.length;o<h;o++){const a=this.linkedMeshes[o],l=a.skin?r.findSkin(a.skin):r.defaultSkin;if(!l)throw new Error(`Skin not found: ${a.skin}`);const u=l.getAttachment(a.slotIndex,a.parent);if(!u)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.timelineAttachment=a.inheritTimeline?u:a.mesh,a.mesh.setParentMesh(u)}if(this.linkedMeshes.length=0,n.events)for(const o in n.events){const h=n.events[o],a=new N0(o);a.intValue=st(h,"int",0),a.floatValue=st(h,"float",0),a.stringValue=st(h,"string",""),a.audioPath=st(h,"audio",null),a.audioPath&&(a.volume=st(h,"volume",1),a.balance=st(h,"balance",0)),r.events.push(a)}if(n.animations)for(const o in n.animations){const h=n.animations[o];this.readAnimation(h,o,r)}return r}readAttachment(t,e,r,n,s){const o=this.scale;switch(n=st(t,"name",n),st(t,"type","region")){case"region":{const h=st(t,"path",n),a=this.readSequence(st(t,"sequence",null)),l=this.attachmentLoader.newRegionAttachment(e,n,h,a);if(!l)return null;l.path=h,l.x=st(t,"x",0)*o,l.y=st(t,"y",0)*o,l.scaleX=st(t,"scaleX",1),l.scaleY=st(t,"scaleY",1),l.rotation=st(t,"rotation",0),l.width=t.width*o,l.height=t.height*o,l.sequence=a;const u=st(t,"color",null);return u&&l.color.setFromString(u),l}case"boundingbox":{const h=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(!h)return null;this.readVertices(t,h,t.vertexCount<<1);const a=st(t,"color",null);return a&&h.color.setFromString(a),h}case"mesh":case"linkedmesh":{const h=st(t,"path",n),a=this.readSequence(st(t,"sequence",null)),l=this.attachmentLoader.newMeshAttachment(e,n,h,a);if(!l)return null;l.path=h;const u=st(t,"color",null);u&&l.color.setFromString(u),l.width=st(t,"width",0)*o,l.height=st(t,"height",0)*o,l.sequence=a;const c=st(t,"parent",null);if(c)return this.linkedMeshes.push(new yN(l,st(t,"skin",null),r,c,st(t,"timelines",!0))),l;const f=t.uvs;return this.readVertices(t,l,f.length),l.triangles=t.triangles,l.regionUVs=new Float32Array(f),l.edges=st(t,"edges",null),l.hullLength=st(t,"hull",0)*2,l}case"path":{const h=this.attachmentLoader.newPathAttachment(e,n);if(!h)return null;h.closed=st(t,"closed",!1),h.constantSpeed=st(t,"constantSpeed",!0);const a=t.vertexCount;this.readVertices(t,h,a<<1);const l=et.newArray(a/3,0);for(let c=0;c<t.lengths.length;c++)l[c]=t.lengths[c]*o;h.lengths=l;const u=st(t,"color",null);return u&&h.color.setFromString(u),h}case"point":{const h=this.attachmentLoader.newPointAttachment(e,n);if(!h)return null;h.x=st(t,"x",0)*o,h.y=st(t,"y",0)*o,h.rotation=st(t,"rotation",0);const a=st(t,"color",null);return a&&h.color.setFromString(a),h}case"clipping":{const h=this.attachmentLoader.newClippingAttachment(e,n);if(!h)return null;const a=st(t,"end",null);if(a!=null){const c=s.findSlot(a);if(c==null)throw new Error(`Clipping end slot not found: ${a}`);h.endSlot=c}const l=t.vertexCount;this.readVertices(t,h,l<<1);const u=st(t,"color",null);return u&&h.color.setFromString(u),h}}return null}readSequence(t){if(t==null)return null;const e=new Ef(st(t,"count",0));return e.start=st(t,"start",1),e.digits=st(t,"digits",0),e.setupIndex=st(t,"setup",0),e}readVertices(t,e,r){const n=this.scale;e.worldVerticesLength=r;const s=t.vertices;if(r==s.length){const a=et.toFloatArray(s);if(n!=1)for(let l=0,u=s.length;l<u;l++)a[l]*=n;e.vertices=a;return}const o=new Array,h=new Array;for(let a=0,l=s.length;a<l;){const u=s[a++];h.push(u);for(let c=a+u*4;a<c;a+=4)h.push(s[a]),o.push(s[a+1]*n),o.push(s[a+2]*n),o.push(s[a+3])}e.bones=h,e.vertices=et.toFloatArray(o)}readAnimation(t,e,r){const n=this.scale,s=new Array;if(t.slots)for(const h in t.slots){const a=t.slots[h],l=r.findSlot(h);if(!l)throw new Error(`Slot not found: ${h}`);const u=l.index;for(const c in a){const f=a[c];if(!f)continue;const p=f.length;if(c=="attachment"){const g=new Mo(p,u);for(let v=0;v<p;v++){const y=f[v];g.setFrame(v,st(y,"time",0),st(y,"name",null))}s.push(g)}else if(c=="rgba"){const g=new _0(p,p<<2,u);let v=f[0],y=st(v,"time",0),x=bt.fromString(v.color);for(let _=0,b=0;;_++){g.setFrame(_,y,x.r,x.g,x.b,x.a);const E=f[_+1];if(!E){g.shrink(b);break}const T=st(E,"time",0),S=bt.fromString(E.color),C=v.curve;C&&(b=Ee(C,g,b,_,0,y,T,x.r,S.r,1),b=Ee(C,g,b,_,1,y,T,x.g,S.g,1),b=Ee(C,g,b,_,2,y,T,x.b,S.b,1),b=Ee(C,g,b,_,3,y,T,x.a,S.a,1)),y=T,x=S,v=E}s.push(g)}else if(c=="rgb"){const g=new b0(p,p*3,u);let v=f[0],y=st(v,"time",0),x=bt.fromString(v.color);for(let _=0,b=0;;_++){g.setFrame(_,y,x.r,x.g,x.b);const E=f[_+1];if(!E){g.shrink(b);break}const T=st(E,"time",0),S=bt.fromString(E.color),C=v.curve;C&&(b=Ee(C,g,b,_,0,y,T,x.r,S.r,1),b=Ee(C,g,b,_,1,y,T,x.g,S.g,1),b=Ee(C,g,b,_,2,y,T,x.b,S.b,1)),y=T,x=S,v=E}s.push(g)}else if(c=="alpha")s.push(is(f,new E0(p,p,u),0,1));else if(c=="rgba2"){const g=new T0(p,p*7,u);let v=f[0],y=st(v,"time",0),x=bt.fromString(v.light),_=bt.fromString(v.dark);for(let b=0,E=0;;b++){g.setFrame(b,y,x.r,x.g,x.b,x.a,_.r,_.g,_.b);const T=f[b+1];if(!T){g.shrink(E);break}const S=st(T,"time",0),C=bt.fromString(T.light),M=bt.fromString(T.dark),P=v.curve;P&&(E=Ee(P,g,E,b,0,y,S,x.r,C.r,1),E=Ee(P,g,E,b,1,y,S,x.g,C.g,1),E=Ee(P,g,E,b,2,y,S,x.b,C.b,1),E=Ee(P,g,E,b,3,y,S,x.a,C.a,1),E=Ee(P,g,E,b,4,y,S,_.r,M.r,1),E=Ee(P,g,E,b,5,y,S,_.g,M.g,1),E=Ee(P,g,E,b,6,y,S,_.b,M.b,1)),y=S,x=C,_=M,v=T}s.push(g)}else if(c=="rgb2"){const g=new S0(p,p*6,u);let v=f[0],y=st(v,"time",0),x=bt.fromString(v.light),_=bt.fromString(v.dark);for(let b=0,E=0;;b++){g.setFrame(b,y,x.r,x.g,x.b,_.r,_.g,_.b);const T=f[b+1];if(!T){g.shrink(E);break}const S=st(T,"time",0),C=bt.fromString(T.light),M=bt.fromString(T.dark),P=v.curve;P&&(E=Ee(P,g,E,b,0,y,S,x.r,C.r,1),E=Ee(P,g,E,b,1,y,S,x.g,C.g,1),E=Ee(P,g,E,b,2,y,S,x.b,C.b,1),E=Ee(P,g,E,b,3,y,S,_.r,M.r,1),E=Ee(P,g,E,b,4,y,S,_.g,M.g,1),E=Ee(P,g,E,b,5,y,S,_.b,M.b,1)),y=S,x=C,_=M,v=T}s.push(g)}}}if(t.bones)for(const h in t.bones){const a=t.bones[h],l=r.findBone(h);if(!l)throw new Error(`Bone not found: ${h}`);const u=l.index;for(const c in a){const f=a[c],p=f.length;if(p!=0){if(c==="rotate")s.push(is(f,new du(p,p,u),0,1));else if(c==="translate"){const g=new d0(p,p<<1,u);s.push(Xg(f,g,"x","y",0,n))}else if(c==="translatex"){const g=new f0(p,p,u);s.push(is(f,g,0,n))}else if(c==="translatey"){const g=new p0(p,p,u);s.push(is(f,g,0,n))}else if(c==="scale"){const g=new m0(p,p<<1,u);s.push(Xg(f,g,"x","y",1,1))}else if(c==="scalex"){const g=new g0(p,p,u);s.push(is(f,g,1,1))}else if(c==="scaley"){const g=new v0(p,p,u);s.push(is(f,g,1,1))}else if(c==="shear"){const g=new y0(p,p<<1,u);s.push(Xg(f,g,"x","y",0,1))}else if(c==="shearx"){const g=new x0(p,p,u);s.push(is(f,g,0,1))}else if(c==="sheary"){const g=new w0(p,p,u);s.push(is(f,g,0,1))}}}}if(t.ik)for(const h in t.ik){const a=t.ik[h];let l=a[0];if(!l)continue;const u=r.findIkConstraint(h);if(!u)throw new Error(`IK Constraint not found: ${h}`);const c=r.ikConstraints.indexOf(u),f=new C0(a.length,a.length<<1,c);let p=st(l,"time",0),g=st(l,"mix",1),v=st(l,"softness",0)*n;for(let y=0,x=0;;y++){f.setFrame(y,p,g,v,st(l,"bendPositive",!0)?1:-1,st(l,"compress",!1),st(l,"stretch",!1));const _=a[y+1];if(!_){f.shrink(x);break}const b=st(_,"time",0),E=st(_,"mix",1),T=st(_,"softness",0)*n,S=l.curve;S&&(x=Ee(S,f,x,y,0,p,b,g,E,1),x=Ee(S,f,x,y,1,p,b,v,T,n)),p=b,g=E,v=T,l=_}s.push(f)}if(t.transform)for(const h in t.transform){const a=t.transform[h];let l=a[0];if(!l)continue;const u=r.findTransformConstraint(h);if(!u)throw new Error(`Transform constraint not found: ${h}`);const c=r.transformConstraints.indexOf(u),f=new I0(a.length,a.length*6,c);let p=st(l,"time",0),g=st(l,"mixRotate",1),v=st(l,"mixX",1),y=st(l,"mixY",v),x=st(l,"mixScaleX",1),_=st(l,"mixScaleY",x);const b=st(l,"mixShearY",1);for(let E=0,T=0;;E++){f.setFrame(E,p,g,v,y,x,_,b);const S=a[E+1];if(!S){f.shrink(T);break}const C=st(S,"time",0),M=st(S,"mixRotate",1),P=st(S,"mixX",1),F=st(S,"mixY",P),V=st(S,"mixScaleX",1),O=st(S,"mixScaleY",V),U=st(S,"mixShearY",1),H=l.curve;H&&(T=Ee(H,f,T,E,0,p,C,g,M,1),T=Ee(H,f,T,E,1,p,C,v,P,1),T=Ee(H,f,T,E,2,p,C,y,F,1),T=Ee(H,f,T,E,3,p,C,x,V,1),T=Ee(H,f,T,E,4,p,C,_,O,1),T=Ee(H,f,T,E,5,p,C,b,U,1)),p=C,g=M,v=P,y=F,x=V,_=O,x=V,l=S}s.push(f)}if(t.path)for(const h in t.path){const a=t.path[h],l=r.findPathConstraint(h);if(!l)throw new Error(`Path constraint not found: ${h}`);const u=r.pathConstraints.indexOf(l);for(const c in a){const f=a[c];let p=f[0];if(!p)continue;const g=f.length;if(c==="position"){const v=new R0(g,g,u);s.push(is(f,v,0,l.positionMode==ur.Fixed?n:1))}else if(c==="spacing"){const v=new M0(g,g,u);s.push(is(f,v,0,l.spacingMode==Or.Length||l.spacingMode==Or.Fixed?n:1))}else if(c==="mix"){const v=new P0(g,g*3,u);let y=st(p,"time",0),x=st(p,"mixRotate",1),_=st(p,"mixX",1),b=st(p,"mixY",_);for(let E=0,T=0;;E++){v.setFrame(E,y,x,_,b);const S=f[E+1];if(!S){v.shrink(T);break}const C=st(S,"time",0),M=st(S,"mixRotate",1),P=st(S,"mixX",1),F=st(S,"mixY",P),V=p.curve;V&&(T=Ee(V,v,T,E,0,y,C,x,M,1),T=Ee(V,v,T,E,1,y,C,_,P,1),T=Ee(V,v,T,E,2,y,C,b,F,1)),y=C,x=M,_=P,b=F,p=S}s.push(v)}}}if(t.deform){t.attachments={};for(const h in t.deform){const a=t.deform[h],l=t.attachments[h]={};for(const u in a){const c=a[u],f=l[u]={};for(const p in c)f[p]={deform:c[p]}}}}if(t.attachments)for(const h in t.attachments){const a=t.attachments[h],l=r.findSkin(h);if(l!=null)for(const u in a){const c=a[u],f=r.findSlot(u);if(!f)throw new Error(`Slot not found: ${u}`);const p=f.index;for(const g in c){const v=c[g],y=l.getAttachment(p,g);for(const x in v){const _=v[x];let b=_[0];if(b){if(x=="deform"){const E=y.bones,T=y.vertices,S=E?T.length/3*2:T.length,C=new A0(_.length,_.length,p,y);let M=st(b,"time",0);for(let P=0,F=0;;P++){let V;const O=st(b,"vertices",null);if(!O)V=E?et.newFloatArray(S):T;else{V=et.newFloatArray(S);const B=st(b,"offset",0);if(et.arrayCopy(O,0,V,B,O.length),n!=1)for(let L=B,N=L+O.length;L<N;L++)V[L]*=n;if(!E)for(let L=0;L<S;L++)V[L]+=T[L]}C.setFrame(P,M,V);const U=_[P+1];if(!U){C.shrink(F);break}const H=st(U,"time",0),W=b.curve;W&&(F=Ee(W,C,F,P,0,M,H,0,1,1)),M=H,b=U}s.push(C)}else if(x=="sequence"){const E=new zl(_.length,p,y);let T=0;for(let S=0;S<_.length;S++){const C=st(b,"delay",T),M=st(b,"time",0),P=ds[st(b,"mode","hold")],F=st(b,"index",0);E.setFrame(S,M,P,F,C),T=C,b=_[S+1]}s.push(E)}}}}}}if(t.drawOrder){const h=new Bo(t.drawOrder.length),a=r.slots.length;let l=0;for(let u=0;u<t.drawOrder.length;u++,l++){const c=t.drawOrder[u];let f=null;const p=st(c,"offsets",null);if(p){f=et.newArray(a,-1);const g=et.newArray(a-p.length,0);let v=0,y=0;for(let x=0;x<p.length;x++){const _=p[x],b=r.findSlot(_.slot);if(!b)throw new Error(`Slot not found: ${b}`);const E=b.index;for(;v!=E;)g[y++]=v++;f[v+_.offset]=v++}for(;v<a;)g[y++]=v++;for(let x=a-1;x>=0;x--)f[x]==-1&&(f[x]=g[--y])}h.setFrame(l,st(c,"time",0),f)}s.push(h)}if(t.events){const h=new Su(t.events.length);let a=0;for(let l=0;l<t.events.length;l++,a++){const u=t.events[l],c=r.findEvent(u.name);if(!c)throw new Error(`Event not found: ${u.name}`);const f=new B0(et.toSinglePrecision(st(u,"time",0)),c);f.intValue=st(u,"int",c.intValue),f.floatValue=st(u,"float",c.floatValue),f.stringValue=st(u,"string",c.stringValue),f.data.audioPath&&(f.volume=st(u,"volume",1),f.balance=st(u,"balance",0)),h.setFrame(a,f)}s.push(h)}let o=0;for(let h=0,a=s.length;h<a;h++)o=Math.max(o,s[h].getDuration());if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new Tf(e,s,o))}static blendModeFromString(t){if(t=t.toLowerCase(),t=="normal")return Gt.NORMAL;if(t=="additive")return Gt.ADD;if(t=="multiply")return Gt.MULTIPLY;if(t=="screen")return Gt.SCREEN;throw new Error(`Unknown blend mode: ${t}`)}},yN=class{constructor(t,e,r,n,s){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritTimeline=s}};function is(i,t,e,r){let n=i[0],s=st(n,"time",0),o=st(n,"value",e)*r,h=0;for(let a=0;;a++){t.setFrame(a,s,o);const l=i[a+1];if(!l)return t.shrink(h),t;const u=st(l,"time",0),c=st(l,"value",e)*r;n.curve&&(h=Ee(n.curve,t,h,a,0,s,u,o,c,r)),s=u,o=c,n=l}}function Xg(i,t,e,r,n,s){let o=i[0],h=st(o,"time",0),a=st(o,e,n)*s,l=st(o,r,n)*s,u=0;for(let c=0;;c++){t.setFrame(c,h,a,l);const f=i[c+1];if(!f)return t.shrink(u),t;const p=st(f,"time",0),g=st(f,e,n)*s,v=st(f,r,n)*s,y=o.curve;y&&(u=Ee(y,t,u,c,0,h,p,a,g,s),u=Ee(y,t,u,c,1,h,p,l,v,s)),h=p,a=g,l=v,o=f}}function Ee(i,t,e,r,n,s,o,h,a,l){if(i=="stepped")return t.setStepped(r),e;const u=n<<2,c=i[u],f=i[u+1]*l,p=i[u+2],g=i[u+3]*l;return t.setBezier(e,r,n,s,h,c,f,p,g,o,a),e+1}function st(i,t,e){return i[t]!==void 0?i[t]:e}let xN=class extends $l{createSkeleton(t){this.skeleton=new L0(t),this.skeleton.updateWorldTransform(),this.stateData=new HA(t),this.state=new jl(this.stateData)}};const wN=Object.freeze(Object.defineProperty({__proto__:null,AlphaTimeline:E0,Animation:Tf,AnimationState:jl,AnimationStateAdapter:HB,AnimationStateData:HA,AtlasAttachmentLoader:k0,Attachment:u0,AttachmentTimeline:Mo,Bone:hy,BoneData:F0,BoundingBoxAttachment:NA,ClippingAttachment:DA,ConstraintData:Cf,CurveTimeline:qi,CurveTimeline1:Ki,CurveTimeline2:Sf,DeformTimeline:A0,DrawOrderTimeline:Bo,Event:B0,EventData:N0,EventQueue:WA,EventTimeline:Su,EventType:On,IkConstraint:zA,IkConstraintData:O0,IkConstraintTimeline:C0,MeshAttachment:bf,PathAttachment:cu,PathConstraint:ql,PathConstraintData:D0,PathConstraintMixTimeline:P0,PathConstraintPositionTimeline:R0,PathConstraintSpacingTimeline:M0,PointAttachment:VA,RGB2Timeline:S0,RGBA2Timeline:T0,RGBATimeline:_0,RGBTimeline:b0,RegionAttachment:Ae,RotateTimeline:du,ScaleTimeline:m0,ScaleXTimeline:g0,ScaleYTimeline:v0,Sequence:Ef,SequenceMode:ds,SequenceModeValues:c0,SequenceTimeline:zl,ShearTimeline:y0,ShearXTimeline:x0,ShearYTimeline:w0,Skeleton:L0,SkeletonBinary:G0,SkeletonBounds:vN,SkeletonData:U0,SkeletonJson:KA,Skin:jd,SkinEntry:uy,Slot:jA,SlotData:V0,SpacingMode:Or,Spine:xN,Timeline:mr,TrackEntry:Af,TransformConstraint:qA,TransformConstraintData:X0,TransformConstraintTimeline:I0,TranslateTimeline:d0,TranslateXTimeline:f0,TranslateYTimeline:p0,VertexAttachment:zi},Symbol.toStringTag,{value:"Module"}));var vi=(i=>(i[i.UNKNOWN=0]="UNKNOWN",i[i.VER37=37]="VER37",i[i.VER38=38]="VER38",i[i.VER40=40]="VER40",i[i.VER41=41]="VER41",i))(vi||{});function qd(i){const t=i.substr(0,3),e=Math.floor(Number(t)*10+.001);return t==="3.7"?37:t==="3.8"?38:t==="4.0"?40:t==="4.1"?41:e<37?37:0}class _N{constructor(){this.scale=1}readSkeletonData(t,e){let r=null,n=this.readVersionOldFormat(e),s=qd(n);if(s===vi.VER38&&(r=new Cr(new jy(t))),n=this.readVersionNewFormat(e),s=qd(n),(s===vi.VER40||s===vi.VER41)&&(r=new G0(new k0(t))),!r){const o=`Unsupported version of spine model ${n}, please update pixi-spine`;console.error(o)}return r.scale=this.scale,r.readSkeletonData(e)}readVersionOldFormat(t){const e=new Yd(t);let r;try{e.readString(),r=e.readString()}catch{r=""}return r||""}readVersionNewFormat(t){const e=new Yd(t);e.readInt32(),e.readInt32();let r;try{r=e.readString()}catch{r=""}return r||""}}class bN{constructor(){this.scale=1}readSkeletonData(t,e){const r=e.skeleton.spine,n=qd(r);let s=null;if(n===vi.VER37&&(s=new FA(new _A(t))),n===vi.VER38&&(s=new lA(new jy(t))),(n===vi.VER40||n===vi.VER41)&&(s=new KA(new k0(t))),!s){const o=`Unsupported version of spine model ${r}, please update pixi-spine`;console.error(o)}return s.scale=this.scale,s.readSkeletonData(e)}}class EN extends PB{createBinaryParser(){return new _N}createJsonParser(){return new bN}parseData(t,e,r){return{spineData:t.readSkeletonData(e,r),spineAtlas:e}}}class TN extends $l{createSkeleton(t){const e=qd(t.version);let r=null;if(e===vi.VER37&&(r=WB),e===vi.VER38&&(r=UB),(e===vi.VER40||e===vi.VER41)&&(r=wN),!r){const n=`Cant detect version of spine model ${t.version}`;console.error(n)}this.skeleton=new r.Skeleton(t),this.skeleton.updateWorldTransform(),this.stateData=new r.AnimationStateData(t),this.state=new r.AnimationState(this.stateData)}}new EN().installLoader();/*!
 * @pixi/constants - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ks;(function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"})(Ks||(Ks={}));var fu;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"})(fu||(fu={}));var Kd;(function(i){i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL"})(Kd||(Kd={}));var Yt;(function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"})(Yt||(Yt={}));var yi;(function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(yi||(yi={}));var kt;(function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.RG=33319]="RG",i[i.RED=6403]="RED",i[i.RGBA_INTEGER=36249]="RGBA_INTEGER",i[i.RGB_INTEGER=36248]="RGB_INTEGER",i[i.RG_INTEGER=33320]="RG_INTEGER",i[i.RED_INTEGER=36244]="RED_INTEGER",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(kt||(kt={}));var No;(function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(No||(No={}));var Se;(function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.UNSIGNED_INT=5125]="UNSIGNED_INT",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",i[i.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",i[i.BYTE=5120]="BYTE",i[i.SHORT=5122]="SHORT",i[i.INT=5124]="INT",i[i.FLOAT=5126]="FLOAT",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",i[i.HALF_FLOAT=36193]="HALF_FLOAT"})(Se||(Se={}));var Zd;(function(i){i[i.FLOAT=0]="FLOAT",i[i.INT=1]="INT",i[i.UINT=2]="UINT"})(Zd||(Zd={}));var ps;(function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"})(ps||(ps={}));var Vo;(function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Vo||(Vo={}));var Va;(function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON",i[i.ON_MANUAL=3]="ON_MANUAL"})(Va||(Va={}));var Xa;(function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",i[i.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Xa||(Xa={}));var Ma;(function(i){i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT"})(Ma||(Ma={}));var Qd;(function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"})(Qd||(Qd={}));var Jn;(function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"})(Jn||(Jn={}));var Rr;(function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",i[i.COLOR=4]="COLOR"})(Rr||(Rr={}));var Qb;(function(i){i[i.RED=1]="RED",i[i.GREEN=2]="GREEN",i[i.BLUE=4]="BLUE",i[i.ALPHA=8]="ALPHA"})(Qb||(Qb={}));var _r;(function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"})(_r||(_r={}));var gs;(function(i){i[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(gs||(gs={}));/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var SN={createCanvas:function(i,t){var e=document.createElement("canvas");return e.width=i,e.height=t,e},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var i;return(i=document.baseURI)!==null&&i!==void 0?i:window.location.href},fetch:function(i,t){return fetch(i,t)}},Gg=/iPhone/i,Jb=/iPod/i,tE=/iPad/i,eE=/\biOS-universal(?:.+)Mac\b/i,Yg=/\bAndroid(?:.+)Mobile\b/i,rE=/Android/i,yl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,nd=/Silk/i,Ns=/Windows Phone/i,nE=/\bWindows(?:.+)ARM\b/i,iE=/BlackBerry/i,sE=/BB10/i,aE=/Opera Mini/i,oE=/\b(CriOS|Chrome)(?:.+)Mobile/i,lE=/Mobile(?:.+)Firefox\b/i,hE=function(i){return typeof i<"u"&&i.platform==="MacIntel"&&typeof i.maxTouchPoints=="number"&&i.maxTouchPoints>1&&typeof MSStream>"u"};function AN(i){return function(t){return t.test(i)}}function CN(i){var t={userAgent:"",platform:"",maxTouchPoints:0};!i&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof i=="string"?t.userAgent=i:i&&i.userAgent&&(t={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0});var e=t.userAgent,r=e.split("[FBAN");typeof r[1]<"u"&&(e=r[0]),r=e.split("Twitter"),typeof r[1]<"u"&&(e=r[0]);var n=AN(e),s={apple:{phone:n(Gg)&&!n(Ns),ipod:n(Jb),tablet:!n(Gg)&&(n(tE)||hE(t))&&!n(Ns),universal:n(eE),device:(n(Gg)||n(Jb)||n(tE)||n(eE)||hE(t))&&!n(Ns)},amazon:{phone:n(yl),tablet:!n(yl)&&n(nd),device:n(yl)||n(nd)},android:{phone:!n(Ns)&&n(yl)||!n(Ns)&&n(Yg),tablet:!n(Ns)&&!n(yl)&&!n(Yg)&&(n(nd)||n(rE)),device:!n(Ns)&&(n(yl)||n(nd)||n(Yg)||n(rE))||n(/\bokhttp\b/i)},windows:{phone:n(Ns),tablet:n(nE),device:n(Ns)||n(nE)},other:{blackberry:n(iE),blackberry10:n(sE),opera:n(aE),firefox:n(lE),chrome:n(oE),device:n(iE)||n(sE)||n(aE)||n(lE)||n(oE)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var Po=CN(globalThis.navigator);function IN(){return!Po.apple.device}function RN(i){var t=!0;if(Po.tablet||Po.phone){if(Po.apple.device){var e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){var r=parseInt(e[1],10);r<11&&(t=!1)}}if(Po.android.device){var e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){var r=parseInt(e[1],10);r<7&&(t=!1)}}}return t?i:4}var Ht={ADAPTER:SN,MIPMAP_TEXTURES:Va.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:_r.NONE,SPRITE_MAX_TEXTURES:RN(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:Qd.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Vo.CLAMP,SCALE_MODE:ps.LINEAR,PRECISION_VERTEX:Jn.HIGH,PRECISION_FRAGMENT:Po.apple.device?Jn.HIGH:Jn.MEDIUM,CAN_UPLOAD_SAME_BUFFER:IN(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},$g={exports:{}},uE;function MN(){return uE||(uE=1,function(i){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function n(a,l,u){this.fn=a,this.context=l,this.once=u||!1}function s(a,l,u,c,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new n(u,c||a,f),g=e?e+l:l;return a._events[g]?a._events[g].fn?a._events[g]=[a._events[g],p]:a._events[g].push(p):(a._events[g]=p,a._eventsCount++),a}function o(a,l){--a._eventsCount===0?a._events=new r:delete a._events[l]}function h(){this._events=new r,this._eventsCount=0}h.prototype.eventNames=function(){var l=[],u,c;if(this._eventsCount===0)return l;for(c in u=this._events)t.call(u,c)&&l.push(e?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},h.prototype.listeners=function(l){var u=e?e+l:l,c=this._events[u];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,p=c.length,g=new Array(p);f<p;f++)g[f]=c[f].fn;return g},h.prototype.listenerCount=function(l){var u=e?e+l:l,c=this._events[u];return c?c.fn?1:c.length:0},h.prototype.emit=function(l,u,c,f,p,g){var v=e?e+l:l;if(!this._events[v])return!1;var y=this._events[v],x=arguments.length,_,b;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,c),!0;case 4:return y.fn.call(y.context,u,c,f),!0;case 5:return y.fn.call(y.context,u,c,f,p),!0;case 6:return y.fn.call(y.context,u,c,f,p,g),!0}for(b=1,_=new Array(x-1);b<x;b++)_[b-1]=arguments[b];y.fn.apply(y.context,_)}else{var E=y.length,T;for(b=0;b<E;b++)switch(y[b].once&&this.removeListener(l,y[b].fn,void 0,!0),x){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,u);break;case 3:y[b].fn.call(y[b].context,u,c);break;case 4:y[b].fn.call(y[b].context,u,c,f);break;default:if(!_)for(T=1,_=new Array(x-1);T<x;T++)_[T-1]=arguments[T];y[b].fn.apply(y[b].context,_)}}return!0},h.prototype.on=function(l,u,c){return s(this,l,u,c,!1)},h.prototype.once=function(l,u,c){return s(this,l,u,c,!0)},h.prototype.removeListener=function(l,u,c,f){var p=e?e+l:l;if(!this._events[p])return this;if(!u)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===u&&(!f||g.once)&&(!c||g.context===c)&&o(this,p);else{for(var v=0,y=[],x=g.length;v<x;v++)(g[v].fn!==u||f&&!g[v].once||c&&g[v].context!==c)&&y.push(g[v]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},h.prototype.removeAllListeners=function(l){var u;return l?(u=e?e+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,i.exports=h}($g)),$g.exports}var PN=MN();const If=yu(PN);/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var kN={parse:cg.parse,format:cg.format,resolve:cg.resolve};Ht.RETINA_PREFIX=/@([0-9\.]+)x/;Ht.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var cE=!1,dE="6.5.10";function FN(i){var t;if(!cE){if(Ht.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var e=[`
 %c %c %c PixiJS `+dE+" -  "+i+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=globalThis.console).log.apply(t,e)}else globalThis.console&&globalThis.console.log("PixiJS "+dE+" - "+i+" - http://www.pixijs.com/");cE=!0}}var Wg;function BN(){return typeof Wg>"u"&&(Wg=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:Ht.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Ht.ADAPTER.getWebGLRenderingContext())return!1;var e=Ht.ADAPTER.createCanvas(),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!!(r&&r.getContextAttributes().stencil);if(r){var s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,n}catch{return!1}}()),Wg}function Jd(i,t){return t===void 0&&(t=[]),t[0]=(i>>16&255)/255,t[1]=(i>>8&255)/255,t[2]=(i&255)/255,t}function NN(i){var t=i.toString(16);return t="000000".substring(0,6-t.length)+t,"#"+t}function Hg(i){return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)}function ON(){for(var i=[],t=[],e=0;e<32;e++)i[e]=e,t[e]=e;i[Yt.NORMAL_NPM]=Yt.NORMAL,i[Yt.ADD_NPM]=Yt.ADD,i[Yt.SCREEN_NPM]=Yt.SCREEN,t[Yt.NORMAL]=Yt.NORMAL_NPM,t[Yt.ADD]=Yt.ADD_NPM,t[Yt.SCREEN]=Yt.SCREEN_NPM;var r=[];return r.push(t),r.push(i),r}var DN=ON();function QA(i,t){if(t===1)return(t*255<<24)+i;if(t===0)return 0;var e=i>>16&255,r=i>>8&255,n=i&255;return e=e*t+.5|0,r=r*t+.5|0,n=n*t+.5|0,(t*255<<24)+(e<<16)+(r<<8)+n}function LN(i,t,e,r){return e=e||new Float32Array(4),e[0]=(i>>16&255)/255,e[1]=(i>>8&255)/255,e[2]=(i&255)/255,(r||r===void 0)&&(e[0]*=t,e[1]*=t,e[2]*=t),e[3]=t,e}function JA(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}function tf(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function fE(i){return!(i&i-1)&&!!i}function pE(i){var t=(i>65535?1:0)<<4;i>>>=t;var e=(i>255?1:0)<<3;return i>>>=e,t|=e,e=(i>15?1:0)<<2,i>>>=e,t|=e,e=(i>3?1:0)<<1,i>>>=e,t|=e,t|i>>1}function Rd(i,t,e){var r=i.length,n;if(!(t>=r||e===0)){e=t+e>r?r-t:e;var s=r-e;for(n=t;n<s;++n)i[n]=i[n+e];i.length=s}}function id(i){return i===0?0:i<0?-1:1}var UN=0;function pu(){return++UN}var mE={};function Ul(i,t,e){if(e===void 0&&(e=3),!mE[t]){var r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+i):(r=r.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+i),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+i),console.warn(r))),mE[t]=!0}}var gE={},Xs=Object.create(null),ho=Object.create(null);(function(){function i(t,e,r){this.canvas=Ht.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=r||Ht.RESOLUTION,this.resize(t,e)}return i.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},i.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),i})();var sd;function VN(i,t){if(t===void 0&&(t=globalThis.location),i.indexOf("data:")===0)return"";t=t||globalThis.location,sd||(sd=document.createElement("a")),sd.href=i;var e=kN.parse(sd.href),r=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!r||e.protocol!==t.protocol?"anonymous":""}function vE(i,t){var e=Ht.RETINA_PREFIX.exec(i);return e?parseFloat(e[1]):t!==void 0?t:1}/*!
 * @pixi/extensions - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var iu=function(){return iu=Object.assign||function(t){for(var e=arguments,r,n=1,s=arguments.length;n<s;n++){r=e[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},iu.apply(this,arguments)},Xo;(function(i){i.Application="application",i.RendererPlugin="renderer-webgl-plugin",i.CanvasRendererPlugin="renderer-canvas-plugin",i.Loader="loader",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser"})(Xo||(Xo={}));var yE=function(i){if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");var t=typeof i.extension!="object"?{type:i.extension}:i.extension;i=iu(iu({},t),{ref:i})}if(typeof i=="object")i=iu({},i);else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},tC={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var i=arguments,t=this,e=[],r=0;r<arguments.length;r++)e[r]=i[r];return e.map(yE).forEach(function(n){n.type.forEach(function(s){var o,h;return(h=(o=t._removeHandlers)[s])===null||h===void 0?void 0:h.call(o,n)})}),this},add:function(){for(var i=arguments,t=this,e=[],r=0;r<arguments.length;r++)e[r]=i[r];return e.map(yE).forEach(function(n){n.type.forEach(function(s){var o=t._addHandlers,h=t._queue;o[s]?o[s](n):(h[s]=h[s]||[],h[s].push(n))})}),this},handle:function(i,t,e){var r=this._addHandlers=this._addHandlers||{},n=this._removeHandlers=this._removeHandlers||{};if(r[i]||n[i])throw new Error("Extension type "+i+" already has a handler");r[i]=t,n[i]=e;var s=this._queue;return s[i]&&(s[i].forEach(function(o){return t(o)}),delete s[i]),this},handleByMap:function(i,t){return this.handle(i,function(e){t[e.name]=e.ref},function(e){delete t[e.name]})},handleByList:function(i,t){return this.handle(i,function(e){var r,n;t.includes(e.ref)||(t.push(e.ref),i===Xo.Loader&&((n=(r=e.ref).add)===null||n===void 0||n.call(r)))},function(e){var r=t.indexOf(e.ref);r!==-1&&t.splice(r,1)})}};/*!
 * @pixi/runner - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var en=function(){function i(t){this.items=[],this._name=t,this._aliasCount=0}return i.prototype.emit=function(t,e,r,n,s,o,h,a){if(arguments.length>8)throw new Error("max arguments reached");var l=this,u=l.name,c=l.items;this._aliasCount++;for(var f=0,p=c.length;f<p;f++)c[f][u](t,e,r,n,s,o,h,a);return c===this.items&&this._aliasCount--,this},i.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},i.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},i.prototype.remove=function(t){var e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},i.prototype.contains=function(t){return this.items.indexOf(t)!==-1},i.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},i.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(i.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),i}();Object.defineProperties(en.prototype,{dispatch:{value:en.prototype.emit},run:{value:en.prototype.emit}});/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ht.TARGET_FPMS=.06;var mu;(function(i){i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY"})(mu||(mu={}));var zg=function(){function i(t,e,r,n){e===void 0&&(e=null),r===void 0&&(r=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=n}return i.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},i.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},i.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},i.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},i}(),Pa=function(){function i(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new zg(null,null,1/0),this.deltaMS=1/Ht.TARGET_FPMS,this.elapsedMS=1/Ht.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return i.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},i.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},i.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},i.prototype.add=function(t,e,r){return r===void 0&&(r=mu.NORMAL),this._addListener(new zg(t,e,r))},i.prototype.addOnce=function(t,e,r){return r===void 0&&(r=mu.NORMAL),this._addListener(new zg(t,e,r,!0))},i.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(!e)t.connect(r);else{for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}return this._startIfPossible(),this},i.prototype.remove=function(t,e){for(var r=this._head.next;r;)r.match(t,e)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(i.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},i.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},i.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},i.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Ht.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(i.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,Ht.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"shared",{get:function(){if(!i._shared){var t=i._shared=new i;t.autoStart=!0,t._protected=!0}return i._shared},enumerable:!1,configurable:!0}),Object.defineProperty(i,"system",{get:function(){if(!i._system){var t=i._system=new i;t.autoStart=!0,t._protected=!0}return i._system},enumerable:!1,configurable:!0}),i}();(function(){function i(){}return i.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,mu.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Pa.shared:new Pa,t.autoStart&&this.start()},i.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},i.extension=Xo.Application,i})();/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ef=Math.PI*2,XN=180/Math.PI,GN=Math.PI/180,zr;(function(i){i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC"})(zr||(zr={}));var jr=function(){function i(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},i.prototype.copyTo=function(t){return t.set(this.x,this.y),t},i.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},i.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},i.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},i}(),ad=[new jr,new jr,new jr,new jr],je=function(){function i(t,e,r,n){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=zr.RECT}return Object.defineProperty(i.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i,"EMPTY",{get:function(){return new i(0,0,0,0)},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},i.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},i.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},i.prototype.intersects=function(t,e){if(!e){var r=this.x<t.x?t.x:this.x,n=this.right>t.right?t.right:this.right;if(n<=r)return!1;var s=this.y<t.y?t.y:this.y,o=this.bottom>t.bottom?t.bottom:this.bottom;return o>s}var h=this.left,a=this.right,l=this.top,u=this.bottom;if(a<=h||u<=l)return!1;var c=ad[0].set(t.left,t.top),f=ad[1].set(t.left,t.bottom),p=ad[2].set(t.right,t.top),g=ad[3].set(t.right,t.bottom);if(p.x<=c.x||f.y<=c.y)return!1;var v=Math.sign(e.a*e.d-e.b*e.c);if(v===0||(e.apply(c,c),e.apply(f,f),e.apply(p,p),e.apply(g,g),Math.max(c.x,f.x,p.x,g.x)<=h||Math.min(c.x,f.x,p.x,g.x)>=a||Math.max(c.y,f.y,p.y,g.y)<=l||Math.min(c.y,f.y,p.y,g.y)>=u))return!1;var y=v*(f.y-c.y),x=v*(c.x-f.x),_=y*h+x*l,b=y*a+x*l,E=y*h+x*u,T=y*a+x*u;if(Math.max(_,b,E,T)<=y*c.x+x*c.y||Math.min(_,b,E,T)>=y*g.x+x*g.y)return!1;var S=v*(c.y-p.y),C=v*(p.x-c.x),M=S*h+C*l,P=S*a+C*l,F=S*h+C*u,V=S*a+C*u;return!(Math.max(M,P,F,V)<=S*c.x+C*c.y||Math.min(M,P,F,V)>=S*g.x+C*g.y)},i.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},i.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(s-n,0),this},i.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this},i.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=s-n,this},i.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},i}(),YN=function(){function i(t,e,r){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),this.x=t,this.y=e,this.radius=r,this.type=zr.CIRC}return i.prototype.clone=function(){return new i(this.x,this.y,this.radius)},i.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-t,s=this.y-e;return n*=n,s*=s,n+s<=r},i.prototype.getBounds=function(){return new je(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},i.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},i}(),$N=function(){function i(t,e,r,n){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=t,this.y=e,this.width=r,this.height=n,this.type=zr.ELIP}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1},i.prototype.getBounds=function(){return new je(this.x-this.width,this.y-this.height,this.width,this.height)},i.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},i}(),su=function(){function i(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){for(var s=[],o=0,h=n.length;o<h;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.type=zr.POLY,this.closeStroke=!0}return i.prototype.clone=function(){var t=this.points.slice(),e=new i(t);return e.closeStroke=this.closeStroke,e},i.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,s=0,o=n-1;s<n;o=s++){var h=this.points[s*2],a=this.points[s*2+1],l=this.points[o*2],u=this.points[o*2+1],c=a>e!=u>e&&t<(l-h)*((e-a)/(u-a))+h;c&&(r=!r)}return r},i.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]")},i}(),WN=function(){function i(t,e,r,n,s){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=20),this.x=t,this.y=e,this.width=r,this.height=n,this.radius=s,this.type=zr.RREC}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;var n=t-(this.x+r),s=e-(this.y+r),o=r*r;if(n*n+s*s<=o||(n=t-(this.x+this.width-r),n*n+s*s<=o)||(s=e-(this.y+this.height-r),n*n+s*s<=o)||(n=t-(this.x+r),n*n+s*s<=o))return!0}return!1},i.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},i}(),ru=function(){function i(t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=0),this._x=r,this._y=n,this.cb=t,this.scope=e}return i.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new i(t,e,this._x,this._y)},i.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},i.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},i.prototype.copyTo=function(t){return t.set(this._x,this._y),t},i.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},i.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),i}(),dn=function(){function i(t,e,r,n,s,o){t===void 0&&(t=1),e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=1),s===void 0&&(s=0),o===void 0&&(o=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=s,this.ty=o}return i.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},i.prototype.set=function(t,e,r,n,s,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=s,this.ty=o,this},i.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},i.prototype.apply=function(t,e){e=e||new jr;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},i.prototype.applyInverse=function(t,e){e=e||new jr;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*r*n+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*s+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},i.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},i.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},i.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,s=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=s*e-this.d*r,this.d=s*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},i.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*s+this.ty,this},i.prototype.setTransform=function(t,e,r,n,s,o,h,a,l){return this.a=Math.cos(h+l)*s,this.b=Math.sin(h+l)*s,this.c=-Math.sin(h-a)*o,this.d=Math.cos(h-a)*o,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this},i.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},i.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,s=this.d,o=t.pivot,h=-Math.atan2(-n,s),a=Math.atan2(r,e),l=Math.abs(h+a);return l<1e-5||Math.abs(ef-l)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*r+o.y*s),t},i.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,s=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*s)/o,this.ty=-(t*this.ty-e*s)/o,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var t=new i;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},i.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(i,"IDENTITY",{get:function(){return new i},enumerable:!1,configurable:!0}),Object.defineProperty(i,"TEMP_MATRIX",{get:function(){return new i},enumerable:!1,configurable:!0}),i}(),bo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Eo=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],To=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],So=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],cy=[],eC=[],od=Math.sign;function HN(){for(var i=0;i<16;i++){var t=[];cy.push(t);for(var e=0;e<16;e++)for(var r=od(bo[i]*bo[e]+To[i]*Eo[e]),n=od(Eo[i]*bo[e]+So[i]*Eo[e]),s=od(bo[i]*To[e]+To[i]*So[e]),o=od(Eo[i]*To[e]+So[i]*So[e]),h=0;h<16;h++)if(bo[h]===r&&Eo[h]===n&&To[h]===s&&So[h]===o){t.push(h);break}}for(var i=0;i<16;i++){var a=new dn;a.set(bo[i],Eo[i],To[i],So[i],0,0),eC.push(a)}}HN();var hr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(i){return bo[i]},uY:function(i){return Eo[i]},vX:function(i){return To[i]},vY:function(i){return So[i]},inv:function(i){return i&8?i&15:-i&7},add:function(i,t){return cy[i][t]},sub:function(i,t){return cy[i][hr.inv(t)]},rotate180:function(i){return i^4},isVertical:function(i){return(i&3)===2},byDirection:function(i,t){return Math.abs(i)*2<=Math.abs(t)?t>=0?hr.S:hr.N:Math.abs(t)*2<=Math.abs(i)?i>0?hr.E:hr.W:t>0?i>0?hr.SE:hr.SW:i>0?hr.NE:hr.NW},matrixAppendRotationInv:function(i,t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var n=eC[hr.inv(t)];n.tx=e,n.ty=r,i.append(n)}},rC=function(){function i(){this.worldTransform=new dn,this.localTransform=new dn,this.position=new ru(this.onChange,this,0,0),this.scale=new ru(this.onChange,this,1,1),this.pivot=new ru(this.onChange,this,0,0),this.skew=new ru(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return i.prototype.onChange=function(){this._localID++},i.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},i.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},i.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},i.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},i.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),i.IDENTITY=new i,i}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ht.PREFER_ENV=Po.any?Ks.WEBGL:Ks.WEBGL2;Ht.STRICT_TEXTURE_CACHE=!1;var dy=[];function nC(i,t){if(!i)return null;var e="";if(typeof i=="string"){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);r&&(e=r[1].toLowerCase())}for(var n=dy.length-1;n>=0;--n){var s=dy[n];if(s.test&&s.test(i,e))return new s(i,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fy=function(i,t){return fy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},fy(i,t)};function $e(i,t){fy(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var py=function(){return py=Object.assign||function(t){for(var e=arguments,r,n=1,s=arguments.length;n<s;n++){r=e[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},py.apply(this,arguments)};function zN(i,t){var e={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.indexOf(r)<0&&(e[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(e[r[n]]=i[r[n]]);return e}var gu=function(){function i(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new en("setRealSize"),this.onUpdate=new en("update"),this.onError=new en("onError")}return i.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},i.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},i.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(i.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),i.prototype.update=function(){this.destroyed||this.onUpdate.emit()},i.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),i.prototype.style=function(t,e,r){return!1},i.prototype.dispose=function(){},i.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},i.test=function(t,e){return!1},i}(),Y0=function(i){$e(t,i);function t(e,r){var n=this,s=r||{},o=s.width,h=s.height;if(!o||!h)throw new Error("BufferResource width or height invalid");return n=i.call(this,o,h)||this,n.data=e,n}return t.prototype.upload=function(e,r,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Xa.UNPACK);var o=r.realWidth,h=r.realHeight;return n.width===o&&n.height===h?s.texSubImage2D(r.target,0,0,0,o,h,r.format,n.type,this.data):(n.width=o,n.height=h,s.texImage2D(r.target,0,n.internalFormat,o,h,0,r.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(gu),jN={scaleMode:ps.NEAREST,format:kt.RGBA,alphaMode:Xa.NPM},wr=function(i){$e(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this)||this;r=r||{};var s=r.alphaMode,o=r.mipmap,h=r.anisotropicLevel,a=r.scaleMode,l=r.width,u=r.height,c=r.wrapMode,f=r.format,p=r.type,g=r.target,v=r.resolution,y=r.resourceOptions;return e&&!(e instanceof gu)&&(e=nC(e,y),e.internal=!0),n.resolution=v||Ht.RESOLUTION,n.width=Math.round((l||0)*n.resolution)/n.resolution,n.height=Math.round((u||0)*n.resolution)/n.resolution,n._mipmap=o!==void 0?o:Ht.MIPMAP_TEXTURES,n.anisotropicLevel=h!==void 0?h:Ht.ANISOTROPIC_LEVEL,n._wrapMode=c||Ht.WRAP_MODE,n._scaleMode=a!==void 0?a:Ht.SCALE_MODE,n.format=f||kt.RGBA,n.type=p||Se.UNSIGNED_BYTE,n.target=g||No.TEXTURE_2D,n.alphaMode=s!==void 0?s:Xa.UNPACK,n.uid=pu(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=l>0&&u>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,r){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,r,n){return n=n||this.resolution,this.setRealSize(e*n,r*n,n)},t.prototype.setRealSize=function(e,r,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=fE(this.realWidth)&&fE(this.realHeight)},t.prototype.setResolution=function(e){var r=this.resolution;return r===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*r)/e,this.height=Math.round(this.height*r)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ho[this.cacheId],delete Xs[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,r,n){n===void 0&&(n=Ht.STRICT_TEXTURE_CACHE);var s=typeof e=="string",o=null;if(s)o=e;else{if(!e._pixiId){var h=r&&r.pixiIdPrefix||"pixiid";e._pixiId=h+"_"+pu()}o=e._pixiId}var a=ho[o];if(s&&n&&!a)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return a||(a=new t(e,r),a.cacheId=o,t.addToCache(a,o)),a},t.fromBuffer=function(e,r,n,s){e=e||new Float32Array(r*n*4);var o=new Y0(e,{width:r,height:n}),h=e instanceof Float32Array?Se.FLOAT:Se.UNSIGNED_BYTE;return new t(o,Object.assign({},jN,s||{width:r,height:n,type:h}))},t.addToCache=function(e,r){r&&(e.textureCacheIds.indexOf(r)===-1&&e.textureCacheIds.push(r),ho[r]&&console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry"),ho[r]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var r=ho[e];if(r){var n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete ho[e],r}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete ho[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(If),iC=function(i){$e(t,i);function t(e,r){var n=this,s=r||{},o=s.width,h=s.height;n=i.call(this,o,h)||this,n.items=[],n.itemDirtyIds=[];for(var a=0;a<e;a++){var l=new wr;n.items.push(l),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,r){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof gu?this.addResourceAt(e[n],n):this.addResourceAt(nC(e[n],r),n))},t.prototype.dispose=function(){for(var e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,r){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");i.prototype.bind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)},t.prototype.unbind=function(e){i.prototype.unbind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=r.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],o=s.realWidth,h=s.realHeight;return e.resize(o,h),Promise.resolve(e)}),this._load},t}(gu),qN=function(i){$e(t,i);function t(e,r){var n=this,s=r||{},o=s.width,h=s.height,a,l;return Array.isArray(e)?(a=e,l=e.length):l=e,n=i.call(this,l,{width:o,height:h})||this,a&&n.initFromArray(a,r),n}return t.prototype.addBaseTextureAt=function(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){i.prototype.bind.call(this,e),e.target=No.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,r,n){var s=this,o=s.length,h=s.itemDirtyIds,a=s.items,l=e.gl;n.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,o,0,r.format,n.type,null);for(var u=0;u<o;u++){var c=a[u];h[u]<c.dirtyId&&(h[u]=c.dirtyId,c.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,u,c.resource.width,c.resource.height,1,r.format,n.type,c.resource.source))}return!0},t}(iC),Ga=function(i){$e(t,i);function t(e){var r=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,o=n.naturalHeight||n.videoHeight||n.height;return r=i.call(this,s,o)||this,r.source=e,r.noSubImage=!1,r}return t.crossOrigin=function(e,r,n){n===void 0&&r.indexOf("data:")!==0?e.crossOrigin=VN(r):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,r,n,s){var o=e.gl,h=r.realWidth,a=r.realHeight;if(s=s||this.source,s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Xa.UNPACK),!this.noSubImage&&r.target===o.TEXTURE_2D&&n.width===h&&n.height===a?o.texSubImage2D(o.TEXTURE_2D,0,0,0,r.format,n.type,s):(n.width=h,n.height=a,o.texImage2D(r.target,0,n.internalFormat,r.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(r,n),i.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(gu),KN=function(i){$e(t,i);function t(e){return i.call(this,e)||this}return t.test=function(e){var r=globalThis.OffscreenCanvas;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Ga),ZN=function(i){$e(t,i);function t(e,r){var n=this,s=r||{},o=s.width,h=s.height,a=s.autoLoad,l=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=i.call(this,6,{width:o,height:h})||this;for(var u=0;u<t.SIDES;u++)n.items[u].target=No.TEXTURE_CUBE_MAP_POSITIVE_X+u;return n.linkBaseTexture=l!==!1,e&&n.initFromArray(e,r),a!==!1&&n.load(),n}return t.prototype.bind=function(e){i.prototype.bind.call(this,e),e.target=No.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,r,n){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=No.TEXTURE_CUBE_MAP_POSITIVE_X+r,e.parentTextureArray=this.baseTexture,this.items[r]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[r]=e,this},t.prototype.upload=function(e,r,n){for(var s=this.itemDirtyIds,o=0;o<t.SIDES;o++){var h=this.items[o];(s[o]<h.dirtyId||n.dirtyId<r.dirtyId)&&(h.valid&&h.resource?(h.resource.upload(e,h,n),s[o]=h.dirtyId):s[o]<-1&&(e.gl.texImage2D(h.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),s[o]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(iC),sC=function(i){$e(t,i);function t(e,r){var n=this;if(r=r||{},!(e instanceof HTMLImageElement)){var s=new Image;Ga.crossOrigin(s,e,r.crossorigin),s.src=e,e=s}return n=i.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(r.createBitmap!==void 0?r.createBitmap:Ht.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,n.bitmap=null,n._load=null,r.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var r=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var o=r.source;r.url=o.src;var h=function(){r.destroyed||(o.onload=null,o.onerror=null,r.resize(o.width,o.height),r._load=null,r.createBitmap?n(r.process()):n(r))};o.complete&&o.src?h():(o.onload=h,o.onerror=function(a){s(a),r.onError.emit(a)})}),this._load)},t.prototype.process=function(){var e=this,r=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,s=!r.crossOrigin||r.crossOrigin==="anonymous";return this._process=fetch(r.src,{mode:s?"cors":"no-cors"}).then(function(o){return o.blob()}).then(function(o){return n(o,0,0,r.width,r.height,{premultiplyAlpha:e.alphaMode===null||e.alphaMode===Xa.UNPACK?"premultiply":"none"})}).then(function(o){return e.destroyed?Promise.reject():(e.bitmap=o,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,e,r,n,this.bitmap),!this.preserveBitmap){var s=!0,o=r._glTextures;for(var h in o){var a=o[h];if(a!==n&&a.dirtyId!==r.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Ga),QN=function(i){$e(t,i);function t(e,r){var n=this;return r=r||{},n=i.call(this,Ht.ADAPTER.createCanvas())||this,n._width=0,n._height=0,n.svg=e,n.scale=r.scale||1,n._overrideWidth=r.width,n._overrideHeight=r.height,n._resolve=null,n._crossorigin=r.crossorigin,n._load=null,r.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(r){if(e._resolve=function(){e.resize(e.source.width,e.source.height),r(e)},t.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,r=new Image;Ga.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(n){e._resolve&&(r.onerror=null,e.onError.emit(n))},r.onload=function(){if(e._resolve){var n=r.width,s=r.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=n*e.scale,h=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(o=e._overrideWidth||e._overrideHeight/s*n,h=e._overrideHeight||e._overrideWidth/n*s),o=Math.round(o),h=Math.round(h);var a=e.source;a.width=o,a.height=h,a._pixiId="canvas_"+pu(),a.getContext("2d").drawImage(r,0,0,n,s,0,0,o,h),e._resolve(),e._resolve=null}}},t.getSize=function(e){var r=t.SVG_SIZE.exec(e),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n},t.prototype.dispose=function(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,r){return r==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Ga),JN=function(i){$e(t,i);function t(e,r){var n=this;if(r=r||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var o=e[0].src||e[0];Ga.crossOrigin(s,o,r.crossorigin);for(var h=0;h<e.length;++h){var a=document.createElement("source"),l=e[h],u=l.src,c=l.mime;u=u||e[h];var f=u.split("?").shift().toLowerCase(),p=f.slice(f.lastIndexOf(".")+1);c=c||t.MIME_TYPES[p]||"video/"+p,a.src=u,a.type=c,s.appendChild(a)}e=s}return n=i.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=r.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=r.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),r.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var r=Pa.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,r.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState>2},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Pa.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Pa.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(e.videoWidth,e.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Pa.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),i.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Pa.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Pa.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,r){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(r)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Ga),tO=function(i){$e(t,i);function t(e){return i.call(this,e)||this}return t.test=function(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&e instanceof ImageBitmap},t}(Ga);dy.push(sC,tO,KN,JN,QN,Y0,ZN,qN);var eO=function(i){$e(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.upload=function(e,r,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Xa.UNPACK);var o=r.realWidth,h=r.realHeight;return n.width===o&&n.height===h?s.texSubImage2D(r.target,0,0,0,o,h,r.format,n.type,this.data):(n.width=o,n.height=h,s.texImage2D(r.target,0,n.internalFormat,o,h,0,r.format,n.type,this.data)),!0},t}(Y0),my=function(){function i(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new en("disposeFramebuffer"),this.multisample=_r.NONE}return Object.defineProperty(i.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),i.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new wr(null,{scaleMode:ps.NEAREST,resolution:1,mipmap:Va.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.addDepthTexture=function(t){return this.depthTexture=t||new wr(new eO(null,{width:this.width,height:this.height}),{scaleMode:ps.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Va.OFF,format:kt.DEPTH_COMPONENT,type:Se.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var n=this.colorTextures[r],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},i}(),aC=function(i){$e(t,i);function t(e){e===void 0&&(e={});var r=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],o=arguments[2],h=arguments[3];e={width:n,height:s,scaleMode:o,resolution:h}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:_r.NONE,r=i.call(this,null,e)||this,r.mipmap=Va.OFF,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new my(r.realWidth,r.realHeight).addColorTexture(0,r),r.framebuffer.multisample=e.multisample,r.maskStack=[],r.filterStack=[{}],r}return t.prototype.resize=function(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},t.prototype.destroy=function(){i.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(wr),oC=function(){function i(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return i.prototype.set=function(t,e,r){var n=e.width,s=e.height;if(r){var o=t.width/2/n,h=t.height/2/s,a=t.x/n+o,l=t.y/s+h;r=hr.add(r,hr.NW),this.x0=a+o*hr.uX(r),this.y0=l+h*hr.uY(r),r=hr.add(r,2),this.x1=a+o*hr.uX(r),this.y1=l+h*hr.uY(r),r=hr.add(r,2),this.x2=a+o*hr.uX(r),this.y2=l+h*hr.uY(r),r=hr.add(r,2),this.x3=a+o*hr.uX(r),this.y3=l+h*hr.uY(r)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},i.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},i}(),xE=new oC;function ld(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}var ti=function(i){$e(t,i);function t(e,r,n,s,o,h){var a=i.call(this)||this;if(a.noFrame=!1,r||(a.noFrame=!0,r=new je(0,0,1,1)),e instanceof t&&(e=e.baseTexture),a.baseTexture=e,a._frame=r,a.trim=s,a.valid=!1,a._uvs=xE,a.uvMatrix=null,a.orig=n||r,a._rotate=Number(o||0),o===!0)a._rotate=2;else if(a._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return a.defaultAnchor=h?new jr(h.x,h.y):new jr(0,0),a._updateID=0,a.textureCacheIds=[],e.valid?a.noFrame?e.valid&&a.onBaseTextureUpdated(e):a.frame=r:e.once("loaded",a.onBaseTextureUpdated,a),a.noFrame&&e.on("update",a.onBaseTextureUpdated,a),a}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var r=this.baseTexture.resource;r&&r.url&&Xs[r.url]&&t.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===xE&&(this._uvs=new oC),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,r,n){r===void 0&&(r={}),n===void 0&&(n=Ht.STRICT_TEXTURE_CACHE);var s=typeof e=="string",o=null;if(s)o=e;else if(e instanceof wr){if(!e.cacheId){var h=r&&r.pixiIdPrefix||"pixiid";e.cacheId=h+"-"+pu(),wr.addToCache(e,e.cacheId)}o=e.cacheId}else{if(!e._pixiId){var h=r&&r.pixiIdPrefix||"pixiid";e._pixiId=h+"_"+pu()}o=e._pixiId}var a=Xs[o];if(s&&n&&!a)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return!a&&!(e instanceof wr)?(r.resolution||(r.resolution=vE(e)),a=new t(new wr(e,r)),a.baseTexture.cacheId=o,wr.addToCache(a.baseTexture,o),t.addToCache(a,o)):!a&&e instanceof wr&&(a=new t(e),t.addToCache(a,o)),a},t.fromURL=function(e,r){var n=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},r),!1),o=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):o.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,r,n,s){return new t(wr.fromBuffer(e,r,n,s))},t.fromLoader=function(e,r,n,s){var o=new wr(e,Object.assign({scaleMode:Ht.SCALE_MODE,resolution:vE(r)},s)),h=o.resource;h instanceof sC&&(h.url=r);var a=new t(o);return n||(n=r),wr.addToCache(a.baseTexture,n),t.addToCache(a,n),n!==r&&(wr.addToCache(a.baseTexture,r),t.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(function(l){a.baseTexture.once("loaded",function(){return l(a)})})},t.addToCache=function(e,r){r&&(e.textureCacheIds.indexOf(r)===-1&&e.textureCacheIds.push(r),Xs[r]&&console.warn("Texture added to the cache with an id ["+r+"] that already had an entry"),Xs[r]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var r=Xs[e];if(r){var n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Xs[e],r}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)Xs[e.textureCacheIds[s]]===e&&delete Xs[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var r=e.x,n=e.y,s=e.width,o=e.height,h=r+s>this.baseTexture.width,a=n+o>this.baseTexture.height;if(h||a){var l=h&&a?"and":"or",u="X: "+r+" + "+s+" = "+(r+s)+" > "+this.baseTexture.width,c="Y: "+n+" + "+o+" = "+(n+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(u+" "+l+" "+c))}this.valid=s&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return t._EMPTY||(t._EMPTY=new t(new wr),ld(t._EMPTY),ld(t._EMPTY.baseTexture)),t._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){if(!t._WHITE){var e=Ht.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),t._WHITE=new t(wr.from(e)),ld(t._WHITE),ld(t._WHITE.baseTexture)}return t._WHITE},enumerable:!1,configurable:!0}),t}(If),$0=function(i){$e(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,r,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,o=Math.round(e*s)/s,h=Math.round(r*s)/s;this.valid=o>0&&h>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=h,n&&this.baseTexture.resize(o,h),this.updateUvs()},t.prototype.setResolution=function(e){var r=this.baseTexture;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))},t.create=function(e){for(var r=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=r[s];return typeof e=="number"&&(Ul("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new aC(e))},t}(ti),rO=function(){function i(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return i.prototype.createTexture=function(t,e,r){r===void 0&&(r=_r.NONE);var n=new aC(Object.assign({width:t,height:e,resolution:1,multisample:r},this.textureOptions));return new $0(n)},i.prototype.getOptimalTexture=function(t,e,r,n){r===void 0&&(r=1),n===void 0&&(n=_r.NONE);var s;t=Math.ceil(t*r-1e-6),e=Math.ceil(e*r-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=tf(t),e=tf(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var o=this.texturePool[s].pop();return o||(o=this.createTexture(t,e,n)),o.filterPoolKey=s,o.setResolution(r),o},i.prototype.getFilterTexture=function(t,e,r){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,r||_r.NONE);return n.filterFrame=t.filterFrame,n},i.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},i.prototype.returnFilterTexture=function(t){this.returnTexture(t)},i.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}},i.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var r=this.texturePool[e];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},i.SCREEN_KEY=-1,i}(),wE=function(){function i(t,e,r,n,s,o,h){e===void 0&&(e=0),r===void 0&&(r=!1),n===void 0&&(n=Se.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=n,this.stride=s,this.start=o,this.instance=h}return i.prototype.destroy=function(){this.buffer=null},i.from=function(t,e,r,n,s){return new i(t,e,r,n,s)},i}(),nO=0,cn=function(){function i(t,e,r){e===void 0&&(e=!0),r===void 0&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=nO++,this.disposeRunner=new en("disposeBuffer")}return i.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(i.prototype,"index",{get:function(){return this.type===gs.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?gs.ELEMENT_ARRAY_BUFFER:gs.ARRAY_BUFFER},enumerable:!1,configurable:!0}),i.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new i(t)},i}(),iO={Float32Array,Uint32Array,Int32Array,Uint8Array};function sO(i,t){for(var e=0,r=0,n={},s=0;s<i.length;s++)r+=t[s],e+=i[s].length;for(var o=new ArrayBuffer(e*4),h=null,a=0,s=0;s<i.length;s++){var l=t[s],u=i[s],c=JA(u);n[c]||(n[c]=new iO[c](o)),h=n[c];for(var f=0;f<u.length;f++){var p=(f/l|0)*r+a,g=f%l;h[p+g]=u[f]}a+=l}return new Float32Array(o)}var _E={5126:4,5123:2,5121:1},aO=0,oO={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Rf=function(){function i(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=aO++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new en("disposeGeometry"),this.refCount=0}return i.prototype.addAttribute=function(t,e,r,n,s,o,h,a){if(r===void 0&&(r=0),n===void 0&&(n=!1),a===void 0&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof cn||(e instanceof Array&&(e=new Float32Array(e)),e=new cn(e));var l=t.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],e,r,n,s);return this}var c=this.buffers.indexOf(e);return c===-1&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new wE(c,r,n,s,o,h,a),this.instanced=this.instanced||a,this},i.prototype.getAttribute=function(t){return this.attributes[t]},i.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},i.prototype.addIndex=function(t){return t instanceof cn||(t instanceof Array&&(t=new Uint16Array(t)),t=new cn(t)),t.type=gs.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},i.prototype.getIndex=function(){return this.indexBuffer},i.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],r=new cn,n;for(n in this.attributes){var s=this.attributes[n],o=this.buffers[s.buffer];t.push(o.data),e.push(s.size*_E[s.type]/4),s.buffer=0}for(r.data=sO(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},i.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],r=this.buffers[e.buffer];return r.data.length/(e.stride/4||e.size)}return 0},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},i.prototype.clone=function(){for(var t=new i,e=0;e<this.buffers.length;e++)t.buffers[e]=new cn(this.buffers[e].data.slice(0));for(var e in this.attributes){var r=this.attributes[e];t.attributes[e]=new wE(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=gs.ELEMENT_ARRAY_BUFFER),t},i.merge=function(t){for(var e=new i,r=[],n=[],s=[],o,h=0;h<t.length;h++){o=t[h];for(var a=0;a<o.buffers.length;a++)n[a]=n[a]||0,n[a]+=o.buffers[a].data.length,s[a]=0}for(var h=0;h<o.buffers.length;h++)r[h]=new oO[JA(o.buffers[h].data)](n[h]),e.buffers[h]=new cn(r[h]);for(var h=0;h<t.length;h++){o=t[h];for(var a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,s[a]),s[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=gs.ELEMENT_ARRAY_BUFFER;for(var l=0,u=0,c=0,f=0,h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){f=h;break}for(var h in o.attributes){var p=o.attributes[h];(p.buffer|0)===f&&(u+=p.size*_E[p.type]/4)}for(var h=0;h<t.length;h++){for(var g=t[h].indexBuffer.data,a=0;a<g.length;a++)e.indexBuffer.data[a+c]+=l;l+=t[h].buffers[f].data.length/u,c+=g.length}}return e},i}(),lO=function(i){$e(t,i);function t(){var e=i.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(Rf),hO=function(i){$e(t,i);function t(){var e=i.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new cn(e.vertices),e.uvBuffer=new cn(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,r){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+r.width/e.width,this.uvs[3]=s,this.uvs[4]=n+r.width/e.width,this.uvs[5]=s+r.height/e.height,this.uvs[6]=n,this.uvs[7]=s+r.height/e.height,n=r.x,s=r.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+r.width,this.vertices[3]=s,this.vertices[4]=n+r.width,this.vertices[5]=s+r.height,this.vertices[6]=n,this.vertices[7]=s+r.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(Rf),uO=0,Oo=function(){function i(t,e,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=uO++,this.static=!!e,this.ubo=!!r,t instanceof cn?(this.buffer=t,this.buffer.type=gs.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new cn(new Float32Array(1)),this.buffer.type=gs.UNIFORM_BUFFER,this.autoManage=!0))}return i.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},i.prototype.add=function(t,e,r){if(!this.ubo)this.uniforms[t]=new i(e,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},i.from=function(t,e,r){return new i(t,e,r)},i.uboFrom=function(t,e){return new i(t,e??!0,!0)},i}(),cO=function(){function i(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=_r.NONE,this.sourceFrame=new je,this.destinationFrame=new je,this.bindingSourceFrame=new je,this.bindingDestinationFrame=new je,this.filters=[],this.transform=null}return i.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},i}(),hd=[new jr,new jr,new jr,new jr],jg=new dn,dO=function(){function i(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new rO,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new lO,this.quadUv=new hO,this.tempRect=new je,this.activeState={},this.globalUniforms=new Oo({outputFrame:new je,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return i.prototype.push=function(t,e){for(var r,n,s=this.renderer,o=this.defaultFilterStack,h=this.statePool.pop()||new cO,a=this.renderer.renderTexture,l=e[0].resolution,u=e[0].multisample,c=e[0].padding,f=e[0].autoFit,p=(r=e[0].legacy)!==null&&r!==void 0?r:!0,g=1;g<e.length;g++){var v=e[g];l=Math.min(l,v.resolution),u=Math.min(u,v.multisample),c=this.useMaxPadding?Math.max(c,v.padding):c+v.padding,f=f&&v.autoFit,p=p||((n=v.legacy)!==null&&n!==void 0?n:!0)}o.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),o.push(h),h.resolution=l,h.multisample=u,h.legacy=p,h.target=t,h.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),h.sourceFrame.pad(c);var y=this.tempRect.copyFrom(a.sourceFrame);s.projection.transform&&this.transformAABB(jg.copyFrom(s.projection.transform).invert(),y),f?(h.sourceFrame.fit(y),(h.sourceFrame.width<=0||h.sourceFrame.height<=0)&&(h.sourceFrame.width=0,h.sourceFrame.height=0)):h.sourceFrame.intersects(y)||(h.sourceFrame.width=0,h.sourceFrame.height=0),this.roundFrame(h.sourceFrame,a.current?a.current.resolution:s.resolution,a.sourceFrame,a.destinationFrame,s.projection.transform),h.renderTexture=this.getOptimalFilterTexture(h.sourceFrame.width,h.sourceFrame.height,l,u),h.filters=e,h.destinationFrame.width=h.renderTexture.width,h.destinationFrame.height=h.renderTexture.height;var x=this.tempRect;x.x=0,x.y=0,x.width=h.sourceFrame.width,x.height=h.sourceFrame.height,h.renderTexture.filterFrame=h.sourceFrame,h.bindingSourceFrame.copyFrom(a.sourceFrame),h.bindingDestinationFrame.copyFrom(a.destinationFrame),h.transform=s.projection.transform,s.projection.transform=null,a.bind(h.renderTexture,h.sourceFrame,x),s.framebuffer.clear(0,0,0,0)},i.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,o=n.inputPixel,h=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*e.resolution),o[1]=Math.round(s[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],h[0]=.5*o[2],h[1]=.5*o[3],h[2]=e.sourceFrame.width*s[2]-.5*o[2],h[3]=e.sourceFrame.height*s[3]-.5*o[3],e.legacy){var a=n.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,e.renderTexture,l.renderTexture,Ma.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,e.resolution);c.filterFrame=u.filterFrame;var f=0;for(f=0;f<r.length-1;++f){f===1&&e.multisample>1&&(c=this.getOptimalFilterTexture(u.width,u.height,e.resolution),c.filterFrame=u.filterFrame),r[f].apply(this,u,c,Ma.CLEAR,e);var p=u;u=c,c=p}r[f].apply(this,u,l.renderTexture,Ma.BLEND,e),f>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},i.prototype.bindAndClear=function(t,e){e===void 0&&(e=Ma.CLEAR);var r=this.renderer,n=r.renderTexture,s=r.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,n.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var h=s.stateId&1||this.forceClear;(e===Ma.CLEAR||e===Ma.BLIT&&h)&&this.renderer.framebuffer.clear(0,0,0,0)},i.prototype.applyFilter=function(t,e,r,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(r,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(yi.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(yi.TRIANGLE_STRIP))},i.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,n=r.sourceFrame,s=r.destinationFrame,o=e._texture.orig,h=t.set(s.width,0,0,s.height,n.x,n.y),a=e.worldTransform.copyTo(dn.TEMP_MATRIX);return a.invert(),h.prepend(a),h.scale(1/o.width,1/o.height),h.translate(e.anchor.x,e.anchor.y),h},i.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},i.prototype.getOptimalFilterTexture=function(t,e,r,n){return r===void 0&&(r=1),n===void 0&&(n=_r.NONE),this.texturePool.getOptimalTexture(t,e,r,n)},i.prototype.getFilterTexture=function(t,e,r){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,r||_r.NONE);return s.filterFrame=t.filterFrame,s},i.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},i.prototype.emptyPool=function(){this.texturePool.clear(!0)},i.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},i.prototype.transformAABB=function(t,e){var r=hd[0],n=hd[1],s=hd[2],o=hd[3];r.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(r,r),t.apply(n,n),t.apply(s,s),t.apply(o,o);var h=Math.min(r.x,n.x,s.x,o.x),a=Math.min(r.y,n.y,s.y,o.y),l=Math.max(r.x,n.x,s.x,o.x),u=Math.max(r.y,n.y,s.y,o.y);e.x=h,e.y=a,e.width=l-h,e.height=u-a},i.prototype.roundFrame=function(t,e,r,n,s){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(s){var o=s.a,h=s.b,a=s.c,l=s.d;if((Math.abs(h)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}s=s?jg.copyFrom(s):jg.identity(),s.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)}},i}(),lC=function(){function i(t){this.renderer=t}return i.prototype.flush=function(){},i.prototype.destroy=function(){this.renderer=null},i.prototype.start=function(){},i.prototype.stop=function(){this.flush()},i.prototype.render=function(t){},i}(),fO=function(){function i(t){this.renderer=t,this.emptyRenderer=new lC(t),this.currentRenderer=this.emptyRenderer}return i.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},i.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},i.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},i.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=r[n]||null,t[n]&&(t[n]._batchLocation=n)},i.prototype.boundArray=function(t,e,r,n){for(var s=t.elements,o=t.ids,h=t.count,a=0,l=0;l<h;l++){var u=s[l],c=u._batchLocation;if(c>=0&&c<n&&e[c]===u){o[l]=c;continue}for(;a<n;){var f=e[a];if(f&&f._batchEnabled===r&&f._batchLocation===a){a++;continue}o[l]=a,u._batchLocation=a,e[a]=u;break}}},i.prototype.destroy=function(){this.renderer=null},i}(),bE=0,pO=function(){function i(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(i.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),i.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=bE++},i.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=bE++,this.renderer.runners.contextChange.emit(t)},i.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},i.prototype.createContext=function(t,e){var r;if(Ht.PREFER_ENV>=Ks.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},i.prototype.getExtensions=function(){var t=this.gl,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},i.prototype.handleContextLost=function(t){var e=this;t.preventDefault(),setTimeout(function(){e.gl.isContextLost()&&e.extensions.loseContext&&e.extensions.loseContext.restoreContext()},0)},i.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},i.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},i.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},i.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},i}(),mO=function(){function i(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=_r.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return i}(),gO=new je,vO=function(){function i(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new my(10,10),this.msaaSamples=null}return i.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new je,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;Ht.PREFER_ENV===Ks.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},i.prototype.bind=function(t,e,r){r===void 0&&(r=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=r),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var h=t.colorTextures[o];this.renderer.texture.unbind(h.parentTextureArray||h)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var a=e.width>>r,l=e.height>>r,u=a/e.width;this.setViewport(e.x*u,e.y*u,a,l)}else{var a=t.width>>r,l=t.height>>r;this.setViewport(0,0,a,l)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},i.prototype.setViewport=function(t,e,r,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),r=Math.round(r),n=Math.round(n),(s.width!==r||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=r,s.height=n,this.gl.viewport(t,e,r,n))},Object.defineProperty(i.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),i.prototype.clear=function(t,e,r,n,s){s===void 0&&(s=Kd.COLOR|Kd.DEPTH);var o=this.gl;o.clearColor(t,e,r,n),o.clear(s)},i.prototype.initFramebuffer=function(t){var e=this.gl,r=new mO(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r},i.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height)),r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),r.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var o=0;o<s;o++){var h=n[o],a=h.parentTextureArray||h;this.renderer.texture.bind(a,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},i.prototype.updateFramebuffer=function(t,e){var r=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,o=s.length;r.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));for(var h=[],a=0;a<o;a++){var l=s[a],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),!(a===0&&n.msaaBuffer)&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+a,l.target,u._glTextures[this.CONTEXT_UID].texture,e),h.push(r.COLOR_ATTACHMENT0+a))}if(h.length>1&&r.drawBuffers(h),t.depthTexture){var c=this.writeDepthTexture;if(c){var f=t.depthTexture;this.renderer.texture.bind(f,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,f._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil)):n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null)},i.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},i.prototype.detectSamples=function(t){var e=this.msaaSamples,r=_r.NONE;if(t<=1||e===null)return r;for(var n=0;n<e.length;n++)if(e[n]<=t){r=e[n];break}return r===1&&(r=_r.NONE),r},i.prototype.blit=function(t,e,r){var n=this,s=n.current,o=n.renderer,h=n.gl,a=n.CONTEXT_UID;if(o.context.webGLVersion===2&&s){var l=s.glFramebuffers[a];if(l){if(!t){if(!l.msaaBuffer)return;var u=s.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new my(s.width,s.height),l.blitFramebuffer.addColorTexture(0,u)),t=l.blitFramebuffer,t.colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),(t.width!==s.width||t.height!==s.height)&&(t.width=s.width,t.height=s.height,t.dirtyId++,t.dirtySize++)}e||(e=gO,e.width=s.width,e.height=s.height),r||(r=e);var c=e.width===r.width&&e.height===r.height;this.bind(t),h.bindFramebuffer(h.READ_FRAMEBUFFER,l.framebuffer),h.blitFramebuffer(e.left,e.top,e.right,e.bottom,r.left,r.top,r.right,r.bottom,h.COLOR_BUFFER_BIT,c?h.NEAREST:h.LINEAR)}}},i.prototype.disposeFramebuffer=function(t,e){var r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(r){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},i.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},i.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var r=t.width,n=t.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,r,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,r,n),e.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}}},i.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new je},i.prototype.destroy=function(){this.renderer=null},i}(),qg={5126:4,5123:2,5121:1},yO=function(){function i(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return i.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var r=this.renderer.context.extensions.vertexArrayObject;Ht.PREFER_ENV===Ks.WEBGL_LEGACY&&(r=null),r?(t.createVertexArray=function(){return r.createVertexArrayOES()},t.bindVertexArray=function(s){return r.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return r.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,o){return n.vertexAttribDivisorANGLE(s,o)},t.drawElementsInstanced=function(s,o,h,a,l){return n.drawElementsInstancedANGLE(s,o,h,a,l)},t.drawArraysInstanced=function(s,o,h,a){return n.drawArraysInstancedANGLE(s,o,h,a)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},i.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var o=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},i.prototype.reset=function(){this.unbind()},i.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,r=0;r<t.buffers.length;r++){var n=t.buffers[r];e.update(n)}},i.prototype.checkCompatibility=function(t,e){var r=t.attributes,n=e.attributeData;for(var s in n)if(!r[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},i.prototype.getSignature=function(t,e){var r=t.attributes,n=e.attributeData,s=["g",t.id];for(var o in r)n[o]&&s.push(o,n[o].location);return s.join("-")},i.prototype.initGeometryVao=function(t,e,r){r===void 0&&(r=!0);var n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,h=e.program;h.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,h);var a=this.getSignature(t,h),l=t.glVertexArrayObjects[this.CONTEXT_UID],u=l[a];if(u)return l[h.id]=u,u;var c=t.buffers,f=t.attributes,p={},g={};for(var v in c)p[v]=0,g[v]=0;for(var v in f)!f[v].size&&h.attributeData[v]?f[v].size=h.attributeData[v].size:f[v].size||console.warn("PIXI Geometry attribute '"+v+"' size cannot be determined (likely the bound shader does not have the attribute)"),p[f[v].buffer]+=f[v].size*qg[f[v].type];for(var v in f){var y=f[v],x=y.size;y.stride===void 0&&(p[y.buffer]===x*qg[y.type]?y.stride=0:y.stride=p[y.buffer]),y.start===void 0&&(y.start=g[y.buffer],g[y.buffer]+=x*qg[y.type])}u=n.createVertexArray(),n.bindVertexArray(u);for(var _=0;_<c.length;_++){var b=c[_];o.bind(b),r&&b._glBuffers[s].refCount++}return this.activateVao(t,h),this._activeVao=u,l[h.id]=u,l[a]=u,u},i.prototype.disposeGeometry=function(t,e){var r;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,o=t.buffers,h=(r=this.renderer)===null||r===void 0?void 0:r.buffer;if(t.disposeRunner.remove(this),!!n){if(h)for(var a=0;a<o.length;a++){var l=o[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&h.dispose(o[a],e))}if(!e){for(var u in n)if(u[0]==="g"){var c=n[u];this._activeVao===c&&this.unbind(),s.deleteVertexArray(c)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},i.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t)},i.prototype.activateVao=function(t,e){var r=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,h=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var a=null;for(var l in h){var u=h[l],c=o[u.buffer],f=c._glBuffers[n];if(e.attributeData[l]){a!==f&&(s.bind(c),a=f);var p=e.attributeData[l].location;if(r.enableVertexAttribArray(p),r.vertexAttribPointer(p,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)r.vertexAttribDivisor(p,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},i.prototype.draw=function(t,e,r,n){var s=this.gl,o=this._activeGeometry;if(o.indexBuffer){var h=o.indexBuffer.data.BYTES_PER_ELEMENT,a=h===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;h===2||h===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(r||0)*h,n||1):s.drawElements(t,e||o.indexBuffer.data.length,a,(r||0)*h):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,r,e||o.getSize(),n||1):s.drawArrays(t,r,e||o.getSize());return this},i.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},i.prototype.destroy=function(){this.renderer=null},i}(),xO=function(){function i(t){t===void 0&&(t=null),this.type=Rr.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ht.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(i.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Rr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},i.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},i}();function EE(i,t,e){var r=i.createShader(t);return i.shaderSource(r,e),i.compileShader(r),r}function TE(i,t){var e=i.getShaderSource(t).split(`
`).map(function(l,u){return u+": "+l}),r=i.getShaderInfoLog(t),n=r.split(`
`),s={},o=n.map(function(l){return parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(l){return l&&!s[l]?(s[l]=!0,!0):!1}),h=[""];o.forEach(function(l){e[l-1]="%c"+e[l-1]+"%c",h.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var a=e.join(`
`);h[0]=a,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,h),console.groupEnd()}function wO(i,t,e,r){i.getProgramParameter(t,i.LINK_STATUS)||(i.getShaderParameter(e,i.COMPILE_STATUS)||TE(i,e),i.getShaderParameter(r,i.COMPILE_STATUS)||TE(i,r),console.error("PixiJS Error: Could not initialize shader."),i.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(t)))}function Kg(i){for(var t=new Array(i),e=0;e<t.length;e++)t[e]=!1;return t}function hC(i,t){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Kg(2*t);case"bvec3":return Kg(3*t);case"bvec4":return Kg(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var uC={},Uh=uC;function _O(){if(Uh===uC||Uh&&Uh.isContextLost()){var i=Ht.ADAPTER.createCanvas(),t=void 0;Ht.PREFER_ENV>=Ks.WEBGL2&&(t=i.getContext("webgl2",{})),t||(t=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Uh=t}return Uh}var ud;function bO(){if(!ud){ud=Jn.MEDIUM;var i=_O();if(i&&i.getShaderPrecisionFormat){var t=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);ud=t.precision?Jn.HIGH:Jn.MEDIUM}}return ud}function SE(i,t,e){if(i.substring(0,9)!=="precision"){var r=t;return t===Jn.HIGH&&e!==Jn.HIGH&&(r=Jn.MEDIUM),"precision "+r+` float;
`+i}else if(e!==Jn.HIGH&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}var EO={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function cC(i){return EO[i]}var cd=null,AE={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function dC(i,t){if(!cd){var e=Object.keys(AE);cd={};for(var r=0;r<e.length;++r){var n=e[r];cd[i[n]]=AE[n]}}return cd[t]}var Vl=[{test:function(i){return i.type==="float"&&i.size===1&&!i.isArray},code:function(i){return`
            if(uv["`+i+'"] !== ud["'+i+`"].value)
            {
                ud["`+i+'"].value = uv["'+i+`"]
                gl.uniform1f(ud["`+i+'"].location, uv["'+i+`"])
            }
            `}},{test:function(i,t){return(i.type==="sampler2D"||i.type==="samplerCube"||i.type==="sampler2DArray")&&i.size===1&&!i.isArray&&(t==null||t.castToBaseTexture!==void 0)},code:function(i){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+i+`"], t);

            if(ud["`+i+`"].value !== t)
            {
                ud["`+i+`"].value = t;
                gl.uniform1i(ud["`+i+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(i,t){return i.type==="mat3"&&i.size===1&&!i.isArray&&t.a!==void 0},code:function(i){return`
            gl.uniformMatrix3fv(ud["`+i+'"].location, false, uv["'+i+`"].toArray(true));
            `},codeUbo:function(i){return`
                var `+i+"_matrix = uv."+i+`.toArray(true);

                data[offset] = `+i+`_matrix[0];
                data[offset+1] = `+i+`_matrix[1];
                data[offset+2] = `+i+`_matrix[2];
        
                data[offset + 4] = `+i+`_matrix[3];
                data[offset + 5] = `+i+`_matrix[4];
                data[offset + 6] = `+i+`_matrix[5];
        
                data[offset + 8] = `+i+`_matrix[6];
                data[offset + 9] = `+i+`_matrix[7];
                data[offset + 10] = `+i+`_matrix[8];
            `}},{test:function(i,t){return i.type==="vec2"&&i.size===1&&!i.isArray&&t.x!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+i+`"].location, v.x, v.y);
                }`},codeUbo:function(i){return`
                v = uv.`+i+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(i){return i.type==="vec2"&&i.size===1&&!i.isArray},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+i+`"].location, v[0], v[1]);
                }
            `}},{test:function(i,t){return i.type==="vec4"&&i.size===1&&!i.isArray&&t.width!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+i+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(i){return`
                    v = uv.`+i+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(i){return i.type==="vec4"&&i.size===1&&!i.isArray},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+i+`"].location, v[0], v[1], v[2], v[3])
                }`}}],TO={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},SO={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function AO(i,t){var e,r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var n in i.uniforms){var s=t[n];if(!s){!((e=i.uniforms[n])===null||e===void 0)&&e.group&&(i.uniforms[n].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+n+", '"+n+`');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.`+n+`, syncData);
                    `));continue}for(var o=i.uniforms[n],h=!1,a=0;a<Vl.length;a++)if(Vl[a].test(s,o)){r.push(Vl[a].code(n,o)),h=!0;break}if(!h){var l=s.size===1&&!s.isArray?TO:SO,u=l[s.type].replace("location",'ud["'+n+'"].location');r.push(`
            cu = ud["`+n+`"];
            cv = cu.value;
            v = uv["`+n+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}var CO=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function IO(i){for(var t="",e=0;e<i;++e)e>0&&(t+=`
else `),e<i-1&&(t+="if(test == "+e+".0){}");return t}function RO(i,t){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var r=CO.replace(/%forloop%/gi,IO(i));if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))i=i/2|0;else break}return i}var Vh;function MO(){if(typeof Vh=="boolean")return Vh;try{var i=new Function("param1","param2","param3","return param1[param2] === param3;");Vh=i({a:"b"},"a","b")===!0}catch{Vh=!1}return Vh}var PO=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,kO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,FO=0,dd={},Mf=function(){function i(t,e,r){r===void 0&&(r="pixi-shader"),this.id=FO++,this.vertexSrc=t||i.defaultVertexSrc,this.fragmentSrc=e||i.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),dd[r]?(dd[r]++,r+="-"+dd[r]):dd[r]=1,this.vertexSrc="#define SHADER_NAME "+r+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+`
`+this.fragmentSrc,this.vertexSrc=SE(this.vertexSrc,Ht.PRECISION_VERTEX,Jn.HIGH),this.fragmentSrc=SE(this.fragmentSrc,Ht.PRECISION_FRAGMENT,bO())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(i,"defaultVertexSrc",{get:function(){return kO},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentSrc",{get:function(){return PO},enumerable:!1,configurable:!0}),i.from=function(t,e,r){var n=t+e,s=gE[n];return s||(gE[n]=s=new i(t,e,r)),s},i}(),Pf=function(){function i(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Oo?this.uniformGroup=e:this.uniformGroup=new Oo(e):this.uniformGroup=new Oo({}),this.disposeRunner=new en("disposeShader")}return i.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){var n=e.uniforms[r];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},i.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(i.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),i.from=function(t,e,r){var n=Mf.from(t,e);return new i(n,r)},i}(),Zg=0,Qg=1,Jg=2,tv=3,ev=4,rv=5,Au=function(){function i(){this.data=0,this.blendMode=Yt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(i.prototype,"blend",{get:function(){return!!(this.data&1<<Zg)},set:function(t){!!(this.data&1<<Zg)!==t&&(this.data^=1<<Zg)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsets",{get:function(){return!!(this.data&1<<Qg)},set:function(t){!!(this.data&1<<Qg)!==t&&(this.data^=1<<Qg)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"culling",{get:function(){return!!(this.data&1<<Jg)},set:function(t){!!(this.data&1<<Jg)!==t&&(this.data^=1<<Jg)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depthTest",{get:function(){return!!(this.data&1<<tv)},set:function(t){!!(this.data&1<<tv)!==t&&(this.data^=1<<tv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depthMask",{get:function(){return!!(this.data&1<<rv)},set:function(t){!!(this.data&1<<rv)!==t&&(this.data^=1<<rv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<ev)},set:function(t){!!(this.data&1<<ev)!==t&&(this.data^=1<<ev)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==Yt.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),i.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},i.for2d=function(){var t=new i;return t.depthTest=!1,t.blend=!0,t},i}(),BO=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,NO=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,OO=function(i){$e(t,i);function t(e,r,n){var s=this,o=Mf.from(e||t.defaultVertexSrc,r||t.defaultFragmentSrc);return s=i.call(this,o,n)||this,s.padding=0,s.resolution=Ht.FILTER_RESOLUTION,s.multisample=Ht.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new Au,s}return t.prototype.apply=function(e,r,n,s,o){e.applyFilter(this,r,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return NO},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return BO},enumerable:!1,configurable:!0}),t}(Pf),DO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,LO=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,CE=new dn,fC=function(){function i(t,e){this._texture=t,this.mapCoord=new dn,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),i.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var r=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],o=t[n+1];e[n]=s*r.a+o*r.c+r.tx,e[n+1]=s*r.b+o*r.d+r.ty}return e},i.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=e.orig,s=e.trim;s&&(CE.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(CE));var o=e.baseTexture,h=this.uClampFrame,a=this.clampMargin/o.resolution,l=this.clampOffset;return h[0]=(e._frame.x+a+l)/o.width,h[1]=(e._frame.y+a+l)/o.height,h[2]=(e._frame.x+e._frame.width-a+l)/o.width,h[3]=(e._frame.y+e._frame.height-a+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0},i}(),UO=function(i){$e(t,i);function t(e,r,n){var s=this,o=null;return typeof e!="string"&&r===void 0&&n===void 0&&(o=e,e=void 0,r=void 0,n=void 0),s=i.call(this,e||DO,r||LO,n)||this,s.maskSprite=o,s.maskMatrix=new dn,s}return Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(e,r,n,s){var o=this._maskSprite,h=o._texture;h.valid&&(h.uvMatrix||(h.uvMatrix=new fC(h,0)),h.uvMatrix.update(),this.uniforms.npmAlpha=h.baseTexture.alphaMode?0:1,this.uniforms.mask=h,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,o).prepend(h.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=h.uvMatrix.uClampFrame,e.applyFilter(this,r,n,s))},t}(OO),VO=function(){function i(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return i.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},i.prototype.push=function(t,e){var r=e;if(!r.isMaskData){var n=this.maskDataPool.pop()||new xO;n.pooled=!0,n.maskObject=e,r=n}var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(s),r._colorMask=s?s._colorMask:15,r.autoDetect&&this.detect(r),r._target=t,r.type!==Rr.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Rr.SCISSOR:this.renderer.scissor.push(r);break;case Rr.STENCIL:this.renderer.stencil.push(r);break;case Rr.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Rr.COLOR:this.pushColorMask(r);break}r.type===Rr.SPRITE&&this.maskStack.push(r)},i.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case Rr.SCISSOR:this.renderer.scissor.pop(e);break;case Rr.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Rr.SPRITE:this.popSpriteMask(e);break;case Rr.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){var r=this.maskStack[this.maskStack.length-1];r.type===Rr.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}},i.prototype.detect=function(t){var e=t.maskObject;e?e.isSprite?t.type=Rr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Rr.SCISSOR:t.type=Rr.STENCIL:t.type=Rr.COLOR},i.prototype.pushSpriteMask=function(t){var e,r,n=t.maskObject,s=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex],o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new UO]));var h=this.renderer,a=h.renderTexture,l,u;if(a.current){var c=a.current;l=t.resolution||c.resolution,u=(e=t.multisample)!==null&&e!==void 0?e:c.multisample}else l=t.resolution||h.resolution,u=(r=t.multisample)!==null&&r!==void 0?r:h.multisample;o[0].resolution=l,o[0].multisample=u,o[0].maskSprite=n;var f=s.filterArea;s.filterArea=n.getBounds(!0),h.filter.push(s,o),s.filterArea=f,t._filters||this.alphaMaskIndex++},i.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},i.prototype.pushColorMask=function(t){var e=t._colorMask,r=t._colorMask=e&t.colorMask;r!==e&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)},i.prototype.popColorMask=function(t){var e=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)},i.prototype.destroy=function(){this.renderer=null},i}(),pC=function(){function i(t){this.renderer=t,this.maskStack=[],this.glConst=0}return i.prototype.getStackLength=function(){return this.maskStack.length},i.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==r&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},i.prototype._useCurrent=function(){},i.prototype.destroy=function(){this.renderer=null,this.maskStack=null},i}(),IE=new dn,RE=[],XO=function(i){$e(t,i);function t(e){var r=i.call(this,e)||this;return r.glConst=Ht.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,r}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.calcScissorRect=function(e){var r;if(!e._scissorRectLocal){var n=e._scissorRect,s=e.maskObject,o=this.renderer,h=o.renderTexture,a=s.getBounds(!0,(r=RE.pop())!==null&&r!==void 0?r:new je);this.roundFrameToPixels(a,h.current?h.current.resolution:o.resolution,h.sourceFrame,h.destinationFrame,o.projection.transform),n&&a.fit(n),e._scissorRectLocal=a}},t.isMatrixRotated=function(e){if(!e)return!1;var r=e.a,n=e.b,s=e.c,o=e.d;return(Math.abs(n)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(o)>1e-4)},t.prototype.testScissor=function(e){var r=e.maskObject;if(!r.isFastRect||!r.isFastRect()||t.isMatrixRotated(r.worldTransform)||t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var n=e._scissorRectLocal;return n.width>0&&n.height>0},t.prototype.roundFrameToPixels=function(e,r,n,s,o){t.isMatrixRotated(o)||(o=o?IE.copyFrom(o):IE.identity(),o.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.renderer.filter.transformAABB(o,e),e.fit(s),e.x=Math.round(e.x*r),e.y=Math.round(e.y*r),e.width=Math.round(e.width*r),e.height=Math.round(e.height*r))},t.prototype.push=function(e){e._scissorRectLocal||this.calcScissorRect(e);var r=this.renderer.gl;e._scissorRect||r.enable(r.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(e){var r=this.renderer.gl;e&&RE.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,r;this.renderer.renderTexture.current?r=e.y:r=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,r,e.width,e.height)},t}(pC),GO=function(i){$e(t,i);function t(e){var r=i.call(this,e)||this;return r.glConst=Ht.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,r}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var r=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;var o=e._colorMask;o!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,s,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,o!==0&&(e._colorMask=o,n.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()},t.prototype.pop=function(e){var r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{var n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=n?n._colorMask:15;s!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(n._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t}(pC),YO=function(){function i(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new dn,this.transform=null}return i.prototype.update=function(t,e,r,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},i.prototype.calculateProjection=function(t,e,r,n){var s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=o*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-o-e.y*s.d},i.prototype.setTransform=function(t){},i.prototype.destroy=function(){this.renderer=null},i}(),uo=new je,Xh=new je,$O=function(){function i(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new je,this.destinationFrame=new je,this.viewportFrame=new je}return i.prototype.bind=function(t,e,r){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,o,h;t?(s=t.baseTexture,h=s.resolution,e||(uo.width=t.frame.width,uo.height=t.frame.height,e=uo),r||(Xh.x=t.frame.x,Xh.y=t.frame.y,Xh.width=e.width,Xh.height=e.height,r=Xh),o=s.framebuffer):(h=n.resolution,e||(uo.width=n.screen.width,uo.height=n.screen.height,e=uo),r||(r=uo,r.width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*h,a.y=r.y*h,a.width=r.width*h,a.height=r.height*h,t||(a.y=n.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(o,a),this.renderer.projection.update(r,e,h,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},i.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var r=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=r.width!==n.width||r.height!==n.height;if(s){var o=this.viewportFrame,h=o.x,a=o.y,l=o.width,u=o.height;h=Math.round(h),a=Math.round(a),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(h,a,l,u)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},i.prototype.resize=function(){this.bind(null)},i.prototype.reset=function(){this.bind(null)},i.prototype.destroy=function(){this.renderer=null},i}();function WO(i,t,e,r,n){e.buffer.update(n)}var HO={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},mC={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function zO(i){for(var t=i.map(function(a){return{data:a,offset:0,dataLen:0,dirty:0}}),e=0,r=0,n=0,s=0;s<t.length;s++){var o=t[s];if(e=mC[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,r%e!==0&&r<16){var h=r%e%16;r+=h,n+=h}r+e>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=e,r=e):(o.offset=n,r+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function jO(i,t){var e=[];for(var r in i)t[r]&&e.push(t[r]);return e.sort(function(n,s){return n.index-s.index}),e}function qO(i,t){if(!i.autoManage)return{size:0,syncFunc:WO};for(var e=jO(i.uniforms,t),r=zO(e),n=r.uboElements,s=r.size,o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],h=0;h<n.length;h++){for(var a=n[h],l=i.uniforms[a.data.name],u=a.data.name,c=!1,f=0;f<Vl.length;f++){var p=Vl[f];if(p.codeUbo&&p.test(a.data,l)){o.push("offset = "+a.offset/4+";",Vl[f].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){var g=cC(a.data.type),v=Math.max(mC[a.data.type]/16,1),y=g/v,x=(4-y%4)%4;o.push(`
                cv = ud.`+u+`.value;
                v = uv.`+u+`;
                offset = `+a.offset/4+`;

                t = 0;

                for(var i=0; i < `+a.data.size*v+`; i++)
                {
                    for(var j = 0; j < `+y+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+x+`;
                }

                `)}else{var _=HO[a.data.type];o.push(`
                cv = ud.`+u+`.value;
                v = uv.`+u+`;
                offset = `+a.offset/4+`;
                `+_+`;
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var KO=function(){function i(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return i.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},i}();function ZO(i,t){for(var e={},r=t.getProgramParameter(i,t.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var s=t.getActiveAttrib(i,n);if(s.name.indexOf("gl_")!==0){var o=dC(t,s.type),h={type:o,name:s.name,size:cC(o),location:t.getAttribLocation(i,s.name)};e[s.name]=h}}return e}function QO(i,t){for(var e={},r=t.getProgramParameter(i,t.ACTIVE_UNIFORMS),n=0;n<r;n++){var s=t.getActiveUniform(i,n),o=s.name.replace(/\[.*?\]$/,""),h=!!s.name.match(/\[.*?\]$/),a=dC(t,s.type);e[o]={name:o,index:n,type:a,size:s.size,isArray:h,value:hC(a,s.size)}}return e}function JO(i,t){var e=EE(i,i.VERTEX_SHADER,t.vertexSrc),r=EE(i,i.FRAGMENT_SHADER,t.fragmentSrc),n=i.createProgram();if(i.attachShader(n,e),i.attachShader(n,r),i.linkProgram(n),i.getProgramParameter(n,i.LINK_STATUS)||wO(i,n,e,r),t.attributeData=ZO(n,i),t.uniformData=QO(n,i),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var s=Object.keys(t.attributeData);s.sort(function(u,c){return u>c?1:-1});for(var o=0;o<s.length;o++)t.attributeData[s[o]].location=o,i.bindAttribLocation(n,o,s[o]);i.linkProgram(n)}i.deleteShader(e),i.deleteShader(r);var h={};for(var o in t.uniformData){var a=t.uniformData[o];h[o]={location:i.getUniformLocation(n,o),value:hC(a.type,a.size)}}var l=new KO(n,h);return l}var tD=0,fd={textureCount:0,uboCount:0},eD=function(){function i(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=tD++}return i.prototype.systemCheck=function(){if(!MO())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},i.prototype.contextChange=function(t){this.gl=t,this.reset()},i.prototype.bind=function(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),e||(fd.textureCount=0,fd.uboCount=0,this.syncUniformGroup(t.uniformGroup,fd)),n},i.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},i.prototype.syncUniformGroup=function(t,e){var r=this.getGlProgram();(!t.static||t.dirtyId!==r.uniformDirtyGroups[t.id])&&(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},i.prototype.syncUniforms=function(t,e,r){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,r)},i.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=AO(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},i.prototype.syncUniformBufferGroup=function(t,e){var r=this.getGlProgram();if(!t.static||t.dirtyId!==0||!r.uniformGroups[t.id]){t.dirtyId=0;var n=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e);t.buffer.update(),n(r.uniformData,t.uniforms,this.renderer,fd,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])},i.prototype.createSyncBufferGroup=function(t,e,r){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,r);e.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),h=this._uboCache[o];if(h||(h=this._uboCache[o]=qO(t,this.shader.program.uniformData)),t.autoManage){var a=new Float32Array(h.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=h.syncFunc,e.uniformGroups[t.id]},i.prototype.getSignature=function(t,e,r){var n=t.uniforms,s=[r+"-"];for(var o in n)s.push(o),e[o]&&s.push(e[o].type);return s.join("-")},i.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},i.prototype.generateProgram=function(t){var e=this.gl,r=t.program,n=JO(e,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n},i.prototype.reset=function(){this.program=null,this.shader=null},i.prototype.disposeShader=function(t){this.shader===t&&(this.shader=null)},i.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},i}();function rD(i,t){return t===void 0&&(t=[]),t[Yt.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.ADD]=[i.ONE,i.ONE],t[Yt.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.NONE]=[0,0],t[Yt.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],t[Yt.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[Yt.SRC_IN]=[i.DST_ALPHA,i.ZERO],t[Yt.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],t[Yt.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],t[Yt.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],t[Yt.DST_IN]=[i.ZERO,i.SRC_ALPHA],t[Yt.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],t[Yt.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],t[Yt.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],t[Yt.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],t}var nD=0,iD=1,sD=2,aD=3,oD=4,lD=5,hD=function(){function i(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Yt.NONE,this._blendEq=!1,this.map=[],this.map[nD]=this.setBlend,this.map[iD]=this.setOffset,this.map[sD]=this.setCullFace,this.map[aD]=this.setDepthTest,this.map[oD]=this.setFrontFace,this.map[lD]=this.setDepthMask,this.checks=[],this.defaultState=new Au,this.defaultState.blend=!0}return i.prototype.contextChange=function(t){this.gl=t,this.blendModes=rD(t),this.set(this.defaultState),this.reset()},i.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)e&1&&this.map[r].call(this,!!(t.data&1<<r)),e=e>>1,r++;this.stateId=t.data}for(var r=0;r<this.checks.length;r++)this.checks[r](this,t)},i.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},i.prototype.setBlend=function(t){this.updateCheck(i.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},i.prototype.setOffset=function(t){this.updateCheck(i.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},i.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},i.prototype.setDepthMask=function(t){this.gl.depthMask(t)},i.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},i.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},i.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],r=this.gl;e.length===2?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},i.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},i.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},i.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&r===-1?this.checks.push(t):!e&&r!==-1&&this.checks.splice(r,1)},i.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},i.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},i.prototype.destroy=function(){this.gl=null},i}(),uD=function(){function i(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Ht.GC_MAX_IDLE,this.checkCountMax=Ht.GC_MAX_CHECK_COUNT,this.mode=Ht.GC_MODE}return i.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Qd.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},i.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,r=!0)}if(r){for(var o=0,n=0;n<e.length;n++)e[n]!==null&&(e[o++]=e[n]);e.length=o}},i.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},i.prototype.destroy=function(){this.renderer=null},i}();function cD(i){var t,e,r,n,s,o,h,a,l,u,c,f,p,g,v,y,x,_,b,E,T,S,C;return"WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext?C=(t={},t[Se.UNSIGNED_BYTE]=(e={},e[kt.RGBA]=i.RGBA8,e[kt.RGB]=i.RGB8,e[kt.RG]=i.RG8,e[kt.RED]=i.R8,e[kt.RGBA_INTEGER]=i.RGBA8UI,e[kt.RGB_INTEGER]=i.RGB8UI,e[kt.RG_INTEGER]=i.RG8UI,e[kt.RED_INTEGER]=i.R8UI,e[kt.ALPHA]=i.ALPHA,e[kt.LUMINANCE]=i.LUMINANCE,e[kt.LUMINANCE_ALPHA]=i.LUMINANCE_ALPHA,e),t[Se.BYTE]=(r={},r[kt.RGBA]=i.RGBA8_SNORM,r[kt.RGB]=i.RGB8_SNORM,r[kt.RG]=i.RG8_SNORM,r[kt.RED]=i.R8_SNORM,r[kt.RGBA_INTEGER]=i.RGBA8I,r[kt.RGB_INTEGER]=i.RGB8I,r[kt.RG_INTEGER]=i.RG8I,r[kt.RED_INTEGER]=i.R8I,r),t[Se.UNSIGNED_SHORT]=(n={},n[kt.RGBA_INTEGER]=i.RGBA16UI,n[kt.RGB_INTEGER]=i.RGB16UI,n[kt.RG_INTEGER]=i.RG16UI,n[kt.RED_INTEGER]=i.R16UI,n[kt.DEPTH_COMPONENT]=i.DEPTH_COMPONENT16,n),t[Se.SHORT]=(s={},s[kt.RGBA_INTEGER]=i.RGBA16I,s[kt.RGB_INTEGER]=i.RGB16I,s[kt.RG_INTEGER]=i.RG16I,s[kt.RED_INTEGER]=i.R16I,s),t[Se.UNSIGNED_INT]=(o={},o[kt.RGBA_INTEGER]=i.RGBA32UI,o[kt.RGB_INTEGER]=i.RGB32UI,o[kt.RG_INTEGER]=i.RG32UI,o[kt.RED_INTEGER]=i.R32UI,o[kt.DEPTH_COMPONENT]=i.DEPTH_COMPONENT24,o),t[Se.INT]=(h={},h[kt.RGBA_INTEGER]=i.RGBA32I,h[kt.RGB_INTEGER]=i.RGB32I,h[kt.RG_INTEGER]=i.RG32I,h[kt.RED_INTEGER]=i.R32I,h),t[Se.FLOAT]=(a={},a[kt.RGBA]=i.RGBA32F,a[kt.RGB]=i.RGB32F,a[kt.RG]=i.RG32F,a[kt.RED]=i.R32F,a[kt.DEPTH_COMPONENT]=i.DEPTH_COMPONENT32F,a),t[Se.HALF_FLOAT]=(l={},l[kt.RGBA]=i.RGBA16F,l[kt.RGB]=i.RGB16F,l[kt.RG]=i.RG16F,l[kt.RED]=i.R16F,l),t[Se.UNSIGNED_SHORT_5_6_5]=(u={},u[kt.RGB]=i.RGB565,u),t[Se.UNSIGNED_SHORT_4_4_4_4]=(c={},c[kt.RGBA]=i.RGBA4,c),t[Se.UNSIGNED_SHORT_5_5_5_1]=(f={},f[kt.RGBA]=i.RGB5_A1,f),t[Se.UNSIGNED_INT_2_10_10_10_REV]=(p={},p[kt.RGBA]=i.RGB10_A2,p[kt.RGBA_INTEGER]=i.RGB10_A2UI,p),t[Se.UNSIGNED_INT_10F_11F_11F_REV]=(g={},g[kt.RGB]=i.R11F_G11F_B10F,g),t[Se.UNSIGNED_INT_5_9_9_9_REV]=(v={},v[kt.RGB]=i.RGB9_E5,v),t[Se.UNSIGNED_INT_24_8]=(y={},y[kt.DEPTH_STENCIL]=i.DEPTH24_STENCIL8,y),t[Se.FLOAT_32_UNSIGNED_INT_24_8_REV]=(x={},x[kt.DEPTH_STENCIL]=i.DEPTH32F_STENCIL8,x),t):C=(_={},_[Se.UNSIGNED_BYTE]=(b={},b[kt.RGBA]=i.RGBA,b[kt.RGB]=i.RGB,b[kt.ALPHA]=i.ALPHA,b[kt.LUMINANCE]=i.LUMINANCE,b[kt.LUMINANCE_ALPHA]=i.LUMINANCE_ALPHA,b),_[Se.UNSIGNED_SHORT_5_6_5]=(E={},E[kt.RGB]=i.RGB,E),_[Se.UNSIGNED_SHORT_4_4_4_4]=(T={},T[kt.RGBA]=i.RGBA,T),_[Se.UNSIGNED_SHORT_5_5_5_1]=(S={},S[kt.RGBA]=i.RGBA,S),_),C}var nv=function(){function i(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Se.UNSIGNED_BYTE,this.internalFormat=kt.RGBA,this.samplerType=0}return i}(),dD=function(){function i(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new wr,this.hasIntegerTextures=!1}return i.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=cD(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var n=new nv(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new nv(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var r=0;r<this.boundTextures.length;r++)this.bind(null,r)},i.prototype.bind=function(t,e){e===void 0&&(e=0);var r=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null},i.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},i.prototype.unbind=function(t){var e=this,r=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(r.activeTexture(r.TEXTURE0+s),this.currentLocation=s),r.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},i.prototype.ensureSamplerType=function(t){var e=this,r=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var o=t-1;o>=0;--o){var h=r[o];if(h){var a=h._glTextures[s];a.samplerType!==Zd.FLOAT&&this.renderer.texture.unbind(h)}}},i.prototype.initTexture=function(t){var e=new nv(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},i.prototype.initTextureType=function(t,e){var r,n;e.internalFormat=(n=(r=this.internalFormats[t.type])===null||r===void 0?void 0:r[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Se.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},i.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var r=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(r,t,e))e.samplerType!==Zd.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,o=r.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,o.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},i.prototype.destroyTexture=function(t,e){var r=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&Rd(this.managedTextures,n,1)}},i.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Va.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Vo.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},i.prototype.setStyle=function(t,e){var r=this.gl;if(e.mipmap&&t.mipmap!==Va.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===ps.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===ps.LINEAR){var s=Math.min(t.anisotropicLevel,r.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===ps.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===ps.LINEAR?r.LINEAR:r.NEAREST)},i.prototype.destroy=function(){this.renderer=null},i}(),iv=new dn,fD=function(i){$e(t,i);function t(e,r){e===void 0&&(e=fu.UNKNOWN);var n=i.call(this)||this;return r=Object.assign({},Ht.RENDER_OPTIONS,r),n.options=r,n.type=e,n.screen=new je(0,0,r.width,r.height),n.view=r.view||Ht.ADAPTER.createCanvas(),n.resolution=r.resolution||Ht.RESOLUTION,n.useContextAlpha=r.useContextAlpha,n.autoDensity=!!r.autoDensity,n.preserveDrawingBuffer=r.preserveDrawingBuffer,n.clearBeforeRender=r.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=r.backgroundColor||n._backgroundColor,n.backgroundAlpha=r.backgroundAlpha,r.transparent!==void 0&&(Ul("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=r.transparent,n.backgroundAlpha=r.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var r in e)this.plugins[r]=new e[r](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,r){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(r*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,r,n,s){r===void 0&&(r={}),typeof r=="number"&&(Ul("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),r={scaleMode:r,resolution:n,region:s});var o=r.region,h=zN(r,["region"]);s=o||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var a=$0.create(py({width:s.width,height:s.height},h));return iv.tx=-s.x,iv.ty=-s.y,this.render(e,{renderTexture:a,clear:!1,transform:iv,skipUpdateTransform:!!e.parent}),a},t.prototype.destroy=function(e){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=fu.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=NN(e),Jd(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(If),pD=function(){function i(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return i}(),mD=function(){function i(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return i.prototype.destroy=function(){this.renderer=null},i.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},i.prototype.bind=function(t){var e=this,r=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);r.bindBuffer(t.type,s.buffer)},i.prototype.bindBufferBase=function(t,e){var r=this,n=r.gl,s=r.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var o=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,o.buffer)}},i.prototype.bindBufferRange=function(t,e,r){var n=this,s=n.gl,o=n.CONTEXT_UID;r=r||0;var h=t._glBuffers[o]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,h.buffer,r*256,256)},i.prototype.update=function(t){var e=this,r=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,r.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)r.bufferSubData(t.type,0,t.data);else{var o=t.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,r.bufferData(t.type,t.data,o)}},i.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var r=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),r&&(e||n.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}},i.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.dispose(this.managedBuffers[e[r]],t)},i.prototype.createGLBuffer=function(t){var e=this,r=e.CONTEXT_UID,n=e.gl;return t._glBuffers[r]=new pD(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[r]},i}(),gD=function(i){$e(t,i);function t(e){var r=i.call(this,fu.WEBGL,e)||this;return e=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new en("destroy"),contextChange:new en("contextChange"),reset:new en("reset"),update:new en("update"),postrender:new en("postrender"),prerender:new en("prerender"),resize:new en("resize")},r.runners.contextChange.add(r),r.globalUniforms=new Oo({projectionMatrix:new dn},!0),r.addSystem(VO,"mask").addSystem(pO,"context").addSystem(hD,"state").addSystem(eD,"shader").addSystem(dD,"texture").addSystem(mD,"buffer").addSystem(yO,"geometry").addSystem(vO,"framebuffer").addSystem(XO,"scissor").addSystem(GO,"stencil").addSystem(YO,"projection").addSystem(uD,"textureGC").addSystem(dO,"filter").addSystem($O,"renderTexture").addSystem(fO,"batch"),r.initPlugins(t.__plugins),r.multisample=void 0,e.context?r.context.initFromContext(e.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:e.antialias,premultipliedAlpha:r.useContextAlpha&&r.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,FN(r.context.webGLVersion===2?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return t.create=function(e){if(BN())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,r;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}r>=_r.HIGH?this.multisample=_r.HIGH:r>=_r.MEDIUM?this.multisample=_r.MEDIUM:r>=_r.LOW?this.multisample=_r.LOW:this.multisample=_r.NONE},t.prototype.addSystem=function(e,r){var n=new e(this);if(this[r])throw new Error('Whoops! The name "'+r+'" is already in use');this[r]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,r){var n,s,o,h;if(r&&(r instanceof $0?(Ul("6.0.0","Renderer#render arguments changed, use options instead."),n=r,s=arguments[2],o=arguments[3],h=arguments[4]):(n=r.renderTexture,s=r.clear,o=r.transform,h=r.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(n||(this._lastObjectRendered=e),!h){var a=e.enableTempParent();e.updateTransform(),e.disableTempParent(a)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,r,n,s){r===void 0&&(r={});var o=i.prototype.generateTexture.call(this,e,r,n,s);return this.framebuffer.blit(),o},t.prototype.resize=function(e,r){i.prototype.resize.call(this,e,r),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var r in this.runners)this.runners[r].destroy();i.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return Ul("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,r){Ul("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),tC.add({name:e,type:Xo.RendererPlugin,ref:r})},t.__plugins={},t}(fD);tC.handleByMap(Xo.RendererPlugin,gD.__plugins);var gy=function(){function i(){this.texArray=null,this.blend=0,this.type=yi.TRIANGLES,this.start=0,this.size=0,this.data=null}return i}(),vy=function(){function i(){this.elements=[],this.ids=[],this.count=0}return i.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},i}(),vD=function(){function i(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(i.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),i.prototype.view=function(t){return this[t+"View"]},i.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},i.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},i}(),yD=function(i){$e(t,i);function t(e){var r=i.call(this,e)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=Au.for2d(),r.size=Ht.SPRITE_BATCH_SIZE*4,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),e.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return t.prototype.contextChange=function(){var e=this.renderer.gl;Ht.PREFER_ENV===Ks.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Ht.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=RO(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,r=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new gy);for(;r.length<s;)r.push(new vy);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,r=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,o=this.renderer.batch,h=this._tempBoundTextures,a=this.renderer.textureGC.count,l=++wr._globalBatch,u=0,c=s[0],f=0;o.copyBoundTextures(h,n);for(var p=0;p<this._bufferSize;++p){var g=r[p];r[p]=null,g._batchEnabled!==l&&(c.count>=n&&(o.boundArray(c,h,l,n),this.buildDrawCalls(c,f,p),f=p,c=s[++u],++l),g._batchEnabled=l,g.touched=a,c.elements[c.count++]=g)}c.count>0&&(o.boundArray(c,h,l,n),this.buildDrawCalls(c,f,this._bufferSize),++u,++l);for(var p=0;p<h.length;p++)h[p]=null;wr._globalBatch=l},t.prototype.buildDrawCalls=function(e,r,n){var s=this,o=s._bufferedElements,h=s._attributeBuffer,a=s._indexBuffer,l=s.vertexSize,u=t._drawCallPool,c=this._dcIndex,f=this._aIndex,p=this._iIndex,g=u[c];g.start=this._iIndex,g.texArray=e;for(var v=r;v<n;++v){var y=o[v],x=y._texture.baseTexture,_=DN[x.alphaMode?1:0][y.blendMode];o[v]=null,r<v&&g.blend!==_&&(g.size=p-g.start,r=v,g=u[++c],g.texArray=e,g.start=p),this.packInterleavedGeometry(y,h,a,f,p),f+=y.vertexData.length/2*l,p+=y.indices.length,g.blend=_}r<n&&(g.size=p-g.start,++c),this._dcIndex=c,this._aIndex=f,this._iIndex=p},t.prototype.bindAndClearTexArray=function(e){for(var r=this.renderer.texture,n=0;n<e.count;n++)r.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,r=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;Ht.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,r=this.renderer,n=r.gl,s=r.state,o=t._drawCallPool,h=null,a=0;a<e;a++){var l=o[a],u=l.texArray,c=l.type,f=l.size,p=l.start,g=l.blend;h!==u&&(h=u,this.bindAndClearTexArray(u)),this.state.blendMode=g,s.set(this.state),n.drawElements(c,f,n.UNSIGNED_SHORT,p*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Ht.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var r=tf(Math.ceil(e/8)),n=pE(r),s=r*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._aBuffers[s];return o||(this._aBuffers[s]=o=new vD(s*this.vertexSize*4)),o},t.prototype.getIndexBuffer=function(e){var r=tf(Math.ceil(e/12)),n=pE(r),s=r*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._iBuffers[n];return o||(this._iBuffers[n]=o=new Uint16Array(s)),o},t.prototype.packInterleavedGeometry=function(e,r,n,s,o){for(var h=r.uint32View,a=r.float32View,l=s/this.vertexSize,u=e.uvs,c=e.indices,f=e.vertexData,p=e._texture.baseTexture._batchLocation,g=Math.min(e.worldAlpha,1),v=g<1&&e._texture.baseTexture.alphaMode?QA(e._tintRGB,g):e._tintRGB+(g*255<<24),y=0;y<f.length;y+=2)a[s++]=f[y],a[s++]=f[y+1],a[s++]=u[y],a[s++]=u[y+1],h[s++]=v,a[s++]=p;for(var y=0;y<c.length;y++)n[o++]=l+c[y]},t._drawCallPool=[],t._textureArrayPool=[],t}(lC),xD=function(){function i(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return i.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=Oo.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Mf(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new dn,default:this.defaultGroupCache[t]};return new Pf(this.programCache[t],s)},i.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var r=0;r<t;r++)r>0&&(e+=`
else `),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+r+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},i}(),gC=function(i){$e(t,i);function t(e){e===void 0&&(e=!1);var r=i.call(this)||this;return r._buffer=new cn(null,e,!1),r._indexBuffer=new cn(null,e,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,Se.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,Se.FLOAT).addAttribute("aColor",r._buffer,4,!0,Se.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,Se.FLOAT).addIndex(r._indexBuffer),r}return t}(Rf),ME=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,PE=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,wD=function(){function i(){}return i.create=function(t){var e=Object.assign({vertex:ME,fragment:PE,geometryClass:gC,vertexSize:6},t),r=e.vertex,n=e.fragment,s=e.vertexSize,o=e.geometryClass;return function(h){$e(a,h);function a(l){var u=h.call(this,l)||this;return u.shaderGenerator=new xD(r,n),u.geometryClass=o,u.vertexSize=s,u}return a}(yD)},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return ME},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentTemplate",{get:function(){return PE},enumerable:!1,configurable:!0}),i}(),_D=wD.create();Object.assign(_D,{extension:{name:"batch",type:Xo.RendererPlugin}});/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ht.SORTABLE_CHILDREN=!1;var rf=function(){function i(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?je.EMPTY:(t=t||new je(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},i.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},i.prototype.addPointMatrix=function(t,e){var r=t.a,n=t.b,s=t.c,o=t.d,h=t.tx,a=t.ty,l=r*e.x+s*e.y+h,u=n*e.x+o*e.y+a;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},i.prototype.addQuad=function(t){var e=this.minX,r=this.minY,n=this.maxX,s=this.maxY,o=t[0],h=t[1];e=o<e?o:e,r=h<r?h:r,n=o>n?o:n,s=h>s?h:s,o=t[2],h=t[3],e=o<e?o:e,r=h<r?h:r,n=o>n?o:n,s=h>s?h:s,o=t[4],h=t[5],e=o<e?o:e,r=h<r?h:r,n=o>n?o:n,s=h>s?h:s,o=t[6],h=t[7],e=o<e?o:e,r=h<r?h:r,n=o>n?o:n,s=h>s?h:s,this.minX=e,this.minY=r,this.maxX=n,this.maxY=s},i.prototype.addFrame=function(t,e,r,n,s){this.addFrameMatrix(t.worldTransform,e,r,n,s)},i.prototype.addFrameMatrix=function(t,e,r,n,s){var o=t.a,h=t.b,a=t.c,l=t.d,u=t.tx,c=t.ty,f=this.minX,p=this.minY,g=this.maxX,v=this.maxY,y=o*e+a*r+u,x=h*e+l*r+c;f=y<f?y:f,p=x<p?x:p,g=y>g?y:g,v=x>v?x:v,y=o*n+a*r+u,x=h*n+l*r+c,f=y<f?y:f,p=x<p?x:p,g=y>g?y:g,v=x>v?x:v,y=o*e+a*s+u,x=h*e+l*s+c,f=y<f?y:f,p=x<p?x:p,g=y>g?y:g,v=x>v?x:v,y=o*n+a*s+u,x=h*n+l*s+c,f=y<f?y:f,p=x<p?x:p,g=y>g?y:g,v=x>v?x:v,this.minX=f,this.minY=p,this.maxX=g,this.maxY=v},i.prototype.addVertexData=function(t,e,r){for(var n=this.minX,s=this.minY,o=this.maxX,h=this.maxY,a=e;a<r;a+=2){var l=t[a],u=t[a+1];n=l<n?l:n,s=u<s?u:s,o=l>o?l:o,h=u>h?u:h}this.minX=n,this.minY=s,this.maxX=o,this.maxY=h},i.prototype.addVertices=function(t,e,r,n){this.addVerticesMatrix(t.worldTransform,e,r,n)},i.prototype.addVerticesMatrix=function(t,e,r,n,s,o){s===void 0&&(s=0),o===void 0&&(o=s);for(var h=t.a,a=t.b,l=t.c,u=t.d,c=t.tx,f=t.ty,p=this.minX,g=this.minY,v=this.maxX,y=this.maxY,x=r;x<n;x+=2){var _=e[x],b=e[x+1],E=h*_+l*b+c,T=u*b+a*_+f;p=Math.min(p,E-s),v=Math.max(v,E+s),g=Math.min(g,T-o),y=Math.max(y,T+o)}this.minX=p,this.minY=g,this.maxX=v,this.maxY=y},i.prototype.addBounds=function(t){var e=this.minX,r=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},i.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=s&&n<=o){var h=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=r<h?r:h,this.minY=n<a?n:a,this.maxX=s>l?s:l,this.maxY=o>u?o:u}},i.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},i.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=s&&n<=o){var h=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=r<h?r:h,this.minY=n<a?n:a,this.maxX=s>l?s:l,this.maxY=o>u?o:u}},i.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},i.prototype.addFramePad=function(t,e,r,n,s,o){t-=s,e-=o,r+=s,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yy=function(i,t){return yy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},yy(i,t)};function W0(i,t){yy(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var nf=function(i){W0(t,i);function t(){var e=i.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new rC,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new rf,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var r=Object.keys(e),n=0;n<r.length;++n){var s=r[n];Object.defineProperty(t.prototype,s,Object.getOwnPropertyDescriptor(e,s))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new je),r=this._boundsRect),this._bounds.getRectangle(r)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new je),e=this._localBoundsRect),this._localBounds||(this._localBounds=new rf);var r=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var h=this.getBounds(!1,e);return this.parent=n,this.transform=r,this._bounds=s,this._bounds.updateID+=this._boundsID-o,h},t.prototype.toGlobal=function(e,r,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)},t.prototype.toLocal=function(e,r,n,s){return r&&(e=r.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,r,n,s,o,h,a,l,u){return e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=1),s===void 0&&(s=1),o===void 0&&(o=0),h===void 0&&(h=0),a===void 0&&(a=0),l===void 0&&(l=0),u===void 0&&(u=0),this.position.x=e,this.position.y=r,this.scale.x=n||1,this.scale.y=s||1,this.rotation=o,this.skew.x=h,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new bD),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*XN},set:function(e){this.transform.rotation=e*GN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask!==e){if(this._mask){var r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){var r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}},enumerable:!1,configurable:!0}),t}(If),bD=function(i){W0(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(nf);nf.prototype.displayObjectUpdateTransform=nf.prototype.updateTransform;function ED(i,t){return i.zIndex===t.zIndex?i._lastSortedIndex-t._lastSortedIndex:i.zIndex-t.zIndex}var Ws=function(i){W0(t,i);function t(){var e=i.call(this)||this;return e.children=[],e.sortableChildren=Ht.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];if(r.length>1)for(var s=0;s<r.length;s++)this.addChild(r[s]);else{var o=r[0];o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.push(o),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",o,this,this.children.length-1),o.emit("added",this)}return r[0]},t.prototype.addChildAt=function(e,r){if(r<0||r>this.children.length)throw new Error(e+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(r,0,e),this._boundsID++,this.onChildrenChange(r),e.emit("added",this),this.emit("childAdded",e,this,r),e},t.prototype.swapChildren=function(e,r){if(e!==r){var n=this.getChildIndex(e),s=this.getChildIndex(r);this.children[n]=r,this.children[s]=e,this.onChildrenChange(n<s?n:s)}},t.prototype.getChildIndex=function(e){var r=this.children.indexOf(e);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r},t.prototype.setChildIndex=function(e,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);Rd(this.children,n,1),this.children.splice(r,0,e),this.onChildrenChange(r)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];if(r.length>1)for(var s=0;s<r.length;s++)this.removeChild(r[s]);else{var o=r[0],h=this.children.indexOf(o);if(h===-1)return null;o.parent=null,o.transform._parentID=-1,Rd(this.children,h,1),this._boundsID++,this.onChildrenChange(h),o.emit("removed",this),this.emit("childRemoved",o,this,h)}return r[0]},t.prototype.removeChildAt=function(e){var r=this.getChildAt(e);return r.parent=null,r.transform._parentID=-1,Rd(this.children,e,1),this._boundsID++,this.onChildrenChange(e),r.emit("removed",this),this.emit("childRemoved",r,this,e),r},t.prototype.removeChildren=function(e,r){e===void 0&&(e=0),r===void 0&&(r=this.children.length);var n=e,s=r,o=s-n,h;if(o>0&&o<=s){h=this.children.splice(n,o);for(var a=0;a<h.length;++a)h[a].parent=null,h[a].transform&&(h[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var a=0;a<h.length;++a)h[a].emit("removed",this),this.emit("childRemoved",h[a],this,a);return h}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,r=0,n=this.children.length;r<n;++r){var s=this.children[r];s._lastSortedIndex=r,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(ED),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,r=this.children.length;e<r;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var r=this.children[e];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){var n=r._mask.isMaskData?r._mask.maskObject:r._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,r){r===void 0&&(r=!1);var n=i.prototype.getLocalBounds.call(this,e);if(!r)for(var s=0,o=this.children.length;s<o;++s){var h=this.children[s];h.visible&&h.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(e){var r=e.renderTexture.sourceFrame;if(r.width>0&&r.height>0){var n,s;if(this.cullArea?(n=this.cullArea,s=this.worldTransform):this._render!==t.prototype._render&&(n=this.getBounds(!0)),n&&r.intersects(n,s))this._render(e);else if(this.cullArea)return;for(var o=0,h=this.children.length;o<h;++o){var a=this.children[o],l=a.cullable;a.cullable=l||!this.cullArea,a.render(e),a.cullable=l}}},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var r=0,n=this.children.length;r<n;++r)this.children[r].render(e)}},t.prototype.renderAdvanced=function(e){var r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<r.length;s++)r[s].enabled&&this._enabledFilters.push(r[s])}var o=r&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Rr.NONE));if(o&&e.batch.flush(),r&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(var s=0,h=this.children.length;s<h;++s)this.children[s].render(e)}o&&e.batch.flush(),n&&e.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){i.prototype.destroy.call(this),this.sortDirty=!1;var r=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(r)for(var s=0;s<n.length;++s)n[s].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var r=this.getLocalBounds().width;r!==0?this.scale.x=e/r:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var r=this.getLocalBounds().height;r!==0?this.scale.y=e/r:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(nf);Ws.prototype.containerUpdateTransform=Ws.prototype.updateTransform;/*!
 * @pixi/sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xy=function(i,t){return xy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},xy(i,t)};function TD(i,t){xy(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Gh=new jr,SD=new Uint16Array([0,1,2,0,2,3]),AD=function(i){TD(t,i);function t(e){var r=i.call(this)||this;return r._anchor=new ru(r._onAnchorUpdate,r,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=Yt.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=e||ti.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=SD,r.pluginName="batch",r.isSprite=!0,r._roundPixels=Ht.ROUND_PIXELS,r}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=id(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=id(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===e._updateID)){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var r=this.transform.worldTransform,n=r.a,s=r.b,o=r.c,h=r.d,a=r.tx,l=r.ty,u=this.vertexData,c=e.trim,f=e.orig,p=this._anchor,g=0,v=0,y=0,x=0;if(c?(v=c.x-p._x*f.width,g=v+c.width,x=c.y-p._y*f.height,y=x+c.height):(v=-p._x*f.width,g=v+f.width,x=-p._y*f.height,y=x+f.height),u[0]=n*v+o*x+a,u[1]=h*x+s*v+l,u[2]=n*g+o*x+a,u[3]=h*x+s*g+l,u[4]=n*g+o*y+a,u[5]=h*y+s*g+l,u[6]=n*v+o*y+a,u[7]=h*y+s*v+l,this._roundPixels)for(var _=Ht.RESOLUTION,b=0;b<u.length;++b)u[b]=Math.round((u[b]*_|0)/_)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,r=this.vertexTrimmedData,n=e.orig,s=this._anchor,o=this.transform.worldTransform,h=o.a,a=o.b,l=o.c,u=o.d,c=o.tx,f=o.ty,p=-s._x*n.width,g=p+n.width,v=-s._y*n.height,y=v+n.height;r[0]=h*p+l*v+c,r[1]=u*v+a*p+f,r[2]=h*g+l*v+c,r[3]=u*v+a*g+f,r[4]=h*g+l*y+c,r[5]=u*y+a*g+f,r[6]=h*p+l*y+c,r[7]=u*y+a*p+f},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._localBounds||(this._localBounds=new rf),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new je),e=this._localBoundsRect),this._localBounds.getRectangle(e)):i.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Gh);var r=this._texture.orig.width,n=this._texture.orig.height,s=-r*this.anchor.x,o=0;return Gh.x>=s&&Gh.x<s+r&&(o=-n*this.anchor.y,Gh.y>=o&&Gh.y<o+n)},t.prototype.destroy=function(e){i.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var r=typeof e=="boolean"?e:e&&e.texture;if(r){var n=typeof e=="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,r){var n=e instanceof ti?e:ti.from(e,r);return new t(n)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var r=id(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var r=id(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||ti.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Ws);/*!
 * @pixi/mesh - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wy=function(i,t){return wy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},wy(i,t)};function H0(i,t){wy(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var CD=function(){function i(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return i.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},i}(),sv=new jr,kE=new su,z0=function(i){H0(t,i);function t(e,r,n,s){s===void 0&&(s=yi.TRIANGLES);var o=i.call(this)||this;return o.geometry=e,o.shader=r,o.state=n||Au.for2d(),o.drawMode=s,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=Ht.ROUND_PIXELS,o.batchUvs=null,o}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},set:function(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){var r=this.geometry.buffers[0].data,n=this.shader;n.batchable&&this.drawMode===yi.TRIANGLES&&r.length<t.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)},t.prototype._renderDefault=function(e){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),e.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(r),e.state.set(this.state),e.geometry.bind(this.geometry,r),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(e){var r=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)},t.prototype.calculateVertices=function(){var e=this.geometry,r=e.buffers[0],n=r.data,s=r._updateID;if(!(s===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));for(var o=this.transform.worldTransform,h=o.a,a=o.b,l=o.c,u=o.d,c=o.tx,f=o.ty,p=this.vertexData,g=0;g<p.length/2;g++){var v=n[g*2],y=n[g*2+1];p[g*2]=h*v+l*y+c,p[g*2+1]=a*v+u*y+f}if(this._roundPixels)for(var x=Ht.RESOLUTION,g=0;g<p.length;++g)p[g]=Math.round((p[g]*x|0)/x);this.vertexDirty=s}},t.prototype.calculateUvs=function(){var e=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new CD(e,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,sv);for(var r=this.geometry.getBuffer("aVertexPosition").data,n=kE.points,s=this.geometry.getIndex().data,o=s.length,h=this.drawMode===4?3:1,a=0;a+2<o;a+=h){var l=s[a]*2,u=s[a+1]*2,c=s[a+2]*2;if(n[0]=r[l],n[1]=r[l+1],n[2]=r[u],n[3]=r[u+1],n[4]=r[c],n[5]=r[c+1],kE.contains(sv.x,sv.y))return!0}return!1},t.prototype.destroy=function(e){i.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(Ws),ID=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,RD=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,j0=function(i){H0(t,i);function t(e,r){var n=this,s={uSampler:e,alpha:1,uTextureMatrix:dn.IDENTITY,uColor:new Float32Array([1,1,1,1])};return r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(s,r.uniforms),n=i.call(this,r.program||Mf.from(RD,ID),s)||this,n._colorDirty=!1,n.uvMatrix=new fC(e),n.batchable=r.program===void 0,n.pluginName=r.pluginName,n.tint=r.tint,n.alpha=r.alpha,n}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;LN(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(Pf),q0=function(i){H0(t,i);function t(e,r,n){var s=i.call(this)||this,o=new cn(e),h=new cn(r,!0),a=new cn(n,!0,!0);return s.addAttribute("aVertexPosition",o,2,!1,Se.FLOAT).addAttribute("aTextureCoord",h,2,!1,Se.FLOAT).addIndex(a),s._updateId=-1,s}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(Rf);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _y=function(i,t){return _y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},_y(i,t)};function Kl(i,t){_y(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var MD=function(i){Kl(t,i);function t(e,r,n,s){e===void 0&&(e=100),r===void 0&&(r=100),n===void 0&&(n=10),s===void 0&&(s=10);var o=i.call(this)||this;return o.segWidth=n,o.segHeight=s,o.width=e,o.height=r,o.build(),o}return t.prototype.build=function(){for(var e=this.segWidth*this.segHeight,r=[],n=[],s=[],o=this.segWidth-1,h=this.segHeight-1,a=this.width/o,l=this.height/h,u=0;u<e;u++){var c=u%this.segWidth,f=u/this.segWidth|0;r.push(c*a,f*l),n.push(c/o,f/h)}for(var p=o*h,u=0;u<p;u++){var g=u%o,v=u/o|0,y=v*this.segWidth+g,x=v*this.segWidth+g+1,_=(v+1)*this.segWidth+g,b=(v+1)*this.segWidth+g+1;s.push(y,x,_,x,b,_)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(q0),PD=function(i){Kl(t,i);function t(e,r,n){e===void 0&&(e=200),n===void 0&&(n=0);var s=i.call(this,new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6))||this;return s.points=r,s._width=e,s.textureScale=n,s.build(),s}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e=this.points;if(e){var r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(e.length<1)){r.data.length/4!==e.length&&(r.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));var o=n.data,h=s.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;for(var a=0,l=e[0],u=this._width*this.textureScale,c=e.length,f=0;f<c;f++){var p=f*4;if(this.textureScale>0){var g=l.x-e[f].x,v=l.y-e[f].y,y=Math.sqrt(g*g+v*v);l=e[f],a+=y/u}else a=f/(c-1);o[p]=a,o[p+1]=0,o[p+2]=a,o[p+3]=1}for(var x=0,f=0;f<c-1;f++){var p=f*2;h[x++]=p,h[x++]=p+1,h[x++]=p+2,h[x++]=p+2,h[x++]=p+1,h[x++]=p+3}n.update(),s.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var r=e[0],n,s=0,o=0,h=this.buffers[0].data,a=e.length,l=0;l<a;l++){var u=e[l],c=l*4;l<e.length-1?n=e[l+1]:n=u,o=-(n.x-r.x),s=n.y-r.y;var f=Math.sqrt(s*s+o*o),p=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=f,o/=f,s*=p,o*=p,h[c]=u.x+s,h[c+1]=u.y+o,h[c+2]=u.x-s,h[c+3]=u.y-o,r=u}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(q0);(function(i){Kl(t,i);function t(e,r,n){n===void 0&&(n=0);var s=this,o=new PD(e.height,r,n),h=new j0(e);return n>0&&(e.baseTexture.wrapMode=Vo.REPEAT),s=i.call(this,o,h)||this,s.autoUpdate=!0,s}return t.prototype._render=function(e){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),i.prototype._render.call(this,e)},t})(z0);var kD=function(i){Kl(t,i);function t(e,r,n){var s=this,o=new MD(e.width,e.height,r,n),h=new j0(ti.WHITE);return s=i.call(this,o,h)||this,s.texture=e,s.autoResize=!0,s}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,r=this.shader.texture,n=r.width,s=r.height;this.autoResize&&(e.width!==n||e.height!==s)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),i.prototype._render.call(this,e)},t.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),i.prototype.destroy.call(this,e)},t}(z0),FD=function(i){Kl(t,i);function t(e,r,n,s,o){e===void 0&&(e=ti.EMPTY);var h=this,a=new q0(r,n,s);a.getBuffer("aVertexPosition").static=!1;var l=new j0(e);return h=i.call(this,a,l,null,o)||this,h.autoUpdate=!0,h}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),i.prototype._render.call(this,e)},t}(z0),pd=10;(function(i){Kl(t,i);function t(e,r,n,s,o){r===void 0&&(r=pd),n===void 0&&(n=pd),s===void 0&&(s=pd),o===void 0&&(o=pd);var h=i.call(this,ti.WHITE,4,4)||this;return h._origWidth=e.orig.width,h._origHeight=e.orig.height,h._width=h._origWidth,h._height=h._origHeight,h._leftWidth=r,h._rightWidth=s,h._topHeight=n,h._bottomHeight=o,h.texture=e,h}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,r=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*r,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*r,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,r=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*r,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*r,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,r=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,s=this._height>n?1:this._height/n,o=Math.min(r,s);return o},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var e=this.texture,r=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,s=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=s*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t})(kD);/*!
 * @pixi/graphics - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Gs;(function(i){i.MITER="miter",i.BEVEL="bevel",i.ROUND="round"})(Gs||(Gs={}));var Na;(function(i){i.BUTT="butt",i.ROUND="round",i.SQUARE="square"})(Na||(Na={}));var vu={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(i,t){if(t===void 0&&(t=20),!this.adaptive||!i||isNaN(i))return t;var e=Math.ceil(i/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},vC=function(){function i(){this.color=16777215,this.alpha=1,this.texture=ti.WHITE,this.matrix=null,this.visible=!1,this.reset()}return i.prototype.clone=function(){var t=new i;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},i.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=ti.WHITE,this.matrix=null,this.visible=!1},i.prototype.destroy=function(){this.texture=null,this.matrix=null},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var by=function(i,t){return by=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},by(i,t)};function K0(i,t){by(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function FE(i,t){var e,r;t===void 0&&(t=!1);var n=i.length;if(!(n<6)){for(var s=0,o=0,h=i[n-2],a=i[n-1];o<n;o+=2){var l=i[o],u=i[o+1];s+=(l-h)*(u+a),h=l,a=u}if(!t&&s>0||t&&s<=0)for(var c=n/2,o=c+c%2;o<n;o+=2){var f=n-o-2,p=n-o-1,g=o,v=o+1;e=[i[g],i[f]],i[f]=e[0],i[g]=e[1],r=[i[v],i[p]],i[p]=r[0],i[v]=r[1]}}}var yC={build:function(i){i.points=i.shape.points.slice()},triangulate:function(i,t){var e=i.points,r=i.holes,n=t.points,s=t.indices;if(e.length>=6){FE(e,!1);for(var o=[],h=0;h<r.length;h++){var a=r[h];FE(a.points,!0),o.push(e.length/2),e=e.concat(a.points)}var l=Py(e,o,2);if(!l)return;for(var u=n.length/2,h=0;h<l.length;h+=3)s.push(l[h]+u),s.push(l[h+1]+u),s.push(l[h+2]+u);for(var h=0;h<e.length;h++)n.push(e[h])}}},sf={build:function(i){var t=i.points,e,r,n,s,o,h;if(i.type===zr.CIRC){var a=i.shape;e=a.x,r=a.y,o=h=a.radius,n=s=0}else if(i.type===zr.ELIP){var l=i.shape;e=l.x,r=l.y,o=l.width,h=l.height,n=s=0}else{var u=i.shape,c=u.width/2,f=u.height/2;e=u.x+c,r=u.y+f,o=h=Math.max(0,Math.min(u.radius,Math.min(c,f))),n=c-o,s=f-h}if(!(o>=0&&h>=0&&n>=0&&s>=0)){t.length=0;return}var p=Math.ceil(2.3*Math.sqrt(o+h)),g=p*8+(n?4:0)+(s?4:0);if(t.length=g,g!==0){if(p===0){t.length=8,t[0]=t[6]=e+n,t[1]=t[3]=r+s,t[2]=t[4]=e-n,t[5]=t[7]=r-s;return}var v=0,y=p*4+(n?2:0)+2,x=y,_=g;{var b=n+o,E=s,T=e+b,S=e-b,C=r+E;if(t[v++]=T,t[v++]=C,t[--y]=C,t[--y]=S,s){var M=r-E;t[x++]=S,t[x++]=M,t[--_]=M,t[--_]=T}}for(var P=1;P<p;P++){var F=Math.PI/2*(P/p),b=n+Math.cos(F)*o,E=s+Math.sin(F)*h,T=e+b,S=e-b,C=r+E,M=r-E;t[v++]=T,t[v++]=C,t[--y]=C,t[--y]=S,t[x++]=S,t[x++]=M,t[--_]=M,t[--_]=T}{var b=n,E=s+h,T=e+b,S=e-b,C=r+E,M=r-E;t[v++]=T,t[v++]=C,t[--_]=M,t[--_]=T,n&&(t[v++]=S,t[v++]=C,t[--_]=M,t[--_]=S)}}},triangulate:function(i,t){var e=i.points,r=t.points,n=t.indices;if(e.length!==0){var s=r.length/2,o=s,h,a;if(i.type!==zr.RREC){var l=i.shape;h=l.x,a=l.y}else{var u=i.shape;h=u.x+u.width/2,a=u.y+u.height/2}var c=i.matrix;r.push(i.matrix?c.a*h+c.c*a+c.tx:h,i.matrix?c.b*h+c.d*a+c.ty:a),s++,r.push(e[0],e[1]);for(var f=2;f<e.length;f+=2)r.push(e[f],e[f+1]),n.push(s++,o,s);n.push(o+1,o,s)}}},BD={build:function(i){var t=i.shape,e=t.x,r=t.y,n=t.width,s=t.height,o=i.points;o.length=0,o.push(e,r,e+n,r,e+n,r+s,e,r+s)},triangulate:function(i,t){var e=i.points,r=t.points,n=r.length/2;r.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function xl(i,t,e){var r=t-i;return i+r*e}function md(i,t,e,r,n,s,o){o===void 0&&(o=[]);for(var h=20,a=o,l=0,u=0,c=0,f=0,p=0,g=0,v=0,y=0;v<=h;++v)y=v/h,l=xl(i,e,y),u=xl(t,r,y),c=xl(e,n,y),f=xl(r,s,y),p=xl(l,c,y),g=xl(u,f,y),!(v===0&&a[a.length-2]===p&&a[a.length-1]===g)&&a.push(p,g);return a}var ND={build:function(i){if(Ey.nextRoundedRectBehavior){sf.build(i);return}var t=i.shape,e=i.points,r=t.x,n=t.y,s=t.width,o=t.height,h=Math.max(0,Math.min(t.radius,Math.min(s,o)/2));e.length=0,h?(md(r,n+h,r,n,r+h,n,e),md(r+s-h,n,r+s,n,r+s,n+h,e),md(r+s,n+o-h,r+s,n+o,r+s-h,n+o,e),md(r+h,n+o,r,n+o,r,n+o-h,e)):e.push(r,n,r+s,n,r+s,n+o,r,n+o)},triangulate:function(i,t){if(Ey.nextRoundedRectBehavior){sf.triangulate(i,t);return}for(var e=i.points,r=t.points,n=t.indices,s=r.length/2,o=Py(e,null,2),h=0,a=o.length;h<a;h+=3)n.push(o[h]+s),n.push(o[h+1]+s),n.push(o[h+2]+s);for(var h=0,a=e.length;h<a;h++)r.push(e[h],e[++h])}};function BE(i,t,e,r,n,s,o,h){var a=i-e*n,l=t-r*n,u=i+e*s,c=t+r*s,f,p;o?(f=r,p=-e):(f=-r,p=e);var g=a+f,v=l+p,y=u+f,x=c+p;return h.push(g,v),h.push(y,x),2}function co(i,t,e,r,n,s,o,h){var a=e-i,l=r-t,u=Math.atan2(a,l),c=Math.atan2(n-i,s-t);h&&u<c?u+=Math.PI*2:!h&&u>c&&(c+=Math.PI*2);var f=u,p=c-u,g=Math.abs(p),v=Math.sqrt(a*a+l*l),y=(15*g*Math.sqrt(v)/Math.PI>>0)+1,x=p/y;if(f+=x,h){o.push(i,t),o.push(e,r);for(var _=1,b=f;_<y;_++,b+=x)o.push(i,t),o.push(i+Math.sin(b)*v,t+Math.cos(b)*v);o.push(i,t),o.push(n,s)}else{o.push(e,r),o.push(i,t);for(var _=1,b=f;_<y;_++,b+=x)o.push(i+Math.sin(b)*v,t+Math.cos(b)*v),o.push(i,t);o.push(n,s),o.push(i,t)}return y*2}function OD(i,t){var e=i.shape,r=i.points||e.points.slice(),n=t.closePointEps;if(r.length!==0){var s=i.lineStyle,o=new jr(r[0],r[1]),h=new jr(r[r.length-2],r[r.length-1]),a=e.type!==zr.POLY||e.closeStroke,l=Math.abs(o.x-h.x)<n&&Math.abs(o.y-h.y)<n;if(a){r=r.slice(),l&&(r.pop(),r.pop(),h.set(r[r.length-2],r[r.length-1]));var u=(o.x+h.x)*.5,c=(h.y+o.y)*.5;r.unshift(u,c),r.push(u,c)}var f=t.points,p=r.length/2,g=r.length,v=f.length/2,y=s.width/2,x=y*y,_=s.miterLimit*s.miterLimit,b=r[0],E=r[1],T=r[2],S=r[3],C=0,M=0,P=-(E-S),F=b-T,V=0,O=0,U=Math.sqrt(P*P+F*F);P/=U,F/=U,P*=y,F*=y;var H=s.alignment,W=(1-H)*2,B=H*2;a||(s.cap===Na.ROUND?g+=co(b-P*(W-B)*.5,E-F*(W-B)*.5,b-P*W,E-F*W,b+P*B,E+F*B,f,!0)+2:s.cap===Na.SQUARE&&(g+=BE(b,E,P,F,W,B,!0,f))),f.push(b-P*W,E-F*W),f.push(b+P*B,E+F*B);for(var L=1;L<p-1;++L){b=r[(L-1)*2],E=r[(L-1)*2+1],T=r[L*2],S=r[L*2+1],C=r[(L+1)*2],M=r[(L+1)*2+1],P=-(E-S),F=b-T,U=Math.sqrt(P*P+F*F),P/=U,F/=U,P*=y,F*=y,V=-(S-M),O=T-C,U=Math.sqrt(V*V+O*O),V/=U,O/=U,V*=y,O*=y;var N=T-b,Y=E-S,D=T-C,k=M-S,X=N*D+Y*k,$=Y*D-k*N,j=$<0;if(Math.abs($)<.001*Math.abs(X)){f.push(T-P*W,S-F*W),f.push(T+P*B,S+F*B),X>=0&&(s.join===Gs.ROUND?g+=co(T,S,T-P*W,S-F*W,T-V*W,S-O*W,f,!1)+4:g+=2,f.push(T-V*B,S-O*B),f.push(T+V*W,S+O*W));continue}var K=(-P+b)*(-F+S)-(-P+T)*(-F+E),tt=(-V+C)*(-O+S)-(-V+T)*(-O+M),ct=(N*tt-D*K)/$,ft=(k*K-Y*tt)/$,mt=(ct-T)*(ct-T)+(ft-S)*(ft-S),lt=T+(ct-T)*W,gt=S+(ft-S)*W,yt=T-(ct-T)*B,St=S-(ft-S)*B,Rt=Math.min(N*N+Y*Y,D*D+k*k),it=j?W:B,ut=Rt+it*it*x,Ct=mt<=ut;Ct?s.join===Gs.BEVEL||mt/x>_?(j?(f.push(lt,gt),f.push(T+P*B,S+F*B),f.push(lt,gt),f.push(T+V*B,S+O*B)):(f.push(T-P*W,S-F*W),f.push(yt,St),f.push(T-V*W,S-O*W),f.push(yt,St)),g+=2):s.join===Gs.ROUND?j?(f.push(lt,gt),f.push(T+P*B,S+F*B),g+=co(T,S,T+P*B,S+F*B,T+V*B,S+O*B,f,!0)+4,f.push(lt,gt),f.push(T+V*B,S+O*B)):(f.push(T-P*W,S-F*W),f.push(yt,St),g+=co(T,S,T-P*W,S-F*W,T-V*W,S-O*W,f,!1)+4,f.push(T-V*W,S-O*W),f.push(yt,St)):(f.push(lt,gt),f.push(yt,St)):(f.push(T-P*W,S-F*W),f.push(T+P*B,S+F*B),s.join===Gs.ROUND?j?g+=co(T,S,T+P*B,S+F*B,T+V*B,S+O*B,f,!0)+2:g+=co(T,S,T-P*W,S-F*W,T-V*W,S-O*W,f,!1)+2:s.join===Gs.MITER&&mt/x<=_&&(j?(f.push(yt,St),f.push(yt,St)):(f.push(lt,gt),f.push(lt,gt)),g+=2),f.push(T-V*W,S-O*W),f.push(T+V*B,S+O*B),g+=2)}b=r[(p-2)*2],E=r[(p-2)*2+1],T=r[(p-1)*2],S=r[(p-1)*2+1],P=-(E-S),F=b-T,U=Math.sqrt(P*P+F*F),P/=U,F/=U,P*=y,F*=y,f.push(T-P*W,S-F*W),f.push(T+P*B,S+F*B),a||(s.cap===Na.ROUND?g+=co(T-P*(W-B)*.5,S-F*(W-B)*.5,T-P*W,S-F*W,T+P*B,S+F*B,f,!1)+2:s.cap===Na.SQUARE&&(g+=BE(T,S,P,F,W,B,!1,f)));for(var zt=t.indices,jt=vu.epsilon*vu.epsilon,L=v;L<g+v-2;++L)b=f[L*2],E=f[L*2+1],T=f[(L+1)*2],S=f[(L+1)*2+1],C=f[(L+2)*2],M=f[(L+2)*2+1],!(Math.abs(b*(S-M)+T*(M-E)+C*(E-S))<jt)&&zt.push(L,L+1,L+2)}}function DD(i,t){var e=0,r=i.shape,n=i.points||r.points,s=r.type!==zr.POLY||r.closeStroke;if(n.length!==0){var o=t.points,h=t.indices,a=n.length/2,l=o.length/2,u=l;for(o.push(n[0],n[1]),e=1;e<a;e++)o.push(n[e*2],n[e*2+1]),h.push(u,u+1),u++;s&&h.push(u,l)}}function NE(i,t){i.lineStyle.native?DD(i,t):OD(i,t)}var OE=function(){function i(){}return i.curveTo=function(t,e,r,n,s,o){var h=o[o.length-2],a=o[o.length-1],l=a-e,u=h-t,c=n-e,f=r-t,p=Math.abs(l*f-u*c);if(p<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;var g=l*l+u*u,v=c*c+f*f,y=l*c+u*f,x=s*Math.sqrt(g)/p,_=s*Math.sqrt(v)/p,b=x*y/g,E=_*y/v,T=x*f+_*u,S=x*c+_*l,C=u*(_+b),M=l*(_+b),P=f*(x+E),F=c*(x+E),V=Math.atan2(M-S,C-T),O=Math.atan2(F-S,P-T);return{cx:T+t,cy:S+e,radius:s,startAngle:V,endAngle:O,anticlockwise:u*c>f*l}},i.arc=function(t,e,r,n,s,o,h,a,l){for(var u=h-o,c=vu._segmentsCount(Math.abs(u)*s,Math.ceil(Math.abs(u)/ef)*40),f=u/(c*2),p=f*2,g=Math.cos(f),v=Math.sin(f),y=c-1,x=y%1/y,_=0;_<=y;++_){var b=_+x*_,E=f+o+p*b,T=Math.cos(E),S=-Math.sin(E);l.push((g*T+v*S)*s+r,(g*-S+v*T)*s+n)}},i}(),LD=function(){function i(){}return i.curveLength=function(t,e,r,n,s,o,h,a){for(var l=10,u=0,c=0,f=0,p=0,g=0,v=0,y=0,x=0,_=0,b=0,E=0,T=t,S=e,C=1;C<=l;++C)c=C/l,f=c*c,p=f*c,g=1-c,v=g*g,y=v*g,x=y*t+3*v*c*r+3*g*f*s+p*h,_=y*e+3*v*c*n+3*g*f*o+p*a,b=T-x,E=S-_,T=x,S=_,u+=Math.sqrt(b*b+E*E);return u},i.curveTo=function(t,e,r,n,s,o,h){var a=h[h.length-2],l=h[h.length-1];h.length-=2;var u=vu._segmentsCount(i.curveLength(a,l,t,e,r,n,s,o)),c=0,f=0,p=0,g=0,v=0;h.push(a,l);for(var y=1,x=0;y<=u;++y)x=y/u,c=1-x,f=c*c,p=f*c,g=x*x,v=g*x,h.push(p*a+3*f*x*t+3*c*g*r+v*s,p*l+3*f*x*e+3*c*g*n+v*o)},i}(),UD=function(){function i(){}return i.curveLength=function(t,e,r,n,s,o){var h=t-2*r+s,a=e-2*n+o,l=2*r-2*t,u=2*n-2*e,c=4*(h*h+a*a),f=4*(h*l+a*u),p=l*l+u*u,g=2*Math.sqrt(c+f+p),v=Math.sqrt(c),y=2*c*v,x=2*Math.sqrt(p),_=f/v;return(y*g+v*f*(g-x)+(4*p*c-f*f)*Math.log((2*v+_+g)/(_+x)))/(4*y)},i.curveTo=function(t,e,r,n,s){for(var o=s[s.length-2],h=s[s.length-1],a=vu._segmentsCount(i.curveLength(o,h,t,e,r,n)),l=0,u=0,c=1;c<=a;++c){var f=c/a;l=o+(t-o)*f,u=h+(e-h)*f,s.push(l+(t+(r-t)*f-l)*f,u+(e+(n-e)*f-u)*f)}},i}(),VD=function(){function i(){this.reset()}return i.prototype.begin=function(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r},i.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},i.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},i}(),fo,av=(fo={},fo[zr.POLY]=yC,fo[zr.CIRC]=sf,fo[zr.ELIP]=sf,fo[zr.RECT]=BD,fo[zr.RREC]=ND,fo),DE=[],gd=[],LE=function(){function i(t,e,r,n){e===void 0&&(e=null),r===void 0&&(r=null),n===void 0&&(n=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=n,this.type=t.type}return i.prototype.clone=function(){return new i(this.shape,this.fillStyle,this.lineStyle,this.matrix)},i.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},i}(),wl=new jr,XD=function(i){K0(t,i);function t(){var e=i.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new rf,e.boundsDirty=-1,e}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),gd.push(this.drawCalls[e]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var r=this.batches[e];r.reset(),DE.push(r)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,r,n,s){r===void 0&&(r=null),n===void 0&&(n=null),s===void 0&&(s=null);var o=new LE(e,r,n,s);return this.graphicsData.push(o),this.dirty++,this},t.prototype.drawHole=function(e,r){if(r===void 0&&(r=null),!this.graphicsData.length)return null;var n=new LE(e,null,null,r),s=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=s.lineStyle,s.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){i.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var r=this.graphicsData,n=0;n<r.length;++n){var s=r[n];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,wl):wl.copyFrom(e),s.shape.contains(wl.x,wl.y))){var o=!1;if(s.holes)for(var h=0;h<s.holes.length;h++){var a=s.holes[h];if(a.shape.contains(wl.x,wl.y)){o=!0;break}}if(!o)return!0}}return!1},t.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,r=this.graphicsData,n=null,s=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],s=n.style);for(var o=this.shapeIndex;o<r.length;o++){this.shapeIndex++;var h=r[o],a=h.fillStyle,l=h.lineStyle,u=av[h.type];u.build(h),h.matrix&&this.transformPoints(h.points,h.matrix),(a.visible||l.visible)&&this.processHoles(h.holes);for(var c=0;c<2;c++){var f=c===0?a:l;if(f.visible){var p=f.texture.baseTexture,g=this.indices.length,v=this.points.length/2;p.wrapMode=Vo.REPEAT,c===0?this.processFill(h):this.processLine(h);var y=this.points.length/2-v;y!==0&&(n&&!this._compareStyles(s,f)&&(n.end(g,v),n=null),n||(n=DE.pop()||new VD,n.begin(f,g,v),this.batches.push(n),s=f),this.addUvs(this.points,e,f.texture,v,y,f.matrix))}}}var x=this.indices.length,_=this.points.length/2;if(n&&n.end(x,_),this.batches.length===0){this.batchable=!0;return}var b=_>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&b===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=b?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(e,r){return!(!e||!r||e.texture.baseTexture!==r.texture.baseTexture||e.color+e.alpha!==r.color+r.alpha||!!e.native!=!!r.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,r=this.graphicsData.length;e<r;e++){var n=this.graphicsData[e],s=n.fillStyle,o=n.lineStyle;if(s&&!s.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,r=0,n=e.length;r<n;r++)for(var s=e[r],o=0;o<s.size;o++){var h=s.start+o;this.indicesUint16[h]=this.indicesUint16[h]-s.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var e=this.batches,r=0;r<e.length;r++)if(e[r].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var e=++wr._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),gd.push(this.drawCalls[r]);this.drawCalls.length=0;var n=this.colors,s=this.textureIds,o=gd.pop();o||(o=new gy,o.texArray=new vy),o.texArray.count=0,o.start=0,o.size=0,o.type=yi.TRIANGLES;var h=0,a=null,l=0,u=!1,c=yi.TRIANGLES,f=0;this.drawCalls.push(o);for(var r=0;r<this.batches.length;r++){var p=this.batches[r],g=8,v=p.style,y=v.texture.baseTexture;u!==!!v.native&&(u=!!v.native,c=u?yi.LINES:yi.TRIANGLES,a=null,h=g,e++),a!==y&&(a=y,y._batchEnabled!==e&&(h===g&&(e++,h=0,o.size>0&&(o=gd.pop(),o||(o=new gy,o.texArray=new vy),this.drawCalls.push(o)),o.start=f,o.size=0,o.texArray.count=0,o.type=c),y.touched=1,y._batchEnabled=e,y._batchLocation=h,y.wrapMode=Vo.REPEAT,o.texArray.elements[o.texArray.count++]=y,h++)),o.size+=p.size,f+=p.size,l=y._batchLocation,this.addColors(n,v.color,v.alpha,p.attribSize,p.attribStart),this.addTextureIds(s,l,p.attribSize,p.attribStart)}wr._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,r=this.uvs,n=this.colors,s=this.textureIds,o=new ArrayBuffer(e.length*3*4),h=new Float32Array(o),a=new Uint32Array(o),l=0,u=0;u<e.length/2;u++)h[l++]=e[u*2],h[l++]=e[u*2+1],h[l++]=r[u*2],h[l++]=r[u*2+1],a[l++]=n[u],h[l++]=s[u];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){if(e.holes.length)yC.triangulate(e,this);else{var r=av[e.type];r.triangulate(e,this)}},t.prototype.processLine=function(e){NE(e,this);for(var r=0;r<e.holes.length;r++)NE(e.holes[r],this)},t.prototype.processHoles=function(e){for(var r=0;r<e.length;r++){var n=e[r],s=av[n.type];s.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,r){for(var n=0;n<e.length/2;n++){var s=e[n*2],o=e[n*2+1];e[n*2]=r.a*s+r.c*o+r.tx,e[n*2+1]=r.b*s+r.d*o+r.ty}},t.prototype.addColors=function(e,r,n,s,o){o===void 0&&(o=0);var h=(r>>16)+(r&65280)+((r&255)<<16),a=QA(h,n);e.length=Math.max(e.length,o+s);for(var l=0;l<s;l++)e[o+l]=a},t.prototype.addTextureIds=function(e,r,n,s){s===void 0&&(s=0),e.length=Math.max(e.length,s+n);for(var o=0;o<n;o++)e[s+o]=r},t.prototype.addUvs=function(e,r,n,s,o,h){h===void 0&&(h=null);for(var a=0,l=r.length,u=n.frame;a<o;){var c=e[(s+a)*2],f=e[(s+a)*2+1];if(h){var p=h.a*c+h.c*f+h.tx;f=h.b*c+h.d*f+h.ty,c=p}a++,r.push(c/u.width,f/u.height)}var g=n.baseTexture;(u.width<g.width||u.height<g.height)&&this.adjustUvs(r,n,l,o)},t.prototype.adjustUvs=function(e,r,n,s){for(var o=r.baseTexture,h=1e-6,a=n+s*2,l=r.frame,u=l.width/o.width,c=l.height/o.height,f=l.x/l.width,p=l.y/l.height,g=Math.floor(e[n]+h),v=Math.floor(e[n+1]+h),y=n+2;y<a;y+=2)g=Math.min(g,Math.floor(e[y]+h)),v=Math.min(v,Math.floor(e[y+1]+h));f-=g,p-=v;for(var y=n;y<a;y+=2)e[y]=(e[y]+f)*u,e[y+1]=(e[y+1]+p)*c},t.BATCHABLE_SIZE=100,t}(gC),GD=function(i){K0(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Na.BUTT,e.join=Gs.MITER,e.miterLimit=10,e}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){i.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(vC),YD=new Float32Array(3),ov={},Ey=function(i){K0(t,i);function t(e){e===void 0&&(e=null);var r=i.call(this)||this;return r.shader=null,r.pluginName="batch",r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r._fillStyle=new vC,r._lineStyle=new GD,r._matrix=null,r._holeMode=!1,r.state=Au.for2d(),r._geometry=e||new XD,r._geometry.refCount++,r._transformID=-1,r.tint=16777215,r.blendMode=Yt.NORMAL,r}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e,r,n,s,o){return e===void 0&&(e=null),r===void 0&&(r=0),n===void 0&&(n=1),s===void 0&&(s=.5),o===void 0&&(o=!1),typeof e=="number"&&(e={width:e,color:r,alpha:n,alignment:s,native:o}),this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:ti.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Na.BUTT,join:Gs.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new su,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[r-2],e[r-1]))}else this.currentPath=new su,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,r){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=r,this},t.prototype.lineTo=function(e,r){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,s=n[n.length-2],o=n[n.length-1];return(s!==e||o!==r)&&n.push(e,r),this},t.prototype._initCurve=function(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,r]):this.moveTo(e,r)},t.prototype.quadraticCurveTo=function(e,r,n,s){this._initCurve();var o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),UD.curveTo(e,r,n,s,o),this},t.prototype.bezierCurveTo=function(e,r,n,s,o,h){return this._initCurve(),LD.curveTo(e,r,n,s,o,h,this.currentPath.points),this},t.prototype.arcTo=function(e,r,n,s,o){this._initCurve(e,r);var h=this.currentPath.points,a=OE.curveTo(e,r,n,s,o,h);if(a){var l=a.cx,u=a.cy,c=a.radius,f=a.startAngle,p=a.endAngle,g=a.anticlockwise;this.arc(l,u,c,f,p,g)}return this},t.prototype.arc=function(e,r,n,s,o,h){if(h===void 0&&(h=!1),s===o)return this;!h&&o<=s?o+=ef:h&&s<=o&&(s+=ef);var a=o-s;if(a===0)return this;var l=e+Math.cos(s)*n,u=r+Math.sin(s)*n,c=this._geometry.closePointEps,f=this.currentPath?this.currentPath.points:null;if(f){var p=Math.abs(f[f.length-2]-l),g=Math.abs(f[f.length-1]-u);p<c&&g<c||f.push(l,u)}else this.moveTo(l,u),f=this.currentPath.points;return OE.arc(l,u,e,r,n,s,o,h,f),this},t.prototype.beginFill=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=1),this.beginTextureFill({texture:ti.WHITE,color:e,alpha:r})},t.prototype.beginTextureFill=function(e){e=Object.assign({texture:ti.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,r,n,s){return this.drawShape(new je(e,r,n,s))},t.prototype.drawRoundedRect=function(e,r,n,s,o){return this.drawShape(new WN(e,r,n,s,o))},t.prototype.drawCircle=function(e,r,n){return this.drawShape(new YN(e,r,n))},t.prototype.drawEllipse=function(e,r,n,s){return this.drawShape(new $N(e,r,n,s))},t.prototype.drawPolygon=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];var s,o=!0,h=r[0];h.points?(o=h.closeStroke,s=h.points):Array.isArray(r[0])?s=r[0]:s=r;var a=new su(s);return a.closeStroke=o,this.drawShape(a),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===zr.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,r=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var s=0;s<n;s++){var o=e.batches[s],h=o.style.color,a=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,o.start*2,o.size),c={vertexData:a,blendMode:r,indices:u,uvs:l,_batchRGB:Jd(h),_tintRGB:h,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[s]=c}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,n=this.batches.length;r<n;r++){var s=this.batches[r];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}},t.prototype._renderDirect=function(e){var r=this._resolveDirectShader(e),n=this._geometry,s=this.tint,o=this.worldAlpha,h=r.uniforms,a=n.drawCalls;h.translationMatrix=this.transform.worldTransform,h.tint[0]=(s>>16&255)/255*o,h.tint[1]=(s>>8&255)/255*o,h.tint[2]=(s&255)/255*o,h.tint[3]=o,e.shader.bind(r),e.geometry.bind(n,r),e.state.set(this.state);for(var l=0,u=a.length;l<u;l++)this._renderDrawCallDirect(e,n.drawCalls[l])},t.prototype._renderDrawCallDirect=function(e,r){for(var n=r.texArray,s=r.type,o=r.size,h=r.start,a=n.count,l=0;l<a;l++)e.texture.bind(n.elements[l],l);e.geometry.draw(s,o,h)},t.prototype._resolveDirectShader=function(e){var r=this.shader,n=this.pluginName;if(!r){if(!ov[n]){for(var s=e.plugins[n].MAX_TEXTURES,o=new Int32Array(s),h=0;h<s;h++)o[h]=h;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new dn,default:Oo.from({uSamplers:o},!0)},l=e.plugins[n]._shader.program;ov[n]=new Pf(l,a)}r=ov[n]}return r},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var r=e.bounds,n=r.minX,s=r.minY,o=r.maxX,h=r.maxY;this._bounds.addFrame(this.transform,n,s,o,h)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=Jd(this.tint,YD),r=0;r<this.batches.length;r++){var n=this.batches[r],s=n._batchRGB,o=e[0]*s[0]*255,h=e[1]*s[1]*255,a=e[2]*s[2]*255,l=(o<<16)+(h<<8)+(a|0);n._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var r=this.transform.worldTransform,n=r.a,s=r.b,o=r.c,h=r.d,a=r.tx,l=r.ty,u=this._geometry.points,c=this.vertexData,f=0,p=0;p<u.length;p+=2){var g=u[p],v=u[p+1];c[f++]=n*g+o*v+a,c[f++]=h*v+s*g+l}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,i.prototype.destroy.call(this,e)},t.nextRoundedRectBehavior=!1,t._TEMP_POINT=new jr,t}(Ws),pr;(function(i){i[i.Region=0]="Region",i[i.BoundingBox=1]="BoundingBox",i[i.Mesh=2]="Mesh",i[i.LinkedMesh=3]="LinkedMesh",i[i.Path=4]="Path",i[i.Point=5]="Point",i[i.Clipping=6]="Clipping"})(pr||(pr={}));var $D=function(){function i(t,e,r,n){e===void 0&&(e=new Array),r===void 0&&(r=0),n===void 0&&(n=new DataView(t.buffer)),this.strings=e,this.index=r,this.buffer=n}return i.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},i.prototype.readUnsignedByte=function(){return this.buffer.getUint8(this.index++)},i.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},i.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},i.prototype.readInt=function(t){var e=this.readByte(),r=e&127;return e&128&&(e=this.readByte(),r|=(e&127)<<7,e&128&&(e=this.readByte(),r|=(e&127)<<14,e&128&&(e=this.readByte(),r|=(e&127)<<21,e&128&&(e=this.readByte(),r|=(e&127)<<28)))),t?r:r>>>1^-(r&1)},i.prototype.readStringRef=function(){var t=this.readInt(!0);return t==0?null:this.strings[t-1]},i.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",r=0;r<t;){var n=this.readUnsignedByte();switch(n>>4){case 12:case 13:e+=String.fromCharCode((n&31)<<6|this.readByte()&63),r+=2;break;case 14:e+=String.fromCharCode((n&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),r+=3;break;default:e+=String.fromCharCode(n),r++}}return e},i.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},i.prototype.readBoolean=function(){return this.readByte()!=0},i}(),dt;(function(i){i[i.setup=0]="setup",i[i.first=1]="first",i[i.replace=2]="replace",i[i.add=3]="add"})(dt||(dt={}));var wn;(function(i){i[i.mixIn=0]="mixIn",i[i.mixOut=1]="mixOut"})(wn||(wn={}));var vs;(function(i){i[i.Fixed=0]="Fixed",i[i.Percent=1]="Percent"})(vs||(vs={}));var Do;(function(i){i[i.Tangent=0]="Tangent",i[i.Chain=1]="Chain",i[i.ChainScale=2]="ChainScale"})(Do||(Do={}));var Un;(function(i){i[i.Normal=0]="Normal",i[i.OnlyTranslation=1]="OnlyTranslation",i[i.NoRotationOrReflection=2]="NoRotationOrReflection",i[i.NoScale=3]="NoScale",i[i.NoScaleOrReflection=4]="NoScaleOrReflection"})(Un||(Un={}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ty=function(i,t){return Ty=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])},Ty(i,t)};function Zl(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ty(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var UE;(function(i){i[i.Nearest=9728]="Nearest",i[i.Linear=9729]="Linear",i[i.MipMap=9987]="MipMap",i[i.MipMapNearestNearest=9984]="MipMapNearestNearest",i[i.MipMapLinearNearest=9985]="MipMapLinearNearest",i[i.MipMapNearestLinear=9986]="MipMapNearestLinear",i[i.MipMapLinearLinear=9987]="MipMapLinearLinear"})(UE||(UE={}));var VE;(function(i){i[i.MirroredRepeat=33648]="MirroredRepeat",i[i.ClampToEdge=33071]="ClampToEdge",i[i.Repeat=10497]="Repeat"})(VE||(VE={}));var Sy=function(){function i(){this.size=null,this.names=null,this.values=null,this.renderObject=null}return Object.defineProperty(i.prototype,"width",{get:function(){var t=this.texture;return t.trim?t.trim.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){var t=this.texture;return t.trim?t.trim.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"originalWidth",{get:function(){return this.texture.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"originalHeight",{get:function(){return this.texture.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rotate",{get:function(){return this.texture.rotate!==0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"degrees",{get:function(){return(360-this.texture.rotate*45)%360},enumerable:!1,configurable:!0}),i}();(function(i){Zl(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t})(Sy);var WD=function(i){return function(t){return i[0]=t,i[0]}}(new Float32Array(1)),HD=Math.fround||WD,xC=function(){function i(){this.entries={},this.size=0}return i.prototype.add=function(t){var e=this.entries[t];return this.entries[t]=!0,e?!1:(this.size++,!0)},i.prototype.addAll=function(t){for(var e=this.size,r=0,n=t.length;r<n;r++)this.add(t[r]);return e!=this.size},i.prototype.contains=function(t){return this.entries[t]},i.prototype.clear=function(){this.entries={},this.size=0},i}(),ge=function(){function i(t,e,r,n){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),this.r=t,this.g=e,this.b=r,this.a=n}return i.prototype.set=function(t,e,r,n){return this.r=t,this.g=e,this.b=r,this.a=n,this.clamp()},i.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},i.prototype.setFromString=function(t){return t=t.charAt(0)=="#"?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=t.length!=8?1:parseInt(t.substr(6,2),16)/255,this},i.prototype.add=function(t,e,r,n){return this.r+=t,this.g+=e,this.b+=r,this.a+=n,this.clamp()},i.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},i.rgba8888ToColor=function(t,e){t.r=((e&4278190080)>>>24)/255,t.g=((e&16711680)>>>16)/255,t.b=((e&65280)>>>8)/255,t.a=(e&255)/255},i.rgb888ToColor=function(t,e){t.r=((e&16711680)>>>16)/255,t.g=((e&65280)>>>8)/255,t.b=(e&255)/255},i.fromString=function(t){return new i().setFromString(t)},i.WHITE=new i(1,1,1,1),i.RED=new i(1,0,0,1),i.GREEN=new i(0,1,0,1),i.BLUE=new i(0,0,1,1),i.MAGENTA=new i(1,0,1,1),i}(),wt=function(){function i(){}return i.clamp=function(t,e,r){return t<e?e:t>r?r:t},i.cosDeg=function(t){return Math.cos(t*i.degRad)},i.sinDeg=function(t){return Math.sin(t*i.degRad)},i.signum=function(t){return t>0?1:t<0?-1:0},i.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},i.cbrt=function(t){var e=Math.pow(Math.abs(t),.3333333333333333);return t<0?-e:e},i.randomTriangular=function(t,e){return i.randomTriangularWith(t,e,(t+e)*.5)},i.randomTriangularWith=function(t,e,r){var n=Math.random(),s=e-t;return n<=(r-t)/s?t+Math.sqrt(n*s*(r-t)):e-Math.sqrt((1-n)*s*(e-r))},i.isPowerOfTwo=function(t){return t&&(t&t-1)===0},i.PI=3.1415927,i.PI2=i.PI*2,i.radiansToDegrees=180/i.PI,i.radDeg=i.radiansToDegrees,i.degreesToRadians=i.PI/180,i.degRad=i.degreesToRadians,i}(),zD=function(){function i(){}return i.prototype.apply=function(t,e,r){return t+(e-t)*this.applyInternal(r)},i}(),jD=function(i){Zl(t,i);function t(e){var r=i.call(this)||this;return r.power=2,r.power=e,r}return t.prototype.applyInternal=function(e){return e<=.5?Math.pow(e*2,this.power)/2:Math.pow((e-1)*2,this.power)/(this.power%2==0?-2:2)+1},t}(zD);(function(i){Zl(t,i);function t(e){return i.call(this,e)||this}return t.prototype.applyInternal=function(e){return Math.pow(e-1,this.power)*(this.power%2==0?-1:1)+1},t})(jD);var Xt=function(){function i(){}return i.arrayCopy=function(t,e,r,n,s){for(var o=e,h=n;o<e+s;o++,h++)r[h]=t[o]},i.arrayFill=function(t,e,r,n){for(var s=e;s<r;s++)t[s]=n},i.setArraySize=function(t,e,r){r===void 0&&(r=0);var n=t.length;if(n==e)return t;if(t.length=e,n<e)for(var s=n;s<e;s++)t[s]=r;return t},i.ensureArrayCapacity=function(t,e,r){return r===void 0&&(r=0),t.length>=e?t:i.setArraySize(t,e,r)},i.newArray=function(t,e){for(var r=new Array(t),n=0;n<t;n++)r[n]=e;return r},i.newFloatArray=function(t){if(i.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var e=new Array(t),r=0;r<e.length;r++)e[r]=0;return e},i.newShortArray=function(t){if(i.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var e=new Array(t),r=0;r<e.length;r++)e[r]=0;return e},i.toFloatArray=function(t){return i.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},i.toSinglePrecision=function(t){return i.SUPPORTS_TYPED_ARRAYS?HD(t):t},i.webkit602BugfixHelper=function(t,e){},i.contains=function(t,e,r){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},i.enumValue=function(t,e){return t[e[0].toUpperCase()+e.slice(1)]},i.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u",i}(),wC=function(){function i(t){this.items=new Array,this.instantiator=t}return i.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},i.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},i.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)this.free(t[e])},i.prototype.clear=function(){this.items.length=0},i}(),Ay=function(){function i(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=t,this.y=e}return i.prototype.set=function(t,e){return this.x=t,this.y=e,this},i.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},i.prototype.normalize=function(){var t=this.length();return t!=0&&(this.x/=t,this.y/=t),this},i}(),qD=function(){function i(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new wC(function(){return Xt.newFloatArray(16)})}return i.prototype.update=function(t,e){if(!t)throw new Error("skeleton cannot be null.");var r=this.boundingBoxes,n=this.polygons,s=this.polygonPool,o=t.slots,h=o.length;r.length=0,s.freeAll(n),n.length=0;for(var a=0;a<h;a++){var l=o[a];if(l.bone.active){var u=l.getAttachment();if(u!=null&&u.type===pr.BoundingBox){var c=u;r.push(c);var f=s.obtain();f.length!=c.worldVerticesLength&&(f=Xt.newFloatArray(c.worldVerticesLength)),n.push(f),c.computeWorldVertices(l,0,c.worldVerticesLength,f,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},i.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,s=this.polygons,o=0,h=s.length;o<h;o++)for(var a=s[o],l=a,u=0,c=a.length;u<c;u+=2){var f=l[u],p=l[u+1];t=Math.min(t,f),e=Math.min(e,p),r=Math.max(r,f),n=Math.max(n,p)}this.minX=t,this.minY=e,this.maxX=r,this.maxY=n},i.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},i.prototype.aabbIntersectsSegment=function(t,e,r,n){var s=this.minX,o=this.minY,h=this.maxX,a=this.maxY;if(t<=s&&r<=s||e<=o&&n<=o||t>=h&&r>=h||e>=a&&n>=a)return!1;var l=(n-e)/(r-t),u=l*(s-t)+e;if(u>o&&u<a||(u=l*(h-t)+e,u>o&&u<a))return!0;var c=(o-e)/l+t;return c>s&&c<h||(c=(a-e)/l+t,c>s&&c<h)},i.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},i.prototype.containsPoint=function(t,e){for(var r=this.polygons,n=0,s=r.length;n<s;n++)if(this.containsPointPolygon(r[n],t,e))return this.boundingBoxes[n];return null},i.prototype.containsPointPolygon=function(t,e,r){for(var n=t,s=t.length,o=s-2,h=!1,a=0;a<s;a+=2){var l=n[a+1],u=n[o+1];if(l<r&&u>=r||u<r&&l>=r){var c=n[a];c+(r-l)/(u-l)*(n[o]-c)<e&&(h=!h)}o=a}return h},i.prototype.intersectsSegment=function(t,e,r,n){for(var s=this.polygons,o=0,h=s.length;o<h;o++)if(this.intersectsSegmentPolygon(s[o],t,e,r,n))return this.boundingBoxes[o];return null},i.prototype.intersectsSegmentPolygon=function(t,e,r,n,s){for(var o=t,h=t.length,a=e-n,l=r-s,u=e*s-r*n,c=o[h-2],f=o[h-1],p=0;p<h;p+=2){var g=o[p],v=o[p+1],y=c*v-f*g,x=c-g,_=f-v,b=a*_-l*x,E=(u*x-a*y)/b;if((E>=c&&E<=g||E>=g&&E<=c)&&(E>=e&&E<=n||E>=n&&E<=e)){var T=(u*_-l*y)/b;if((T>=f&&T<=v||T>=v&&T<=f)&&(T>=r&&T<=s||T>=s&&T<=r))return!0}c=g,f=v}return!1},i.prototype.getPolygon=function(t){if(!t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return e==-1?null:this.polygons[e]},i.prototype.getWidth=function(){return this.maxX-this.minX},i.prototype.getHeight=function(){return this.maxY-this.minY},i}(),KD={GLOBAL_DELAY_LIMIT:0},_a=[0,0,0],ZD=function(i){Zl(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.region=null,e.attachment=null,e}return t}(AD),QD=function(i){Zl(t,i);function t(e,r,n,s,o){var h=i.call(this,e,r,n,s,o)||this;return h.region=null,h.attachment=null,h}return t}(FD),_C=function(i){Zl(t,i);function t(e){var r=i.call(this)||this;if(!e)throw new Error("The spineData param is required.");if(typeof e=="string")throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');r.spineData=e,r.createSkeleton(e),r.slotContainers=[],r.tempClipContainers=[];for(var n=0,s=r.skeleton.slots.length;n<s;n++){var o=r.skeleton.slots[n],h=o.getAttachment(),a=r.newContainer();if(r.slotContainers.push(a),r.addChild(a),r.tempClipContainers.push(null),!!h)if(h.type===pr.Region){var l=h.name,u=r.createSprite(o,h,l);o.currentSprite=u,o.currentSpriteName=l,a.addChild(u)}else if(h.type===pr.Mesh){var c=r.createMesh(o,h);o.currentMesh=c,o.currentMeshId=h.id,o.currentMeshName=h.name,a.addChild(c)}else h.type===pr.Clipping&&(r.createGraphics(o,h),a.addChild(o.clippingContainer),a.addChild(o.currentGraphics))}return r.tintRgb=new Float32Array([1,1,1]),r.autoUpdate=!0,r.visible=!0,r}return Object.defineProperty(t.prototype,"debug",{get:function(){return this._debug},set:function(e){var r;e!=this._debug&&((r=this._debug)===null||r===void 0||r.unregisterSpine(this),e==null||e.registerSpine(this),this._debug=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,this.updateTransform=e?t.prototype.autoUpdateTransform:Ws.prototype.updateTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return Hg(this.tintRgb)},set:function(e){this.tintRgb=Jd(e,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delayLimit",{get:function(){var e=typeof this.localDelayLimit<"u"?this.localDelayLimit:KD.GLOBAL_DELAY_LIMIT;return e||Number.MAX_VALUE},enumerable:!1,configurable:!0}),t.prototype.update=function(e){var r,n=this.delayLimit;if(e>n&&(e=n),this.state.update(e),this.state.apply(this.skeleton),!!this.skeleton){this.skeleton.updateWorldTransform();var s=this.skeleton.slots,o=this.color,h=null,a=null;o?(h=o.light,a=o.dark):h=this.tintRgb;for(var l=0,u=s.length;l<u;l++){var c=s[l],f=c.getAttachment(),p=this.slotContainers[l];if(!f){p.visible=!1;continue}var g=null;f.sequence&&f.sequence.apply(c,f);var v=f.region,y=f.color;switch(f!=null&&f.type){case pr.Region:var x=p.transform;if(x.setFromMatrix(c.bone.matrix),v=f.region,c.currentMesh&&(c.currentMesh.visible=!1,c.currentMesh=null,c.currentMeshId=void 0,c.currentMeshName=void 0),!v){c.currentSprite&&(c.currentSprite.renderable=!1);break}if(!c.currentSpriteName||c.currentSpriteName!==f.name){var _=f.name;if(c.currentSprite&&(c.currentSprite.visible=!1),c.sprites=c.sprites||{},c.sprites[_]!==void 0)c.sprites[_].visible=!0;else{var b=this.createSprite(c,f,_);p.addChild(b)}c.currentSprite=c.sprites[_],c.currentSpriteName=_}c.currentSprite.renderable=!0,c.hackRegion||this.setSpriteRegion(f,c.currentSprite,v),c.currentSprite.color?g=c.currentSprite.color:(_a[0]=h[0]*c.color.r*y.r,_a[1]=h[1]*c.color.g*y.g,_a[2]=h[2]*c.color.b*y.b,c.currentSprite.tint=Hg(_a)),c.currentSprite.blendMode=c.blendMode;break;case pr.Mesh:if(c.currentSprite){c.currentSprite.visible=!1,c.currentSprite=null,c.currentSpriteName=void 0;var E=new rC;E._parentID=-1,E._worldID=p.transform._worldID,p.transform=E}if(!v){c.currentMesh&&(c.currentMesh.renderable=!1);break}var T=f.id;if(c.currentMeshId===void 0||c.currentMeshId!==T){var S=T;if(c.currentMesh&&(c.currentMesh.visible=!1),c.meshes=c.meshes||{},c.meshes[S]!==void 0)c.meshes[S].visible=!0;else{var C=this.createMesh(c,f);p.addChild(C)}c.currentMesh=c.meshes[S],c.currentMeshName=f.name,c.currentMeshId=S}c.currentMesh.renderable=!0,f.computeWorldVerticesOld(c,c.currentMesh.vertices),c.currentMesh.color?g=c.currentMesh.color:(_a[0]=h[0]*c.color.r*y.r,_a[1]=h[1]*c.color.g*y.g,_a[2]=h[2]*c.color.b*y.b,c.currentMesh.tint=Hg(_a)),c.currentMesh.blendMode=c.blendMode,c.hackRegion||this.setMeshRegion(f,c.currentMesh,v);break;case pr.Clipping:c.currentGraphics||(this.createGraphics(c,f),p.addChild(c.clippingContainer),p.addChild(c.currentGraphics)),this.updateGraphics(c,f),p.alpha=1,p.visible=!0;continue;default:p.visible=!1;continue}if(p.visible=!0,g){var M=c.color.r*y.r,P=c.color.g*y.g,F=c.color.b*y.b;g.setLight(h[0]*M+a[0]*(1-M),h[1]*P+a[1]*(1-P),h[2]*F+a[2]*(1-F)),c.darkColor?(M=c.darkColor.r,P=c.darkColor.g,F=c.darkColor.b):(M=0,P=0,F=0),g.setDark(h[0]*M+a[0]*(1-M),h[1]*P+a[1]*(1-P),h[2]*F+a[2]*(1-F))}p.alpha=c.color.a}for(var V=this.skeleton.drawOrder,O=null,U=null,l=0,u=V.length;l<u;l++){var c=s[V[l].data.index],p=this.slotContainers[V[l].data.index];if(U||p.parent!==null&&p.parent!==this&&(p.parent.removeChild(p),p.parent=this),c.currentGraphics&&c.getAttachment())U=c.clippingContainer,O=c.getAttachment(),U.children.length=0,this.children[l]=p,O.endSlot===c.data&&(O.endSlot=null);else if(U){var H=this.tempClipContainers[l];H||(H=this.tempClipContainers[l]=this.newContainer(),H.visible=!1),this.children[l]=H,p.parent=null,U.addChild(p),O.endSlot==c.data&&(U.renderable=!0,U=null,O=null)}else this.children[l]=p}(r=this._debug)===null||r===void 0||r.renderDebug(this)}},t.prototype.setSpriteRegion=function(e,r,n){r.attachment===e&&r.region===n||(r.region=n,r.attachment=e,r.texture=n.texture,r.rotation=e.rotation*wt.degRad,r.position.x=e.x,r.position.y=e.y,r.alpha=e.color.a,n.size?(r.scale.x=n.size.width/n.originalWidth,r.scale.y=-n.size.height/n.originalHeight):(r.scale.x=e.scaleX*e.width/n.originalWidth,r.scale.y=-e.scaleY*e.height/n.originalHeight))},t.prototype.setMeshRegion=function(e,r,n){r.attachment===e&&r.region===n||(r.region=n,r.attachment=e,r.texture=n.texture,n.texture.updateUvs(),r.uvBuffer.update(e.regionUVs))},t.prototype.autoUpdateTransform=function(){{this.lastTime=this.lastTime||Date.now();var e=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(e)}Ws.prototype.updateTransform.call(this)},t.prototype.createSprite=function(e,r,n){var s=r.region;e.hackAttachment===r&&(s=e.hackRegion);var o=s?s.texture:null,h=this.newSprite(o);return h.anchor.set(.5),s&&this.setSpriteRegion(r,h,r.region),e.sprites=e.sprites||{},e.sprites[n]=h,h},t.prototype.createMesh=function(e,r){var n=r.region;e.hackAttachment===r&&(n=e.hackRegion,e.hackAttachment=null,e.hackRegion=null);var s=this.newMesh(n?n.texture:null,new Float32Array(r.regionUVs.length),r.regionUVs,new Uint16Array(r.triangles),yi.TRIANGLES);return typeof s._canvasPadding<"u"&&(s._canvasPadding=1.5),s.alpha=r.color.a,s.region=r.region,n&&this.setMeshRegion(r,s,n),e.meshes=e.meshes||{},e.meshes[r.id]=s,s},t.prototype.createGraphics=function(e,r){var n=this.newGraphics(),s=new su([]);return n.clear(),n.beginFill(16777215,1),n.drawPolygon(s),n.renderable=!1,e.currentGraphics=n,e.clippingContainer=this.newContainer(),e.clippingContainer.mask=e.currentGraphics,n},t.prototype.updateGraphics=function(e,r){var n=e.currentGraphics.geometry,s=n.graphicsData[0].shape.points,o=r.worldVerticesLength;s.length=o,r.computeWorldVertices(e,0,o,s,0,2),n.invalidate()},t.prototype.hackTextureBySlotIndex=function(e,r,n){r===void 0&&(r=null),n===void 0&&(n=null);var s=this.skeleton.slots[e];if(!s)return!1;var o=s.getAttachment(),h=o.region;return r?(h=new Sy,h.texture=r,h.size=n,s.hackRegion=h,s.hackAttachment=o):(s.hackRegion=null,s.hackAttachment=null),s.currentSprite?this.setSpriteRegion(o,s.currentSprite,h):s.currentMesh&&this.setMeshRegion(o,s.currentMesh,h),!0},t.prototype.hackTextureBySlotName=function(e,r,n){r===void 0&&(r=null),n===void 0&&(n=null);var s=this.skeleton.findSlotIndex(e);return s==-1?!1:this.hackTextureBySlotIndex(s,r,n)},t.prototype.hackTextureAttachment=function(e,r,n,s){s===void 0&&(s=null);var o=this.skeleton.findSlotIndex(e),h=this.skeleton.getAttachmentByName(e,r);h.region.texture=n;var a=this.skeleton.slots[o];if(!a)return!1;var l=a.getAttachment();if(r===l.name){var u=h.region;return n?(u=new Sy,u.texture=n,u.size=s,a.hackRegion=u,a.hackAttachment=l):(a.hackRegion=null,a.hackAttachment=null),a.currentSprite&&a.currentSprite.region!=u?(this.setSpriteRegion(l,a.currentSprite,u),a.currentSprite.region=u):a.currentMesh&&a.currentMesh.region!=u&&this.setMeshRegion(l,a.currentMesh,u),!0}return!1},t.prototype.newContainer=function(){return new Ws},t.prototype.newSprite=function(e){return new ZD(e)},t.prototype.newGraphics=function(){return new Ey},t.prototype.newMesh=function(e,r,n,s,o){return new QD(e,r,n,s,o)},t.prototype.transformHack=function(){return 1},t.prototype.hackAttachmentGroups=function(e,r,n){if(e){for(var s=[],o=[],h=0,a=this.skeleton.slots.length;h<a;h++){var l=this.skeleton.slots[h],u=l.currentSpriteName||l.currentMeshName||"",c=l.currentSprite||l.currentMesh;u.endsWith(e)?(c.parentGroup=r,o.push(c)):n&&c&&(c.parentGroup=n,s.push(c))}return[s,o]}},t.prototype.destroy=function(e){this.debug=null;for(var r=0,n=this.skeleton.slots.length;r<n;r++){var s=this.skeleton.slots[r];for(var o in s.meshes)s.meshes[o].destroy(e);s.meshes=null;for(var h in s.sprites)s.sprites[h].destroy(e);s.sprites=null}for(var r=0,n=this.slotContainers.length;r<n;r++)this.slotContainers[r].destroy(e);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,i.prototype.destroy.call(this,e)},t.clippingPolygon=[],t}(Ws);Object.defineProperty(_C.prototype,"visible",{get:function(){return this._visible},set:function(i){i!==this._visible&&(this._visible=i,i&&(this.lastTime=0))}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cy=function(i,t){return Cy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])},Cy(i,t)};function ce(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Cy(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var bC=function(){function i(t){if(!t)throw new Error("name cannot be null.");this.name=t}return i}(),Zs=function(i){ce(t,i);function t(e){var r=i.call(this,e)||this;return r.id=t.nextID++,r.bones=null,r.vertices=[],r.worldVerticesLength=0,r.timelineAttachment=r,r}return t.prototype.computeWorldVerticesOld=function(e,r){this.computeWorldVertices(e,0,this.worldVerticesLength,r,0,2)},t.prototype.computeWorldVertices=function(e,r,n,s,o,h){n=o+(n>>1)*h;var a=e.bone.skeleton,l=e.deform,u=this.vertices,c=this.bones;if(!c){l.length>0&&(u=l);for(var f=e.bone.matrix,p=f.tx,g=f.ty,v=f.a,y=f.c,x=f.b,_=f.d,b=r,E=o;E<n;b+=2,E+=h){var T=u[b],S=u[b+1];s[E]=T*v+S*y+p,s[E+1]=T*x+S*_+g}return}for(var C=0,M=0,P=0;P<r;P+=2){var F=c[C];C+=F+1,M+=F}var V=a.bones;if(l.length==0)for(var E=o,y=M*3;E<n;E+=h){var O=0,U=0,F=c[C++];for(F+=C;C<F;C++,y+=3){var f=V[c[C]].matrix,T=u[y],S=u[y+1],H=u[y+2];O+=(T*f.a+S*f.c+f.tx)*H,U+=(T*f.b+S*f.d+f.ty)*H}s[E]=O,s[E+1]=U}else for(var W=l,E=o,y=M*3,B=M<<1;E<n;E+=h){var O=0,U=0,F=c[C++];for(F+=C;C<F;C++,y+=3,B+=2){var f=V[c[C]].matrix,T=u[y]+W[B],S=u[y+1]+W[B+1],H=u[y+2];O+=(T*f.a+S*f.c+f.tx)*H,U+=(T*f.b+S*f.d+f.ty)*H}s[E]=O,s[E+1]=U}},t.prototype.copyTo=function(e){this.bones?(e.bones=new Array(this.bones.length),Xt.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,this.vertices&&(e.vertices=Xt.newFloatArray(this.vertices.length),Xt.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)),e.worldVerticesLength=this.worldVerticesLength,e.timelineAttachment=this.timelineAttachment},t.nextID=0,t}(bC),JD=function(i){ce(t,i);function t(e){var r=i.call(this,e)||this;return r.type=pr.BoundingBox,r.color=new ge(1,1,1,1),r}return t.prototype.copy=function(){var e=new t(this.name);return this.copyTo(e),e.color.setFromColor(this.color),e},t}(Zs),tL=function(i){ce(t,i);function t(e){var r=i.call(this,e)||this;return r.type=pr.Clipping,r.endSlot=null,r.color=new ge(.2275,.2275,.8078,1),r}return t.prototype.copy=function(){var e=new t(this.name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e},t}(Zs),Z0=function(i){ce(t,i);function t(e,r){var n=i.call(this,e)||this;return n.type=pr.Mesh,n.region=null,n.triangles=[],n.color=new ge(1,1,1,1),n.width=0,n.height=0,n.hullLength=0,n.edges=[],n.parentMesh=null,n.sequence=null,n.tempColor=new ge(0,0,0,0),n.path=r,n}return t.prototype.getParentMesh=function(){return this.parentMesh},t.prototype.setParentMesh=function(e){this.parentMesh=e,e&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)},t.prototype.copy=function(){if(this.parentMesh)return this.newLinkedMesh();var e=new t(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Float32Array(this.regionUVs.length),Xt.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.triangles=new Array(this.triangles.length),Xt.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,e.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(e.edges=new Array(this.edges.length),Xt.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e},t.prototype.computeWorldVertices=function(e,r,n,s,o,h){this.sequence!=null&&this.sequence.apply(e,this),i.prototype.computeWorldVertices.call(this,e,r,n,s,o,h)},t.prototype.newLinkedMesh=function(){var e=new t(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),e.timelineAttachment=this.timelineAttachment,e.setParentMesh(this.parentMesh?this.parentMesh:this),e},t}(Zs),af=function(i){ce(t,i);function t(e){var r=i.call(this,e)||this;return r.type=pr.Path,r.lengths=[],r.closed=!1,r.constantSpeed=!1,r.color=new ge(1,1,1,1),r}return t.prototype.copy=function(){var e=new t(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),Xt.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e},t}(Zs),eL=function(i){ce(t,i);function t(e){var r=i.call(this,e)||this;return r.type=pr.Point,r.x=0,r.y=0,r.rotation=0,r.color=new ge(.38,.94,0,1),r}return t.prototype.computeWorldPosition=function(e,r){var n=e.matrix;return r.x=this.x*n.a+this.y*n.c+e.worldX,r.y=this.x*n.b+this.y*n.d+e.worldY,r},t.prototype.computeWorldRotation=function(e){var r=e.matrix,n=wt.cosDeg(this.rotation),s=wt.sinDeg(this.rotation),o=n*r.a+s*r.c,h=n*r.b+s*r.d;return Math.atan2(h,o)*wt.radDeg},t.prototype.copy=function(){var e=new t(this.name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e},t}(Zs),EC=function(i){ce(t,i);function t(e,r){var n=i.call(this,e)||this;return n.type=pr.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new ge(1,1,1,1),n.rendererObject=null,n.region=null,n.sequence=null,n.offset=Xt.newFloatArray(8),n.uvs=Xt.newFloatArray(8),n.tempColor=new ge(1,1,1,1),n.path=r,n}return t.prototype.updateRegion=function(){if(!this.region)throw new Error("Region not set.");var e=this.region,r=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*r,o=-this.height/2*this.scaleY+this.region.offsetY*n,h=s+this.region.width*r,a=o+this.region.height*n,l=this.rotation*Math.PI/180,u=Math.cos(l),c=Math.sin(l),f=this.x,p=this.y,g=s*u+f,v=s*c,y=o*u+p,x=o*c,_=h*u+f,b=h*c,E=a*u+p,T=a*c,S=this.offset;S[0]=g-x,S[1]=y+v,S[2]=g-T,S[3]=E+v,S[4]=_-T,S[5]=E+b,S[6]=_-x,S[7]=y+b;var C=this.uvs;e.degrees==90?(C[2]=e.u,C[3]=e.v2,C[4]=e.u,C[5]=e.v,C[6]=e.u2,C[7]=e.v,C[0]=e.u2,C[1]=e.v2):(C[0]=e.u,C[1]=e.v2,C[2]=e.u,C[3]=e.v,C[4]=e.u2,C[5]=e.v,C[6]=e.u2,C[7]=e.v2)},t.prototype.computeWorldVertices=function(e,r,n,s){this.sequence!=null&&this.sequence.apply(e,this);var o=e.bone,h=this.offset,a=o.matrix,l=a.tx,u=a.ty,c=a.a,f=a.c,p=a.b,g=a.d,v=0,y=0;v=h[0],y=h[1],r[n]=v*c+y*f+l,r[n+1]=v*p+y*g+u,n+=s,v=h[2],y=h[3],r[n]=v*c+y*f+l,r[n+1]=v*p+y*g+u,n+=s,v=h[4],y=h[5],r[n]=v*c+y*f+l,r[n+1]=v*p+y*g+u,n+=s,v=h[6],y=h[7],r[n]=v*c+y*f+l,r[n+1]=v*p+y*g+u},t.prototype.copy=function(){var e=new t(this.name,this.path);return e.region=this.region,e.rendererObject=this.rendererObject,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,Xt.arrayCopy(this.uvs,0,e.uvs,0,8),Xt.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e.sequence=this.sequence!=null?this.sequence.copy():null,e},t.X1=0,t.Y1=1,t.C1R=2,t.C1G=3,t.C1B=4,t.C1A=5,t.U1=6,t.V1=7,t.X2=8,t.Y2=9,t.C2R=10,t.C2G=11,t.C2B=12,t.C2A=13,t.U2=14,t.V2=15,t.X3=16,t.Y3=17,t.C3R=18,t.C3G=19,t.C3B=20,t.C3A=21,t.U3=22,t.V3=23,t.X4=24,t.Y4=25,t.C4R=26,t.C4G=27,t.C4B=28,t.C4A=29,t.U4=30,t.V4=31,t}(bC),TC=function(){function i(t){this.id=i.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(t)}return i.prototype.copy=function(){var t=new i(this.regions.length);return Xt.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t},i.prototype.apply=function(t,e){var r=t.sequenceIndex;r==-1&&(r=this.setupIndex),r>=this.regions.length&&(r=this.regions.length-1);var n=this.regions[r];e.region!=n&&(e.region=n)},i.prototype.getPath=function(t,e){for(var r=t,n=(this.start+e).toString(),s=this.digits-n.length;s>0;s--)r+="0";return r+=n,r},i.nextID=function(){return i._nextID++},i._nextID=0,i}(),rn;(function(i){i[i.hold=0]="hold",i[i.once=1]="once",i[i.loop=2]="loop",i[i.pingpong=3]="pingpong",i[i.onceReverse=4]="onceReverse",i[i.loopReverse=5]="loopReverse",i[i.pingpongReverse=6]="pingpongReverse"})(rn||(rn={}));var SC=[rn.hold,rn.once,rn.loop,rn.pingpong,rn.onceReverse,rn.loopReverse,rn.pingpongReverse],Q0=function(){function i(t,e,r){if(this.timelines=[],this.timelineIds=new xC,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=r}return i.prototype.setTimelines=function(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())},i.prototype.hasTimeline=function(t){for(var e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1},i.prototype.apply=function(t,e,r,n,s,o,h,a){if(!t)throw new Error("skeleton cannot be null.");n&&this.duration!=0&&(r%=this.duration,e>0&&(e%=this.duration));for(var l=this.timelines,u=0,c=l.length;u<c;u++)l[u].apply(t,e,r,s,o,h,a)},i}(),Fe={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18,sequence:19},Ar=function(){function i(t,e){this.propertyIds=e,this.frames=Xt.newFloatArray(t*this.getFrameEntries())}return i.prototype.getPropertyIds=function(){return this.propertyIds},i.prototype.getFrameEntries=function(){return 1},i.prototype.getFrameCount=function(){return this.frames.length/this.getFrameEntries()},i.prototype.getDuration=function(){return this.frames[this.frames.length-this.getFrameEntries()]},i.search1=function(t,e){for(var r=t.length,n=1;n<r;n++)if(t[n]>e)return n-1;return r-1},i.search=function(t,e,r){for(var n=t.length,s=r;s<n;s+=r)if(t[s]>e)return s-r;return n-r},i}(),ws=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,n)||this;return s.curves=Xt.newFloatArray(e+r*18),s.curves[e-1]=1,s}return t.prototype.setLinear=function(e){this.curves[e]=0},t.prototype.setStepped=function(e){this.curves[e]=1},t.prototype.shrink=function(e){var r=this.getFrameCount()+e*18;if(this.curves.length>r){var n=Xt.newFloatArray(r);Xt.arrayCopy(this.curves,0,n,0,r),this.curves=n}},t.prototype.setBezier=function(e,r,n,s,o,h,a,l,u,c,f){var p=this.curves,g=this.getFrameCount()+e*18;n==0&&(p[r]=2+g);for(var v=(s-h*2+l)*.03,y=(o-a*2+u)*.03,x=((h-l)*3-s+c)*.006,_=((a-u)*3-o+f)*.006,b=v*2+x,E=y*2+_,T=(h-s)*.3+v+x*.16666667,S=(a-o)*.3+y+_*.16666667,C=s+T,M=o+S,P=g+18;g<P;g+=2)p[g]=C,p[g+1]=M,T+=b,S+=E,b+=x,E+=_,C+=T,M+=S},t.prototype.getBezierValue=function(e,r,n,s){var o=this.curves;if(o[s]>e){var h=this.frames[r],a=this.frames[r+n];return a+(e-h)/(o[s]-h)*(o[s+1]-a)}var l=s+18;for(s+=2;s<l;s+=2)if(o[s]>=e){var u=o[s-2],c=o[s-1];return c+(e-u)/(o[s]-u)*(o[s+1]-c)}r+=this.getFrameEntries();var f=o[l-2],p=o[l-1];return p+(e-f)/(this.frames[r]-f)*(this.frames[r+n]-p)},t}(Ar),_s=function(i){ce(t,i);function t(e,r,n){return i.call(this,e,r,[n])||this}return t.prototype.getFrameEntries=function(){return 2},t.prototype.setFrame=function(e,r,n){e<<=1,this.frames[e]=r,this.frames[e+1]=n},t.prototype.getCurveValue=function(e){for(var r=this.frames,n=r.length-2,s=2;s<=n;s+=2)if(r[s]>e){n=s-2;break}var o=this.curves[n>>1];switch(o){case 0:var h=r[n],a=r[n+1];return a+(e-h)/(r[n+2]-h)*(r[n+2+1]-a);case 1:return r[n+1]}return this.getBezierValue(e,n,1,o-2)},t}(ws),J0=function(i){ce(t,i);function t(e,r,n,s){return i.call(this,e,r,[n,s])||this}return t.prototype.getFrameEntries=function(){return 3},t.prototype.setFrame=function(e,r,n,s){e*=3,this.frames[e]=r,this.frames[e+1]=n,this.frames[e+2]=s},t}(ws),of=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.rotate+"|"+n)||this;return s.boneIndex=0,s.boneIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.bones[this.boneIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.rotation=l.data.rotation;return;case dt.first:l.rotation+=(l.data.rotation-l.rotation)*o}return}var c=this.getCurveValue(n);switch(h){case dt.setup:l.rotation=l.data.rotation+c*o;break;case dt.first:case dt.replace:c+=l.data.rotation-l.rotation;case dt.add:l.rotation+=c*o}}},t}(_s),AC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.x+"|"+n,Fe.y+"|"+n)||this;return s.boneIndex=0,s.boneIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.bones[this.boneIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.x=l.data.x,l.y=l.data.y;return;case dt.first:l.x+=(l.data.x-l.x)*o,l.y+=(l.data.y-l.y)*o}return}var c=0,f=0,p=Ar.search(u,n,3),g=this.curves[p/3];switch(g){case 0:var v=u[p];c=u[p+1],f=u[p+2];var y=(n-v)/(u[p+3]-v);c+=(u[p+3+1]-c)*y,f+=(u[p+3+2]-f)*y;break;case 1:c=u[p+1],f=u[p+2];break;default:c=this.getBezierValue(n,p,1,g-2),f=this.getBezierValue(n,p,2,g+18-2)}switch(h){case dt.setup:l.x=l.data.x+c*o,l.y=l.data.y+f*o;break;case dt.first:case dt.replace:l.x+=(l.data.x+c-l.x)*o,l.y+=(l.data.y+f-l.y)*o;break;case dt.add:l.x+=c*o,l.y+=f*o}}},t}(J0),CC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.x+"|"+n)||this;return s.boneIndex=0,s.boneIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.bones[this.boneIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.x=l.data.x;return;case dt.first:l.x+=(l.data.x-l.x)*o}return}var c=this.getCurveValue(n);switch(h){case dt.setup:l.x=l.data.x+c*o;break;case dt.first:case dt.replace:l.x+=(l.data.x+c-l.x)*o;break;case dt.add:l.x+=c*o}}},t}(_s),IC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.y+"|"+n)||this;return s.boneIndex=0,s.boneIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.bones[this.boneIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.y=l.data.y;return;case dt.first:l.y+=(l.data.y-l.y)*o}return}var c=this.getCurveValue(n);switch(h){case dt.setup:l.y=l.data.y+c*o;break;case dt.first:case dt.replace:l.y+=(l.data.y+c-l.y)*o;break;case dt.add:l.y+=c*o}}},t}(_s),RC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.scaleX+"|"+n,Fe.scaleY+"|"+n)||this;return s.boneIndex=0,s.boneIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.bones[this.boneIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.scaleX=l.data.scaleX,l.scaleY=l.data.scaleY;return;case dt.first:l.scaleX+=(l.data.scaleX-l.scaleX)*o,l.scaleY+=(l.data.scaleY-l.scaleY)*o}return}var c,f,p=Ar.search(u,n,3),g=this.curves[p/3];switch(g){case 0:var v=u[p];c=u[p+1],f=u[p+2];var y=(n-v)/(u[p+3]-v);c+=(u[p+3+1]-c)*y,f+=(u[p+3+2]-f)*y;break;case 1:c=u[p+1],f=u[p+2];break;default:c=this.getBezierValue(n,p,1,g-2),f=this.getBezierValue(n,p,2,g+18-2)}if(c*=l.data.scaleX,f*=l.data.scaleY,o==1)h==dt.add?(l.scaleX+=c-l.data.scaleX,l.scaleY+=f-l.data.scaleY):(l.scaleX=c,l.scaleY=f);else{var x=0,_=0;if(a==wn.mixOut)switch(h){case dt.setup:x=l.data.scaleX,_=l.data.scaleY,l.scaleX=x+(Math.abs(c)*wt.signum(x)-x)*o,l.scaleY=_+(Math.abs(f)*wt.signum(_)-_)*o;break;case dt.first:case dt.replace:x=l.scaleX,_=l.scaleY,l.scaleX=x+(Math.abs(c)*wt.signum(x)-x)*o,l.scaleY=_+(Math.abs(f)*wt.signum(_)-_)*o;break;case dt.add:l.scaleX+=(c-l.data.scaleX)*o,l.scaleY+=(f-l.data.scaleY)*o}else switch(h){case dt.setup:x=Math.abs(l.data.scaleX)*wt.signum(c),_=Math.abs(l.data.scaleY)*wt.signum(f),l.scaleX=x+(c-x)*o,l.scaleY=_+(f-_)*o;break;case dt.first:case dt.replace:x=Math.abs(l.scaleX)*wt.signum(c),_=Math.abs(l.scaleY)*wt.signum(f),l.scaleX=x+(c-x)*o,l.scaleY=_+(f-_)*o;break;case dt.add:l.scaleX+=(c-l.data.scaleX)*o,l.scaleY+=(f-l.data.scaleY)*o}}}},t}(J0),MC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.scaleX+"|"+n)||this;return s.boneIndex=0,s.boneIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.bones[this.boneIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.scaleX=l.data.scaleX;return;case dt.first:l.scaleX+=(l.data.scaleX-l.scaleX)*o}return}var c=this.getCurveValue(n)*l.data.scaleX;if(o==1)h==dt.add?l.scaleX+=c-l.data.scaleX:l.scaleX=c;else{var f=0;if(a==wn.mixOut)switch(h){case dt.setup:f=l.data.scaleX,l.scaleX=f+(Math.abs(c)*wt.signum(f)-f)*o;break;case dt.first:case dt.replace:f=l.scaleX,l.scaleX=f+(Math.abs(c)*wt.signum(f)-f)*o;break;case dt.add:l.scaleX+=(c-l.data.scaleX)*o}else switch(h){case dt.setup:f=Math.abs(l.data.scaleX)*wt.signum(c),l.scaleX=f+(c-f)*o;break;case dt.first:case dt.replace:f=Math.abs(l.scaleX)*wt.signum(c),l.scaleX=f+(c-f)*o;break;case dt.add:l.scaleX+=(c-l.data.scaleX)*o}}}},t}(_s),PC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.scaleY+"|"+n)||this;return s.boneIndex=0,s.boneIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.bones[this.boneIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.scaleY=l.data.scaleY;return;case dt.first:l.scaleY+=(l.data.scaleY-l.scaleY)*o}return}var c=this.getCurveValue(n)*l.data.scaleY;if(o==1)h==dt.add?l.scaleY+=c-l.data.scaleY:l.scaleY=c;else{var f=0;if(a==wn.mixOut)switch(h){case dt.setup:f=l.data.scaleY,l.scaleY=f+(Math.abs(c)*wt.signum(f)-f)*o;break;case dt.first:case dt.replace:f=l.scaleY,l.scaleY=f+(Math.abs(c)*wt.signum(f)-f)*o;break;case dt.add:l.scaleY+=(c-l.data.scaleY)*o}else switch(h){case dt.setup:f=Math.abs(l.data.scaleY)*wt.signum(c),l.scaleY=f+(c-f)*o;break;case dt.first:case dt.replace:f=Math.abs(l.scaleY)*wt.signum(c),l.scaleY=f+(c-f)*o;break;case dt.add:l.scaleY+=(c-l.data.scaleY)*o}}}},t}(_s),kC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.shearX+"|"+n,Fe.shearY+"|"+n)||this;return s.boneIndex=0,s.boneIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.bones[this.boneIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.shearX=l.data.shearX,l.shearY=l.data.shearY;return;case dt.first:l.shearX+=(l.data.shearX-l.shearX)*o,l.shearY+=(l.data.shearY-l.shearY)*o}return}var c=0,f=0,p=Ar.search(u,n,3),g=this.curves[p/3];switch(g){case 0:var v=u[p];c=u[p+1],f=u[p+2];var y=(n-v)/(u[p+3]-v);c+=(u[p+3+1]-c)*y,f+=(u[p+3+2]-f)*y;break;case 1:c=u[p+1],f=u[p+2];break;default:c=this.getBezierValue(n,p,1,g-2),f=this.getBezierValue(n,p,2,g+18-2)}switch(h){case dt.setup:l.shearX=l.data.shearX+c*o,l.shearY=l.data.shearY+f*o;break;case dt.first:case dt.replace:l.shearX+=(l.data.shearX+c-l.shearX)*o,l.shearY+=(l.data.shearY+f-l.shearY)*o;break;case dt.add:l.shearX+=c*o,l.shearY+=f*o}}},t}(J0),FC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.shearX+"|"+n)||this;return s.boneIndex=0,s.boneIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.bones[this.boneIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.shearX=l.data.shearX;return;case dt.first:l.shearX+=(l.data.shearX-l.shearX)*o}return}var c=this.getCurveValue(n);switch(h){case dt.setup:l.shearX=l.data.shearX+c*o;break;case dt.first:case dt.replace:l.shearX+=(l.data.shearX+c-l.shearX)*o;break;case dt.add:l.shearX+=c*o}}},t}(_s),BC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.shearY+"|"+n)||this;return s.boneIndex=0,s.boneIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.bones[this.boneIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.shearY=l.data.shearY;return;case dt.first:l.shearY+=(l.data.shearY-l.shearY)*o}return}var c=this.getCurveValue(n);switch(h){case dt.setup:l.shearY=l.data.shearY+c*o;break;case dt.first:case dt.replace:l.shearY+=(l.data.shearY+c-l.shearY)*o;break;case dt.add:l.shearY+=c*o}}},t}(_s),NC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,[Fe.rgb+"|"+n,Fe.alpha+"|"+n])||this;return s.slotIndex=0,s.slotIndex=n,s}return t.prototype.getFrameEntries=function(){return 5},t.prototype.setFrame=function(e,r,n,s,o,h){e*=5,this.frames[e]=r,this.frames[e+1]=n,this.frames[e+2]=s,this.frames[e+3]=o,this.frames[e+4]=h},t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.slots[this.slotIndex];if(l.bone.active){var u=this.frames,c=l.color;if(n<u[0]){var f=l.data.color;switch(h){case dt.setup:c.setFromColor(f);return;case dt.first:c.add((f.r-c.r)*o,(f.g-c.g)*o,(f.b-c.b)*o,(f.a-c.a)*o)}return}var p=0,g=0,v=0,y=0,x=Ar.search(u,n,5),_=this.curves[x/5];switch(_){case 0:var b=u[x];p=u[x+1],g=u[x+2],v=u[x+3],y=u[x+4];var E=(n-b)/(u[x+5]-b);p+=(u[x+5+1]-p)*E,g+=(u[x+5+2]-g)*E,v+=(u[x+5+3]-v)*E,y+=(u[x+5+4]-y)*E;break;case 1:p=u[x+1],g=u[x+2],v=u[x+3],y=u[x+4];break;default:p=this.getBezierValue(n,x,1,_-2),g=this.getBezierValue(n,x,2,_+18-2),v=this.getBezierValue(n,x,3,_+18*2-2),y=this.getBezierValue(n,x,4,_+18*3-2)}o==1?c.set(p,g,v,y):(h==dt.setup&&c.setFromColor(l.data.color),c.add((p-c.r)*o,(g-c.g)*o,(v-c.b)*o,(y-c.a)*o))}},t}(ws),OC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,[Fe.rgb+"|"+n])||this;return s.slotIndex=0,s.slotIndex=n,s}return t.prototype.getFrameEntries=function(){return 4},t.prototype.setFrame=function(e,r,n,s,o){e<<=2,this.frames[e]=r,this.frames[e+1]=n,this.frames[e+2]=s,this.frames[e+3]=o},t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.slots[this.slotIndex];if(l.bone.active){var u=this.frames,c=l.color;if(n<u[0]){var f=l.data.color;switch(h){case dt.setup:c.r=f.r,c.g=f.g,c.b=f.b;return;case dt.first:c.r+=(f.r-c.r)*o,c.g+=(f.g-c.g)*o,c.b+=(f.b-c.b)*o}return}var p=0,g=0,v=0,y=Ar.search(u,n,4),x=this.curves[y>>2];switch(x){case 0:var _=u[y];p=u[y+1],g=u[y+2],v=u[y+3];var b=(n-_)/(u[y+4]-_);p+=(u[y+4+1]-p)*b,g+=(u[y+4+2]-g)*b,v+=(u[y+4+3]-v)*b;break;case 1:p=u[y+1],g=u[y+2],v=u[y+3];break;default:p=this.getBezierValue(n,y,1,x-2),g=this.getBezierValue(n,y,2,x+18-2),v=this.getBezierValue(n,y,3,x+18*2-2)}if(o==1)c.r=p,c.g=g,c.b=v;else{if(h==dt.setup){var f=l.data.color;c.r=f.r,c.g=f.g,c.b=f.b}c.r+=(p-c.r)*o,c.g+=(g-c.g)*o,c.b+=(v-c.b)*o}}},t}(ws),DC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.alpha+"|"+n)||this;return s.slotIndex=0,s.slotIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.slots[this.slotIndex];if(l.bone.active){var u=l.color;if(n<this.frames[0]){var c=l.data.color;switch(h){case dt.setup:u.a=c.a;return;case dt.first:u.a+=(c.a-u.a)*o}return}var f=this.getCurveValue(n);o==1?u.a=f:(h==dt.setup&&(u.a=l.data.color.a),u.a+=(f-u.a)*o)}},t}(_s),LC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,[Fe.rgb+"|"+n,Fe.alpha+"|"+n,Fe.rgb2+"|"+n])||this;return s.slotIndex=0,s.slotIndex=n,s}return t.prototype.getFrameEntries=function(){return 8},t.prototype.setFrame=function(e,r,n,s,o,h,a,l,u){e<<=3,this.frames[e]=r,this.frames[e+1]=n,this.frames[e+2]=s,this.frames[e+3]=o,this.frames[e+4]=h,this.frames[e+5]=a,this.frames[e+6]=l,this.frames[e+7]=u},t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.slots[this.slotIndex];if(l.bone.active){var u=this.frames,c=l.color,f=l.darkColor;if(n<u[0]){var p=l.data.color,g=l.data.darkColor;switch(h){case dt.setup:c.setFromColor(p),f.r=g.r,f.g=g.g,f.b=g.b;return;case dt.first:c.add((p.r-c.r)*o,(p.g-c.g)*o,(p.b-c.b)*o,(p.a-c.a)*o),f.r+=(g.r-f.r)*o,f.g+=(g.g-f.g)*o,f.b+=(g.b-f.b)*o}return}var v=0,y=0,x=0,_=0,b=0,E=0,T=0,S=Ar.search(u,n,8),C=this.curves[S>>3];switch(C){case 0:var M=u[S];v=u[S+1],y=u[S+2],x=u[S+3],_=u[S+4],b=u[S+5],E=u[S+6],T=u[S+7];var P=(n-M)/(u[S+8]-M);v+=(u[S+8+1]-v)*P,y+=(u[S+8+2]-y)*P,x+=(u[S+8+3]-x)*P,_+=(u[S+8+4]-_)*P,b+=(u[S+8+5]-b)*P,E+=(u[S+8+6]-E)*P,T+=(u[S+8+7]-T)*P;break;case 1:v=u[S+1],y=u[S+2],x=u[S+3],_=u[S+4],b=u[S+5],E=u[S+6],T=u[S+7];break;default:v=this.getBezierValue(n,S,1,C-2),y=this.getBezierValue(n,S,2,C+18-2),x=this.getBezierValue(n,S,3,C+18*2-2),_=this.getBezierValue(n,S,4,C+18*3-2),b=this.getBezierValue(n,S,5,C+18*4-2),E=this.getBezierValue(n,S,6,C+18*5-2),T=this.getBezierValue(n,S,7,C+18*6-2)}if(o==1)c.set(v,y,x,_),f.r=b,f.g=E,f.b=T;else{if(h==dt.setup){c.setFromColor(l.data.color);var g=l.data.darkColor;f.r=g.r,f.g=g.g,f.b=g.b}c.add((v-c.r)*o,(y-c.g)*o,(x-c.b)*o,(_-c.a)*o),f.r+=(b-f.r)*o,f.g+=(E-f.g)*o,f.b+=(T-f.b)*o}}},t}(ws),UC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,[Fe.rgb+"|"+n,Fe.rgb2+"|"+n])||this;return s.slotIndex=0,s.slotIndex=n,s}return t.prototype.getFrameEntries=function(){return 7},t.prototype.setFrame=function(e,r,n,s,o,h,a,l){e*=7,this.frames[e]=r,this.frames[e+1]=n,this.frames[e+2]=s,this.frames[e+3]=o,this.frames[e+4]=h,this.frames[e+5]=a,this.frames[e+6]=l},t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.slots[this.slotIndex];if(l.bone.active){var u=this.frames,c=l.color,f=l.darkColor;if(n<u[0]){var p=l.data.color,g=l.data.darkColor;switch(h){case dt.setup:c.r=p.r,c.g=p.g,c.b=p.b,f.r=g.r,f.g=g.g,f.b=g.b;return;case dt.first:c.r+=(p.r-c.r)*o,c.g+=(p.g-c.g)*o,c.b+=(p.b-c.b)*o,f.r+=(g.r-f.r)*o,f.g+=(g.g-f.g)*o,f.b+=(g.b-f.b)*o}return}var v=0,y=0,x=0,_=0,b=0,E=0,T=Ar.search(u,n,7),S=this.curves[T/7];switch(S){case 0:var C=u[T];v=u[T+1],y=u[T+2],x=u[T+3],_=u[T+4],b=u[T+5],E=u[T+6];var M=(n-C)/(u[T+7]-C);v+=(u[T+7+1]-v)*M,y+=(u[T+7+2]-y)*M,x+=(u[T+7+3]-x)*M,_+=(u[T+7+4]-_)*M,b+=(u[T+7+5]-b)*M,E+=(u[T+7+6]-E)*M;break;case 1:v=u[T+1],y=u[T+2],x=u[T+3],_=u[T+4],b=u[T+5],E=u[T+6];break;default:v=this.getBezierValue(n,T,1,S-2),y=this.getBezierValue(n,T,2,S+18-2),x=this.getBezierValue(n,T,3,S+18*2-2),_=this.getBezierValue(n,T,4,S+18*3-2),b=this.getBezierValue(n,T,5,S+18*4-2),E=this.getBezierValue(n,T,6,S+18*5-2)}if(o==1)c.r=v,c.g=y,c.b=x,f.r=_,f.g=b,f.b=E;else{if(h==dt.setup){var p=l.data.color,g=l.data.darkColor;c.r=p.r,c.g=p.g,c.b=p.b,f.r=g.r,f.g=g.g,f.b=g.b}c.r+=(v-c.r)*o,c.g+=(y-c.g)*o,c.b+=(x-c.b)*o,f.r+=(_-f.r)*o,f.g+=(b-f.g)*o,f.b+=(E-f.b)*o}}},t}(ws),Ml=function(i){ce(t,i);function t(e,r){var n=i.call(this,e,[Fe.attachment+"|"+r])||this;return n.slotIndex=0,n.slotIndex=r,n.attachmentNames=new Array(e),n}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,n){this.frames[e]=r,this.attachmentNames[e]=n},t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.slots[this.slotIndex];if(l.bone.active){if(a==wn.mixOut){h==dt.setup&&this.setAttachment(e,l,l.data.attachmentName);return}if(n<this.frames[0]){(h==dt.setup||h==dt.first)&&this.setAttachment(e,l,l.data.attachmentName);return}this.setAttachment(e,l,this.attachmentNames[Ar.search1(this.frames,n)])}},t.prototype.setAttachment=function(e,r,n){r.setAttachment(n?e.getAttachment(this.slotIndex,n):null)},t}(Ar),VC=function(i){ce(t,i);function t(e,r,n,s){var o=i.call(this,e,r,[Fe.deform+"|"+n+"|"+s.id])||this;return o.slotIndex=0,o.slotIndex=n,o.attachment=s,o.vertices=new Array(e),o}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,n){this.frames[e]=r,this.vertices[e]=n},t.prototype.setBezier=function(e,r,n,s,o,h,a,l,u,c,f){var p=this.curves,g=this.getFrameCount()+e*18;n==0&&(p[r]=2+g);for(var v=(s-h*2+l)*.03,y=u*.03-a*.06,x=((h-l)*3-s+c)*.006,_=(a-u+.33333333)*.018,b=v*2+x,E=y*2+_,T=(h-s)*.3+v+x*.16666667,S=a*.3+y+_*.16666667,C=s+T,M=S,P=g+18;g<P;g+=2)p[g]=C,p[g+1]=M,T+=b,S+=E,b+=x,E+=_,C+=T,M+=S},t.prototype.getCurvePercent=function(e,r){var n=this.curves,s=n[r];switch(s){case 0:var o=this.frames[r];return(e-o)/(this.frames[r+this.getFrameEntries()]-o);case 1:return 0}if(s-=2,n[s]>e){var h=this.frames[r];return n[s+1]*(e-h)/(n[s]-h)}var a=s+18;for(s+=2;s<a;s+=2)if(n[s]>=e){var l=n[s-2],u=n[s-1];return u+(e-l)/(n[s]-l)*(n[s+1]-u)}var c=n[a-2],f=n[a-1];return f+(1-f)*(e-c)/(this.frames[r+this.getFrameEntries()]-c)},t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.slots[this.slotIndex];if(l.bone.active){var u=l.getAttachment();if(u&&!(!(u instanceof Zs)||u.timelineAttachment!=this.attachment)){var c=l.deform;c.length==0&&(h=dt.setup);var f=this.vertices,p=f[0].length,g=this.frames;if(n<g[0]){switch(h){case dt.setup:c.length=0;return;case dt.first:if(o==1){c.length=0;return}c.length=p;var v=u;if(v.bones){o=1-o;for(var x=0;x<p;x++)c[x]*=o}else for(var y=v.vertices,x=0;x<p;x++)c[x]+=(y[x]-c[x])*o}return}if(c.length=p,n>=g[g.length-1]){var _=f[g.length-1];if(o==1)if(h==dt.add){var v=u;if(v.bones)for(var E=0;E<p;E++)c[E]+=_[E];else for(var y=v.vertices,b=0;b<p;b++)c[b]+=_[b]-y[b]}else Xt.arrayCopy(_,0,c,0,p);else switch(h){case dt.setup:{var T=u;if(T.bones)for(var M=0;M<p;M++)c[M]=_[M]*o;else for(var y=T.vertices,S=0;S<p;S++){var C=y[S];c[S]=C+(_[S]-C)*o}break}case dt.first:case dt.replace:for(var P=0;P<p;P++)c[P]+=(_[P]-c[P])*o;break;case dt.add:var v=u;if(v.bones)for(var V=0;V<p;V++)c[V]+=_[V]*o;else for(var y=v.vertices,F=0;F<p;F++)c[F]+=(_[F]-y[F])*o}return}var O=Ar.search1(g,n),U=this.getCurvePercent(n,O),H=f[O],W=f[O+1];if(o==1)if(h==dt.add){var v=u;if(v.bones)for(var N=0;N<p;N++){var L=H[N];c[N]+=L+(W[N]-L)*U}else for(var y=v.vertices,B=0;B<p;B++){var L=H[B];c[B]+=L+(W[B]-L)*U-y[B]}}else for(var Y=0;Y<p;Y++){var L=H[Y];c[Y]=L+(W[Y]-L)*U}else switch(h){case dt.setup:{var D=u;if(D.bones)for(var X=0;X<p;X++){var L=H[X];c[X]=(L+(W[X]-L)*U)*o}else for(var y=D.vertices,k=0;k<p;k++){var L=H[k],C=y[k];c[k]=C+(L+(W[k]-L)*U-C)*o}break}case dt.first:case dt.replace:for(var $=0;$<p;$++){var L=H[$];c[$]+=(L+(W[$]-L)*U-c[$])*o}break;case dt.add:var v=u;if(v.bones)for(var K=0;K<p;K++){var L=H[K];c[K]+=(L+(W[K]-L)*U)*o}else for(var y=v.vertices,j=0;j<p;j++){var L=H[j];c[j]+=(L+(W[j]-L)*U-y[j])*o}}}}},t}(ws),tx=function(i){ce(t,i);function t(e){var r=i.call(this,e,t.propertyIds)||this;return r.events=new Array(e),r}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r){this.frames[e]=r.time,this.events[e]=r},t.prototype.apply=function(e,r,n,s,o,h,a){if(s){var l=this.frames,u=this.frames.length;if(r>n)this.apply(e,r,Number.MAX_VALUE,s,o,h,a),r=-1;else if(r>=l[u-1])return;if(!(n<l[0])){var c=0;if(r<l[0])c=0;else{c=Ar.search1(l,r)+1;for(var f=l[c];c>0&&l[c-1]==f;)c--}for(;c<u&&n>=l[c];c++)s.push(this.events[c])}}},t.propertyIds=[""+Fe.event],t}(Ar),au=function(i){ce(t,i);function t(e){var r=i.call(this,e,t.propertyIds)||this;return r.drawOrders=new Array(e),r}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,n){this.frames[e]=r,this.drawOrders[e]=n},t.prototype.apply=function(e,r,n,s,o,h,a){if(a==wn.mixOut){h==dt.setup&&Xt.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}if(n<this.frames[0]){(h==dt.setup||h==dt.first)&&Xt.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}var l=Ar.search1(this.frames,n),u=this.drawOrders[l];if(!u)Xt.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);else for(var c=e.drawOrder,f=e.slots,p=0,g=u.length;p<g;p++)c[p]=f[u[p]]},t.propertyIds=[""+Fe.drawOrder],t}(Ar),XC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,[Fe.ikConstraint+"|"+n])||this;return s.ikConstraintIndex=0,s.ikConstraintIndex=n,s}return t.prototype.getFrameEntries=function(){return 6},t.prototype.setFrame=function(e,r,n,s,o,h,a){e*=6,this.frames[e]=r,this.frames[e+1]=n,this.frames[e+2]=s,this.frames[e+3]=o,this.frames[e+4]=h?1:0,this.frames[e+5]=a?1:0},t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.ikConstraints[this.ikConstraintIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch;return;case dt.first:l.mix+=(l.data.mix-l.mix)*o,l.softness+=(l.data.softness-l.softness)*o,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}return}var c=0,f=0,p=Ar.search(u,n,6),g=this.curves[p/6];switch(g){case 0:var v=u[p];c=u[p+1],f=u[p+2];var y=(n-v)/(u[p+6]-v);c+=(u[p+6+1]-c)*y,f+=(u[p+6+2]-f)*y;break;case 1:c=u[p+1],f=u[p+2];break;default:c=this.getBezierValue(n,p,1,g-2),f=this.getBezierValue(n,p,2,g+18-2)}h==dt.setup?(l.mix=l.data.mix+(c-l.data.mix)*o,l.softness=l.data.softness+(f-l.data.softness)*o,a==wn.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=u[p+3],l.compress=u[p+4]!=0,l.stretch=u[p+5]!=0)):(l.mix+=(c-l.mix)*o,l.softness+=(f-l.softness)*o,a==wn.mixIn&&(l.bendDirection=u[p+3],l.compress=u[p+4]!=0,l.stretch=u[p+5]!=0))}},t}(ws),GC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,[Fe.transformConstraint+"|"+n])||this;return s.transformConstraintIndex=0,s.transformConstraintIndex=n,s}return t.prototype.getFrameEntries=function(){return 7},t.prototype.setFrame=function(e,r,n,s,o,h,a,l){var u=this.frames;e*=7,u[e]=r,u[e+1]=n,u[e+2]=s,u[e+3]=o,u[e+4]=h,u[e+5]=a,u[e+6]=l},t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.transformConstraints[this.transformConstraintIndex];if(l.active){var u=this.frames;if(n<u[0]){var c=l.data;switch(h){case dt.setup:l.mixRotate=c.mixRotate,l.mixX=c.mixX,l.mixY=c.mixY,l.mixScaleX=c.mixScaleX,l.mixScaleY=c.mixScaleY,l.mixShearY=c.mixShearY;return;case dt.first:l.mixRotate+=(c.mixRotate-l.mixRotate)*o,l.mixX+=(c.mixX-l.mixX)*o,l.mixY+=(c.mixY-l.mixY)*o,l.mixScaleX+=(c.mixScaleX-l.mixScaleX)*o,l.mixScaleY+=(c.mixScaleY-l.mixScaleY)*o,l.mixShearY+=(c.mixShearY-l.mixShearY)*o}return}var f,p,g,v,y,x,_=Ar.search(u,n,7),b=this.curves[_/7];switch(b){case 0:var E=u[_];f=u[_+1],p=u[_+2],g=u[_+3],v=u[_+4],y=u[_+5],x=u[_+6];var T=(n-E)/(u[_+7]-E);f+=(u[_+7+1]-f)*T,p+=(u[_+7+2]-p)*T,g+=(u[_+7+3]-g)*T,v+=(u[_+7+4]-v)*T,y+=(u[_+7+5]-y)*T,x+=(u[_+7+6]-x)*T;break;case 1:f=u[_+1],p=u[_+2],g=u[_+3],v=u[_+4],y=u[_+5],x=u[_+6];break;default:f=this.getBezierValue(n,_,1,b-2),p=this.getBezierValue(n,_,2,b+18-2),g=this.getBezierValue(n,_,3,b+18*2-2),v=this.getBezierValue(n,_,4,b+18*3-2),y=this.getBezierValue(n,_,5,b+18*4-2),x=this.getBezierValue(n,_,6,b+18*5-2)}if(h==dt.setup){var c=l.data;l.mixRotate=c.mixRotate+(f-c.mixRotate)*o,l.mixX=c.mixX+(p-c.mixX)*o,l.mixY=c.mixY+(g-c.mixY)*o,l.mixScaleX=c.mixScaleX+(v-c.mixScaleX)*o,l.mixScaleY=c.mixScaleY+(y-c.mixScaleY)*o,l.mixShearY=c.mixShearY+(x-c.mixShearY)*o}else l.mixRotate+=(f-l.mixRotate)*o,l.mixX+=(p-l.mixX)*o,l.mixY+=(g-l.mixY)*o,l.mixScaleX+=(v-l.mixScaleX)*o,l.mixScaleY+=(y-l.mixScaleY)*o,l.mixShearY+=(x-l.mixShearY)*o}},t}(ws),YC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.pathConstraintPosition+"|"+n)||this;return s.pathConstraintIndex=0,s.pathConstraintIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.position=l.data.position;return;case dt.first:l.position+=(l.data.position-l.position)*o}return}var c=this.getCurveValue(n);h==dt.setup?l.position=l.data.position+(c-l.data.position)*o:l.position+=(c-l.position)*o}},t}(_s),$C=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,Fe.pathConstraintSpacing+"|"+n)||this;return s.pathConstraintIndex=0,s.pathConstraintIndex=n,s}return t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.spacing=l.data.spacing;return;case dt.first:l.spacing+=(l.data.spacing-l.spacing)*o}return}var c=this.getCurveValue(n);h==dt.setup?l.spacing=l.data.spacing+(c-l.data.spacing)*o:l.spacing+=(c-l.spacing)*o}},t}(_s),WC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,r,[Fe.pathConstraintMix+"|"+n])||this;return s.pathConstraintIndex=0,s.pathConstraintIndex=n,s}return t.prototype.getFrameEntries=function(){return 4},t.prototype.setFrame=function(e,r,n,s,o){var h=this.frames;e<<=2,h[e]=r,h[e+1]=n,h[e+2]=s,h[e+3]=o},t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(n<u[0]){switch(h){case dt.setup:l.mixRotate=l.data.mixRotate,l.mixX=l.data.mixX,l.mixY=l.data.mixY;return;case dt.first:l.mixRotate+=(l.data.mixRotate-l.mixRotate)*o,l.mixX+=(l.data.mixX-l.mixX)*o,l.mixY+=(l.data.mixY-l.mixY)*o}return}var c,f,p,g=Ar.search(u,n,4),v=this.curves[g>>2];switch(v){case 0:var y=u[g];c=u[g+1],f=u[g+2],p=u[g+3];var x=(n-y)/(u[g+4]-y);c+=(u[g+4+1]-c)*x,f+=(u[g+4+2]-f)*x,p+=(u[g+4+3]-p)*x;break;case 1:c=u[g+1],f=u[g+2],p=u[g+3];break;default:c=this.getBezierValue(n,g,1,v-2),f=this.getBezierValue(n,g,2,v+18-2),p=this.getBezierValue(n,g,3,v+18*2-2)}if(h==dt.setup){var _=l.data;l.mixRotate=_.mixRotate+(c-_.mixRotate)*o,l.mixX=_.mixX+(f-_.mixX)*o,l.mixY=_.mixY+(p-_.mixY)*o}else l.mixRotate+=(c-l.mixRotate)*o,l.mixX+=(f-l.mixX)*o,l.mixY+=(p-l.mixY)*o}},t}(ws),HC=function(i){ce(t,i);function t(e,r,n){var s=i.call(this,e,[Fe.sequence+"|"+r+"|"+n.sequence.id])||this;return s.slotIndex=r,s.attachment=n,s}return t.prototype.getFrameEntries=function(){return t.ENTRIES},t.prototype.getSlotIndex=function(){return this.slotIndex},t.prototype.getAttachment=function(){return this.attachment},t.prototype.setFrame=function(e,r,n,s,o){var h=this.frames;e*=t.ENTRIES,h[e]=r,h[e+t.MODE]=n|s<<4,h[e+t.DELAY]=o},t.prototype.apply=function(e,r,n,s,o,h,a){var l=e.slots[this.slotIndex];if(l.bone.active){var u=l.attachment,c=this.attachment;if(!(u!=c&&(!(u instanceof Zs)||u.timelineAttachment!=c))){var f=this.frames;if(n<f[0]){(h==dt.setup||h==dt.first)&&(l.sequenceIndex=-1);return}var p=Ar.search(f,n,t.ENTRIES),g=f[p],v=f[p+t.MODE],y=f[p+t.DELAY];if(this.attachment.sequence){var x=v>>4,_=this.attachment.sequence.regions.length,b=SC[v&15];if(b!=rn.hold)switch(x+=(n-g)/y+1e-5|0,b){case rn.once:x=Math.min(_-1,x);break;case rn.loop:x%=_;break;case rn.pingpong:{var E=(_<<1)-2;x=E==0?0:x%E,x>=_&&(x=E-x);break}case rn.onceReverse:x=Math.max(_-1-x,0);break;case rn.loopReverse:x=_-1-x%_;break;case rn.pingpongReverse:{var E=(_<<1)-2;x=E==0?0:(x+_-1)%E,x>=_&&(x=E-x)}}l.sequenceIndex=x}}}},t.ENTRIES=3,t.MODE=1,t.DELAY=2,t}(Ar),rL=function(){function i(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new iL(this),this.propertyIDs=new xC,this.animationsChanged=!1,this.trackEntryPool=new wC(function(){return new nL}),this.data=t}return i.emptyAnimation=function(){return i._emptyAnimation},i.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,r=0,n=e.length;r<n;r++){var s=e[r];if(s){s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;var o=t*s.timeScale;if(s.delay>0){if(s.delay-=o,s.delay>0)continue;o=-s.delay,s.delay=0}var h=s.next;if(h){var a=s.trackLast-h.delay;if(a>=0){for(h.delay=0,h.trackTime+=s.timeScale==0?0:(a/s.timeScale+t)*h.timeScale,s.trackTime+=o,this.setCurrent(r,h,!0);h.mixingFrom;)h.mixTime+=t,h=h.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&!s.mixingFrom){e[r]=null,this.queue.end(s),this.clearNext(s);continue}if(s.mixingFrom&&this.updateMixingFrom(s,t)){var l=s.mixingFrom;for(s.mixingFrom=null,l&&(l.mixingTo=null);l;)this.queue.end(l),l=l.mixingFrom}s.trackTime+=o}}this.queue.drain()},i.prototype.updateMixingFrom=function(t,e){var r=t.mixingFrom;if(!r)return!0;var n=this.updateMixingFrom(r,e);return r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((r.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=r.mixingFrom,r.mixingFrom&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),n):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1)},i.prototype.apply=function(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,r=this.tracks,n=!1,s=0,o=r.length;s<o;s++){var h=r[s];if(!(!h||h.delay>0)){n=!0;var a=s==0?dt.first:h.mixBlend,l=h.alpha;h.mixingFrom?l*=this.applyMixingFrom(h,t,a):h.trackTime>=h.trackEnd&&!h.next&&(l=0);var u=h.animationLast,c=h.getAnimationTime(),f=c,p=e;h.reverse&&(f=h.animation.duration-f,p=null);var g=h.animation.timelines,v=g.length;if(s==0&&l==1||a==dt.add)for(var y=0;y<v;y++){Xt.webkit602BugfixHelper(l,a);var x=g[y];x instanceof Ml?this.applyAttachmentTimeline(x,t,f,a,!0):x.apply(t,u,f,p,l,a,wn.mixIn)}else{var _=h.timelineMode,b=h.shortestRotation,E=!b&&h.timelinesRotation.length!=v<<1;E&&(h.timelinesRotation.length=v<<1);for(var y=0;y<v;y++){var T=g[y],S=_[y]==lv?a:dt.setup;!b&&T instanceof of?this.applyRotateTimeline(T,t,f,l,S,h.timelinesRotation,y<<1,E):T instanceof Ml?this.applyAttachmentTimeline(T,t,f,a,!0):(Xt.webkit602BugfixHelper(l,a),T.apply(t,u,f,p,l,S,wn.mixIn))}}this.queueEvents(h,c),e.length=0,h.nextAnimationLast=c,h.nextTrackLast=h.trackTime}}for(var C=this.unkeyedState+YE,M=t.slots,P=0,F=t.slots.length;P<F;P++){var V=M[P];if(V.attachmentState==C){var O=V.data.attachmentName;V.setAttachment(O?t.getAttachment(V.data.index,O):null)}}return this.unkeyedState+=2,this.queue.drain(),n},i.prototype.applyMixingFrom=function(t,e,r){var n=t.mixingFrom;n.mixingFrom&&this.applyMixingFrom(n,e,r);var s=0;t.mixDuration==0?(s=1,r==dt.first&&(r=dt.setup)):(s=t.mixTime/t.mixDuration,s>1&&(s=1),r!=dt.first&&(r=n.mixBlend));var o=s<n.attachmentThreshold,h=s<n.drawOrderThreshold,a=n.animation.timelines,l=a.length,u=n.alpha*t.interruptAlpha,c=u*(1-s),f=n.animationLast,p=n.getAnimationTime(),g=p,v=null;if(n.reverse?g=n.animation.duration-g:s<n.eventThreshold&&(v=this.events),r==dt.add)for(var y=0;y<l;y++)a[y].apply(e,f,g,v,c,r,wn.mixOut);else{var x=n.timelineMode,_=n.timelineHoldMix,b=n.shortestRotation,E=!b&&n.timelinesRotation.length!=l<<1;E&&(n.timelinesRotation.length=l<<1),n.totalAlpha=0;for(var y=0;y<l;y++){var T=a[y],S=wn.mixOut,C=void 0,M=0;switch(x[y]){case lv:if(!h&&T instanceof au)continue;C=r,M=c;break;case XE:C=dt.setup,M=c;break;case GE:C=r,M=u;break;case hv:C=dt.setup,M=u;break;default:C=dt.setup;var P=_[y];M=u*Math.max(0,1-P.mixTime/P.mixDuration);break}n.totalAlpha+=M,!b&&T instanceof of?this.applyRotateTimeline(T,e,g,M,C,n.timelinesRotation,y<<1,E):T instanceof Ml?this.applyAttachmentTimeline(T,e,g,C,o):(Xt.webkit602BugfixHelper(M,r),h&&T instanceof au&&C==dt.setup&&(S=wn.mixIn),T.apply(e,f,g,v,M,C,S))}}return t.mixDuration>0&&this.queueEvents(n,p),this.events.length=0,n.nextAnimationLast=p,n.nextTrackLast=n.trackTime,s},i.prototype.applyAttachmentTimeline=function(t,e,r,n,s){var o=e.slots[t.slotIndex];o.bone.active&&(r<t.frames[0]?(n==dt.setup||n==dt.first)&&this.setAttachment(e,o,o.data.attachmentName,s):this.setAttachment(e,o,t.attachmentNames[Ar.search1(t.frames,r)],s),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+YE))},i.prototype.setAttachment=function(t,e,r,n){e.setAttachment(r?t.getAttachment(e.data.index,r):null),n&&(e.attachmentState=this.unkeyedState+aL)},i.prototype.applyRotateTimeline=function(t,e,r,n,s,o,h,a){if(a&&(o[h]=0),n==1){t.apply(e,0,r,null,1,s,wn.mixIn);return}var l=e.bones[t.boneIndex];if(l.active){var u=t.frames,c=0,f=0;if(r<u[0])switch(s){case dt.setup:l.rotation=l.data.rotation;default:return;case dt.first:c=l.rotation,f=l.data.rotation}else c=s==dt.setup?l.data.rotation:l.rotation,f=l.data.rotation+t.getCurveValue(r);var p=0,g=f-c;if(g-=(16384-(16384.499999999996-g/360|0))*360,g==0)p=o[h];else{var v=0,y=0;a?(v=0,y=g):(v=o[h],y=o[h+1]);var x=g>0,_=v>=0;wt.signum(y)!=wt.signum(g)&&Math.abs(y)<=90&&(Math.abs(v)>180&&(v+=360*wt.signum(v)),_=x),p=g+v-v%360,_!=x&&(p+=360*wt.signum(v)),o[h]=p}o[h+1]=g,l.rotation=c+p*n}},i.prototype.queueEvents=function(t,e){for(var r=t.animationStart,n=t.animationEnd,s=n-r,o=t.trackLast%s,h=this.events,a=0,l=h.length;a<l;a++){var u=h[a];if(u.time<o)break;u.time>n||this.queue.event(t,u)}var c=!1;for(t.loop?c=s==0||o>t.trackTime%s:c=e>=n&&t.animationLast<n,c&&this.queue.complete(t);a<l;a++){var f=h[a];f.time<r||this.queue.event(t,f)}},i.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,r=this.tracks.length;e<r;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},i.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e){this.queue.end(e),this.clearNext(e);for(var r=e;;){var n=r.mixingFrom;if(!n)break;this.queue.end(n),r.mixingFrom=null,r.mixingTo=null,r=n}this.tracks[e.trackIndex]=null,this.queue.drain()}}},i.prototype.setCurrent=function(t,e,r){var n=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,n&&(r&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,n.mixingFrom&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)},i.prototype.setAnimation=function(t,e,r){r===void 0&&(r=!1);var n=this.data.skeletonData.findAnimation(e);if(!n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,r)},i.prototype.setAnimationWith=function(t,e,r){if(r===void 0&&(r=!1),!e)throw new Error("animation cannot be null.");var n=!0,s=this.expandToIndex(t);s&&(s.nextTrackLast==-1?(this.tracks[t]=s.mixingFrom,this.queue.interrupt(s),this.queue.end(s),this.clearNext(s),s=s.mixingFrom,n=!1):this.clearNext(s));var o=this.trackEntry(t,e,r,s);return this.setCurrent(t,o,n),this.queue.drain(),o},i.prototype.addAnimation=function(t,e,r,n){r===void 0&&(r=!1),n===void 0&&(n=0);var s=this.data.skeletonData.findAnimation(e);if(!s)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,s,r,n)},i.prototype.addAnimationWith=function(t,e,r,n){if(r===void 0&&(r=!1),n===void 0&&(n=0),!e)throw new Error("animation cannot be null.");var s=this.expandToIndex(t);if(s)for(;s.next;)s=s.next;var o=this.trackEntry(t,e,r,s);return s?(s.next=o,o.previous=s,n<=0&&(n+=s.getTrackComplete()-o.mixDuration)):(this.setCurrent(t,o,!0),this.queue.drain()),o.delay=n,o},i.prototype.setEmptyAnimation=function(t,e){e===void 0&&(e=0);var r=this.setAnimationWith(t,i.emptyAnimation(),!1);return r.mixDuration=e,r.trackEnd=e,r},i.prototype.addEmptyAnimation=function(t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var n=this.addAnimationWith(t,i.emptyAnimation(),!1,r);return r<=0&&(n.delay+=n.mixDuration-e),n.mixDuration=e,n.trackEnd=e,n},i.prototype.setEmptyAnimations=function(t){t===void 0&&(t=0);var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++){var s=this.tracks[r];s&&this.setEmptyAnimation(s.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},i.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(Xt.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},i.prototype.trackEntry=function(t,e,r,n){var s=this.trackEntryPool.obtain();return s.reset(),s.trackIndex=t,s.animation=e,s.loop=r,s.holdPrevious=!1,s.reverse=!1,s.shortestRotation=!1,s.eventThreshold=0,s.attachmentThreshold=0,s.drawOrderThreshold=0,s.animationStart=0,s.animationEnd=e.duration,s.animationLast=-1,s.nextAnimationLast=-1,s.delay=0,s.trackTime=0,s.trackLast=-1,s.nextTrackLast=-1,s.trackEnd=Number.MAX_VALUE,s.timeScale=1,s.alpha=1,s.mixTime=0,s.mixDuration=n?this.data.getMix(n.animation,e):0,s.interruptAlpha=1,s.totalAlpha=0,s.mixBlend=dt.replace,s},i.prototype.clearNext=function(t){for(var e=t.next;e;)this.queue.dispose(e),e=e.next;t.next=null},i.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=this.tracks,e=0,r=t.length;e<r;e++){var n=t[e];if(n){for(;n.mixingFrom;)n=n.mixingFrom;do(!n.mixingTo||n.mixBlend!=dt.add)&&this.computeHold(n),n=n.mixingTo;while(n)}}},i.prototype.computeHold=function(t){var e=t.mixingTo,r=t.animation.timelines,n=t.animation.timelines.length,s=t.timelineMode;s.length=n;var o=t.timelineHoldMix;o.length=0;var h=this.propertyIDs;if(e&&e.holdPrevious){for(var a=0;a<n;a++)s[a]=h.addAll(r[a].getPropertyIds())?hv:GE;return}t:for(var a=0;a<n;a++){var l=r[a],u=l.getPropertyIds();if(!h.addAll(u))s[a]=lv;else if(!e||l instanceof Ml||l instanceof au||l instanceof tx||!e.animation.hasTimeline(u))s[a]=XE;else{for(var c=e.mixingTo;c;c=c.mixingTo)if(!c.animation.hasTimeline(u)){if(t.mixDuration>0){s[a]=sL,o[a]=c;continue t}break}s[a]=hv}}},i.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},i.prototype.addListener=function(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)},i.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},i.prototype.clearListeners=function(){this.listeners.length=0},i.prototype.clearListenerNotifications=function(){this.queue.clear()},i.prototype.setAnimationByName=function(t,e,r){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,r)},i.prototype.addAnimationByName=function(t,e,r,n){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,r,n)},i.prototype.hasAnimation=function(t){var e=this.data.skeletonData.findAnimation(t);return e!==null},i.prototype.hasAnimationByName=function(t){return i.deprecatedWarning3||(i.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},i._emptyAnimation=new Q0("<empty>",[],0),i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i.deprecatedWarning3=!1,i}(),nL=function(){function i(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=dt.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return i.prototype.reset=function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},i.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},i.prototype.getTrackComplete=function(){var t=this.animationEnd-this.animationStart;if(t!=0){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime},Object.defineProperty(i.prototype,"time",{get:function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endTime",{get:function(){return i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),i.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i}(),iL=function(){function i(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return i.prototype.start=function(t){this.objects.push(Dn.start),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.interrupt=function(t){this.objects.push(Dn.interrupt),this.objects.push(t)},i.prototype.end=function(t){this.objects.push(Dn.end),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.dispose=function(t){this.objects.push(Dn.dispose),this.objects.push(t)},i.prototype.complete=function(t){this.objects.push(Dn.complete),this.objects.push(t)},i.prototype.event=function(t,e){this.objects.push(Dn.event),this.objects.push(t),this.objects.push(e)},i.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,r=0;r<t.length;r+=2){var n=t[r],s=t[r+1];switch(n){case Dn.start:s.listener&&s.listener.start&&s.listener.start(s);for(var o=0;o<e.length;o++){var h=e[o];h.start&&h.start(s)}break;case Dn.interrupt:s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(var o=0;o<e.length;o++){var h=e[o];h.interrupt&&h.interrupt(s)}break;case Dn.end:s.listener&&s.listener.end&&s.listener.end(s);for(var o=0;o<e.length;o++){var h=e[o];h.end&&h.end(s)}case Dn.dispose:s.listener&&s.listener.dispose&&s.listener.dispose(s);for(var o=0;o<e.length;o++){var h=e[o];h.dispose&&h.dispose(s)}this.animState.trackEntryPool.free(s);break;case Dn.complete:s.listener&&s.listener.complete&&s.listener.complete(s);for(var o=0;o<e.length;o++){var h=e[o];h.complete&&h.complete(s)}break;case Dn.event:var a=t[r+++2];s.listener&&s.listener.event&&s.listener.event(s,a);for(var o=0;o<e.length;o++){var h=e[o];h.event&&h.event(s,a)}break}}this.clear(),this.drainDisabled=!1}},i.prototype.clear=function(){this.objects.length=0},i}(),Dn;(function(i){i[i.start=0]="start",i[i.interrupt=1]="interrupt",i[i.end=2]="end",i[i.dispose=3]="dispose",i[i.complete=4]="complete",i[i.event=5]="event"})(Dn||(Dn={}));var lv=0,XE=1,GE=2,hv=3,sL=4,YE=1,aL=2,oL=function(){function i(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return i.prototype.setMix=function(t,e,r){var n=this.skeletonData.findAnimation(t);if(!n)throw new Error("Animation not found: "+t);var s=this.skeletonData.findAnimation(e);if(!s)throw new Error("Animation not found: "+e);this.setMixWith(n,s,r)},i.prototype.setMixWith=function(t,e,r){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");var n=t.name+"."+e.name;this.animationToMixTime[n]=r},i.prototype.getMix=function(t,e){var r=t.name+"."+e.name,n=this.animationToMixTime[r];return n===void 0?this.defaultMix:n},i}(),lL=function(){function i(t){this.atlas=t}return i.prototype.loadSequence=function(t,e,r){for(var n=r.regions,s=0,o=n.length;s<o;s++){var h=r.getPath(e,s),a=this.atlas.findRegion(h);if(a==null)throw new Error("Region not found in atlas: "+h+" (sequence: "+t+")");n[s]=a,n[s].renderObject=n[s]}},i.prototype.newRegionAttachment=function(t,e,r,n){var s=new EC(e,r);if(n!=null)this.loadSequence(e,r,n);else{var o=this.atlas.findRegion(r);if(!o)throw new Error("Region not found in atlas: "+r+" (region attachment: "+e+")");o.renderObject=o,s.region=o}return s},i.prototype.newMeshAttachment=function(t,e,r,n){var s=new Z0(e,r);if(n!=null)this.loadSequence(e,r,n);else{var o=this.atlas.findRegion(r);if(!o)throw new Error("Region not found in atlas: "+r+" (mesh attachment: "+e+")");o.renderObject=o,s.region=o}return s},i.prototype.newBoundingBoxAttachment=function(t,e){return new JD(e)},i.prototype.newPathAttachment=function(t,e){return new af(e)},i.prototype.newPointAttachment=function(t,e){return new eL(e)},i.prototype.newClippingAttachment=function(t,e){return new tL(e)},i}(),$E=function(){function i(t,e,r){if(this.matrix=new dn,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()}return Object.defineProperty(i.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),i.prototype.isActive=function(){return this.active},i.prototype.update=function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)},i.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},i.prototype.updateWorldTransformWith=function(t,e,r,n,s,o,h){this.ax=t,this.ay=e,this.arotation=r,this.ascaleX=n,this.ascaleY=s,this.ashearX=o,this.ashearY=h;var a=this.parent,l=this.matrix,u=this.skeleton.scaleX,c=-this.skeleton.scaleY;if(!a){var f=this.skeleton,p=r+90+h;l.a=wt.cosDeg(r+o)*n*u,l.c=wt.cosDeg(p)*s*u,l.b=wt.sinDeg(r+o)*n*c,l.d=wt.sinDeg(p)*s*c,l.tx=t*u+f.x,l.ty=e*c+f.y;return}var g=a.matrix.a,v=a.matrix.c,y=a.matrix.b,x=a.matrix.d;switch(l.tx=g*t+v*e+a.matrix.tx,l.ty=y*t+x*e+a.matrix.ty,this.data.transformMode){case Un.Normal:{var p=r+90+h,_=wt.cosDeg(r+o)*n,b=wt.cosDeg(p)*s,E=wt.sinDeg(r+o)*n,T=wt.sinDeg(p)*s;l.a=g*_+v*E,l.c=g*b+v*T,l.b=y*_+x*E,l.d=y*b+x*T;return}case Un.OnlyTranslation:{var p=r+90+h;l.a=wt.cosDeg(r+o)*n,l.c=wt.cosDeg(p)*s,l.b=wt.sinDeg(r+o)*n,l.d=wt.sinDeg(p)*s;break}case Un.NoRotationOrReflection:{var S=g*g+y*y,C=0;S>1e-4?(S=Math.abs(g*x-v*y)/S,g/=u,y/=c,v=y*S,x=g*S,C=Math.atan2(y,g)*wt.radDeg):(g=0,y=0,C=90-Math.atan2(x,v)*wt.radDeg);var M=r+o-C,P=r+h-C+90,_=wt.cosDeg(M)*n,b=wt.cosDeg(P)*s,E=wt.sinDeg(M)*n,T=wt.sinDeg(P)*s;l.a=g*_-v*E,l.c=g*b-v*T,l.b=y*_+x*E,l.d=y*b+x*T;break}case Un.NoScale:case Un.NoScaleOrReflection:{var F=wt.cosDeg(r),V=wt.sinDeg(r),O=(g*F+v*V)/u,U=(y*F+x*V)/c,S=Math.sqrt(O*O+U*U);S>1e-5&&(S=1/S),O*=S,U*=S,S=Math.sqrt(O*O+U*U),this.data.transformMode==Un.NoScale&&g*x-v*y<0!=(u<0!=c<0)&&(S=-S);var H=Math.PI/2+Math.atan2(U,O),W=Math.cos(H)*S,B=Math.sin(H)*S,_=wt.cosDeg(o)*n,b=wt.cosDeg(90+h)*s,E=wt.sinDeg(o)*n,T=wt.sinDeg(90+h)*s;l.a=O*_+W*E,l.c=O*b+W*T,l.b=U*_+B*E,l.d=U*b+B*T;break}}l.a*=u,l.c*=u,l.b*=c,l.d*=c},i.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},i.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*wt.radDeg},i.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*wt.radDeg},i.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.b*t.b)},i.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.c*t.c+t.d*t.d)},i.prototype.updateAppliedTransform=function(){var t=this.parent,e=this.matrix;if(!t){this.ax=e.tx-this.skeleton.x,this.ay=e.ty-this.skeleton.y,this.arotation=Math.atan2(e.b,e.a)*wt.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*wt.radDeg;return}var r=t.matrix,n=1/(r.a*r.d-r.b*r.c),s=e.tx-r.tx,o=e.ty-r.ty;this.ax=s*r.d*n-o*r.c*n,this.ay=o*r.a*n-s*r.b*n;var h=n*r.d,a=n*r.a,l=n*r.c,u=n*r.b,c=h*e.a-l*e.b,f=h*e.c-l*e.d,p=a*e.b-u*e.a,g=a*e.d-u*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+p*p),this.ascaleX>1e-4){var v=c*g-f*p;this.ascaleY=v/this.ascaleX,this.ashearY=Math.atan2(c*f+p*g,v)*wt.radDeg,this.arotation=Math.atan2(p,c)*wt.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(f*f+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,f)*wt.radDeg},i.prototype.worldToLocal=function(t){var e=this.matrix,r=e.a,n=e.c,s=e.b,o=e.d,h=1/(r*o-n*s),a=t.x-e.tx,l=t.y-e.ty;return t.x=a*o*h-l*n*h,t.y=l*r*h-a*s*h,t},i.prototype.localToWorld=function(t){var e=this.matrix,r=t.x,n=t.y;return t.x=r*e.a+n*e.c+e.tx,t.y=r*e.b+n*e.d+e.ty,t},i.prototype.worldToLocalRotation=function(t){var e=wt.sinDeg(t),r=wt.cosDeg(t),n=this.matrix;return Math.atan2(n.a*e-n.b*r,n.d*r-n.c*e)*wt.radDeg},i.prototype.localToWorldRotation=function(t){t-=this.rotation-this.shearX;var e=wt.sinDeg(t),r=wt.cosDeg(t),n=this.matrix;return Math.atan2(r*n.b+e*n.d,r*n.a+e*n.c)*wt.radDeg},i.prototype.rotateWorld=function(t){var e=this.matrix,r=e.a,n=e.c,s=e.b,o=e.d,h=wt.cosDeg(t),a=wt.sinDeg(t);e.a=h*r-a*s,e.c=h*n-a*o,e.b=a*r+h*s,e.d=a*n+h*o},i}(),zC=function(){function i(t,e,r){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Un.Normal,this.skinRequired=!1,this.color=new ge,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r}return i}(),ex=function(){function i(t,e,r){this.name=t,this.order=e,this.skinRequired=r}return i}(),jC=function(){function i(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}return i}(),qC=function(){function i(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}return i}(),hL=function(){function i(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var r=0;r<t.bones.length;r++){var n=e.findBone(t.bones[r].name);if(!n)throw new Error("Couldn't find bone "+t.bones[r].name);this.bones.push(n)}var s=e.findBone(t.target.name);if(!s)throw new Error("Couldn't find bone "+t.target.name);this.target=s}return i.prototype.isActive=function(){return this.active},i.prototype.update=function(){if(this.mix!=0){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}},i.prototype.apply1=function(t,e,r,n,s,o,h){var a=t.parent.matrix;if(!a)throw new Error("IK bone must have parent.");var l=a.a,u=a.c,c=a.b,f=a.d,p=-t.ashearX-t.arotation,g=0,v=0,y=t.skeleton.scaleX,x=-t.skeleton.scaleY;switch(t.data.transformMode){case Un.OnlyTranslation:g=e-t.worldX,v=r-t.worldY,v=-v;break;case Un.NoRotationOrReflection:var _=Math.abs(l*f-u*c)/(l*l+c*c),b=l/y,E=c/x;u=-E*_*y,f=b*_*x,p+=Math.atan2(E,b)*wt.radDeg;default:var T=e-a.tx,S=r-a.ty,C=l*f-u*c;g=(T*f-S*u)/C-t.ax,v=(S*l-T*c)/C-t.ay}p+=Math.atan2(v,g)*wt.radDeg,t.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var M=t.ascaleX,P=t.ascaleY;if(n||s){switch(t.data.transformMode){case Un.NoScale:case Un.NoScaleOrReflection:g=e-t.worldX,v=r-t.worldY}var F=t.data.length*M,V=Math.sqrt(g*g+v*v);if(n&&V<F||s&&V>F&&F>1e-4){var _=(V/F-1)*h+1;M*=_,o&&(P*=_)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+p*h,M,P,t.ashearX,t.ashearY)},i.prototype.apply2=function(t,e,r,n,s,o,h,a,l){var u=t.ax,c=t.ay,f=t.ascaleX,p=t.ascaleY,g=f,v=p,y=e.ascaleX,x=t.matrix,_=0,b=0,E=0;f<0?(f=-f,_=180,E=-1):(_=0,E=1),p<0&&(p=-p,E=-E),y<0?(y=-y,b=180):b=0;var T=e.ax,S=0,C=0,M=0,P=x.a,F=x.c,V=x.b,O=x.d,U=Math.abs(f-p)<=1e-4;!U||o?(S=0,C=P*T+x.tx,M=V*T+x.ty):(S=e.ay,C=P*T+F*S+x.tx,M=V*T+O*S+x.ty);var H=t.parent.matrix;if(!H)throw new Error("IK parent must itself have a parent.");P=H.a,F=H.c,V=H.b,O=H.d;var W=1/(P*O-F*V),B=C-H.tx,L=M-H.ty,N=(B*O-L*F)*W-u,Y=(L*P-B*V)*W-c,D=Math.sqrt(N*N+Y*Y),k=e.data.length*y,X,$;if(D<1e-4){this.apply1(t,r,n,!1,o,!1,l),e.updateWorldTransformWith(T,S,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}B=r-H.tx,L=n-H.ty;var j=(B*O-L*F)*W-u,K=(L*P-B*V)*W-c,tt=j*j+K*K;if(a!=0){a*=f*(y+1)*.5;var ct=Math.sqrt(tt),ft=ct-D-k*f+a;if(ft>0){var mt=Math.min(1,ft/(a*2))-1;mt=(ft-a*(1-mt*mt))/ct,j-=mt*j,K-=mt*K,tt=j*j+K*K}}t:if(U){k*=f;var lt=(tt-D*D-k*k)/(2*D*k);lt<-1?(lt=-1,$=Math.PI*s):lt>1?(lt=1,$=0,o&&(P=(Math.sqrt(tt)/(D+k)-1)*l+1,g*=P,h&&(v*=P))):$=Math.acos(lt)*s,P=D+k*lt,F=k*Math.sin($),X=Math.atan2(K*P-j*F,j*P+K*F)}else{P=f*k,F=p*k;var gt=P*P,yt=F*F,St=Math.atan2(K,j);V=yt*D*D+gt*tt-gt*yt;var Rt=-2*yt*D,it=yt-gt;if(O=Rt*Rt-4*it*V,O>=0){var ut=Math.sqrt(O);Rt<0&&(ut=-ut),ut=-(Rt+ut)*.5;var Ct=ut/it,zt=V/ut,jt=Math.abs(Ct)<Math.abs(zt)?Ct:zt;if(jt*jt<=tt){L=Math.sqrt(tt-jt*jt)*s,X=St-Math.atan2(L,jt),$=Math.atan2(L/p,(jt-D)/f);break t}}var Wt=wt.PI,Qt=D-P,ee=Qt*Qt,se=0,Be=0,Bt=D+P,me=Bt*Bt,Qe=0;V=-P*D/(gt-yt),V>=-1&&V<=1&&(V=Math.acos(V),B=P*Math.cos(V)+D,L=F*Math.sin(V),O=B*B+L*L,O<ee&&(Wt=V,ee=O,Qt=B,se=L),O>me&&(Be=V,me=O,Bt=B,Qe=L)),tt<=(ee+me)*.5?(X=St-Math.atan2(se*s,Qt),$=Wt*s):(X=St-Math.atan2(Qe*s,Bt),$=Be*s)}var Ne=Math.atan2(S,T)*E,We=t.arotation;X=(X-Ne)*wt.radDeg+_-We,X>180?X-=360:X<-180&&(X+=360),t.updateWorldTransformWith(u,c,We+X*l,g,v,0,0),We=e.arotation,$=(($+Ne)*wt.radDeg-e.ashearX)*E+b-We,$>180?$-=360:$<-180&&($+=360),e.updateWorldTransformWith(T,S,We+$*l,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},i}(),KC=function(i){ce(t,i);function t(e){var r=i.call(this,e,0,!1)||this;return r.bones=new Array,r._target=null,r.bendDirection=1,r.compress=!1,r.stretch=!1,r.uniform=!1,r.mix=1,r.softness=0,r}return Object.defineProperty(t.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(e){this._target=e},enumerable:!1,configurable:!0}),t}(ex),ZC=function(i){ce(t,i);function t(e){var r=i.call(this,e,0,!1)||this;return r.bones=new Array,r._target=null,r.positionMode=vs.Fixed,r.spacingMode=Dr.Fixed,r.rotateMode=Do.Chain,r.offsetRotation=0,r.position=0,r.spacing=0,r.mixRotate=0,r.mixX=0,r.mixY=0,r}return Object.defineProperty(t.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("SlotData not set.")},set:function(e){this._target=e},enumerable:!1,configurable:!0}),t}(ex),Dr;(function(i){i[i.Length=0]="Length",i[i.Fixed=1]="Fixed",i[i.Percent=2]="Percent",i[i.Proportional=3]="Proportional"})(Dr||(Dr={}));var uL=function(){function i(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var r=0,n=t.bones.length;r<n;r++){var s=e.findBone(t.bones[r].name);if(!s)throw new Error("Couldn't find bone "+t.bones[r].name+".");this.bones.push(s)}var o=e.findSlot(t.target.name);if(!o)throw new Error("Couldn't find target bone "+t.target.name);this.target=o,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}return i.prototype.isActive=function(){return this.active},i.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof af){var e=this.mixRotate,r=this.mixX,n=this.mixY;if(!(e==0&&r==0&&n==0)){var s=this.data,o=s.rotateMode==Do.Tangent,h=s.rotateMode==Do.ChainScale,a=this.bones,l=a.length,u=o?l:l+1,c=Xt.setArraySize(this.spaces,u),f=h?this.lengths=Xt.setArraySize(this.lengths,l):[],p=this.spacing;switch(s.spacingMode){case Dr.Percent:if(h)for(var g=0,v=u-1;g<v;g++){var y=a[g],x=y.data.length;if(x<i.epsilon)f[g]=0;else{var _=x*y.matrix.a,b=x*y.matrix.b;f[g]=Math.sqrt(_*_+b*b)}}Xt.arrayFill(c,1,u,p);break;case Dr.Proportional:for(var E=0,g=0,v=u-1;g<v;){var y=a[g],x=y.data.length;if(x<i.epsilon)h&&(f[g]=0),c[++g]=p;else{var _=x*y.matrix.a,b=x*y.matrix.b,T=Math.sqrt(_*_+b*b);h&&(f[g]=T),c[++g]=T,E+=T}}if(E>0){E=u/E*p;for(var g=1;g<u;g++)c[g]*=E}break;default:for(var S=s.spacingMode==Dr.Length,g=0,v=u-1;g<v;){var y=a[g],x=y.data.length;if(x<i.epsilon)h&&(f[g]=0),c[++g]=p;else{var _=x*y.matrix.a,b=x*y.matrix.b,C=Math.sqrt(_*_+b*b);h&&(f[g]=C),c[++g]=(S?x+p:p)*C/x}}}var M=this.computeWorldPositions(t,u,o),P=M[0],F=M[1],V=s.offsetRotation,O=!1;if(V==0)O=s.rotateMode==Do.Chain;else{O=!1;var U=this.target.bone.matrix;V*=U.a*U.d-U.b*U.c>0?wt.degRad:-wt.degRad}for(var g=0,U=3;g<l;g++,U+=3){var y=a[g],H=y.matrix;H.tx+=(P-H.tx)*r,H.ty+=(F-H.ty)*n;var _=M[U],b=M[U+1],W=_-P,B=b-F;if(h){var L=f[g];if(L!=0){var N=(Math.sqrt(W*W+B*B)/L-1)*e+1;H.a*=N,H.b*=N}}if(P=_,F=b,e>0){var Y=H.a,D=H.c,k=H.b,X=H.d,$=0,j=0,K=0;if(o?$=M[U-1]:c[g+1]==0?$=M[U+2]:$=Math.atan2(B,W),$-=Math.atan2(k,Y),O){j=Math.cos($),K=Math.sin($);var tt=y.data.length;P+=(tt*(j*Y-K*k)-W)*e,F+=(tt*(K*Y+j*k)-B)*e}else $+=V;$>wt.PI?$-=wt.PI2:$<-wt.PI&&($+=wt.PI2),$*=e,j=Math.cos($),K=Math.sin($),H.a=j*Y-K*k,H.c=j*D-K*X,H.b=K*Y+j*k,H.d=K*D+j*X}y.updateAppliedTransform()}}}},i.prototype.computeWorldPositions=function(t,e,r){var n=this.target,s=this.position,o=this.spaces,h=Xt.setArraySize(this.positions,e*3+2),a=this.world,l=t.closed,u=t.worldVerticesLength,c=u/6,f=i.NONE;if(!t.constantSpeed){var p=t.lengths;c-=l?1:2;var g=p[c];this.data.positionMode==vs.Percent&&(s*=g);var v;switch(this.data.spacingMode){case Dr.Percent:v=g;break;case Dr.Proportional:v=g/e;break;default:v=1}a=Xt.setArraySize(this.world,8);for(var y=0,x=0,_=0;y<e;y++,x+=3){var b=o[y]*v;s+=b;var E=s;if(l)E%=g,E<0&&(E+=g),_=0;else if(E<0){f!=i.BEFORE&&(f=i.BEFORE,t.computeWorldVertices(n,2,4,a,0,2)),this.addBeforePosition(E,a,0,h,x);continue}else if(E>g){f!=i.AFTER&&(f=i.AFTER,t.computeWorldVertices(n,u-6,4,a,0,2)),this.addAfterPosition(E-g,a,0,h,x);continue}for(;;_++){var T=p[_];if(!(E>T)){if(_==0)E/=T;else{var S=p[_-1];E=(E-S)/(T-S)}break}}_!=f&&(f=_,l&&_==c?(t.computeWorldVertices(n,u-4,4,a,0,2),t.computeWorldVertices(n,0,4,a,4,2)):t.computeWorldVertices(n,_*6+2,8,a,0,2)),this.addCurvePosition(E,a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],h,x,r||y>0&&b==0)}return h}l?(u+=2,a=Xt.setArraySize(this.world,u),t.computeWorldVertices(n,2,u-4,a,0,2),t.computeWorldVertices(n,0,2,a,u-4,2),a[u-2]=a[0],a[u-1]=a[1]):(c--,u-=4,a=Xt.setArraySize(this.world,u),t.computeWorldVertices(n,2,u,a,0,2));for(var C=Xt.setArraySize(this.curves,c),M=0,P=a[0],F=a[1],V=0,O=0,U=0,H=0,W=0,B=0,L=0,N=0,Y=0,D=0,k=0,X=0,$=0,j=0,y=0,K=2;y<c;y++,K+=6)V=a[K],O=a[K+1],U=a[K+2],H=a[K+3],W=a[K+4],B=a[K+5],L=(P-V*2+U)*.1875,N=(F-O*2+H)*.1875,Y=((V-U)*3-P+W)*.09375,D=((O-H)*3-F+B)*.09375,k=L*2+Y,X=N*2+D,$=(V-P)*.75+L+Y*.16666667,j=(O-F)*.75+N+D*.16666667,M+=Math.sqrt($*$+j*j),$+=k,j+=X,k+=Y,X+=D,M+=Math.sqrt($*$+j*j),$+=k,j+=X,M+=Math.sqrt($*$+j*j),$+=k+Y,j+=X+D,M+=Math.sqrt($*$+j*j),C[y]=M,P=W,F=B;this.data.positionMode==vs.Percent&&(s*=M);var tt;switch(this.data.spacingMode){case Dr.Percent:tt=M;break;case Dr.Proportional:tt=M/e;break;default:tt=1}for(var ct=this.segments,ft=0,y=0,x=0,_=0,mt=0;y<e;y++,x+=3){var b=o[y]*tt;s+=b;var E=s;if(l)E%=M,E<0&&(E+=M),_=0;else if(E<0){this.addBeforePosition(E,a,0,h,x);continue}else if(E>M){this.addAfterPosition(E-M,a,u-4,h,x);continue}for(;;_++){var lt=C[_];if(!(E>lt)){if(_==0)E/=lt;else{var S=C[_-1];E=(E-S)/(lt-S)}break}}if(_!=f){f=_;var gt=_*6;for(P=a[gt],F=a[gt+1],V=a[gt+2],O=a[gt+3],U=a[gt+4],H=a[gt+5],W=a[gt+6],B=a[gt+7],L=(P-V*2+U)*.03,N=(F-O*2+H)*.03,Y=((V-U)*3-P+W)*.006,D=((O-H)*3-F+B)*.006,k=L*2+Y,X=N*2+D,$=(V-P)*.3+L+Y*.16666667,j=(O-F)*.3+N+D*.16666667,ft=Math.sqrt($*$+j*j),ct[0]=ft,gt=1;gt<8;gt++)$+=k,j+=X,k+=Y,X+=D,ft+=Math.sqrt($*$+j*j),ct[gt]=ft;$+=k,j+=X,ft+=Math.sqrt($*$+j*j),ct[8]=ft,$+=k+Y,j+=X+D,ft+=Math.sqrt($*$+j*j),ct[9]=ft,mt=0}for(E*=ft;;mt++){var yt=ct[mt];if(!(E>yt)){if(mt==0)E/=yt;else{var S=ct[mt-1];E=mt+(E-S)/(yt-S)}break}}this.addCurvePosition(E*.1,P,F,V,O,U,H,W,B,h,x,r||y>0&&b==0)}return h},i.prototype.addBeforePosition=function(t,e,r,n,s){var o=e[r],h=e[r+1],a=e[r+2]-o,l=e[r+3]-h,u=Math.atan2(l,a);n[s]=o+t*Math.cos(u),n[s+1]=h+t*Math.sin(u),n[s+2]=u},i.prototype.addAfterPosition=function(t,e,r,n,s){var o=e[r+2],h=e[r+3],a=o-e[r],l=h-e[r+1],u=Math.atan2(l,a);n[s]=o+t*Math.cos(u),n[s+1]=h+t*Math.sin(u),n[s+2]=u},i.prototype.addCurvePosition=function(t,e,r,n,s,o,h,a,l,u,c,f){if(t==0||isNaN(t)){u[c]=e,u[c+1]=r,u[c+2]=Math.atan2(s-r,n-e);return}var p=t*t,g=p*t,v=1-t,y=v*v,x=y*v,_=v*t,b=_*3,E=v*b,T=b*t,S=e*x+n*E+o*T+a*g,C=r*x+s*E+h*T+l*g;u[c]=S,u[c+1]=C,f&&(t<.001?u[c+2]=Math.atan2(s-r,n-e):u[c+2]=Math.atan2(C-(r*y+s*_*2+h*p),S-(e*y+n*_*2+o*p)))},i.NONE=-1,i.BEFORE=-2,i.AFTER=-3,i.epsilon=1e-5,i}(),cL=function(){function i(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new ge,this.darkColor=t.darkColor?new ge:null,this.setToSetupPose(),this.blendMode=this.data.blendMode}return i.prototype.getSkeleton=function(){return this.bone.skeleton},i.prototype.getAttachment=function(){return this.attachment},i.prototype.setAttachment=function(t){this.attachment!=t&&((!(t instanceof Zs)||!(this.attachment instanceof Zs)||t.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)},i.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null},i}(),dL=function(){function i(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new Ay,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(var r=0;r<t.bones.length;r++){var n=e.findBone(t.bones[r].name);if(!n)throw new Error("Couldn't find bone "+t.bones[r].name+".");this.bones.push(n)}var s=e.findBone(t.target.name);if(!s)throw new Error("Couldn't find target bone "+t.target.name+".");this.target=s}return i.prototype.isActive=function(){return this.active},i.prototype.update=function(){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleX==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())},i.prototype.applyAbsoluteWorld=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,h=e!=0||r!=0,a=this.target,l=a.matrix,u=l.a,c=l.c,f=l.b,p=l.d,g=u*p-c*f>0?wt.degRad:-wt.degRad,v=this.data.offsetRotation*g,y=this.data.offsetShearY*g,x=this.bones,_=0,b=x.length;_<b;_++){var E=x[_],T=E.matrix;if(t!=0){var S=T.a,C=T.c,M=T.b,P=T.d,F=Math.atan2(f,u)-Math.atan2(M,S)+v;F>wt.PI?F-=wt.PI2:F<-wt.PI&&(F+=wt.PI2),F*=t;var V=Math.cos(F),O=Math.sin(F);T.a=V*S-O*M,T.c=V*C-O*P,T.b=O*S+V*M,T.d=O*C+V*P}if(h){var U=this.temp;a.localToWorld(U.set(this.data.offsetX,this.data.offsetY)),T.tx+=(U.x-T.tx)*e,T.ty+=(U.y-T.ty)*r}if(n!=0){var H=Math.sqrt(T.a*T.a+T.b*T.b);H!=0&&(H=(H+(Math.sqrt(u*u+f*f)-H+this.data.offsetScaleX)*n)/H),T.a*=H,T.b*=H}if(s!=0){var H=Math.sqrt(T.c*T.c+T.d*T.d);H!=0&&(H=(H+(Math.sqrt(c*c+p*p)-H+this.data.offsetScaleY)*s)/H),T.c*=H,T.d*=H}if(o>0){var C=T.c,P=T.d,W=Math.atan2(P,C),F=Math.atan2(p,c)-Math.atan2(f,u)-(W-Math.atan2(T.b,T.a));F>wt.PI?F-=wt.PI2:F<-wt.PI&&(F+=wt.PI2),F=W+(F+y)*o;var H=Math.sqrt(C*C+P*P);T.c=Math.cos(F)*H,T.d=Math.sin(F)*H}E.updateAppliedTransform()}},i.prototype.applyRelativeWorld=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,h=e!=0||r!=0,a=this.target,l=a.matrix,u=l.a,c=l.c,f=l.b,p=l.d,g=u*p-c*f>0?wt.degRad:-wt.degRad,v=this.data.offsetRotation*g,y=this.data.offsetShearY*g,x=this.bones,_=0,b=x.length;_<b;_++){var E=x[_],T=E.matrix;if(t!=0){var S=T.a,C=T.c,M=T.b,P=T.d,F=Math.atan2(f,u)+v;F>wt.PI?F-=wt.PI2:F<-wt.PI&&(F+=wt.PI2),F*=t;var V=Math.cos(F),O=Math.sin(F);T.a=V*S-O*M,T.c=V*C-O*P,T.b=O*S+V*M,T.d=O*C+V*P}if(h){var U=this.temp;a.localToWorld(U.set(this.data.offsetX,this.data.offsetY)),T.tx+=U.x*e,T.ty+=U.y*r}if(n!=0){var H=(Math.sqrt(u*u+f*f)-1+this.data.offsetScaleX)*n+1;T.a*=H,T.b*=H}if(s!=0){var H=(Math.sqrt(c*c+p*p)-1+this.data.offsetScaleY)*s+1;T.c*=H,T.d*=H}if(o>0){var F=Math.atan2(p,c)-Math.atan2(f,u);F>wt.PI?F-=wt.PI2:F<-wt.PI&&(F+=wt.PI2);var C=T.c,P=T.d;F=Math.atan2(P,C)+(F-wt.PI/2+y)*o;var H=Math.sqrt(C*C+P*P);T.c=Math.cos(F)*H,T.d=Math.sin(F)*H}E.updateAppliedTransform()}},i.prototype.applyAbsoluteLocal=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,h=this.target,a=this.bones,l=0,u=a.length;l<u;l++){var c=a[l],f=c.arotation;if(t!=0){var p=h.arotation-f+this.data.offsetRotation;p-=(16384-(16384.499999999996-p/360|0))*360,f+=p*t}var g=c.ax,v=c.ay;g+=(h.ax-g+this.data.offsetX)*e,v+=(h.ay-v+this.data.offsetY)*r;var y=c.ascaleX,x=c.ascaleY;n!=0&&y!=0&&(y=(y+(h.ascaleX-y+this.data.offsetScaleX)*n)/y),s!=0&&x!=0&&(x=(x+(h.ascaleY-x+this.data.offsetScaleY)*s)/x);var _=c.ashearY;if(o!=0){var p=h.ashearY-_+this.data.offsetShearY;p-=(16384-(16384.499999999996-p/360|0))*360,_+=p*o}c.updateWorldTransformWith(g,v,f,y,x,c.ashearX,_)}},i.prototype.applyRelativeLocal=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,h=this.target,a=this.bones,l=0,u=a.length;l<u;l++){var c=a[l],f=c.arotation+(h.arotation+this.data.offsetRotation)*t,p=c.ax+(h.ax+this.data.offsetX)*e,g=c.ay+(h.ay+this.data.offsetY)*r,v=c.ascaleX*((h.ascaleX-1+this.data.offsetScaleX)*n+1),y=c.ascaleY*((h.ascaleY-1+this.data.offsetScaleY)*s+1),x=c.ashearY+(h.ashearY+this.data.offsetShearY)*o;c.updateWorldTransformWith(p,g,f,v,y,c.ashearX,x)}},i}(),fL=function(){function i(t){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var r=t.bones[e],n=void 0;if(!r.parent)n=new $E(r,this,null);else{var s=this.bones[r.parent.index];n=new $E(r,this,s),s.children.push(n)}this.bones.push(n)}this.slots=new Array,this.drawOrder=new Array;for(var e=0;e<t.slots.length;e++){var o=t.slots[e],n=this.bones[o.boneData.index],h=new cL(o,n);this.slots.push(h),this.drawOrder.push(h)}this.ikConstraints=new Array;for(var e=0;e<t.ikConstraints.length;e++){var a=t.ikConstraints[e];this.ikConstraints.push(new hL(a,this))}this.transformConstraints=new Array;for(var e=0;e<t.transformConstraints.length;e++){var l=t.transformConstraints[e];this.transformConstraints.push(new dL(l,this))}this.pathConstraints=new Array;for(var e=0;e<t.pathConstraints.length;e++){var u=t.pathConstraints[e];this.pathConstraints.push(new uL(u,this))}this.color=new ge(1,1,1,1),this.updateCache()}return i.prototype.updateCache=function(){var t=this._updateCache;t.length=0;for(var e=this.bones,r=0,n=e.length;r<n;r++){var s=e[r];s.sorted=s.data.skinRequired,s.active=!s.sorted}if(this.skin)for(var o=this.skin.bones,r=0,n=this.skin.bones.length;r<n;r++){var s=this.bones[o[r].index];do s.sorted=!1,s.active=!0,s=s.parent;while(s)}var h=this.ikConstraints,a=this.transformConstraints,l=this.pathConstraints,u=h.length,c=a.length,f=l.length,p=u+c+f;t:for(var r=0;r<p;r++){for(var g=0;g<u;g++){var v=h[g];if(v.data.order==r){this.sortIkConstraint(v);continue t}}for(var g=0;g<c;g++){var v=a[g];if(v.data.order==r){this.sortTransformConstraint(v);continue t}}for(var g=0;g<f;g++){var v=l[g];if(v.data.order==r){this.sortPathConstraint(v);continue t}}}for(var r=0,n=e.length;r<n;r++)this.sortBone(e[r])},i.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&Xt.contains(this.skin.constraints,t.data,!0)),!!t.active){var e=t.target;this.sortBone(e);var r=t.bones,n=r[0];if(this.sortBone(n),r.length==1)this._updateCache.push(t),this.sortReset(n.children);else{var s=r[r.length-1];this.sortBone(s),this._updateCache.push(t),this.sortReset(n.children),s.sorted=!0}}},i.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&Xt.contains(this.skin.constraints,t.data,!0)),!!t.active){var e=t.target,r=e.data.index,n=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,r,n),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,n);for(var s=0,o=this.data.skins.length;s<o;s++)this.sortPathConstraintAttachment(this.data.skins[s],r,n);var h=e.getAttachment();h instanceof af&&this.sortPathConstraintAttachmentWith(h,n);for(var a=t.bones,l=a.length,s=0;s<l;s++)this.sortBone(a[s]);this._updateCache.push(t);for(var s=0;s<l;s++)this.sortReset(a[s].children);for(var s=0;s<l;s++)a[s].sorted=!0}},i.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&Xt.contains(this.skin.constraints,t.data,!0)),!!t.active){this.sortBone(t.target);var e=t.bones,r=e.length;if(t.data.local)for(var n=0;n<r;n++){var s=e[n];this.sortBone(s.parent),this.sortBone(s)}else for(var n=0;n<r;n++)this.sortBone(e[n]);this._updateCache.push(t);for(var n=0;n<r;n++)this.sortReset(e[n].children);for(var n=0;n<r;n++)e[n].sorted=!0}},i.prototype.sortPathConstraintAttachment=function(t,e,r){var n=t.attachments[e];if(n)for(var s in n)this.sortPathConstraintAttachmentWith(n[s],r)},i.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof af){var r=t.bones;if(!r)this.sortBone(e);else for(var n=this.bones,s=0,o=r.length;s<o;){var h=r[s++];for(h+=s;s<h;)this.sortBone(n[r[s++]])}}},i.prototype.sortBone=function(t){if(t&&!t.sorted){var e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},i.prototype.sortReset=function(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}},i.prototype.updateWorldTransform=function(){for(var t=this.bones,e=0,r=t.length;e<r;e++){var n=t[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY}for(var s=this._updateCache,e=0,r=s.length;e<r;e++)s[e].update()},i.prototype.updateWorldTransformWith=function(t){var e=this.getRootBone(),r=t.matrix.a,n=t.matrix.c,s=t.matrix.b,o=t.matrix.d;e.matrix.tx=r*this.x+n*this.y+t.worldX,e.matrix.ty=s*this.x+o*this.y+t.worldY;var h=e.rotation+90+e.shearY,a=wt.cosDeg(e.rotation+e.shearX)*e.scaleX,l=wt.cosDeg(h)*e.scaleY,u=wt.sinDeg(e.rotation+e.shearX)*e.scaleX,c=wt.sinDeg(h)*e.scaleY,f=this.scaleX,p=-this.scaleY;e.matrix.a=(r*a+n*u)*f,e.matrix.c=(r*l+n*c)*f,e.matrix.b=(s*a+o*u)*p,e.matrix.d=(s*l+o*c)*p;for(var g=this._updateCache,v=0,y=g.length;v<y;v++){var x=g[v];x!=e&&x.update()}},i.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},i.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,r=t.length;e<r;e++)t[e].setToSetupPose();for(var n=this.ikConstraints,e=0,r=n.length;e<r;e++){var s=n[e];s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}for(var o=this.transformConstraints,e=0,r=o.length;e<r;e++){var s=o[e],h=s.data;s.mixRotate=h.mixRotate,s.mixX=h.mixX,s.mixY=h.mixY,s.mixScaleX=h.mixScaleX,s.mixScaleY=h.mixScaleY,s.mixShearY=h.mixShearY}for(var a=this.pathConstraints,e=0,r=a.length;e<r;e++){var s=a[e],h=s.data;s.position=h.position,s.spacing=h.spacing,s.mixRotate=h.mixRotate,s.mixX=h.mixX,s.mixY=h.mixY}},i.prototype.setSlotsToSetupPose=function(){var t=this.slots;Xt.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,r=t.length;e<r;e++)t[e].setToSetupPose()},i.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},i.prototype.findBone=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++){var s=e[r];if(s.data.name==t)return s}return null},i.prototype.findBoneIndex=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return-1},i.prototype.findSlot=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++){var s=e[r];if(s.data.name==t)return s}return null},i.prototype.findSlotIndex=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return-1},i.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)},i.prototype.setSkin=function(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,r=0,n=e.length;r<n;r++){var s=e[r],o=s.data.attachmentName;if(o){var h=t.getAttachment(r,o);h&&s.setAttachment(h)}}this.skin=t,this.updateCache()}},i.prototype.getAttachmentByName=function(t,e){var r=this.data.findSlot(t);if(!r)throw new Error("Can't find slot with name "+t);return this.getAttachment(r.index,e)},i.prototype.getAttachment=function(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){var r=this.skin.getAttachment(t,e);if(r)return r}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},i.prototype.setAttachment=function(t,e){if(!t)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,s=r.length;n<s;n++){var o=r[n];if(o.data.name==t){var h=null;if(e&&(h=this.getAttachment(n,e),!h))throw new Error("Attachment not found: "+e+", for slot: "+t);o.setAttachment(h);return}}throw new Error("Slot not found: "+t)},i.prototype.findIkConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,n=e.length;r<n;r++){var s=e[r];if(s.data.name==t)return s}return null},i.prototype.findTransformConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,n=e.length;r<n;r++){var s=e[r];if(s.data.name==t)return s}return null},i.prototype.findPathConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,n=e.length;r<n;r++){var s=e[r];if(s.data.name==t)return s}return null},i.prototype.getBoundsRect=function(){var t=new Ay,e=new Ay;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}},i.prototype.getBounds=function(t,e,r){if(r===void 0&&(r=new Array(2)),!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");for(var n=this.drawOrder,s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=0,u=n.length;l<u;l++){var c=n[l];if(c.bone.active){var f=0,p=null,g=c.getAttachment();if(g instanceof EC)f=8,p=Xt.setArraySize(r,f,0),g.computeWorldVertices(c,p,0,2);else if(g instanceof Z0){var v=g;f=v.worldVerticesLength,p=Xt.setArraySize(r,f,0),v.computeWorldVertices(c,0,f,p,0,2)}if(p)for(var y=0,x=p.length;y<x;y+=2){var _=p[y],b=p[y+1];s=Math.min(s,_),o=Math.min(o,b),h=Math.max(h,_),a=Math.max(a,b)}}}t.set(s,o),e.set(h-s,a-o)},Object.defineProperty(i.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!1,configurable:!0}),i.deprecatedWarning1=!1,i}(),QC=function(){function i(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}return i.prototype.findBone=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++){var s=e[r];if(s.name==t)return s}return null},i.prototype.findBoneIndex=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1},i.prototype.findSlot=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++){var s=e[r];if(s.name==t)return s}return null},i.prototype.findSlotIndex=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1},i.prototype.findSkin=function(t){if(!t)throw new Error("skinName cannot be null.");for(var e=this.skins,r=0,n=e.length;r<n;r++){var s=e[r];if(s.name==t)return s}return null},i.prototype.findEvent=function(t){if(!t)throw new Error("eventDataName cannot be null.");for(var e=this.events,r=0,n=e.length;r<n;r++){var s=e[r];if(s.name==t)return s}return null},i.prototype.findAnimation=function(t){if(!t)throw new Error("animationName cannot be null.");for(var e=this.animations,r=0,n=e.length;r<n;r++){var s=e[r];if(s.name==t)return s}return null},i.prototype.findIkConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,n=e.length;r<n;r++){var s=e[r];if(s.name==t)return s}return null},i.prototype.findTransformConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,n=e.length;r<n;r++){var s=e[r];if(s.name==t)return s}return null},i.prototype.findPathConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,n=e.length;r<n;r++){var s=e[r];if(s.name==t)return s}return null},i.prototype.findPathConstraintIndex=function(t){if(t==null)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1},i}(),JC=function(){function i(t,e,r){if(this.index=0,this.color=new ge(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=Yt.NORMAL,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!r)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=r}return i}(),tI=function(i){ce(t,i);function t(e){var r=i.call(this,e,0,!1)||this;return r.bones=new Array,r._target=null,r.mixRotate=0,r.mixX=0,r.mixY=0,r.mixScaleX=0,r.mixScaleY=0,r.mixShearY=0,r.offsetRotation=0,r.offsetX=0,r.offsetY=0,r.offsetScaleX=0,r.offsetScaleY=0,r.offsetShearY=0,r.relative=!1,r.local=!1,r}return Object.defineProperty(t.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(e){this._target=e},enumerable:!1,configurable:!0}),t}(ex),WE=function(){function i(t,e,r){this.slotIndex=t,this.name=e,this.attachment=r}return i}(),Iy=function(){function i(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}return i.prototype.setAttachment=function(t,e,r){if(!r)throw new Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=r},i.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var r=t.bones[e],n=!1,s=0;s<this.bones.length;s++)if(this.bones[s]==r){n=!0;break}n||this.bones.push(r)}for(var e=0;e<t.constraints.length;e++){for(var o=t.constraints[e],n=!1,s=0;s<this.constraints.length;s++)if(this.constraints[s]==o){n=!0;break}n||this.constraints.push(o)}for(var h=t.getAttachments(),e=0;e<h.length;e++){var a=h[e];this.setAttachment(a.slotIndex,a.name,a.attachment)}},i.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var r=t.bones[e],n=!1,s=0;s<this.bones.length;s++)if(this.bones[s]==r){n=!0;break}n||this.bones.push(r)}for(var e=0;e<t.constraints.length;e++){for(var o=t.constraints[e],n=!1,s=0;s<this.constraints.length;s++)if(this.constraints[s]==o){n=!0;break}n||this.constraints.push(o)}for(var h=t.getAttachments(),e=0;e<h.length;e++){var a=h[e];a.attachment&&(a.attachment instanceof Z0?(a.attachment=a.attachment.newLinkedMesh(),this.setAttachment(a.slotIndex,a.name,a.attachment)):(a.attachment=a.attachment.copy(),this.setAttachment(a.slotIndex,a.name,a.attachment)))}},i.prototype.getAttachment=function(t,e){var r=this.attachments[t];return r?r[e]:null},i.prototype.removeAttachment=function(t,e){var r=this.attachments[t];r&&delete r[e]},i.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var r=this.attachments[e];if(r)for(var n in r){var s=r[n];s&&t.push(new WE(e,n,s))}}return t},i.prototype.getAttachmentsForSlot=function(t,e){var r=this.attachments[t];if(r)for(var n in r){var s=r[n];s&&e.push(new WE(t,n,s))}},i.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},i.prototype.attachAll=function(t,e){for(var r=0,n=0;n<t.slots.length;n++){var s=t.slots[n],o=s.getAttachment();if(o&&r<e.attachments.length){var h=e.attachments[r];for(var a in h){var l=h[a];if(o==l){var u=this.getAttachment(r,a);u&&s.setAttachment(u);break}}}r++}},i}();(function(){function i(t){this.ver40=!1,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return i.prototype.readSkeletonData=function(t){var e=this.scale,r=new QC;r.name="";var n=new $D(t),s=n.readInt32(),o=n.readInt32();r.hash=o==0&&s==0?null:o.toString(16)+s.toString(16),r.version=n.readString();var h=r.version.substr(0,3);if(h!=="4.0"&&h!=="4.1"){var a="Spine 4.1 loader cant load version "+r.version+". Please configure your pixi-spine bundle";console.error(a)}this.ver40=h==="4.0",r.x=n.readFloat(),r.y=n.readFloat(),r.width=n.readFloat(),r.height=n.readFloat();var l=n.readBoolean();l&&(r.fps=n.readFloat(),r.imagesPath=n.readString(),r.audioPath=n.readString());var u=0;u=n.readInt(!0);for(var c=0;c<u;c++){var f=n.readString();if(!f)throw new Error("String in string table must not be null.");n.strings.push(f)}u=n.readInt(!0);for(var c=0;c<u;c++){var p=n.readString();if(!p)throw new Error("Bone name must not be null.");var g=c==0?null:r.bones[n.readInt(!0)],v=new zC(c,p,g);v.rotation=n.readFloat(),v.x=n.readFloat()*e,v.y=n.readFloat()*e,v.scaleX=n.readFloat(),v.scaleY=n.readFloat(),v.shearX=n.readFloat(),v.shearY=n.readFloat(),v.length=n.readFloat()*e,v.transformMode=n.readInt(!0),v.skinRequired=n.readBoolean(),l&&ge.rgba8888ToColor(v.color,n.readInt32()),r.bones.push(v)}u=n.readInt(!0);for(var c=0;c<u;c++){var y=n.readString();if(!y)throw new Error("Slot name must not be null.");var x=r.bones[n.readInt(!0)],v=new JC(c,y,x);ge.rgba8888ToColor(v.color,n.readInt32());var _=n.readInt32();_!=-1&&ge.rgb888ToColor(v.darkColor=new ge,_),v.attachmentName=n.readStringRef(),v.blendMode=n.readInt(!0),r.slots.push(v)}u=n.readInt(!0);for(var c=0,b=void 0;c<u;c++){var E=n.readString();if(!E)throw new Error("IK constraint data name must not be null.");var v=new KC(E);v.order=n.readInt(!0),v.skinRequired=n.readBoolean(),b=n.readInt(!0);for(var T=0;T<b;T++)v.bones.push(r.bones[n.readInt(!0)]);v.target=r.bones[n.readInt(!0)],v.mix=n.readFloat(),v.softness=n.readFloat()*e,v.bendDirection=n.readByte(),v.compress=n.readBoolean(),v.stretch=n.readBoolean(),v.uniform=n.readBoolean(),r.ikConstraints.push(v)}u=n.readInt(!0);for(var c=0,b=void 0;c<u;c++){var S=n.readString();if(!S)throw new Error("Transform constraint data name must not be null.");var v=new tI(S);v.order=n.readInt(!0),v.skinRequired=n.readBoolean(),b=n.readInt(!0);for(var T=0;T<b;T++)v.bones.push(r.bones[n.readInt(!0)]);v.target=r.bones[n.readInt(!0)],v.local=n.readBoolean(),v.relative=n.readBoolean(),v.offsetRotation=n.readFloat(),v.offsetX=n.readFloat()*e,v.offsetY=n.readFloat()*e,v.offsetScaleX=n.readFloat(),v.offsetScaleY=n.readFloat(),v.offsetShearY=n.readFloat(),v.mixRotate=n.readFloat(),v.mixX=n.readFloat(),v.mixY=n.readFloat(),v.mixScaleX=n.readFloat(),v.mixScaleY=n.readFloat(),v.mixShearY=n.readFloat(),r.transformConstraints.push(v)}u=n.readInt(!0);for(var c=0,b=void 0;c<u;c++){var C=n.readString();if(!C)throw new Error("Path constraint data name must not be null.");var v=new ZC(C);v.order=n.readInt(!0),v.skinRequired=n.readBoolean(),b=n.readInt(!0);for(var T=0;T<b;T++)v.bones.push(r.bones[n.readInt(!0)]);v.target=r.slots[n.readInt(!0)],v.positionMode=n.readInt(!0),v.spacingMode=n.readInt(!0),v.rotateMode=n.readInt(!0),v.offsetRotation=n.readFloat(),v.position=n.readFloat(),v.positionMode==vs.Fixed&&(v.position*=e),v.spacing=n.readFloat(),(v.spacingMode==Dr.Length||v.spacingMode==Dr.Fixed)&&(v.spacing*=e),v.mixRotate=n.readFloat(),v.mixX=n.readFloat(),v.mixY=n.readFloat(),r.pathConstraints.push(v)}var M=this.readSkin(n,r,!0,l);M&&(r.defaultSkin=M,r.skins.push(M));{var c=r.skins.length;for(Xt.setArraySize(r.skins,u=c+n.readInt(!0));c<u;c++){var P=this.readSkin(n,r,!1,l);if(!P)throw new Error("readSkin() should not have returned null.");r.skins[c]=P}}u=this.linkedMeshes.length;for(var c=0;c<u;c++){var F=this.linkedMeshes[c],P=F.skin?r.findSkin(F.skin):r.defaultSkin;if(!P)throw new Error("Not skin found for linked mesh.");if(!F.parent)throw new Error("Linked mesh parent must not be null");var V=P.getAttachment(F.slotIndex,F.parent);if(!V)throw new Error("Parent mesh not found: "+F.parent);F.mesh.timelineAttachment=F.inheritTimeline?V:F.mesh,F.mesh.setParentMesh(V)}this.linkedMeshes.length=0,u=n.readInt(!0);for(var c=0;c<u;c++){var O=n.readStringRef();if(!O)throw new Error;var v=new qC(O);v.intValue=n.readInt(!1),v.floatValue=n.readFloat(),v.stringValue=n.readString(),v.audioPath=n.readString(),v.audioPath&&(v.volume=n.readFloat(),v.balance=n.readFloat()),r.events.push(v)}u=n.readInt(!0);for(var c=0;c<u;c++){var U=n.readString();if(!U)throw new Error("Animatio name must not be null.");r.animations.push(this.readAnimation(n,U,r))}return r},i.prototype.readSkin=function(t,e,r,n){var s=null,o=0;if(r){if(o=t.readInt(!0),o==0)return null;s=new Iy("default")}else{var h=t.readStringRef();if(!h)throw new Error("Skin name must not be null.");s=new Iy(h),s.bones.length=t.readInt(!0);for(var a=0,l=s.bones.length;a<l;a++)s.bones[a]=e.bones[t.readInt(!0)];for(var a=0,l=t.readInt(!0);a<l;a++)s.constraints.push(e.ikConstraints[t.readInt(!0)]);for(var a=0,l=t.readInt(!0);a<l;a++)s.constraints.push(e.transformConstraints[t.readInt(!0)]);for(var a=0,l=t.readInt(!0);a<l;a++)s.constraints.push(e.pathConstraints[t.readInt(!0)]);o=t.readInt(!0)}for(var a=0;a<o;a++)for(var u=t.readInt(!0),c=0,f=t.readInt(!0);c<f;c++){var p=t.readStringRef();if(!p)throw new Error("Attachment name must not be null");var g=this.readAttachment(t,e,s,u,p,n);g&&s.setAttachment(u,p,g)}return s},i.prototype.readAttachment=function(t,e,r,n,s,o){var h=this.scale,a=t.readStringRef();switch(a||(a=s),t.readByte()){case pr.Region:{var l=t.readStringRef(),u=t.readFloat(),c=t.readFloat(),f=t.readFloat(),p=t.readFloat(),g=t.readFloat(),v=t.readFloat(),y=t.readFloat(),x=t.readInt32(),_=this.readSequence(t);l||(l=a);var b=this.attachmentLoader.newRegionAttachment(r,a,l,_);return b?(b.path=l,b.x=c*h,b.y=f*h,b.scaleX=p,b.scaleY=g,b.rotation=u,b.width=v*h,b.height=y*h,ge.rgba8888ToColor(b.color,x),b.sequence=_,_==null&&b.updateRegion(),b):null}case pr.BoundingBox:{var E=t.readInt(!0),T=this.readVertices(t,E),x=o?t.readInt32():0,S=this.attachmentLoader.newBoundingBoxAttachment(r,a);return S?(S.worldVerticesLength=E<<1,S.vertices=T.vertices,S.bones=T.bones,o&&ge.rgba8888ToColor(S.color,x),S):null}case pr.Mesh:{var l=t.readStringRef(),x=t.readInt32(),E=t.readInt(!0),C=this.readFloatArray(t,E<<1,1),M=this.readShortArray(t),T=this.readVertices(t,E),P=t.readInt(!0),_=this.readSequence(t),F=[],v=0,y=0;o&&(F=this.readShortArray(t),v=t.readFloat(),y=t.readFloat()),l||(l=a);var V=this.attachmentLoader.newMeshAttachment(r,a,l,_);return V?(V.path=l,ge.rgba8888ToColor(V.color,x),V.bones=T.bones,V.vertices=T.vertices,V.worldVerticesLength=E<<1,V.triangles=M,V.regionUVs=new Float32Array(C),V.hullLength=P<<1,V.sequence=_,o&&(V.edges=F,V.width=v*h,V.height=y*h),V):null}case pr.LinkedMesh:{var l=t.readStringRef(),x=t.readInt32(),O=t.readStringRef(),U=t.readStringRef(),H=t.readBoolean(),_=this.readSequence(t),v=0,y=0;o&&(v=t.readFloat(),y=t.readFloat()),l||(l=a);var V=this.attachmentLoader.newMeshAttachment(r,a,l,_);return V?(V.path=l,ge.rgba8888ToColor(V.color,x),V.sequence=_,o&&(V.width=v*h,V.height=y*h),this.linkedMeshes.push(new pL(V,O,n,U,H)),V):null}case pr.Path:{for(var W=t.readBoolean(),B=t.readBoolean(),E=t.readInt(!0),T=this.readVertices(t,E),L=Xt.newArray(E/3,0),N=0,Y=L.length;N<Y;N++)L[N]=t.readFloat()*h;var x=o?t.readInt32():0,l=this.attachmentLoader.newPathAttachment(r,a);return l?(l.closed=W,l.constantSpeed=B,l.worldVerticesLength=E<<1,l.vertices=T.vertices,l.bones=T.bones,l.lengths=L,o&&ge.rgba8888ToColor(l.color,x),l):null}case pr.Point:{var u=t.readFloat(),c=t.readFloat(),f=t.readFloat(),x=o?t.readInt32():0,D=this.attachmentLoader.newPointAttachment(r,a);return D?(D.x=c*h,D.y=f*h,D.rotation=u,o&&ge.rgba8888ToColor(D.color,x),D):null}case pr.Clipping:{var k=t.readInt(!0),E=t.readInt(!0),T=this.readVertices(t,E),x=o?t.readInt32():0,X=this.attachmentLoader.newClippingAttachment(r,a);return X?(X.endSlot=e.slots[k],X.worldVerticesLength=E<<1,X.vertices=T.vertices,X.bones=T.bones,o&&ge.rgba8888ToColor(X.color,x),X):null}}return null},i.prototype.readSequence=function(t){if(this.ver40||!t.readBoolean())return null;var e=new TC(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e},i.prototype.readDeformTimelineType=function(t){return this.ver40?HE:t.readByte()},i.prototype.readVertices=function(t,e){var r=this.scale,n=e<<1,s=new mL;if(!t.readBoolean())return s.vertices=this.readFloatArray(t,n,r),s;for(var o=new Array,h=new Array,a=0;a<e;a++){var l=t.readInt(!0);h.push(l);for(var u=0;u<l;u++)h.push(t.readInt(!0)),o.push(t.readFloat()*r),o.push(t.readFloat()*r),o.push(t.readFloat())}return s.vertices=Xt.toFloatArray(o),s.bones=h,s},i.prototype.readFloatArray=function(t,e,r){var n=new Array(e);if(r==1)for(var s=0;s<e;s++)n[s]=t.readFloat();else for(var s=0;s<e;s++)n[s]=t.readFloat()*r;return n},i.prototype.readShortArray=function(t){for(var e=t.readInt(!0),r=new Array(e),n=0;n<e;n++)r[n]=t.readShort();return r},i.prototype.readAnimation=function(t,e,r){t.readInt(!0);for(var n=new Array,s=this.scale,o=0,h=t.readInt(!0);o<h;o++)for(var a=t.readInt(!0),l=0,u=t.readInt(!0);l<u;l++){var c=t.readByte(),f=t.readInt(!0),p=f-1;switch(c){case AL:{for(var g=new Ml(f,a),v=0;v<f;v++)g.setFrame(v,t.readFloat(),t.readStringRef());n.push(g);break}case CL:{for(var y=t.readInt(!0),g=new NC(f,y,a),x=t.readFloat(),_=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,v=0,S=0;g.setFrame(v,x,_,b,E,T),v!=p;v++){var C=t.readFloat(),M=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,V=t.readUnsignedByte()/255;switch(t.readByte()){case Li:g.setStepped(v);break;case Ui:we(t,g,S++,v,0,x,C,_,M,1),we(t,g,S++,v,1,x,C,b,P,1),we(t,g,S++,v,2,x,C,E,F,1),we(t,g,S++,v,3,x,C,T,V,1)}x=C,_=M,b=P,E=F,T=V}n.push(g);break}case IL:{for(var y=t.readInt(!0),g=new OC(f,y,a),x=t.readFloat(),_=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,v=0,S=0;g.setFrame(v,x,_,b,E),v!=p;v++){var C=t.readFloat(),M=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255;switch(t.readByte()){case Li:g.setStepped(v);break;case Ui:we(t,g,S++,v,0,x,C,_,M,1),we(t,g,S++,v,1,x,C,b,P,1),we(t,g,S++,v,2,x,C,E,F,1)}x=C,_=M,b=P,E=F}n.push(g);break}case RL:{for(var y=t.readInt(!0),g=new LC(f,y,a),x=t.readFloat(),_=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,v=0,S=0;g.setFrame(v,x,_,b,E,T,M,P,F),v!=p;v++){var C=t.readFloat(),O=t.readUnsignedByte()/255,U=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255,W=t.readUnsignedByte()/255,B=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255;switch(t.readByte()){case Li:g.setStepped(v);break;case Ui:we(t,g,S++,v,0,x,C,_,O,1),we(t,g,S++,v,1,x,C,b,U,1),we(t,g,S++,v,2,x,C,E,H,1),we(t,g,S++,v,3,x,C,T,W,1),we(t,g,S++,v,4,x,C,M,B,1),we(t,g,S++,v,5,x,C,P,L,1),we(t,g,S++,v,6,x,C,F,N,1)}x=C,_=O,b=U,E=H,T=W,M=B,P=L,F=N}n.push(g);break}case ML:{for(var y=t.readInt(!0),g=new UC(f,y,a),x=t.readFloat(),_=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,v=0,S=0;g.setFrame(v,x,_,b,E,M,P,F),v!=p;v++){var C=t.readFloat(),O=t.readUnsignedByte()/255,U=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255,B=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255;switch(t.readByte()){case Li:g.setStepped(v);break;case Ui:we(t,g,S++,v,0,x,C,_,O,1),we(t,g,S++,v,1,x,C,b,U,1),we(t,g,S++,v,2,x,C,E,H,1),we(t,g,S++,v,3,x,C,M,B,1),we(t,g,S++,v,4,x,C,P,L,1),we(t,g,S++,v,5,x,C,F,N,1)}x=C,_=O,b=U,E=H,M=B,P=L,F=N}n.push(g);break}case PL:{for(var g=new DC(f,t.readInt(!0),a),x=t.readFloat(),T=t.readUnsignedByte()/255,v=0,S=0;g.setFrame(v,x,T),v!=p;v++){var C=t.readFloat(),V=t.readUnsignedByte()/255;switch(t.readByte()){case Li:g.setStepped(v);break;case Ui:we(t,g,S++,v,0,x,C,T,V,1)}x=C,T=V}n.push(g)}}}for(var o=0,h=t.readInt(!0);o<h;o++)for(var Y=t.readInt(!0),l=0,u=t.readInt(!0);l<u;l++){var D=t.readByte(),f=t.readInt(!0),y=t.readInt(!0);switch(D){case gL:n.push(Os(t,new of(f,y,Y),1));break;case vL:n.push(uv(t,new AC(f,y,Y),s));break;case yL:n.push(Os(t,new CC(f,y,Y),s));break;case xL:n.push(Os(t,new IC(f,y,Y),s));break;case wL:n.push(uv(t,new RC(f,y,Y),1));break;case _L:n.push(Os(t,new MC(f,y,Y),1));break;case bL:n.push(Os(t,new PC(f,y,Y),1));break;case EL:n.push(uv(t,new kC(f,y,Y),1));break;case TL:n.push(Os(t,new FC(f,y,Y),1));break;case SL:n.push(Os(t,new BC(f,y,Y),1))}}for(var o=0,h=t.readInt(!0);o<h;o++){for(var k=t.readInt(!0),f=t.readInt(!0),p=f-1,g=new XC(f,t.readInt(!0),k),x=t.readFloat(),X=t.readFloat(),$=t.readFloat()*s,v=0,S=0;g.setFrame(v,x,X,$,t.readByte(),t.readBoolean(),t.readBoolean()),v!=p;v++){var C=t.readFloat(),j=t.readFloat(),K=t.readFloat()*s;switch(t.readByte()){case Li:g.setStepped(v);break;case Ui:we(t,g,S++,v,0,x,C,X,j,1),we(t,g,S++,v,1,x,C,$,K,s)}x=C,X=j,$=K}n.push(g)}for(var o=0,h=t.readInt(!0);o<h;o++){for(var k=t.readInt(!0),f=t.readInt(!0),p=f-1,g=new GC(f,t.readInt(!0),k),x=t.readFloat(),tt=t.readFloat(),ct=t.readFloat(),ft=t.readFloat(),mt=t.readFloat(),lt=t.readFloat(),gt=t.readFloat(),v=0,S=0;g.setFrame(v,x,tt,ct,ft,mt,lt,gt),v!=p;v++){var C=t.readFloat(),yt=t.readFloat(),St=t.readFloat(),Rt=t.readFloat(),it=t.readFloat(),ut=t.readFloat(),Ct=t.readFloat();switch(t.readByte()){case Li:g.setStepped(v);break;case Ui:we(t,g,S++,v,0,x,C,tt,yt,1),we(t,g,S++,v,1,x,C,ct,St,1),we(t,g,S++,v,2,x,C,ft,Rt,1),we(t,g,S++,v,3,x,C,mt,it,1),we(t,g,S++,v,4,x,C,lt,ut,1),we(t,g,S++,v,5,x,C,gt,Ct,1)}x=C,tt=yt,ct=St,ft=Rt,mt=it,lt=ut,gt=Ct}n.push(g)}for(var o=0,h=t.readInt(!0);o<h;o++)for(var k=t.readInt(!0),zt=r.pathConstraints[k],l=0,u=t.readInt(!0);l<u;l++)switch(t.readByte()){case FL:n.push(Os(t,new YC(t.readInt(!0),t.readInt(!0),k),zt.positionMode==vs.Fixed?s:1));break;case BL:n.push(Os(t,new $C(t.readInt(!0),t.readInt(!0),k),zt.spacingMode==Dr.Length||zt.spacingMode==Dr.Fixed?s:1));break;case NL:for(var g=new WC(t.readInt(!0),t.readInt(!0),k),x=t.readFloat(),tt=t.readFloat(),ct=t.readFloat(),ft=t.readFloat(),v=0,S=0,p=g.getFrameCount()-1;g.setFrame(v,x,tt,ct,ft),v!=p;v++){var C=t.readFloat(),yt=t.readFloat(),St=t.readFloat(),Rt=t.readFloat();switch(t.readByte()){case Li:g.setStepped(v);break;case Ui:we(t,g,S++,v,0,x,C,tt,yt,1),we(t,g,S++,v,1,x,C,ct,St,1),we(t,g,S++,v,2,x,C,ft,Rt,1)}x=C,tt=yt,ct=St,ft=Rt}n.push(g)}for(var o=0,h=t.readInt(!0);o<h;o++)for(var jt=r.skins[t.readInt(!0)],l=0,u=t.readInt(!0);l<u;l++)for(var a=t.readInt(!0),Wt=0,Qt=t.readInt(!0);Wt<Qt;Wt++){var ee=t.readStringRef();if(!ee)throw new Error("attachmentName must not be null.");var se=jt.getAttachment(a,ee),c=this.readDeformTimelineType(t),f=t.readInt(!0),p=f-1;switch(c){case HE:{for(var Be=se,Bt=Be.bones,me=Be.vertices,Qe=Bt?me.length/3*2:me.length,y=t.readInt(!0),g=new VC(f,y,a,Be),x=t.readFloat(),v=0,S=0;;v++){var Ne=void 0,We=t.readInt(!0);if(We==0)Ne=Bt?Xt.newFloatArray(Qe):me;else{Ne=Xt.newFloatArray(Qe);var an=t.readInt(!0);if(We+=an,s==1)for(var Ue=an;Ue<We;Ue++)Ne[Ue]=t.readFloat();else for(var Ue=an;Ue<We;Ue++)Ne[Ue]=t.readFloat()*s;if(!Bt)for(var Ue=0,Zi=Ne.length;Ue<Zi;Ue++)Ne[Ue]+=me[Ue]}if(g.setFrame(v,x,Ne),v==p)break;var C=t.readFloat();switch(t.readByte()){case Li:g.setStepped(v);break;case Ui:we(t,g,S++,v,0,x,C,0,1,1)}x=C}n.push(g);break}case kL:{for(var g=new HC(f,a,se),v=0;v<f;v++){var x=t.readFloat(),oi=t.readInt32();g.setFrame(v,x,SC[oi&15],oi>>4,t.readFloat())}n.push(g);break}}}var Ie=t.readInt(!0);if(Ie>0){for(var g=new au(Ie),rt=r.slots.length,o=0;o<Ie;o++){for(var x=t.readFloat(),ht=t.readInt(!0),ie=Xt.newArray(rt,0),l=rt-1;l>=0;l--)ie[l]=-1;for(var ye=Xt.newArray(rt-ht,0),de=0,qt=0,l=0;l<ht;l++){for(var a=t.readInt(!0);de!=a;)ye[qt++]=de++;ie[de+t.readInt(!0)]=de++}for(;de<rt;)ye[qt++]=de++;for(var l=rt-1;l>=0;l--)ie[l]==-1&&(ie[l]=ye[--qt]);g.setFrame(o,x,ie)}n.push(g)}var cr=t.readInt(!0);if(cr>0){for(var g=new tx(cr),o=0;o<cr;o++){var x=t.readFloat(),Je=r.events[t.readInt(!0)],Oe=new jC(x,Je);Oe.intValue=t.readInt(!1),Oe.floatValue=t.readFloat(),Oe.stringValue=t.readBoolean()?t.readString():Je.stringValue,Oe.data.audioPath&&(Oe.volume=t.readFloat(),Oe.balance=t.readFloat()),g.setFrame(o,Oe)}n.push(g)}for(var Pr=0,o=0,h=n.length;o<h;o++)Pr=Math.max(Pr,n[o].getDuration());return new Q0(e,n,Pr)},i.BlendModeValues=[Yt.NORMAL,Yt.ADD,Yt.MULTIPLY,Yt.SCREEN],i})();var pL=function(){function i(t,e,r,n,s){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritTimeline=s}return i}(),mL=function(){function i(t,e){t===void 0&&(t=null),e===void 0&&(e=null),this.bones=t,this.vertices=e}return i}();function Os(i,t,e){for(var r=i.readFloat(),n=i.readFloat()*e,s=0,o=0,h=t.getFrameCount()-1;t.setFrame(s,r,n),s!=h;s++){var a=i.readFloat(),l=i.readFloat()*e;switch(i.readByte()){case Li:t.setStepped(s);break;case Ui:we(i,t,o++,s,0,r,a,n,l,e)}r=a,n=l}return t}function uv(i,t,e){for(var r=i.readFloat(),n=i.readFloat()*e,s=i.readFloat()*e,o=0,h=0,a=t.getFrameCount()-1;t.setFrame(o,r,n,s),o!=a;o++){var l=i.readFloat(),u=i.readFloat()*e,c=i.readFloat()*e;switch(i.readByte()){case Li:t.setStepped(o);break;case Ui:we(i,t,h++,o,0,r,l,n,u,e),we(i,t,h++,o,1,r,l,s,c,e)}r=l,n=u,s=c}return t}function we(i,t,e,r,n,s,o,h,a,l){t.setBezier(e,r,n,s,h,i.readFloat(),i.readFloat()*l,i.readFloat(),i.readFloat()*l,o,a)}var gL=0,vL=1,yL=2,xL=3,wL=4,_L=5,bL=6,EL=7,TL=8,SL=9,AL=0,CL=1,IL=2,RL=3,ML=4,PL=5,HE=0,kL=1,FL=0,BL=1,NL=2,Li=1,Ui=2;(function(i){ce(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t})(qD);var OL=function(){function i(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return i.prototype.readSkeletonData=function(t){var e=this.scale,r=new QC,n=typeof t=="string"?JSON.parse(t):t,s=n.skeleton;if(s){r.hash=s.hash,r.version=s.spine;var o=r.version.substr(0,3);if(o!=="4.0"&&o!=="4.1"){var h="Spine 4.1 loader cant load version "+s.spine+". Please configure your pixi-spine bundle";console.error(h)}r.x=s.x,r.y=s.y,r.width=s.width,r.height=s.height,r.fps=s.fps,r.imagesPath=s.images}if(n.bones)for(var a=0;a<n.bones.length;a++){var l=n.bones[a],u=null,c=at(l,"parent",null);if(c!=null&&(u=r.findBone(c),u==null))throw new Error("Parent bone not found: "+c);var f=new zC(r.bones.length,l.name,u);f.length=at(l,"length",0)*e,f.x=at(l,"x",0)*e,f.y=at(l,"y",0)*e,f.rotation=at(l,"rotation",0),f.scaleX=at(l,"scaleX",1),f.scaleY=at(l,"scaleY",1),f.shearX=at(l,"shearX",0),f.shearY=at(l,"shearY",0),f.transformMode=Xt.enumValue(Un,at(l,"transform","Normal")),f.skinRequired=at(l,"skin",!1);var p=at(l,"color",null);p&&f.color.setFromString(p),r.bones.push(f)}if(n.slots)for(var a=0;a<n.slots.length;a++){var g=n.slots[a],v=r.findBone(g.bone);if(!v)throw new Error("Couldn't find bone "+g.bone+" for slot "+g.name);var f=new JC(r.slots.length,g.name,v),p=at(g,"color",null);p&&f.color.setFromString(p);var y=at(g,"dark",null);y&&(f.darkColor=ge.fromString(y)),f.attachmentName=at(g,"attachment",null),f.blendMode=i.blendModeFromString(at(g,"blend","normal")),r.slots.push(f)}if(n.ik)for(var a=0;a<n.ik.length;a++){var x=n.ik[a],f=new KC(x.name);f.order=at(x,"order",0),f.skinRequired=at(x,"skin",!1);for(var _=0;_<x.bones.length;_++){var b=x.bones[_],E=r.findBone(b);if(E==null)throw new Error("IK bone not found: "+b);f.bones.push(E)}f.target=r.findBone(x.target),f.mix=at(x,"mix",1),f.softness=at(x,"softness",0)*e,f.bendDirection=at(x,"bendPositive",!0)?1:-1,f.compress=at(x,"compress",!1),f.stretch=at(x,"stretch",!1),f.uniform=at(x,"uniform",!1),r.ikConstraints.push(f)}if(n.transform)for(var a=0;a<n.transform.length;a++){var x=n.transform[a],f=new tI(x.name);f.order=at(x,"order",0),f.skinRequired=at(x,"skin",!1);for(var _=0;_<x.bones.length;_++){var b=x.bones[_],E=r.findBone(b);if(!E)throw new Error("Couldn't find bone "+b+" for transform constraint "+x.name+".");f.bones.push(E)}var T=x.target,S=r.findBone(T);if(!S)throw new Error("Couldn't find target bone "+T+" for transform constraint "+x.name+".");f.target=S,f.local=at(x,"local",!1),f.relative=at(x,"relative",!1),f.offsetRotation=at(x,"rotation",0),f.offsetX=at(x,"x",0)*e,f.offsetY=at(x,"y",0)*e,f.offsetScaleX=at(x,"scaleX",0),f.offsetScaleY=at(x,"scaleY",0),f.offsetShearY=at(x,"shearY",0),f.mixRotate=at(x,"mixRotate",1),f.mixX=at(x,"mixX",1),f.mixY=at(x,"mixY",f.mixX),f.mixScaleX=at(x,"mixScaleX",1),f.mixScaleY=at(x,"mixScaleY",f.mixScaleX),f.mixShearY=at(x,"mixShearY",1),r.transformConstraints.push(f)}if(n.path)for(var a=0;a<n.path.length;a++){var x=n.path[a],f=new ZC(x.name);f.order=at(x,"order",0),f.skinRequired=at(x,"skin",!1);for(var _=0;_<x.bones.length;_++){var b=x.bones[_],E=r.findBone(b);if(!E)throw new Error("Couldn't find bone "+b+" for path constraint "+x.name+".");f.bones.push(E)}var T=x.target,S=r.findSlot(T);if(!S)throw new Error("Couldn't find target slot "+T+" for path constraint "+x.name+".");f.target=S,f.positionMode=Xt.enumValue(vs,at(x,"positionMode","Percent")),f.spacingMode=Xt.enumValue(Dr,at(x,"spacingMode","Length")),f.rotateMode=Xt.enumValue(Do,at(x,"rotateMode","Tangent")),f.offsetRotation=at(x,"rotation",0),f.position=at(x,"position",0),f.positionMode==vs.Fixed&&(f.position*=e),f.spacing=at(x,"spacing",0),(f.spacingMode==Dr.Length||f.spacingMode==Dr.Fixed)&&(f.spacing*=e),f.mixRotate=at(x,"mixRotate",1),f.mixX=at(x,"mixX",1),f.mixY=at(x,"mixY",f.mixX),r.pathConstraints.push(f)}if(n.skins)for(var a=0;a<n.skins.length;a++){var C=n.skins[a],M=new Iy(C.name);if(C.bones)for(var _=0;_<C.bones.length;_++){var b=C.bones[_],E=r.findBone(b);if(!E)throw new Error("Couldn't find bone "+b+" for skin "+C.name+".");M.bones.push(E)}if(C.ik)for(var _=0;_<C.ik.length;_++){var P=C.ik[_],F=r.findIkConstraint(P);if(!F)throw new Error("Couldn't find IK constraint "+P+" for skin "+C.name+".");M.constraints.push(F)}if(C.transform)for(var _=0;_<C.transform.length;_++){var P=C.transform[_],F=r.findTransformConstraint(P);if(!F)throw new Error("Couldn't find transform constraint "+P+" for skin "+C.name+".");M.constraints.push(F)}if(C.path)for(var _=0;_<C.path.length;_++){var P=C.path[_],F=r.findPathConstraint(P);if(!F)throw new Error("Couldn't find path constraint "+P+" for skin "+C.name+".");M.constraints.push(F)}for(var V in C.attachments){var O=r.findSlot(V);if(!O)throw new Error("Couldn't find slot "+V+" for skin "+C.name+".");var g=C.attachments[V];for(var U in g){var H=this.readAttachment(g[U],M,O.index,U,r);H&&M.setAttachment(O.index,U,H)}}r.skins.push(M),M.name=="default"&&(r.defaultSkin=M)}for(var a=0,W=this.linkedMeshes.length;a<W;a++){var B=this.linkedMeshes[a],M=B.skin?r.findSkin(B.skin):r.defaultSkin;if(!M)throw new Error("Skin not found: "+B.skin);var L=M.getAttachment(B.slotIndex,B.parent);if(!L)throw new Error("Parent mesh not found: "+B.parent);B.mesh.timelineAttachment=B.inheritTimeline?L:B.mesh,B.mesh.setParentMesh(L)}if(this.linkedMeshes.length=0,n.events)for(var N in n.events){var Y=n.events[N],f=new qC(N);f.intValue=at(Y,"int",0),f.floatValue=at(Y,"float",0),f.stringValue=at(Y,"string",""),f.audioPath=at(Y,"audio",null),f.audioPath&&(f.volume=at(Y,"volume",1),f.balance=at(Y,"balance",0)),r.events.push(f)}if(n.animations)for(var D in n.animations){var k=n.animations[D];this.readAnimation(k,D,r)}return r},i.prototype.readAttachment=function(t,e,r,n,s){var o=this.scale;switch(n=at(t,"name",n),at(t,"type","region")){case"region":{var h=at(t,"path",n),a=this.readSequence(at(t,"sequence",null)),l=this.attachmentLoader.newRegionAttachment(e,n,h,a);if(!l)return null;l.path=h,l.x=at(t,"x",0)*o,l.y=at(t,"y",0)*o,l.scaleX=at(t,"scaleX",1),l.scaleY=at(t,"scaleY",1),l.rotation=at(t,"rotation",0),l.width=t.width*o,l.height=t.height*o,l.sequence=a;var u=at(t,"color",null);return u&&l.color.setFromString(u),l}case"boundingbox":{var c=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(!c)return null;this.readVertices(t,c,t.vertexCount<<1);var u=at(t,"color",null);return u&&c.color.setFromString(u),c}case"mesh":case"linkedmesh":{var h=at(t,"path",n),a=this.readSequence(at(t,"sequence",null)),f=this.attachmentLoader.newMeshAttachment(e,n,h,a);if(!f)return null;f.path=h;var u=at(t,"color",null);u&&f.color.setFromString(u),f.width=at(t,"width",0)*o,f.height=at(t,"height",0)*o,f.sequence=a;var p=at(t,"parent",null);if(p)return this.linkedMeshes.push(new DL(f,at(t,"skin",null),r,p,at(t,"timelines",!0))),f;var g=t.uvs;return this.readVertices(t,f,g.length),f.triangles=t.triangles,f.regionUVs=new Float32Array(g),f.edges=at(t,"edges",null),f.hullLength=at(t,"hull",0)*2,f}case"path":{var h=this.attachmentLoader.newPathAttachment(e,n);if(!h)return null;h.closed=at(t,"closed",!1),h.constantSpeed=at(t,"constantSpeed",!0);var v=t.vertexCount;this.readVertices(t,h,v<<1);for(var y=Xt.newArray(v/3,0),x=0;x<t.lengths.length;x++)y[x]=t.lengths[x]*o;h.lengths=y;var u=at(t,"color",null);return u&&h.color.setFromString(u),h}case"point":{var _=this.attachmentLoader.newPointAttachment(e,n);if(!_)return null;_.x=at(t,"x",0)*o,_.y=at(t,"y",0)*o,_.rotation=at(t,"rotation",0);var u=at(t,"color",null);return u&&_.color.setFromString(u),_}case"clipping":{var b=this.attachmentLoader.newClippingAttachment(e,n);if(!b)return null;var E=at(t,"end",null);if(E!=null){var T=s.findSlot(E);if(T==null)throw new Error("Clipping end slot not found: "+E);b.endSlot=T}var v=t.vertexCount;this.readVertices(t,b,v<<1);var u=at(t,"color",null);return u&&b.color.setFromString(u),b}}return null},i.prototype.readSequence=function(t){if(t==null)return null;var e=new TC(at(t,"count",0));return e.start=at(t,"start",1),e.digits=at(t,"digits",0),e.setupIndex=at(t,"setup",0),e},i.prototype.readVertices=function(t,e,r){var n=this.scale;e.worldVerticesLength=r;var s=t.vertices;if(r==s.length){var o=Xt.toFloatArray(s);if(n!=1)for(var h=0,a=s.length;h<a;h++)o[h]*=n;e.vertices=o;return}for(var l=new Array,u=new Array,h=0,a=s.length;h<a;){var c=s[h++];u.push(c);for(var f=h+c*4;h<f;h+=4)u.push(s[h]),l.push(s[h+1]*n),l.push(s[h+2]*n),l.push(s[h+3])}e.bones=u,e.vertices=Xt.toFloatArray(l)},i.prototype.readAnimation=function(t,e,r){var n=this.scale,s=new Array;if(t.slots)for(var o in t.slots){var h=t.slots[o],a=r.findSlot(o);if(!a)throw new Error("Slot not found: "+o);var l=a.index;for(var u in h){var c=h[u];if(c){var f=c.length;if(u=="attachment"){for(var p=new Ml(f,l),g=0;g<f;g++){var v=c[g];p.setFrame(g,at(v,"time",0),at(v,"name",null))}s.push(p)}else if(u=="rgba"){for(var p=new NC(f,f<<2,l),v=c[0],y=at(v,"time",0),x=ge.fromString(v.color),g=0,_=0;;g++){p.setFrame(g,y,x.r,x.g,x.b,x.a);var b=c[g+1];if(!b){p.shrink(_);break}var E=at(b,"time",0),T=ge.fromString(b.color),S=v.curve;S&&(_=Te(S,p,_,g,0,y,E,x.r,T.r,1),_=Te(S,p,_,g,1,y,E,x.g,T.g,1),_=Te(S,p,_,g,2,y,E,x.b,T.b,1),_=Te(S,p,_,g,3,y,E,x.a,T.a,1)),y=E,x=T,v=b}s.push(p)}else if(u=="rgb"){for(var p=new OC(f,f*3,l),v=c[0],y=at(v,"time",0),x=ge.fromString(v.color),g=0,_=0;;g++){p.setFrame(g,y,x.r,x.g,x.b);var b=c[g+1];if(!b){p.shrink(_);break}var E=at(b,"time",0),T=ge.fromString(b.color),S=v.curve;S&&(_=Te(S,p,_,g,0,y,E,x.r,T.r,1),_=Te(S,p,_,g,1,y,E,x.g,T.g,1),_=Te(S,p,_,g,2,y,E,x.b,T.b,1)),y=E,x=T,v=b}s.push(p)}else if(u=="alpha")s.push(ss(c,new DC(f,f,l),0,1));else if(u=="rgba2"){for(var p=new LC(f,f*7,l),v=c[0],y=at(v,"time",0),x=ge.fromString(v.light),C=ge.fromString(v.dark),g=0,_=0;;g++){p.setFrame(g,y,x.r,x.g,x.b,x.a,C.r,C.g,C.b);var b=c[g+1];if(!b){p.shrink(_);break}var E=at(b,"time",0),T=ge.fromString(b.light),M=ge.fromString(b.dark),S=v.curve;S&&(_=Te(S,p,_,g,0,y,E,x.r,T.r,1),_=Te(S,p,_,g,1,y,E,x.g,T.g,1),_=Te(S,p,_,g,2,y,E,x.b,T.b,1),_=Te(S,p,_,g,3,y,E,x.a,T.a,1),_=Te(S,p,_,g,4,y,E,C.r,M.r,1),_=Te(S,p,_,g,5,y,E,C.g,M.g,1),_=Te(S,p,_,g,6,y,E,C.b,M.b,1)),y=E,x=T,C=M,v=b}s.push(p)}else if(u=="rgb2"){for(var p=new UC(f,f*6,l),v=c[0],y=at(v,"time",0),x=ge.fromString(v.light),C=ge.fromString(v.dark),g=0,_=0;;g++){p.setFrame(g,y,x.r,x.g,x.b,C.r,C.g,C.b);var b=c[g+1];if(!b){p.shrink(_);break}var E=at(b,"time",0),T=ge.fromString(b.light),M=ge.fromString(b.dark),S=v.curve;S&&(_=Te(S,p,_,g,0,y,E,x.r,T.r,1),_=Te(S,p,_,g,1,y,E,x.g,T.g,1),_=Te(S,p,_,g,2,y,E,x.b,T.b,1),_=Te(S,p,_,g,3,y,E,C.r,M.r,1),_=Te(S,p,_,g,4,y,E,C.g,M.g,1),_=Te(S,p,_,g,5,y,E,C.b,M.b,1)),y=E,x=T,C=M,v=b}s.push(p)}}}}if(t.bones)for(var P in t.bones){var F=t.bones[P],V=r.findBone(P);if(!V)throw new Error("Bone not found: "+P);var O=V.index;for(var u in F){var c=F[u],U=c.length;if(U!=0){if(u==="rotate")s.push(ss(c,new of(U,U,O),0,1));else if(u==="translate"){var p=new AC(U,U<<1,O);s.push(cv(c,p,"x","y",0,n))}else if(u==="translatex"){var p=new CC(U,U,O);s.push(ss(c,p,0,n))}else if(u==="translatey"){var p=new IC(U,U,O);s.push(ss(c,p,0,n))}else if(u==="scale"){var p=new RC(U,U<<1,O);s.push(cv(c,p,"x","y",1,1))}else if(u==="scalex"){var p=new MC(U,U,O);s.push(ss(c,p,1,1))}else if(u==="scaley"){var p=new PC(U,U,O);s.push(ss(c,p,1,1))}else if(u==="shear"){var p=new kC(U,U<<1,O);s.push(cv(c,p,"x","y",0,1))}else if(u==="shearx"){var p=new FC(U,U,O);s.push(ss(c,p,0,1))}else if(u==="sheary"){var p=new BC(U,U,O);s.push(ss(c,p,0,1))}}}}if(t.ik)for(var H in t.ik){var W=t.ik[H],v=W[0];if(v){var B=r.findIkConstraint(H);if(!B)throw new Error("IK Constraint not found: "+H);for(var L=r.ikConstraints.indexOf(B),p=new XC(W.length,W.length<<1,L),y=at(v,"time",0),N=at(v,"mix",1),Y=at(v,"softness",0)*n,g=0,_=0;;g++){p.setFrame(g,y,N,Y,at(v,"bendPositive",!0)?1:-1,at(v,"compress",!1),at(v,"stretch",!1));var b=W[g+1];if(!b){p.shrink(_);break}var E=at(b,"time",0),D=at(b,"mix",1),k=at(b,"softness",0)*n,S=v.curve;S&&(_=Te(S,p,_,g,0,y,E,N,D,1),_=Te(S,p,_,g,1,y,E,Y,k,n)),y=E,N=D,Y=k,v=b}s.push(p)}}if(t.transform)for(var H in t.transform){var c=t.transform[H],v=c[0];if(v){var B=r.findTransformConstraint(H);if(!B)throw new Error("Transform constraint not found: "+H);for(var L=r.transformConstraints.indexOf(B),p=new GC(c.length,c.length*6,L),y=at(v,"time",0),X=at(v,"mixRotate",1),$=at(v,"mixX",1),j=at(v,"mixY",$),K=at(v,"mixScaleX",1),tt=at(v,"mixScaleY",K),ct=at(v,"mixShearY",1),g=0,_=0;;g++){p.setFrame(g,y,X,$,j,K,tt,ct);var b=c[g+1];if(!b){p.shrink(_);break}var E=at(b,"time",0),ft=at(b,"mixRotate",1),mt=at(b,"mixX",1),lt=at(b,"mixY",mt),gt=at(b,"mixScaleX",1),yt=at(b,"mixScaleY",gt),St=at(b,"mixShearY",1),S=v.curve;S&&(_=Te(S,p,_,g,0,y,E,X,ft,1),_=Te(S,p,_,g,1,y,E,$,mt,1),_=Te(S,p,_,g,2,y,E,j,lt,1),_=Te(S,p,_,g,3,y,E,K,gt,1),_=Te(S,p,_,g,4,y,E,tt,yt,1),_=Te(S,p,_,g,5,y,E,ct,St,1)),y=E,X=ft,$=mt,j=lt,K=gt,tt=yt,K=gt,v=b}s.push(p)}}if(t.path)for(var H in t.path){var W=t.path[H],B=r.findPathConstraint(H);if(!B)throw new Error("Path constraint not found: "+H);var L=r.pathConstraints.indexOf(B);for(var u in W){var c=W[u],v=c[0];if(v){var Rt=c.length;if(u==="position"){var p=new YC(Rt,Rt,L);s.push(ss(c,p,0,B.positionMode==vs.Fixed?n:1))}else if(u==="spacing"){var p=new $C(Rt,Rt,L);s.push(ss(c,p,0,B.spacingMode==Dr.Length||B.spacingMode==Dr.Fixed?n:1))}else if(u==="mix"){for(var p=new WC(Rt,Rt*3,L),y=at(v,"time",0),X=at(v,"mixRotate",1),$=at(v,"mixX",1),j=at(v,"mixY",$),g=0,_=0;;g++){p.setFrame(g,y,X,$,j);var b=c[g+1];if(!b){p.shrink(_);break}var E=at(b,"time",0),ft=at(b,"mixRotate",1),mt=at(b,"mixX",1),lt=at(b,"mixY",mt),S=v.curve;S&&(_=Te(S,p,_,g,0,y,E,X,ft,1),_=Te(S,p,_,g,1,y,E,$,mt,1),_=Te(S,p,_,g,2,y,E,j,lt,1)),y=E,X=ft,$=mt,j=lt,v=b}s.push(p)}}}}if(t.deform){t.attachments={};for(var it in t.deform){var ut=t.deform[it],Ct=t.attachments[it]={};for(var o in ut){var h=ut[o],zt=Ct[o]={};for(var jt in h)zt[jt]={deform:h[jt]}}}}if(t.attachments)for(var Wt in t.attachments){var Qt=t.attachments[Wt],ee=r.findSkin(Wt);if(ee!=null)for(var se in Qt){var h=Qt[se],a=r.findSlot(se);if(!a)throw new Error("Slot not found: "+se);var l=a.index;for(var Be in h){var Bt=h[Be],me=ee.getAttachment(l,Be);for(var Qe in Bt){var c=Bt[Qe],v=c[0];if(v){if(Qe=="deform"){for(var Ne=me.bones,We=me.vertices,an=Ne?We.length/3*2:We.length,p=new VC(c.length,c.length,l,me),y=at(v,"time",0),g=0,_=0;;g++){var Ue=void 0,Zi=at(v,"vertices",null);if(!Zi)Ue=Ne?Xt.newFloatArray(an):We;else{Ue=Xt.newFloatArray(an);var oi=at(v,"offset",0);if(Xt.arrayCopy(Zi,0,Ue,oi,Zi.length),n!=1)for(var Ie=oi,rt=Ie+Zi.length;Ie<rt;Ie++)Ue[Ie]*=n;if(!Ne)for(var Ie=0;Ie<an;Ie++)Ue[Ie]+=We[Ie]}p.setFrame(g,y,Ue);var b=c[g+1];if(!b){p.shrink(_);break}var E=at(b,"time",0),S=v.curve;S&&(_=Te(S,p,_,g,0,y,E,0,1,1)),y=E,v=b}s.push(p)}else if(Qe=="sequence"){for(var p=new HC(c.length,l,me),ht=0,g=0;g<c.length;g++){var ie=at(v,"delay",ht),y=at(v,"time",0),ye=rn[at(v,"mode","hold")],de=at(v,"index",0);p.setFrame(g,y,ye,de,ie),ht=ie,v=c[g+1]}s.push(p)}}}}}}if(t.drawOrder){for(var p=new au(t.drawOrder.length),qt=r.slots.length,g=0,Ie=0;Ie<t.drawOrder.length;Ie++,g++){var cr=t.drawOrder[Ie],Je=null,Oe=at(cr,"offsets",null);if(Oe){Je=Xt.newArray(qt,-1);for(var Pr=Xt.newArray(qt-Oe.length,0),Yn=0,$n=0,tr=0;tr<Oe.length;tr++){var bs=Oe[tr],a=r.findSlot(bs.slot);if(!a)throw new Error("Slot not found: "+a);for(var l=a.index;Yn!=l;)Pr[$n++]=Yn++;Je[Yn+bs.offset]=Yn++}for(;Yn<qt;)Pr[$n++]=Yn++;for(var tr=qt-1;tr>=0;tr--)Je[tr]==-1&&(Je[tr]=Pr[--$n])}p.setFrame(g,at(cr,"time",0),Je)}s.push(p)}if(t.events){for(var p=new tx(t.events.length),g=0,Ie=0;Ie<t.events.length;Ie++,g++){var Sn=t.events[Ie],An=r.findEvent(Sn.name);if(!An)throw new Error("Event not found: "+Sn.name);var qr=new jC(Xt.toSinglePrecision(at(Sn,"time",0)),An);qr.intValue=at(Sn,"int",An.intValue),qr.floatValue=at(Sn,"float",An.floatValue),qr.stringValue=at(Sn,"string",An.stringValue),qr.data.audioPath&&(qr.volume=at(Sn,"volume",1),qr.balance=at(Sn,"balance",0)),p.setFrame(g,qr)}s.push(p)}for(var Cn=0,Ie=0,rt=s.length;Ie<rt;Ie++)Cn=Math.max(Cn,s[Ie].getDuration());if(isNaN(Cn))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new Q0(e,s,Cn))},i.blendModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return Yt.NORMAL;if(t=="additive")return Yt.ADD;if(t=="multiply")return Yt.MULTIPLY;if(t=="screen")return Yt.SCREEN;throw new Error("Unknown blend mode: "+t)},i}(),DL=function(){function i(t,e,r,n,s){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritTimeline=s}return i}();function ss(i,t,e,r){for(var n=i[0],s=at(n,"time",0),o=at(n,"value",e)*r,h=0,a=0;;a++){t.setFrame(a,s,o);var l=i[a+1];if(!l)return t.shrink(h),t;var u=at(l,"time",0),c=at(l,"value",e)*r;n.curve&&(h=Te(n.curve,t,h,a,0,s,u,o,c,r)),s=u,o=c,n=l}}function cv(i,t,e,r,n,s){for(var o=i[0],h=at(o,"time",0),a=at(o,e,n)*s,l=at(o,r,n)*s,u=0,c=0;;c++){t.setFrame(c,h,a,l);var f=i[c+1];if(!f)return t.shrink(u),t;var p=at(f,"time",0),g=at(f,e,n)*s,v=at(f,r,n)*s,y=o.curve;y&&(u=Te(y,t,u,c,0,h,p,a,g,s),u=Te(y,t,u,c,1,h,p,l,v,s)),h=p,a=g,l=v,o=f}}function Te(i,t,e,r,n,s,o,h,a,l){if(i=="stepped")return t.setStepped(r),e;var u=n<<2,c=i[u],f=i[u+1]*l,p=i[u+2],g=i[u+3]*l;return t.setBezier(e,r,n,s,h,c,f,p,g,o,a),e+1}function at(i,t,e){return i[t]!==void 0?i[t]:e}(function(i){ce(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createSkeleton=function(e){this.skeleton=new fL(e),this.skeleton.updateWorldTransform(),this.stateData=new oL(e),this.state=new rL(this.stateData)},t})(_C);const LL={light:{background:"#f2f2f2",headerBg:"#3f51b5",headerText:"#ffffff",sidebarBg:"#ffffff",sidebarText:"#333333",buttonBg:"#4caf50",buttonText:"#ffffff",removeButtonBg:"#f44336",inputBg:"#ffffff",inputBorder:"#cccccc",dropZoneBg:"#ffffff"},dark:{background:"#2b2b2b",headerBg:"#3b3b3b",headerText:"#ffffff",sidebarBg:"#3b3b3b",sidebarText:"#cccccc",buttonBg:"#4caf50",buttonText:"#ffffff",removeButtonBg:"#f44336",inputBg:"#555555",inputBorder:"#777777",dropZoneBg:"#444444"}},Ot=.75,UL="#6699FF",VL="#B0B0B0",XL=i=>{const t=LL[i];return{wrapper:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden",margin:0,padding:0,fontFamily:"Arial, sans-serif",backgroundColor:t.background,boxSizing:"border-box",color:t.sidebarText,fontSize:`${Ot*16}px`},header:{position:"relative",padding:`${Ot*8}px ${Ot*16}px`,backgroundColor:t.headerBg,color:t.headerText,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(255,255,255,0.3)"},headerLeft:{fontSize:`${Ot*19.2}px`,fontWeight:"bold"},headerCenter:{position:"absolute",left:"50%",transform:"translateX(-50%)",fontSize:`${Ot*14.4}px`},headerRight:{display:"flex",alignItems:"center",gap:`${Ot*10}px`},currentThemeText:{fontSize:`${Ot*14.4}px`},githubLink:{color:t.headerText,textDecoration:"none",fontWeight:"bold"},mainContent:{display:"flex",flex:1,overflow:"hidden"},leftColumn:{flex:1,display:"flex",flexDirection:"column",margin:`${Ot*10}px`,overflow:"hidden"},dropZone:{flex:1,position:"relative",border:"2px dashed #bbb",borderRadius:`${Ot*8}px`,backgroundColor:t.dropZoneBg,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:`${Ot*10}px`},dropText:{zIndex:2,color:i==="dark"?"#ffffff":"#888888",textAlign:"center",fontSize:`${Ot*16}px`},pixiContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1},sidebar:{width:`${Ot*300}px`,flexShrink:0,margin:`${Ot*10}px`,padding:`${Ot*10}px`,borderRadius:`${Ot*8}px`,backgroundColor:t.sidebarBg,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column"},fixedArea:{marginBottom:`${Ot*10}px`,paddingBottom:`${Ot*10}px`},sectionHeader:{marginBottom:`${Ot*8}px`,fontSize:`${Ot*16}px`,fontWeight:"bold",paddingBottom:`${Ot*4}px`},input:{width:"100%",padding:`${Ot*8}px`,marginTop:`${Ot*8}px`,borderRadius:`${Ot*4}px`,border:`1px solid ${t.inputBorder}`,boxSizing:"border-box",backgroundColor:t.inputBg,color:t.sidebarText,fontSize:`${Ot*14.4}px`},scaleControl:{marginTop:`${Ot*8}px`,marginBottom:`${Ot*8}px`},sliderLabel:{fontSize:`${Ot*14.4}px`},animationsSelect:{width:"100%",padding:`${Ot*8}px`,borderRadius:`${Ot*4}px`,border:`1px solid ${t.inputBorder}`,boxSizing:"border-box",fontSize:`${Ot*14.4}px`,height:`${Ot*36}px`,marginTop:`${Ot*8}px`,marginBottom:`${Ot*8}px`},fullWidthButton:{width:"100%",padding:`${Ot*8}px ${Ot*12}px`,border:"none",borderRadius:`${Ot*4}px`,color:"#ffffff",cursor:"pointer",fontSize:`${Ot*14.4}px`,height:`${Ot*36}px`,marginTop:`${Ot*8}px`,marginBottom:`${Ot*8}px`},slotItem:{marginBottom:`${Ot*10}px`,display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:`${Ot*4}px`},attachedSlotControls:{display:"flex",alignItems:"center",gap:`${Ot*8}px`},unattachedButton:{padding:`${Ot*4}px ${Ot*8}px`,border:"none",borderRadius:`${Ot*4}px`,backgroundColor:t.buttonBg,color:t.buttonText,cursor:"pointer",fontSize:`${Ot*14.4}px`},deleteButton:{padding:`${Ot*4}px ${Ot*8}px`,border:"none",borderRadius:`${Ot*4}px`,backgroundColor:"#f44336",color:t.buttonText,cursor:"pointer",fontSize:`${Ot*14.4}px`},attachedSlotItem:{margin:`${Ot*4}px 0`,display:"flex",alignItems:"center",justifyContent:"space-between"},unattachedList:{flex:1,overflowY:"auto",marginTop:`${Ot*8}px`,border:`1px solid ${t.inputBorder}`,borderRadius:`${Ot*4}px`,padding:`${Ot*8}px`},toggleSwitch:{position:"relative",display:"inline-block",width:`${Ot*50}px`,height:`${Ot*24}px`},toggleSlider:e=>({position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:e==="light"?"#4caf50":"#cccccc",transition:".4s",borderRadius:`${Ot*24}px`}),toggleKnob:e=>({position:"absolute",height:`${Ot*18}px`,width:`${Ot*18}px`,left:e==="light"?`${Ot*26}px`:`${Ot*3}px`,bottom:`${Ot*3}px`,backgroundColor:"#ffffff",transition:".4s",borderRadius:"50%"}),playButtonColor:UL,pauseButtonColor:VL}};function GL(i,t){return i}function YL(){const[i,t]=Xe.useState(!1),[e,r]=Xe.useState(!1),[n,s]=Xe.useState(""),[o,h]=Xe.useState(.5),[a,l]=Xe.useState(1),[u,c]=Xe.useState(""),[f,p]=Xe.useState([]),[g,v]=Xe.useState(""),[y,x]=Xe.useState([]),[_,b]=Xe.useState(""),[E,T]=Xe.useState([]),[S,C]=Xe.useState(1),[M,P]=Xe.useState("dark"),F=Xe.useRef(null),V=Xe.useRef(null),O=Xe.useRef(null),U=Xe.useRef({}),H=Xe.useRef({}),W=XL(M),B=({theme:it,toggleTheme:ut})=>Jt.jsxs("label",{style:W.toggleSwitch,children:[Jt.jsx("input",{type:"checkbox",checked:it==="light",onChange:ut,style:{display:"none"}}),Jt.jsx("span",{style:W.toggleSlider(it),children:Jt.jsx("span",{style:W.toggleKnob(it)})})]}),L=Xe.useCallback(()=>{if(V.current&&O.current){const it=O.current;it.updateTransform();const ut=it.getLocalBounds(),{width:Ct,height:zt}=V.current.screen;it.scale.set(o),it.pivot.set(ut.x+ut.width/2,ut.y+ut.height/2),it.x=Ct/2,it.y=zt/2}},[o]);Xe.useEffect(()=>{if(!V.current&&F.current){const it=new pS({width:F.current.clientWidth,height:F.current.clientHeight,backgroundAlpha:1,backgroundColor:8947848,resolution:window.devicePixelRatio||1,autoDensity:!0});F.current.appendChild(it.view),V.current=it}},[]),Xe.useEffect(()=>{if(!F.current)return;const it=new ResizeObserver(ut=>{for(let Ct of ut){const{width:zt,height:jt}=Ct.contentRect;V.current&&(V.current.renderer.resize(zt,jt),L())}});return it.observe(F.current),()=>it.disconnect()},[L]);const N=Xe.useCallback(()=>{if(O.current)for(const it in U.current){const ut=U.current[it],Ct=O.current.skeleton.findSlot(it);Ct&&Ct.bone&&O.current.slotContainers[Ct.data.index].addChild(ut)}},[]);Xe.useEffect(()=>{if(V.current)return V.current.ticker.add(N),()=>{V.current.ticker.remove(N)}},[N]);const Y=it=>{const ut=parseFloat(it.target.value);h(ut),L()},D=it=>{const ut=parseFloat(it.target.value);l(ut),O.current&&e&&(O.current.state.timeScale=ut)},k=it=>{const ut=parseFloat(it.target.value);C(ut),Object.values(U.current).forEach(Ct=>{Ct.scale.set(ut)})},X=Xe.useCallback(it=>{it.preventDefault(),s(""),t(!1),r(!1),p([]),v(""),T([]);for(const Bt in U.current)O.current&&(O.current.removeChild(U.current[Bt]),U.current[Bt].destroy());U.current={},O.current&&V.current&&(V.current.stage.removeChild(O.current),O.current.destroy(),O.current=null);const ut=it.dataTransfer.files;if(!ut||ut.length===0){s("Files not found");return}const Ct={};for(let Bt=0;Bt<ut.length;Bt++)Ct[ut[Bt].name]=ut[Bt];const zt={};for(const Bt in Ct)zt[Bt]=URL.createObjectURL(Ct[Bt]);H.current=zt;let jt=null,Wt=null;for(const Bt in Ct){const me=Bt.toLowerCase();me.endsWith(".json")?jt=Bt:me.endsWith(".atlas")&&(Wt=Bt)}if(!jt||!Wt){s("Required files (JSON and ATLAS) not found");return}const Qt=new FileReader,ee=new FileReader;let se="",Be="";Qt.onload=Bt=>{if(se=Bt.target.result,Be)try{const me=JSON.parse(se);j(me,Be,zt)}catch(me){console.error("Error parsing JSON file:",me),s("Error parsing JSON file: "+me.message)}},Qt.onerror=Bt=>{console.error("Error reading JSON file:",Bt),s("Error reading JSON file")},ee.onload=Bt=>{if(Be=Bt.target.result,se)try{const me=JSON.parse(se);j(me,Be,zt)}catch(me){console.error("Error parsing JSON file:",me),s("Error parsing JSON file: "+me.message)}},ee.onerror=Bt=>{console.error("Error reading ATLAS file:",Bt),s("Error reading ATLAS file")},Qt.readAsText(Ct[jt]),ee.readAsText(Ct[Wt])},[L]),$=Xe.useCallback(it=>{it.preventDefault()},[]),j=(it,ut,Ct)=>{if(!V.current)return;const zt=GL(ut);function jt(Wt,Qt){if(Qt[Wt])return re.from(Qt[Wt]);const ee=Wt.toLowerCase();for(const se in Qt)if(se.toLowerCase()===ee)return re.from(Qt[se]);return null}try{const Wt=new $d(zt,(Qe,Ne)=>{const We=jt(Qe,Ct);We?Ne(We):(console.error("Texture not found for line:",Qe),Ne(null))}),Qt=new lL(Wt),se=new OL(Qt).readSkeletonData(it),Be=se.skins.map(Qe=>Qe.name);x(Be),b(Be[0]||"");const Bt=new TN(se);Bt.skeleton.updateWorldTransform();const me=Bt.getLocalBounds();if(Bt.pivot.set(me.x+me.width/2,me.y+me.height/2),Bt.x=V.current.screen.width/2,Bt.y=V.current.screen.height/2,Bt.scale.set(o),Bt.drawDebug=!1,Bt.drawBones=!1,Bt.drawRegionAttachments=!1,Bt.drawClipping=!1,Bt.drawMeshHull=!1,Bt.drawMeshTriangles=!1,Bt.drawPaths=!1,Bt.drawBoundingBoxes=!1,O.current=Bt,V.current.stage.addChild(Bt),se.animations.length>0){const Qe=se.animations[0].name;Bt.state.setAnimation(0,Qe,!0),r(!0),p(se.animations.map(Ne=>Ne.name)),v(Qe),Bt.state.timeScale=a}t(!0),L()}catch(Wt){console.error("Error creating Spine animation:",Wt),s("Error creating Spine animation: "+Wt.message)}},K=it=>{const ut=it.target.value;if(b(ut),O.current){const Ct=O.current.skeleton,zt=Ct.data.skins.find(jt=>jt.name===ut);zt?(Ct.setSkin(zt),Ct.setSlotsToSetupPose(),L()):console.warn(`Skin "${ut}" not found.`)}},tt=()=>{if(!O.current)return;const it=O.current.state;e?(it.timeScale=0,r(!1)):(it.timeScale=a,r(!0))},ct=it=>{const ut=it.target.value;v(ut),O.current&&(O.current.state.setAnimation(0,ut,!0),O.current.state.timeScale=a,L(),r(!0))},ft=(it,ut)=>{U.current[it]&&(U.current[it].visible=ut)},mt=it=>{if(!O.current||U.current[it])return;const ut=new pf,Ct=500;ut.beginFill(16513279),ut.drawCircle(0,0,Ct),ut.endFill(),ut.scale.set(S);const zt=Ct*2*.2,jt=new Ly(it,{fontFamily:"Arial",fontSize:zt,fill:"#ea8510",align:"center",wordWrap:!0,wordWrapWidth:Ct*2});jt.anchor.set(.5),ut.addChild(jt);for(const Wt in U.current){const Qt=U.current[Wt],ee=O.current.skeleton.findSlot(Wt);O.current.slotContainers[ee.data.index].addChild(Qt)}U.current[it]=ut,T(Wt=>Wt.includes(it)?Wt:[...Wt,it])},lt=it=>{if(!O.current)return;const ut=U.current[it];ut&&(O.current.removeChild(ut),ut.destroy(),delete U.current[it],T(Ct=>Ct.filter(zt=>zt!==it)))},St=(O.current?O.current.skeleton.slots.map(it=>it.data.name):[]).filter(it=>it.toLowerCase().includes(u.toLowerCase())).filter(it=>!E.includes(it)),Rt={...W.fullWidthButton,backgroundColor:e?W.pauseButtonColor:W.playButtonColor};return Jt.jsxs("div",{style:W.wrapper,children:[Jt.jsxs("header",{style:W.header,children:[Jt.jsx("div",{style:W.headerLeft,children:"Pixi Spine Viewer Tool"}),Jt.jsx("div",{style:W.headerCenter,children:Jt.jsx("a",{href:"https://github.com/Vladnzh/pixi-spine-viewer",target:"_blank",rel:"noopener noreferrer",style:W.githubLink,children:"GitHub: pixi-spine-viewer"})}),Jt.jsxs("div",{style:W.headerRight,children:[Jt.jsx("span",{style:W.currentThemeText,children:M==="dark"?"Dark":"Light"}),Jt.jsx(B,{theme:M,toggleTheme:()=>P(it=>it==="light"?"dark":"light")})]})]}),Jt.jsxs("div",{style:W.mainContent,children:[Jt.jsx("div",{style:W.leftColumn,children:Jt.jsxs("div",{style:W.dropZone,onDrop:X,onDragOver:$,children:[!i&&Jt.jsx("p",{style:W.dropText,children:"Drag and drop Spine files (JSON, ATLAS, images) here"}),Jt.jsx("div",{ref:F,style:W.pixiContainer}),n&&Jt.jsx("p",{children:n})]})}),Jt.jsxs("div",{style:W.sidebar,children:[Jt.jsxs("div",{style:W.fixedArea,children:[Jt.jsx("h3",{style:W.sectionHeader,children:"Animations"}),Jt.jsx("select",{style:W.animationsSelect,value:g,onChange:ct,children:f.map((it,ut)=>Jt.jsx("option",{value:it,children:it},ut))}),y.length>0&&Jt.jsx("select",{style:W.animationsSelect,value:_,onChange:K,children:y.map((it,ut)=>Jt.jsx("option",{value:it,children:it},ut))}),Jt.jsxs("div",{style:W.scaleControl,children:[Jt.jsxs("label",{style:W.sliderLabel,children:["Spine Scale: ",o.toFixed(2)]}),Jt.jsx("input",{type:"range",min:"0.1",max:"2",step:"0.01",value:o,onChange:Y,style:W.input})]}),Jt.jsxs("div",{style:W.scaleControl,children:[Jt.jsxs("label",{style:W.sliderLabel,children:["Speed: ",a.toFixed(2)]}),Jt.jsx("input",{type:"range",min:"0.1",max:"2",step:"0.01",value:a,onChange:D,style:W.input})]}),Jt.jsx("button",{style:Rt,onClick:tt,children:e?"Pause":"Play"})]}),Jt.jsxs("div",{style:W.fixedArea,children:[Jt.jsxs("label",{style:W.sliderLabel,children:["Circle Scale: ",S.toFixed(2)]}),Jt.jsx("input",{type:"range",min:"0.01",max:"2",step:"0.01",value:S,onChange:k,style:W.input})]}),Jt.jsxs("div",{style:W.fixedArea,children:[Jt.jsx("h3",{style:W.sectionHeader,children:"Slots"}),Jt.jsx("input",{type:"text",placeholder:"Filter slots",value:u,onChange:it=>c(it.target.value),style:W.animationsSelect}),E.length>0&&E.map((it,ut)=>Jt.jsxs("div",{style:W.attachedSlotItem,children:[Jt.jsx("span",{children:it}),Jt.jsxs("div",{style:W.attachedSlotControls,children:[Jt.jsx("input",{type:"checkbox",defaultChecked:!0,onChange:Ct=>ft(it,Ct.target.checked)}),Jt.jsx("button",{style:W.deleteButton,onClick:()=>lt(it),children:"Delete"})]})]},ut))]}),Jt.jsx("div",{style:W.unattachedList,children:i&&St.length>0?St.map((it,ut)=>Jt.jsxs("div",{style:W.slotItem,children:[Jt.jsx("span",{children:it}),Jt.jsx("button",{style:W.unattachedButton,onClick:()=>mt(it),children:"Add Circle"})]},ut)):Jt.jsx("p",{children:"No slots to display"})})]})]})]})}eM.createRoot(document.getElementById("root")).render(Jt.jsx(jR.StrictMode,{children:Jt.jsx(YL,{})}));
